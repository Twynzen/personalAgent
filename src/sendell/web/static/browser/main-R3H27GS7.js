var Wv=Object.create;var qc=Object.defineProperty,zv=Object.defineProperties,Gv=Object.getOwnPropertyDescriptor,qv=Object.getOwnPropertyDescriptors,Kv=Object.getOwnPropertyNames,Yh=Object.getOwnPropertySymbols,Zv=Object.getPrototypeOf,Jh=Object.prototype.hasOwnProperty,Yv=Object.prototype.propertyIsEnumerable;var Qh=(e,t,n)=>t in e?qc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,H=(e,t)=>{for(var n in t||={})Jh.call(t,n)&&Qh(e,n,t[n]);if(Yh)for(var n of Yh(t))Yv.call(t,n)&&Qh(e,n,t[n]);return e},fe=(e,t)=>zv(e,qv(t));var Xh=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Qv=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of Kv(t))!Jh.call(e,s)&&s!==n&&qc(e,s,{get:()=>t[s],enumerable:!(r=Gv(t,s))||r.enumerable});return e};var ef=(e,t,n)=>(n=e!=null?Wv(Zv(e)):{},Qv(t||!e||!e.__esModule?qc(n,"default",{value:e,enumerable:!0}):n,e));var Bv=Xh((jc,Kh)=>{"use strict";(function(e,t){if(typeof jc=="object"&&typeof Kh=="object")Kh.exports=t();else if(typeof define=="function"&&define.amd)define([],t);else{var n=t();for(var r in n)(typeof jc=="object"?jc:e)[r]=n[r]}})(globalThis,()=>(()=>{"use strict";var e={4567:function(s,i,o){var a=this&&this.__decorate||function(u,h,_,b){var C,S=arguments.length,v=S<3?h:b===null?b=Object.getOwnPropertyDescriptor(h,_):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(u,h,_,b);else for(var E=u.length-1;E>=0;E--)(C=u[E])&&(v=(S<3?C(v):S>3?C(h,_,v):C(h,_))||v);return S>3&&v&&Object.defineProperty(h,_,v),v},c=this&&this.__param||function(u,h){return function(_,b){h(_,b,u)}};Object.defineProperty(i,"__esModule",{value:!0}),i.AccessibilityManager=void 0;let l=o(9042),p=o(9924),m=o(844),y=o(4725),g=o(2585),d=o(3656),f=i.AccessibilityManager=class extends m.Disposable{constructor(u,h,_,b){super(),this._terminal=u,this._coreBrowserService=_,this._renderService=b,this._rowColumns=new WeakMap,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=this._coreBrowserService.mainDocument.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=this._coreBrowserService.mainDocument.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let C=0;C<this._terminal.rows;C++)this._rowElements[C]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[C]);if(this._topBoundaryFocusListener=C=>this._handleBoundaryFocus(C,0),this._bottomBoundaryFocusListener=C=>this._handleBoundaryFocus(C,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=this._coreBrowserService.mainDocument.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new p.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(C=>this._handleResize(C.rows))),this.register(this._terminal.onRender(C=>this._refreshRows(C.start,C.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(C=>this._handleChar(C))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(C=>this._handleTab(C))),this.register(this._terminal.onKey(C=>this._handleKey(C.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this.register((0,d.addDisposableDomListener)(document,"selectionchange",()=>this._handleSelectionChange())),this.register(this._coreBrowserService.onDprChange(()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,m.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(u){for(let h=0;h<u;h++)this._handleChar(" ")}_handleChar(u){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==u&&(this._charsToAnnounce+=u):this._charsToAnnounce+=u,u===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=l.tooMuchOutput)))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0}_handleKey(u){this._clearLiveRegion(),new RegExp("\\p{Control}","u").test(u)||this._charsToConsume.push(u)}_refreshRows(u,h){this._liveRegionDebouncer.refresh(u,h,this._terminal.rows)}_renderRows(u,h){let _=this._terminal.buffer,b=_.lines.length.toString();for(let C=u;C<=h;C++){let S=_.lines.get(_.ydisp+C),v=[],E=S?.translateToString(!0,void 0,void 0,v)||"",A=(_.ydisp+C+1).toString(),x=this._rowElements[C];x&&(E.length===0?(x.innerText="\xA0",this._rowColumns.set(x,[0,1])):(x.textContent=E,this._rowColumns.set(x,v)),x.setAttribute("aria-posinset",A),x.setAttribute("aria-setsize",b))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(u,h){let _=u.target,b=this._rowElements[h===0?1:this._rowElements.length-2];if(_.getAttribute("aria-posinset")===(h===0?"1":`${this._terminal.buffer.lines.length}`)||u.relatedTarget!==b)return;let C,S;if(h===0?(C=_,S=this._rowElements.pop(),this._rowContainer.removeChild(S)):(C=this._rowElements.shift(),S=_,this._rowContainer.removeChild(C)),C.removeEventListener("focus",this._topBoundaryFocusListener),S.removeEventListener("focus",this._bottomBoundaryFocusListener),h===0){let v=this._createAccessibilityTreeNode();this._rowElements.unshift(v),this._rowContainer.insertAdjacentElement("afterbegin",v)}else{let v=this._createAccessibilityTreeNode();this._rowElements.push(v),this._rowContainer.appendChild(v)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(h===0?-1:1),this._rowElements[h===0?1:this._rowElements.length-2].focus(),u.preventDefault(),u.stopImmediatePropagation()}_handleSelectionChange(){if(this._rowElements.length===0)return;let u=document.getSelection();if(!u)return;if(u.isCollapsed)return void(this._rowContainer.contains(u.anchorNode)&&this._terminal.clearSelection());if(!u.anchorNode||!u.focusNode)return void console.error("anchorNode and/or focusNode are null");let h={node:u.anchorNode,offset:u.anchorOffset},_={node:u.focusNode,offset:u.focusOffset};if((h.node.compareDocumentPosition(_.node)&Node.DOCUMENT_POSITION_PRECEDING||h.node===_.node&&h.offset>_.offset)&&([h,_]=[_,h]),h.node.compareDocumentPosition(this._rowElements[0])&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_FOLLOWING)&&(h={node:this._rowElements[0].childNodes[0],offset:0}),!this._rowContainer.contains(h.node))return;let b=this._rowElements.slice(-1)[0];if(_.node.compareDocumentPosition(b)&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_PRECEDING)&&(_={node:b,offset:b.textContent?.length??0}),!this._rowContainer.contains(_.node))return;let C=({node:E,offset:A})=>{let x=E instanceof Text?E.parentNode:E,O=parseInt(x?.getAttribute("aria-posinset"),10)-1;if(isNaN(O))return console.warn("row is invalid. Race condition?"),null;let I=this._rowColumns.get(x);if(!I)return console.warn("columns is null. Race condition?"),null;let k=A<I.length?I[A]:I.slice(-1)[0]+1;return k>=this._terminal.cols&&(++O,k=0),{row:O,column:k}},S=C(h),v=C(_);if(S&&v){if(S.row>v.row||S.row===v.row&&S.column>=v.column)throw new Error("invalid range");this._terminal.select(S.column,S.row,(v.row-S.row)*this._terminal.cols-S.column+v.column)}}_handleResize(u){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let h=this._rowContainer.children.length;h<this._terminal.rows;h++)this._rowElements[h]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[h]);for(;this._rowElements.length>u;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){let u=this._coreBrowserService.mainDocument.createElement("div");return u.setAttribute("role","listitem"),u.tabIndex=-1,this._refreshRowDimensions(u),u}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let u=0;u<this._terminal.rows;u++)this._refreshRowDimensions(this._rowElements[u])}}_refreshRowDimensions(u){u.style.height=`${this._renderService.dimensions.css.cell.height}px`}};i.AccessibilityManager=f=a([c(1,g.IInstantiationService),c(2,y.ICoreBrowserService),c(3,y.IRenderService)],f)},3614:(s,i)=>{function o(p){return p.replace(/\r?\n/g,"\r")}function a(p,m){return m?"\x1B[200~"+p+"\x1B[201~":p}function c(p,m,y,g){p=a(p=o(p),y.decPrivateModes.bracketedPasteMode&&g.rawOptions.ignoreBracketedPasteMode!==!0),y.triggerDataEvent(p,!0),m.value=""}function l(p,m,y){let g=y.getBoundingClientRect(),d=p.clientX-g.left-10,f=p.clientY-g.top-10;m.style.width="20px",m.style.height="20px",m.style.left=`${d}px`,m.style.top=`${f}px`,m.style.zIndex="1000",m.focus()}Object.defineProperty(i,"__esModule",{value:!0}),i.rightClickHandler=i.moveTextAreaUnderMouseCursor=i.paste=i.handlePasteEvent=i.copyHandler=i.bracketTextForPaste=i.prepareTextForTerminal=void 0,i.prepareTextForTerminal=o,i.bracketTextForPaste=a,i.copyHandler=function(p,m){p.clipboardData&&p.clipboardData.setData("text/plain",m.selectionText),p.preventDefault()},i.handlePasteEvent=function(p,m,y,g){p.stopPropagation(),p.clipboardData&&c(p.clipboardData.getData("text/plain"),m,y,g)},i.paste=c,i.moveTextAreaUnderMouseCursor=l,i.rightClickHandler=function(p,m,y,g,d){l(p,m,y),d&&g.rightClickSelect(p),m.value=g.selectionText,m.select()}},7239:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ColorContrastCache=void 0;let a=o(1505);i.ColorContrastCache=class{constructor(){this._color=new a.TwoKeyMap,this._css=new a.TwoKeyMap}setCss(c,l,p){this._css.set(c,l,p)}getCss(c,l){return this._css.get(c,l)}setColor(c,l,p){this._color.set(c,l,p)}getColor(c,l){return this._color.get(c,l)}clear(){this._color.clear(),this._css.clear()}}},3656:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.addDisposableDomListener=void 0,i.addDisposableDomListener=function(o,a,c,l){o.addEventListener(a,c,l);let p=!1;return{dispose:()=>{p||(p=!0,o.removeEventListener(a,c,l))}}}},3551:function(s,i,o){var a=this&&this.__decorate||function(f,u,h,_){var b,C=arguments.length,S=C<3?u:_===null?_=Object.getOwnPropertyDescriptor(u,h):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(f,u,h,_);else for(var v=f.length-1;v>=0;v--)(b=f[v])&&(S=(C<3?b(S):C>3?b(u,h,S):b(u,h))||S);return C>3&&S&&Object.defineProperty(u,h,S),S},c=this&&this.__param||function(f,u){return function(h,_){u(h,_,f)}};Object.defineProperty(i,"__esModule",{value:!0}),i.Linkifier=void 0;let l=o(3656),p=o(8460),m=o(844),y=o(2585),g=o(4725),d=i.Linkifier=class extends m.Disposable{get currentLink(){return this._currentLink}constructor(f,u,h,_,b){super(),this._element=f,this._mouseService=u,this._renderService=h,this._bufferService=_,this._linkProviderService=b,this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new p.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new p.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,m.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,m.toDisposable)(()=>{this._lastMouseEvent=void 0,this._activeProviderReplies?.clear()})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0})),this.register((0,l.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,l.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,l.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,l.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(f){this._lastMouseEvent=f;let u=this._positionFromMouseEvent(f,this._element,this._mouseService);if(!u)return;this._isMouseOut=!1;let h=f.composedPath();for(let _=0;_<h.length;_++){let b=h[_];if(b.classList.contains("xterm"))break;if(b.classList.contains("xterm-hover"))return}this._lastBufferCell&&u.x===this._lastBufferCell.x&&u.y===this._lastBufferCell.y||(this._handleHover(u),this._lastBufferCell=u)}_handleHover(f){if(this._activeLine!==f.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(f,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,f)||(this._clearCurrentLink(),this._askForLink(f,!0))}_askForLink(f,u){this._activeProviderReplies&&u||(this._activeProviderReplies?.forEach(_=>{_?.forEach(b=>{b.link.dispose&&b.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=f.y);let h=!1;for(let[_,b]of this._linkProviderService.linkProviders.entries())u?this._activeProviderReplies?.get(_)&&(h=this._checkLinkProviderResult(_,f,h)):b.provideLinks(f.y,C=>{if(this._isMouseOut)return;let S=C?.map(v=>({link:v}));this._activeProviderReplies?.set(_,S),h=this._checkLinkProviderResult(_,f,h),this._activeProviderReplies?.size===this._linkProviderService.linkProviders.length&&this._removeIntersectingLinks(f.y,this._activeProviderReplies)})}_removeIntersectingLinks(f,u){let h=new Set;for(let _=0;_<u.size;_++){let b=u.get(_);if(b)for(let C=0;C<b.length;C++){let S=b[C],v=S.link.range.start.y<f?0:S.link.range.start.x,E=S.link.range.end.y>f?this._bufferService.cols:S.link.range.end.x;for(let A=v;A<=E;A++){if(h.has(A)){b.splice(C--,1);break}h.add(A)}}}}_checkLinkProviderResult(f,u,h){if(!this._activeProviderReplies)return h;let _=this._activeProviderReplies.get(f),b=!1;for(let C=0;C<f;C++)this._activeProviderReplies.has(C)&&!this._activeProviderReplies.get(C)||(b=!0);if(!b&&_){let C=_.find(S=>this._linkAtPosition(S.link,u));C&&(h=!0,this._handleNewLink(C))}if(this._activeProviderReplies.size===this._linkProviderService.linkProviders.length&&!h)for(let C=0;C<this._activeProviderReplies.size;C++){let S=this._activeProviderReplies.get(C)?.find(v=>this._linkAtPosition(v.link,u));if(S){h=!0,this._handleNewLink(S);break}}return h}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(f){if(!this._currentLink)return;let u=this._positionFromMouseEvent(f,this._element,this._mouseService);u&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,u)&&this._currentLink.link.activate(f,this._currentLink.link.text)}_clearCurrentLink(f,u){this._currentLink&&this._lastMouseEvent&&(!f||!u||this._currentLink.link.range.start.y>=f&&this._currentLink.link.range.end.y<=u)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,m.disposeArray)(this._linkCacheDisposables))}_handleNewLink(f){if(!this._lastMouseEvent)return;let u=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);u&&this._linkAtPosition(f.link,u)&&(this._currentLink=f,this._currentLink.state={decorations:{underline:f.link.decorations===void 0||f.link.decorations.underline,pointerCursor:f.link.decorations===void 0||f.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,f.link,this._lastMouseEvent),f.link.decorations={},Object.defineProperties(f.link.decorations,{pointerCursor:{get:()=>this._currentLink?.state?.decorations.pointerCursor,set:h=>{this._currentLink?.state&&this._currentLink.state.decorations.pointerCursor!==h&&(this._currentLink.state.decorations.pointerCursor=h,this._currentLink.state.isHovered&&this._element.classList.toggle("xterm-cursor-pointer",h))}},underline:{get:()=>this._currentLink?.state?.decorations.underline,set:h=>{this._currentLink?.state&&this._currentLink?.state?.decorations.underline!==h&&(this._currentLink.state.decorations.underline=h,this._currentLink.state.isHovered&&this._fireUnderlineEvent(f.link,h))}}}),this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(h=>{if(!this._currentLink)return;let _=h.start===0?0:h.start+1+this._bufferService.buffer.ydisp,b=this._bufferService.buffer.ydisp+1+h.end;if(this._currentLink.link.range.start.y>=_&&this._currentLink.link.range.end.y<=b&&(this._clearCurrentLink(_,b),this._lastMouseEvent)){let C=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);C&&this._askForLink(C,!1)}})))}_linkHover(f,u,h){this._currentLink?.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(u,!0),this._currentLink.state.decorations.pointerCursor&&f.classList.add("xterm-cursor-pointer")),u.hover&&u.hover(h,u.text)}_fireUnderlineEvent(f,u){let h=f.range,_=this._bufferService.buffer.ydisp,b=this._createLinkUnderlineEvent(h.start.x-1,h.start.y-_-1,h.end.x,h.end.y-_-1,void 0);(u?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(b)}_linkLeave(f,u,h){this._currentLink?.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(u,!1),this._currentLink.state.decorations.pointerCursor&&f.classList.remove("xterm-cursor-pointer")),u.leave&&u.leave(h,u.text)}_linkAtPosition(f,u){let h=f.range.start.y*this._bufferService.cols+f.range.start.x,_=f.range.end.y*this._bufferService.cols+f.range.end.x,b=u.y*this._bufferService.cols+u.x;return h<=b&&b<=_}_positionFromMouseEvent(f,u,h){let _=h.getCoords(f,u,this._bufferService.cols,this._bufferService.rows);if(_)return{x:_[0],y:_[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(f,u,h,_,b){return{x1:f,y1:u,x2:h,y2:_,cols:this._bufferService.cols,fg:b}}};i.Linkifier=d=a([c(1,g.IMouseService),c(2,g.IRenderService),c(3,y.IBufferService),c(4,g.ILinkProviderService)],d)},9042:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.tooMuchOutput=i.promptLabel=void 0,i.promptLabel="Terminal input",i.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(s,i,o){var a=this&&this.__decorate||function(g,d,f,u){var h,_=arguments.length,b=_<3?d:u===null?u=Object.getOwnPropertyDescriptor(d,f):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(g,d,f,u);else for(var C=g.length-1;C>=0;C--)(h=g[C])&&(b=(_<3?h(b):_>3?h(d,f,b):h(d,f))||b);return _>3&&b&&Object.defineProperty(d,f,b),b},c=this&&this.__param||function(g,d){return function(f,u){d(f,u,g)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OscLinkProvider=void 0;let l=o(511),p=o(2585),m=i.OscLinkProvider=class{constructor(g,d,f){this._bufferService=g,this._optionsService=d,this._oscLinkService=f}provideLinks(g,d){let f=this._bufferService.buffer.lines.get(g-1);if(!f)return void d(void 0);let u=[],h=this._optionsService.rawOptions.linkHandler,_=new l.CellData,b=f.getTrimmedLength(),C=-1,S=-1,v=!1;for(let E=0;E<b;E++)if(S!==-1||f.hasContent(E)){if(f.loadCell(E,_),_.hasExtendedAttrs()&&_.extended.urlId){if(S===-1){S=E,C=_.extended.urlId;continue}v=_.extended.urlId!==C}else S!==-1&&(v=!0);if(v||S!==-1&&E===b-1){let A=this._oscLinkService.getLinkData(C)?.uri;if(A){let x={start:{x:S+1,y:g},end:{x:E+(v||E!==b-1?0:1),y:g}},O=!1;if(!h?.allowNonHttpProtocols)try{let I=new URL(A);["http:","https:"].includes(I.protocol)||(O=!0)}catch{O=!0}O||u.push({text:A,range:x,activate:(I,k)=>h?h.activate(I,k,x):y(0,k),hover:(I,k)=>h?.hover?.(I,k,x),leave:(I,k)=>h?.leave?.(I,k,x)})}v=!1,_.hasExtendedAttrs()&&_.extended.urlId?(S=E,C=_.extended.urlId):(S=-1,C=-1)}}d(u)}};function y(g,d){if(confirm(`Do you want to navigate to ${d}?

WARNING: This link could potentially be dangerous`)){let f=window.open();if(f){try{f.opener=null}catch{}f.location.href=d}else console.warn("Opening link blocked as opener could not be cleared")}}i.OscLinkProvider=m=a([c(0,p.IBufferService),c(1,p.IOptionsService),c(2,p.IOscLinkService)],m)},6193:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.RenderDebouncer=void 0,i.RenderDebouncer=class{constructor(o,a){this._renderCallback=o,this._coreBrowserService=a,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(o){return this._refreshCallbacks.push(o),this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(o,a,c){this._rowCount=c,o=o!==void 0?o:0,a=a!==void 0?a:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,o):o,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,a):a,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();let o=Math.max(this._rowStart,0),a=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(o,a),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(let o of this._refreshCallbacks)o(0);this._refreshCallbacks=[]}}},3236:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Terminal=void 0;let a=o(3614),c=o(3656),l=o(3551),p=o(9042),m=o(3730),y=o(1680),g=o(3107),d=o(5744),f=o(2950),u=o(1296),h=o(428),_=o(4269),b=o(5114),C=o(8934),S=o(3230),v=o(9312),E=o(4725),A=o(6731),x=o(8055),O=o(8969),I=o(8460),k=o(844),B=o(6114),z=o(8437),Z=o(2584),$=o(7399),D=o(5941),M=o(9074),T=o(2585),R=o(5435),F=o(4567),G=o(779);class ee extends O.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(N={}){super(N),this.browser=B,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new k.MutableDisposable),this._onCursorMove=this.register(new I.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new I.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new I.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new I.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new I.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new I.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new I.EventEmitter),this._onBlur=this.register(new I.EventEmitter),this._onA11yCharEmitter=this.register(new I.EventEmitter),this._onA11yTabEmitter=this.register(new I.EventEmitter),this._onWillOpen=this.register(new I.EventEmitter),this._setup(),this._decorationService=this._instantiationService.createInstance(M.DecorationService),this._instantiationService.setService(T.IDecorationService,this._decorationService),this._linkProviderService=this._instantiationService.createInstance(G.LinkProviderService),this._instantiationService.setService(E.ILinkProviderService,this._linkProviderService),this._linkProviderService.registerLinkProvider(this._instantiationService.createInstance(m.OscLinkProvider)),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((w,L)=>this.refresh(w,L))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(w=>this._reportWindowsOptions(w))),this.register(this._inputHandler.onColor(w=>this._handleColorEvent(w))),this.register((0,I.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,I.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,I.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,I.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(w=>this._afterResize(w.cols,w.rows))),this.register((0,k.toDisposable)(()=>{this._customKeyEventHandler=void 0,this.element?.parentNode?.removeChild(this.element)}))}_handleColorEvent(N){if(this._themeService)for(let w of N){let L,j="";switch(w.index){case 256:L="foreground",j="10";break;case 257:L="background",j="11";break;case 258:L="cursor",j="12";break;default:L="ansi",j="4;"+w.index}switch(w.type){case 0:let K=x.color.toColorRGB(L==="ansi"?this._themeService.colors.ansi[w.index]:this._themeService.colors[L]);this.coreService.triggerDataEvent(`${Z.C0.ESC}]${j};${(0,D.toRgbString)(K)}${Z.C1_ESCAPED.ST}`);break;case 1:if(L==="ansi")this._themeService.modifyColors(q=>q.ansi[w.index]=x.channels.toColor(...w.color));else{let q=L;this._themeService.modifyColors(me=>me[q]=x.channels.toColor(...w.color))}break;case 2:this._themeService.restoreColor(w.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(N){N?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(F.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(N){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(Z.C0.ESC+"[I"),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){return this.textarea?.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(Z.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;let N=this.buffer.ybase+this.buffer.y,w=this.buffer.lines.get(N);if(!w)return;let L=Math.min(this.buffer.x,this.cols-1),j=this._renderService.dimensions.css.cell.height,K=w.getWidth(L),q=this._renderService.dimensions.css.cell.width*K,me=this.buffer.y*this._renderService.dimensions.css.cell.height,Te=L*this._renderService.dimensions.css.cell.width;this.textarea.style.left=Te+"px",this.textarea.style.top=me+"px",this.textarea.style.width=q+"px",this.textarea.style.height=j+"px",this.textarea.style.lineHeight=j+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,c.addDisposableDomListener)(this.element,"copy",w=>{this.hasSelection()&&(0,a.copyHandler)(w,this._selectionService)}));let N=w=>(0,a.handlePasteEvent)(w,this.textarea,this.coreService,this.optionsService);this.register((0,c.addDisposableDomListener)(this.textarea,"paste",N)),this.register((0,c.addDisposableDomListener)(this.element,"paste",N)),B.isFirefox?this.register((0,c.addDisposableDomListener)(this.element,"mousedown",w=>{w.button===2&&(0,a.rightClickHandler)(w,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,c.addDisposableDomListener)(this.element,"contextmenu",w=>{(0,a.rightClickHandler)(w,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),B.isLinux&&this.register((0,c.addDisposableDomListener)(this.element,"auxclick",w=>{w.button===1&&(0,a.moveTextAreaUnderMouseCursor)(w,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,c.addDisposableDomListener)(this.textarea,"keyup",N=>this._keyUp(N),!0)),this.register((0,c.addDisposableDomListener)(this.textarea,"keydown",N=>this._keyDown(N),!0)),this.register((0,c.addDisposableDomListener)(this.textarea,"keypress",N=>this._keyPress(N),!0)),this.register((0,c.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,c.addDisposableDomListener)(this.textarea,"compositionupdate",N=>this._compositionHelper.compositionupdate(N))),this.register((0,c.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,c.addDisposableDomListener)(this.textarea,"input",N=>this._inputEvent(N),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(N){if(!N)throw new Error("Terminal requires a parent element.");if(N.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this.element?.ownerDocument.defaultView&&this._coreBrowserService)return void(this.element.ownerDocument.defaultView!==this._coreBrowserService.window&&(this._coreBrowserService.window=this.element.ownerDocument.defaultView));this._document=N.ownerDocument,this.options.documentOverride&&this.options.documentOverride instanceof Document&&(this._document=this.optionsService.rawOptions.documentOverride),this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),N.appendChild(this.element);let w=this._document.createDocumentFragment();this._viewportElement=this._document.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),w.appendChild(this._viewportElement),this._viewportScrollArea=this._document.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=this._document.createElement("div"),this.screenElement.classList.add("xterm-screen"),this.register((0,c.addDisposableDomListener)(this.screenElement,"mousemove",L=>this.updateCursorStyle(L))),this._helperContainer=this._document.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),w.appendChild(this.screenElement),this.textarea=this._document.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",p.promptLabel),B.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this.register(this._instantiationService.createInstance(b.CoreBrowserService,this.textarea,N.ownerDocument.defaultView??window,this._document??typeof window<"u"?window.document:null)),this._instantiationService.setService(E.ICoreBrowserService,this._coreBrowserService),this.register((0,c.addDisposableDomListener)(this.textarea,"focus",L=>this._handleTextAreaFocus(L))),this.register((0,c.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(h.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(E.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(A.ThemeService),this._instantiationService.setService(E.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(_.CharacterJoinerService),this._instantiationService.setService(E.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(S.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(E.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(L=>this._onRender.fire(L))),this.onResize(L=>this._renderService.resize(L.cols,L.rows)),this._compositionView=this._document.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(f.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this._mouseService=this._instantiationService.createInstance(C.MouseService),this._instantiationService.setService(E.IMouseService,this._mouseService),this.linkifier=this.register(this._instantiationService.createInstance(l.Linkifier,this.screenElement)),this.element.appendChild(w);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this.viewport=this._instantiationService.createInstance(y.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(L=>this.scrollLines(L.amount,L.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(v.SelectionService,this.element,this.screenElement,this.linkifier)),this._instantiationService.setService(E.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(L=>this.scrollLines(L.amount,L.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(L=>this._renderService.handleSelectionChanged(L.start,L.end,L.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(L=>{this.textarea.value=L,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(L=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,c.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.register(this._instantiationService.createInstance(g.BufferDecorationRenderer,this.screenElement)),this.register((0,c.addDisposableDomListener)(this.element,"mousedown",L=>this._selectionService.handleMouseDown(L))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(F.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",L=>this._handleScreenReaderModeOptionChange(L))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(d.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",L=>{!this._overviewRulerRenderer&&L&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(d.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(u.DomRenderer,this,this._document,this.element,this.screenElement,this._viewportElement,this._helperContainer,this.linkifier)}bindMouse(){let N=this,w=this.element;function L(q){let me=N._mouseService.getMouseReportCoords(q,N.screenElement);if(!me)return!1;let Te,Ae;switch(q.overrideType||q.type){case"mousemove":Ae=32,q.buttons===void 0?(Te=3,q.button!==void 0&&(Te=q.button<3?q.button:3)):Te=1&q.buttons?0:4&q.buttons?1:2&q.buttons?2:3;break;case"mouseup":Ae=0,Te=q.button<3?q.button:3;break;case"mousedown":Ae=1,Te=q.button<3?q.button:3;break;case"wheel":if(N._customWheelEventHandler&&N._customWheelEventHandler(q)===!1||N.viewport.getLinesScrolled(q)===0)return!1;Ae=q.deltaY<0?0:1,Te=4;break;default:return!1}return!(Ae===void 0||Te===void 0||Te>4)&&N.coreMouseService.triggerMouseEvent({col:me.col,row:me.row,x:me.x,y:me.y,button:Te,action:Ae,ctrl:q.ctrlKey,alt:q.altKey,shift:q.shiftKey})}let j={mouseup:null,wheel:null,mousedrag:null,mousemove:null},K={mouseup:q=>(L(q),q.buttons||(this._document.removeEventListener("mouseup",j.mouseup),j.mousedrag&&this._document.removeEventListener("mousemove",j.mousedrag)),this.cancel(q)),wheel:q=>(L(q),this.cancel(q,!0)),mousedrag:q=>{q.buttons&&L(q)},mousemove:q=>{q.buttons||L(q)}};this.register(this.coreMouseService.onProtocolChange(q=>{q?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(q)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&q?j.mousemove||(w.addEventListener("mousemove",K.mousemove),j.mousemove=K.mousemove):(w.removeEventListener("mousemove",j.mousemove),j.mousemove=null),16&q?j.wheel||(w.addEventListener("wheel",K.wheel,{passive:!1}),j.wheel=K.wheel):(w.removeEventListener("wheel",j.wheel),j.wheel=null),2&q?j.mouseup||(j.mouseup=K.mouseup):(this._document.removeEventListener("mouseup",j.mouseup),j.mouseup=null),4&q?j.mousedrag||(j.mousedrag=K.mousedrag):(this._document.removeEventListener("mousemove",j.mousedrag),j.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,c.addDisposableDomListener)(w,"mousedown",q=>{if(q.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(q))return L(q),j.mouseup&&this._document.addEventListener("mouseup",j.mouseup),j.mousedrag&&this._document.addEventListener("mousemove",j.mousedrag),this.cancel(q)})),this.register((0,c.addDisposableDomListener)(w,"wheel",q=>{if(!j.wheel){if(this._customWheelEventHandler&&this._customWheelEventHandler(q)===!1)return!1;if(!this.buffer.hasScrollback){let me=this.viewport.getLinesScrolled(q);if(me===0)return;let Te=Z.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(q.deltaY<0?"A":"B"),Ae="";for(let it=0;it<Math.abs(me);it++)Ae+=Te;return this.coreService.triggerDataEvent(Ae,!0),this.cancel(q,!0)}return this.viewport.handleWheel(q)?this.cancel(q):void 0}},{passive:!1})),this.register((0,c.addDisposableDomListener)(w,"touchstart",q=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(q),this.cancel(q)},{passive:!0})),this.register((0,c.addDisposableDomListener)(w,"touchmove",q=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(q)?void 0:this.cancel(q)},{passive:!1}))}refresh(N,w){this._renderService?.refreshRows(N,w)}updateCursorStyle(N){this._selectionService?.shouldColumnSelect(N)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(N,w,L=0){L===1?(super.scrollLines(N,w,L),this.refresh(0,this.rows-1)):this.viewport?.scrollLines(N)}paste(N){(0,a.paste)(N,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(N){this._customKeyEventHandler=N}attachCustomWheelEventHandler(N){this._customWheelEventHandler=N}registerLinkProvider(N){return this._linkProviderService.registerLinkProvider(N)}registerCharacterJoiner(N){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");let w=this._characterJoinerService.register(N);return this.refresh(0,this.rows-1),w}deregisterCharacterJoiner(N){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(N)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(N){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+N)}registerDecoration(N){return this._decorationService.registerDecoration(N)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(N,w,L){this._selectionService.setSelection(N,w,L)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){this._selectionService?.clearSelection()}selectAll(){this._selectionService?.selectAll()}selectLines(N,w){this._selectionService?.selectLines(N,w)}_keyDown(N){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(N)===!1)return!1;let w=this.browser.isMac&&this.options.macOptionIsMeta&&N.altKey;if(!w&&!this._compositionHelper.keydown(N))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;w||N.key!=="Dead"&&N.key!=="AltGraph"||(this._unprocessedDeadKey=!0);let L=(0,$.evaluateKeyboardEvent)(N,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(N),L.type===3||L.type===2){let j=this.rows-1;return this.scrollLines(L.type===2?-j:j),this.cancel(N,!0)}return L.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,N)||(L.cancel&&this.cancel(N,!0),!L.key||!!(N.key&&!N.ctrlKey&&!N.altKey&&!N.metaKey&&N.key.length===1&&N.key.charCodeAt(0)>=65&&N.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(L.key!==Z.C0.ETX&&L.key!==Z.C0.CR||(this.textarea.value=""),this._onKey.fire({key:L.key,domEvent:N}),this._showCursor(),this.coreService.triggerDataEvent(L.key,!0),!this.optionsService.rawOptions.screenReaderMode||N.altKey||N.ctrlKey?this.cancel(N,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(N,w){let L=N.isMac&&!this.options.macOptionIsMeta&&w.altKey&&!w.ctrlKey&&!w.metaKey||N.isWindows&&w.altKey&&w.ctrlKey&&!w.metaKey||N.isWindows&&w.getModifierState("AltGraph");return w.type==="keypress"?L:L&&(!w.keyCode||w.keyCode>47)}_keyUp(N){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(N)===!1||((function(w){return w.keyCode===16||w.keyCode===17||w.keyCode===18})(N)||this.focus(),this.updateCursorStyle(N),this._keyPressHandled=!1)}_keyPress(N){let w;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(N)===!1)return!1;if(this.cancel(N),N.charCode)w=N.charCode;else if(N.which===null||N.which===void 0)w=N.keyCode;else{if(N.which===0||N.charCode===0)return!1;w=N.which}return!(!w||(N.altKey||N.ctrlKey||N.metaKey)&&!this._isThirdLevelShift(this.browser,N)||(w=String.fromCharCode(w),this._onKey.fire({key:w,domEvent:N}),this._showCursor(),this.coreService.triggerDataEvent(w,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(N){if(N.data&&N.inputType==="insertText"&&(!N.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;let w=N.data;return this.coreService.triggerDataEvent(w,!0),this.cancel(N),!0}return!1}resize(N,w){N!==this.cols||w!==this.rows?super.resize(N,w):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(N,w){this._charSizeService?.measure(),this.viewport?.syncScrollArea(!0)}clear(){if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let N=1;N<this.rows;N++)this.buffer.lines.push(this.buffer.getBlankLine(z.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),this.viewport?.reset(),this.refresh(0,this.rows-1)}}reset(){this.options.rows=this.rows,this.options.cols=this.cols;let N=this._customKeyEventHandler;this._setup(),super.reset(),this._selectionService?.reset(),this._decorationService.reset(),this.viewport?.reset(),this._customKeyEventHandler=N,this.refresh(0,this.rows-1)}clearTextureAtlas(){this._renderService?.clearTextureAtlas()}_reportFocus(){this.element?.classList.contains("focus")?this.coreService.triggerDataEvent(Z.C0.ESC+"[I"):this.coreService.triggerDataEvent(Z.C0.ESC+"[O")}_reportWindowsOptions(N){if(this._renderService)switch(N){case R.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:let w=this._renderService.dimensions.css.canvas.width.toFixed(0),L=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${Z.C0.ESC}[4;${L};${w}t`);break;case R.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:let j=this._renderService.dimensions.css.cell.width.toFixed(0),K=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${Z.C0.ESC}[6;${K};${j}t`)}}cancel(N,w){if(this.options.cancelEvents||w)return N.preventDefault(),N.stopPropagation(),!1}}i.Terminal=ee},9924:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TimeBasedDebouncer=void 0,i.TimeBasedDebouncer=class{constructor(o,a=1e3){this._renderCallback=o,this._debounceThresholdMS=a,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(o,a,c){this._rowCount=c,o=o!==void 0?o:0,a=a!==void 0?a:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,o):o,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,a):a;let l=Date.now();if(l-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=l,this._innerRefresh();else if(!this._additionalRefreshRequested){let p=l-this._lastRefreshMs,m=this._debounceThresholdMS-p;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},m)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;let o=Math.max(this._rowStart,0),a=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(o,a)}}},1680:function(s,i,o){var a=this&&this.__decorate||function(f,u,h,_){var b,C=arguments.length,S=C<3?u:_===null?_=Object.getOwnPropertyDescriptor(u,h):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(f,u,h,_);else for(var v=f.length-1;v>=0;v--)(b=f[v])&&(S=(C<3?b(S):C>3?b(u,h,S):b(u,h))||S);return C>3&&S&&Object.defineProperty(u,h,S),S},c=this&&this.__param||function(f,u){return function(h,_){u(h,_,f)}};Object.defineProperty(i,"__esModule",{value:!0}),i.Viewport=void 0;let l=o(3656),p=o(4725),m=o(8460),y=o(844),g=o(2585),d=i.Viewport=class extends y.Disposable{constructor(f,u,h,_,b,C,S,v){super(),this._viewportElement=f,this._scrollArea=u,this._bufferService=h,this._optionsService=_,this._charSizeService=b,this._renderService=C,this._coreBrowserService=S,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new m.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,l.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(E=>this._activeBuffer=E.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(E=>this._renderDimensions=E)),this._handleThemeChange(v.colors),this.register(v.onChangeColors(E=>this._handleThemeChange(E))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(f){this._viewportElement.style.backgroundColor=f.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(f){if(f)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderDimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderDimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;let u=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderDimensions.css.canvas.height);this._lastRecordedBufferHeight!==u&&(this._lastRecordedBufferHeight=u,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}let f=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==f&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=f),this._refreshAnimationFrame=null}syncScrollArea(f=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(f);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(f)}_handleScroll(f){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});let u=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:u,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;let f=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(f*(this._smoothScrollState.target-this._smoothScrollState.origin)),f<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(f,u){let h=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(u<0&&this._viewportElement.scrollTop!==0||u>0&&h<this._lastRecordedBufferHeight)||(f.cancelable&&f.preventDefault(),!1)}handleWheel(f){let u=this._getPixelsScrolled(f);return u!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+u:this._smoothScrollState.target+=u,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=u,this._bubbleScroll(f,u))}scrollLines(f){if(f!==0)if(this._optionsService.rawOptions.smoothScrollDuration){let u=f*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+u,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:f,suppressScrollEvent:!1})}_getPixelsScrolled(f){if(f.deltaY===0||f.shiftKey)return 0;let u=this._applyScrollModifier(f.deltaY,f);return f.deltaMode===WheelEvent.DOM_DELTA_LINE?u*=this._currentRowHeight:f.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(u*=this._currentRowHeight*this._bufferService.rows),u}getBufferElements(f,u){let h,_="",b=[],C=u??this._bufferService.buffer.lines.length,S=this._bufferService.buffer.lines;for(let v=f;v<C;v++){let E=S.get(v);if(!E)continue;let A=S.get(v+1)?.isWrapped;if(_+=E.translateToString(!A),!A||v===S.length-1){let x=document.createElement("div");x.textContent=_,b.push(x),_.length>0&&(h=x),_=""}}return{bufferElements:b,cursorElement:h}}getLinesScrolled(f){if(f.deltaY===0||f.shiftKey)return 0;let u=this._applyScrollModifier(f.deltaY,f);return f.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(u/=this._currentRowHeight+0,this._wheelPartialScroll+=u,u=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):f.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(u*=this._bufferService.rows),u}_applyScrollModifier(f,u){let h=this._optionsService.rawOptions.fastScrollModifier;return h==="alt"&&u.altKey||h==="ctrl"&&u.ctrlKey||h==="shift"&&u.shiftKey?f*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:f*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(f){this._lastTouchY=f.touches[0].pageY}handleTouchMove(f){let u=this._lastTouchY-f.touches[0].pageY;return this._lastTouchY=f.touches[0].pageY,u!==0&&(this._viewportElement.scrollTop+=u,this._bubbleScroll(f,u))}};i.Viewport=d=a([c(2,g.IBufferService),c(3,g.IOptionsService),c(4,p.ICharSizeService),c(5,p.IRenderService),c(6,p.ICoreBrowserService),c(7,p.IThemeService)],d)},3107:function(s,i,o){var a=this&&this.__decorate||function(g,d,f,u){var h,_=arguments.length,b=_<3?d:u===null?u=Object.getOwnPropertyDescriptor(d,f):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(g,d,f,u);else for(var C=g.length-1;C>=0;C--)(h=g[C])&&(b=(_<3?h(b):_>3?h(d,f,b):h(d,f))||b);return _>3&&b&&Object.defineProperty(d,f,b),b},c=this&&this.__param||function(g,d){return function(f,u){d(f,u,g)}};Object.defineProperty(i,"__esModule",{value:!0}),i.BufferDecorationRenderer=void 0;let l=o(4725),p=o(844),m=o(2585),y=i.BufferDecorationRenderer=class extends p.Disposable{constructor(g,d,f,u,h){super(),this._screenElement=g,this._bufferService=d,this._coreBrowserService=f,this._decorationService=u,this._renderService=h,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(_=>this._removeDecoration(_))),this.register((0,p.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(let g of this._decorationService.decorations)this._renderDecoration(g);this._dimensionsChanged=!1}_renderDecoration(g){this._refreshStyle(g),this._dimensionsChanged&&this._refreshXPosition(g)}_createElement(g){let d=this._coreBrowserService.mainDocument.createElement("div");d.classList.add("xterm-decoration"),d.classList.toggle("xterm-decoration-top-layer",g?.options?.layer==="top"),d.style.width=`${Math.round((g.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,d.style.height=(g.options.height||1)*this._renderService.dimensions.css.cell.height+"px",d.style.top=(g.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",d.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;let f=g.options.x??0;return f&&f>this._bufferService.cols&&(d.style.display="none"),this._refreshXPosition(g,d),d}_refreshStyle(g){let d=g.marker.line-this._bufferService.buffers.active.ydisp;if(d<0||d>=this._bufferService.rows)g.element&&(g.element.style.display="none",g.onRenderEmitter.fire(g.element));else{let f=this._decorationElements.get(g);f||(f=this._createElement(g),g.element=f,this._decorationElements.set(g,f),this._container.appendChild(f),g.onDispose(()=>{this._decorationElements.delete(g),f.remove()})),f.style.top=d*this._renderService.dimensions.css.cell.height+"px",f.style.display=this._altBufferIsActive?"none":"block",g.onRenderEmitter.fire(f)}}_refreshXPosition(g,d=g.element){if(!d)return;let f=g.options.x??0;(g.options.anchor||"left")==="right"?d.style.right=f?f*this._renderService.dimensions.css.cell.width+"px":"":d.style.left=f?f*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(g){this._decorationElements.get(g)?.remove(),this._decorationElements.delete(g),g.dispose()}};i.BufferDecorationRenderer=y=a([c(1,m.IBufferService),c(2,l.ICoreBrowserService),c(3,m.IDecorationService),c(4,l.IRenderService)],y)},5871:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ColorZoneStore=void 0,i.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(o){if(o.options.overviewRulerOptions){for(let a of this._zones)if(a.color===o.options.overviewRulerOptions.color&&a.position===o.options.overviewRulerOptions.position){if(this._lineIntersectsZone(a,o.marker.line))return;if(this._lineAdjacentToZone(a,o.marker.line,o.options.overviewRulerOptions.position))return void this._addLineToZone(a,o.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=o.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=o.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=o.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=o.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:o.options.overviewRulerOptions.color,position:o.options.overviewRulerOptions.position,startBufferLine:o.marker.line,endBufferLine:o.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(o){this._linePadding=o}_lineIntersectsZone(o,a){return a>=o.startBufferLine&&a<=o.endBufferLine}_lineAdjacentToZone(o,a,c){return a>=o.startBufferLine-this._linePadding[c||"full"]&&a<=o.endBufferLine+this._linePadding[c||"full"]}_addLineToZone(o,a){o.startBufferLine=Math.min(o.startBufferLine,a),o.endBufferLine=Math.max(o.endBufferLine,a)}}},5744:function(s,i,o){var a=this&&this.__decorate||function(h,_,b,C){var S,v=arguments.length,E=v<3?_:C===null?C=Object.getOwnPropertyDescriptor(_,b):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(h,_,b,C);else for(var A=h.length-1;A>=0;A--)(S=h[A])&&(E=(v<3?S(E):v>3?S(_,b,E):S(_,b))||E);return v>3&&E&&Object.defineProperty(_,b,E),E},c=this&&this.__param||function(h,_){return function(b,C){_(b,C,h)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OverviewRulerRenderer=void 0;let l=o(5871),p=o(4725),m=o(844),y=o(2585),g={full:0,left:0,center:0,right:0},d={full:0,left:0,center:0,right:0},f={full:0,left:0,center:0,right:0},u=i.OverviewRulerRenderer=class extends m.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(h,_,b,C,S,v,E){super(),this._viewportElement=h,this._screenElement=_,this._bufferService=b,this._decorationService=C,this._renderService=S,this._optionsService=v,this._coreBrowserService=E,this._colorZoneStore=new l.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),this._viewportElement.parentElement?.insertBefore(this._canvas,this._viewportElement);let A=this._canvas.getContext("2d");if(!A)throw new Error("Ctx cannot be null");this._ctx=A,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,m.toDisposable)(()=>{this._canvas?.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){let h=Math.floor(this._canvas.width/3),_=Math.ceil(this._canvas.width/3);d.full=this._canvas.width,d.left=h,d.center=_,d.right=h,this._refreshDrawHeightConstants(),f.full=0,f.left=0,f.center=d.left,f.right=d.left+d.center}_refreshDrawHeightConstants(){g.full=Math.round(2*this._coreBrowserService.dpr);let h=this._canvas.height/this._bufferService.buffer.lines.length,_=Math.round(Math.max(Math.min(h,12),6)*this._coreBrowserService.dpr);g.left=_,g.center=_,g.right=_}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*g.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*g.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*g.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*g.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowserService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowserService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(let _ of this._decorationService.decorations)this._colorZoneStore.addDecoration(_);this._ctx.lineWidth=1;let h=this._colorZoneStore.zones;for(let _ of h)_.position!=="full"&&this._renderColorZone(_);for(let _ of h)_.position==="full"&&this._renderColorZone(_);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(h){this._ctx.fillStyle=h.color,this._ctx.fillRect(f[h.position||"full"],Math.round((this._canvas.height-1)*(h.startBufferLine/this._bufferService.buffers.active.lines.length)-g[h.position||"full"]/2),d[h.position||"full"],Math.round((this._canvas.height-1)*((h.endBufferLine-h.startBufferLine)/this._bufferService.buffers.active.lines.length)+g[h.position||"full"]))}_queueRefresh(h,_){this._shouldUpdateDimensions=h||this._shouldUpdateDimensions,this._shouldUpdateAnchor=_||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};i.OverviewRulerRenderer=u=a([c(2,y.IBufferService),c(3,y.IDecorationService),c(4,p.IRenderService),c(5,y.IOptionsService),c(6,p.ICoreBrowserService)],u)},2950:function(s,i,o){var a=this&&this.__decorate||function(g,d,f,u){var h,_=arguments.length,b=_<3?d:u===null?u=Object.getOwnPropertyDescriptor(d,f):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(g,d,f,u);else for(var C=g.length-1;C>=0;C--)(h=g[C])&&(b=(_<3?h(b):_>3?h(d,f,b):h(d,f))||b);return _>3&&b&&Object.defineProperty(d,f,b),b},c=this&&this.__param||function(g,d){return function(f,u){d(f,u,g)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CompositionHelper=void 0;let l=o(4725),p=o(2585),m=o(2584),y=i.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(g,d,f,u,h,_){this._textarea=g,this._compositionView=d,this._bufferService=f,this._optionsService=u,this._coreService=h,this._renderService=_,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(g){this._compositionView.textContent=g.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(g){if(this._isComposing||this._isSendingComposition){if(g.keyCode===229||g.keyCode===16||g.keyCode===17||g.keyCode===18)return!1;this._finalizeComposition(!1)}return g.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(g){if(this._compositionView.classList.remove("active"),this._isComposing=!1,g){let d={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let f;this._isSendingComposition=!1,d.start+=this._dataAlreadySent.length,f=this._isComposing?this._textarea.value.substring(d.start,d.end):this._textarea.value.substring(d.start),f.length>0&&this._coreService.triggerDataEvent(f,!0)}},0)}else{this._isSendingComposition=!1;let d=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(d,!0)}}_handleAnyTextareaChanges(){let g=this._textarea.value;setTimeout(()=>{if(!this._isComposing){let d=this._textarea.value,f=d.replace(g,"");this._dataAlreadySent=f,d.length>g.length?this._coreService.triggerDataEvent(f,!0):d.length<g.length?this._coreService.triggerDataEvent(`${m.C0.DEL}`,!0):d.length===g.length&&d!==g&&this._coreService.triggerDataEvent(d,!0)}},0)}updateCompositionElements(g){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){let d=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),f=this._renderService.dimensions.css.cell.height,u=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,h=d*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=h+"px",this._compositionView.style.top=u+"px",this._compositionView.style.height=f+"px",this._compositionView.style.lineHeight=f+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";let _=this._compositionView.getBoundingClientRect();this._textarea.style.left=h+"px",this._textarea.style.top=u+"px",this._textarea.style.width=Math.max(_.width,1)+"px",this._textarea.style.height=Math.max(_.height,1)+"px",this._textarea.style.lineHeight=_.height+"px"}g||setTimeout(()=>this.updateCompositionElements(!0),0)}}};i.CompositionHelper=y=a([c(2,p.IBufferService),c(3,p.IOptionsService),c(4,p.ICoreService),c(5,l.IRenderService)],y)},9806:(s,i)=>{function o(a,c,l){let p=l.getBoundingClientRect(),m=a.getComputedStyle(l),y=parseInt(m.getPropertyValue("padding-left")),g=parseInt(m.getPropertyValue("padding-top"));return[c.clientX-p.left-y,c.clientY-p.top-g]}Object.defineProperty(i,"__esModule",{value:!0}),i.getCoords=i.getCoordsRelativeToElement=void 0,i.getCoordsRelativeToElement=o,i.getCoords=function(a,c,l,p,m,y,g,d,f){if(!y)return;let u=o(a,c,l);return u?(u[0]=Math.ceil((u[0]+(f?g/2:0))/g),u[1]=Math.ceil(u[1]/d),u[0]=Math.min(Math.max(u[0],1),p+(f?1:0)),u[1]=Math.min(Math.max(u[1],1),m),u):void 0}},9504:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.moveToCellSequence=void 0;let a=o(2584);function c(d,f,u,h){let _=d-l(d,u),b=f-l(f,u),C=Math.abs(_-b)-(function(S,v,E){let A=0,x=S-l(S,E),O=v-l(v,E);for(let I=0;I<Math.abs(x-O);I++){let k=p(S,v)==="A"?-1:1;E.buffer.lines.get(x+k*I)?.isWrapped&&A++}return A})(d,f,u);return g(C,y(p(d,f),h))}function l(d,f){let u=0,h=f.buffer.lines.get(d),_=h?.isWrapped;for(;_&&d>=0&&d<f.rows;)u++,h=f.buffer.lines.get(--d),_=h?.isWrapped;return u}function p(d,f){return d>f?"A":"B"}function m(d,f,u,h,_,b){let C=d,S=f,v="";for(;C!==u||S!==h;)C+=_?1:-1,_&&C>b.cols-1?(v+=b.buffer.translateBufferLineToString(S,!1,d,C),C=0,d=0,S++):!_&&C<0&&(v+=b.buffer.translateBufferLineToString(S,!1,0,d+1),C=b.cols-1,d=C,S--);return v+b.buffer.translateBufferLineToString(S,!1,d,C)}function y(d,f){let u=f?"O":"[";return a.C0.ESC+u+d}function g(d,f){d=Math.floor(d);let u="";for(let h=0;h<d;h++)u+=f;return u}i.moveToCellSequence=function(d,f,u,h){let _=u.buffer.x,b=u.buffer.y;if(!u.buffer.hasScrollback)return(function(v,E,A,x,O,I){return c(E,x,O,I).length===0?"":g(m(v,E,v,E-l(E,O),!1,O).length,y("D",I))})(_,b,0,f,u,h)+c(b,f,u,h)+(function(v,E,A,x,O,I){let k;k=c(E,x,O,I).length>0?x-l(x,O):E;let B=x,z=(function(Z,$,D,M,T,R){let F;return F=c(D,M,T,R).length>0?M-l(M,T):$,Z<D&&F<=M||Z>=D&&F<M?"C":"D"})(v,E,A,x,O,I);return g(m(v,k,A,B,z==="C",O).length,y(z,I))})(_,b,d,f,u,h);let C;if(b===f)return C=_>d?"D":"C",g(Math.abs(_-d),y(C,h));C=b>f?"D":"C";let S=Math.abs(b-f);return g((function(v,E){return E.cols-v})(b>f?d:_,u)+(S-1)*u.cols+1+((b>f?_:d)-1),y(C,h))}},1296:function(s,i,o){var a=this&&this.__decorate||function(I,k,B,z){var Z,$=arguments.length,D=$<3?k:z===null?z=Object.getOwnPropertyDescriptor(k,B):z;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(I,k,B,z);else for(var M=I.length-1;M>=0;M--)(Z=I[M])&&(D=($<3?Z(D):$>3?Z(k,B,D):Z(k,B))||D);return $>3&&D&&Object.defineProperty(k,B,D),D},c=this&&this.__param||function(I,k){return function(B,z){k(B,z,I)}};Object.defineProperty(i,"__esModule",{value:!0}),i.DomRenderer=void 0;let l=o(3787),p=o(2550),m=o(2223),y=o(6171),g=o(6052),d=o(4725),f=o(8055),u=o(8460),h=o(844),_=o(2585),b="xterm-dom-renderer-owner-",C="xterm-rows",S="xterm-fg-",v="xterm-bg-",E="xterm-focus",A="xterm-selection",x=1,O=i.DomRenderer=class extends h.Disposable{constructor(I,k,B,z,Z,$,D,M,T,R,F,G,ee){super(),this._terminal=I,this._document=k,this._element=B,this._screenElement=z,this._viewportElement=Z,this._helperContainer=$,this._linkifier2=D,this._charSizeService=T,this._optionsService=R,this._bufferService=F,this._coreBrowserService=G,this._themeService=ee,this._terminalClass=x++,this._rowElements=[],this._selectionRenderModel=(0,g.createSelectionRenderModel)(),this.onRequestRedraw=this.register(new u.EventEmitter).event,this._rowContainer=this._document.createElement("div"),this._rowContainer.classList.add(C),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=this._document.createElement("div"),this._selectionContainer.classList.add(A),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,y.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(ie=>this._injectCss(ie))),this._injectCss(this._themeService.colors),this._rowFactory=M.createInstance(l.DomRendererRowFactory,document),this._element.classList.add(b+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(ie=>this._handleLinkHover(ie))),this.register(this._linkifier2.onHideLinkUnderline(ie=>this._handleLinkLeave(ie))),this.register((0,h.toDisposable)(()=>{this._element.classList.remove(b+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new p.WidthCache(this._document,this._helperContainer),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){let I=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*I,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*I),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/I),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/I),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(let B of this._rowElements)B.style.width=`${this.dimensions.css.canvas.width}px`,B.style.height=`${this.dimensions.css.cell.height}px`,B.style.lineHeight=`${this.dimensions.css.cell.height}px`,B.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));let k=`${this._terminalSelector} .${C} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=k,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(I){this._themeStyleElement||(this._themeStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let k=`${this._terminalSelector} .${C} { color: ${I.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;k+=`${this._terminalSelector} .${C} .xterm-dim { color: ${f.color.multiplyOpacity(I.foreground,.5).css};}`,k+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`;let B=`blink_underline_${this._terminalClass}`,z=`blink_bar_${this._terminalClass}`,Z=`blink_block_${this._terminalClass}`;k+=`@keyframes ${B} { 50% {  border-bottom-style: hidden; }}`,k+=`@keyframes ${z} { 50% {  box-shadow: none; }}`,k+=`@keyframes ${Z} { 0% {  background-color: ${I.cursor.css};  color: ${I.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${I.cursor.css}; }}`,k+=`${this._terminalSelector} .${C}.${E} .xterm-cursor.xterm-cursor-blink.xterm-cursor-underline { animation: ${B} 1s step-end infinite;}${this._terminalSelector} .${C}.${E} .xterm-cursor.xterm-cursor-blink.xterm-cursor-bar { animation: ${z} 1s step-end infinite;}${this._terminalSelector} .${C}.${E} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: ${Z} 1s step-end infinite;}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-block { background-color: ${I.cursor.css}; color: ${I.cursorAccent.css};}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-block:not(.xterm-cursor-blink) { background-color: ${I.cursor.css} !important; color: ${I.cursorAccent.css} !important;}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${I.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${I.cursor.css} inset;}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${I.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,k+=`${this._terminalSelector} .${A} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${A} div { position: absolute; background-color: ${I.selectionBackgroundOpaque.css};}${this._terminalSelector} .${A} div { position: absolute; background-color: ${I.selectionInactiveBackgroundOpaque.css};}`;for(let[$,D]of I.ansi.entries())k+=`${this._terminalSelector} .${S}${$} { color: ${D.css}; }${this._terminalSelector} .${S}${$}.xterm-dim { color: ${f.color.multiplyOpacity(D,.5).css}; }${this._terminalSelector} .${v}${$} { background-color: ${D.css}; }`;k+=`${this._terminalSelector} .${S}${m.INVERTED_DEFAULT_COLOR} { color: ${f.color.opaque(I.background).css}; }${this._terminalSelector} .${S}${m.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${f.color.multiplyOpacity(f.color.opaque(I.background),.5).css}; }${this._terminalSelector} .${v}${m.INVERTED_DEFAULT_COLOR} { background-color: ${I.foreground.css}; }`,this._themeStyleElement.textContent=k}_setDefaultSpacing(){let I=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${I}px`,this._rowFactory.defaultSpacing=I}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(I,k){for(let B=this._rowElements.length;B<=k;B++){let z=this._document.createElement("div");this._rowContainer.appendChild(z),this._rowElements.push(z)}for(;this._rowElements.length>k;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(I,k){this._refreshRowElements(I,k),this._updateDimensions(),this.handleSelectionChanged(this._selectionRenderModel.selectionStart,this._selectionRenderModel.selectionEnd,this._selectionRenderModel.columnSelectMode)}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(E),this.renderRows(0,this._bufferService.rows-1)}handleFocus(){this._rowContainer.classList.add(E),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(I,k,B){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(I,k,B),this.renderRows(0,this._bufferService.rows-1),!I||!k)return;this._selectionRenderModel.update(this._terminal,I,k,B);let z=this._selectionRenderModel.viewportStartRow,Z=this._selectionRenderModel.viewportEndRow,$=this._selectionRenderModel.viewportCappedStartRow,D=this._selectionRenderModel.viewportCappedEndRow;if($>=this._bufferService.rows||D<0)return;let M=this._document.createDocumentFragment();if(B){let T=I[0]>k[0];M.appendChild(this._createSelectionElement($,T?k[0]:I[0],T?I[0]:k[0],D-$+1))}else{let T=z===$?I[0]:0,R=$===Z?k[0]:this._bufferService.cols;M.appendChild(this._createSelectionElement($,T,R));let F=D-$-1;if(M.appendChild(this._createSelectionElement($+1,0,this._bufferService.cols,F)),$!==D){let G=Z===D?k[0]:this._bufferService.cols;M.appendChild(this._createSelectionElement(D,0,G))}}this._selectionContainer.appendChild(M)}_createSelectionElement(I,k,B,z=1){let Z=this._document.createElement("div"),$=k*this.dimensions.css.cell.width,D=this.dimensions.css.cell.width*(B-k);return $+D>this.dimensions.css.canvas.width&&(D=this.dimensions.css.canvas.width-$),Z.style.height=z*this.dimensions.css.cell.height+"px",Z.style.top=I*this.dimensions.css.cell.height+"px",Z.style.left=`${$}px`,Z.style.width=`${D}px`,Z}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(let I of this._rowElements)I.replaceChildren()}renderRows(I,k){let B=this._bufferService.buffer,z=B.ybase+B.y,Z=Math.min(B.x,this._bufferService.cols-1),$=this._optionsService.rawOptions.cursorBlink,D=this._optionsService.rawOptions.cursorStyle,M=this._optionsService.rawOptions.cursorInactiveStyle;for(let T=I;T<=k;T++){let R=T+B.ydisp,F=this._rowElements[T],G=B.lines.get(R);if(!F||!G)break;F.replaceChildren(...this._rowFactory.createRow(G,R,R===z,D,M,Z,$,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${b}${this._terminalClass}`}_handleLinkHover(I){this._setCellUnderline(I.x1,I.x2,I.y1,I.y2,I.cols,!0)}_handleLinkLeave(I){this._setCellUnderline(I.x1,I.x2,I.y1,I.y2,I.cols,!1)}_setCellUnderline(I,k,B,z,Z,$){B<0&&(I=0),z<0&&(k=0);let D=this._bufferService.rows-1;B=Math.max(Math.min(B,D),0),z=Math.max(Math.min(z,D),0),Z=Math.min(Z,this._bufferService.cols);let M=this._bufferService.buffer,T=M.ybase+M.y,R=Math.min(M.x,Z-1),F=this._optionsService.rawOptions.cursorBlink,G=this._optionsService.rawOptions.cursorStyle,ee=this._optionsService.rawOptions.cursorInactiveStyle;for(let ie=B;ie<=z;++ie){let N=ie+M.ydisp,w=this._rowElements[ie],L=M.lines.get(N);if(!w||!L)break;w.replaceChildren(...this._rowFactory.createRow(L,N,N===T,G,ee,R,F,this.dimensions.css.cell.width,this._widthCache,$?ie===B?I:0:-1,$?(ie===z?k:Z)-1:-1))}}};i.DomRenderer=O=a([c(7,_.IInstantiationService),c(8,d.ICharSizeService),c(9,_.IOptionsService),c(10,_.IBufferService),c(11,d.ICoreBrowserService),c(12,d.IThemeService)],O)},3787:function(s,i,o){var a=this&&this.__decorate||function(C,S,v,E){var A,x=arguments.length,O=x<3?S:E===null?E=Object.getOwnPropertyDescriptor(S,v):E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")O=Reflect.decorate(C,S,v,E);else for(var I=C.length-1;I>=0;I--)(A=C[I])&&(O=(x<3?A(O):x>3?A(S,v,O):A(S,v))||O);return x>3&&O&&Object.defineProperty(S,v,O),O},c=this&&this.__param||function(C,S){return function(v,E){S(v,E,C)}};Object.defineProperty(i,"__esModule",{value:!0}),i.DomRendererRowFactory=void 0;let l=o(2223),p=o(643),m=o(511),y=o(2585),g=o(8055),d=o(4725),f=o(4269),u=o(6171),h=o(3734),_=i.DomRendererRowFactory=class{constructor(C,S,v,E,A,x,O){this._document=C,this._characterJoinerService=S,this._optionsService=v,this._coreBrowserService=E,this._coreService=A,this._decorationService=x,this._themeService=O,this._workCell=new m.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(C,S,v){this._selectionStart=C,this._selectionEnd=S,this._columnSelectMode=v}createRow(C,S,v,E,A,x,O,I,k,B,z){let Z=[],$=this._characterJoinerService.getJoinedCharacters(S),D=this._themeService.colors,M,T=C.getNoBgTrimmedLength();v&&T<x+1&&(T=x+1);let R=0,F="",G=0,ee=0,ie=0,N=!1,w=0,L=!1,j=0,K=[],q=B!==-1&&z!==-1;for(let me=0;me<T;me++){C.loadCell(me,this._workCell);let Te=this._workCell.getWidth();if(Te===0)continue;let Ae=!1,it=me,ae=this._workCell;if($.length>0&&me===$[0][0]){Ae=!0;let we=$.shift();ae=new f.JoinedCellData(this._workCell,C.translateToString(!0,we[0],we[1]),we[1]-we[0]),it=we[1]-1,Te=ae.getWidth()}let Ni=this._isCellInSelection(me,S),$c=v&&me===x,Wc=q&&me>=B&&me<=z,zc=!1;this._decorationService.forEachDecorationAtCell(me,S,void 0,we=>{zc=!0});let Xs=ae.getChars()||p.WHITESPACE_CELL_CHAR;if(Xs===" "&&(ae.isUnderline()||ae.isOverline())&&(Xs="\xA0"),j=Te*I-k.get(Xs,ae.isBold(),ae.isItalic()),M){if(R&&(Ni&&L||!Ni&&!L&&ae.bg===G)&&(Ni&&L&&D.selectionForeground||ae.fg===ee)&&ae.extended.ext===ie&&Wc===N&&j===w&&!$c&&!Ae&&!zc){ae.isInvisible()?F+=p.WHITESPACE_CELL_CHAR:F+=Xs,R++;continue}R&&(M.textContent=F),M=this._document.createElement("span"),R=0,F=""}else M=this._document.createElement("span");if(G=ae.bg,ee=ae.fg,ie=ae.extended.ext,N=Wc,w=j,L=Ni,Ae&&x>=me&&x<=it&&(x=me),!this._coreService.isCursorHidden&&$c&&this._coreService.isCursorInitialized){if(K.push("xterm-cursor"),this._coreBrowserService.isFocused)O&&K.push("xterm-cursor-blink"),K.push(E==="bar"?"xterm-cursor-bar":E==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(A)switch(A){case"outline":K.push("xterm-cursor-outline");break;case"block":K.push("xterm-cursor-block");break;case"bar":K.push("xterm-cursor-bar");break;case"underline":K.push("xterm-cursor-underline")}}if(ae.isBold()&&K.push("xterm-bold"),ae.isItalic()&&K.push("xterm-italic"),ae.isDim()&&K.push("xterm-dim"),F=ae.isInvisible()?p.WHITESPACE_CELL_CHAR:ae.getChars()||p.WHITESPACE_CELL_CHAR,ae.isUnderline()&&(K.push(`xterm-underline-${ae.extended.underlineStyle}`),F===" "&&(F="\xA0"),!ae.isUnderlineColorDefault()))if(ae.isUnderlineColorRGB())M.style.textDecorationColor=`rgb(${h.AttributeData.toColorRGB(ae.getUnderlineColor()).join(",")})`;else{let we=ae.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&ae.isBold()&&we<8&&(we+=8),M.style.textDecorationColor=D.ansi[we].css}ae.isOverline()&&(K.push("xterm-overline"),F===" "&&(F="\xA0")),ae.isStrikethrough()&&K.push("xterm-strikethrough"),Wc&&(M.style.textDecoration="underline");let yt=ae.getFgColor(),ki=ae.getFgColorMode(),jt=ae.getBgColor(),Pi=ae.getBgColorMode(),Gc=!!ae.isInverse();if(Gc){let we=yt;yt=jt,jt=we;let $v=ki;ki=Pi,Pi=$v}let Cn,eo,bn,Li=!1;switch(this._decorationService.forEachDecorationAtCell(me,S,void 0,we=>{we.options.layer!=="top"&&Li||(we.backgroundColorRGB&&(Pi=50331648,jt=we.backgroundColorRGB.rgba>>8&16777215,Cn=we.backgroundColorRGB),we.foregroundColorRGB&&(ki=50331648,yt=we.foregroundColorRGB.rgba>>8&16777215,eo=we.foregroundColorRGB),Li=we.options.layer==="top")}),!Li&&Ni&&(Cn=this._coreBrowserService.isFocused?D.selectionBackgroundOpaque:D.selectionInactiveBackgroundOpaque,jt=Cn.rgba>>8&16777215,Pi=50331648,Li=!0,D.selectionForeground&&(ki=50331648,yt=D.selectionForeground.rgba>>8&16777215,eo=D.selectionForeground)),Li&&K.push("xterm-decoration-top"),Pi){case 16777216:case 33554432:bn=D.ansi[jt],K.push(`xterm-bg-${jt}`);break;case 50331648:bn=g.channels.toColor(jt>>16,jt>>8&255,255&jt),this._addStyle(M,`background-color:#${b((jt>>>0).toString(16),"0",6)}`);break;default:Gc?(bn=D.foreground,K.push(`xterm-bg-${l.INVERTED_DEFAULT_COLOR}`)):bn=D.background}switch(Cn||ae.isDim()&&(Cn=g.color.multiplyOpacity(bn,.5)),ki){case 16777216:case 33554432:ae.isBold()&&yt<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(yt+=8),this._applyMinimumContrast(M,bn,D.ansi[yt],ae,Cn,void 0)||K.push(`xterm-fg-${yt}`);break;case 50331648:let we=g.channels.toColor(yt>>16&255,yt>>8&255,255&yt);this._applyMinimumContrast(M,bn,we,ae,Cn,eo)||this._addStyle(M,`color:#${b(yt.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(M,bn,D.foreground,ae,Cn,eo)||Gc&&K.push(`xterm-fg-${l.INVERTED_DEFAULT_COLOR}`)}K.length&&(M.className=K.join(" "),K.length=0),$c||Ae||zc?M.textContent=F:R++,j!==this.defaultSpacing&&(M.style.letterSpacing=`${j}px`),Z.push(M),me=it}return M&&R&&(M.textContent=F),Z}_applyMinimumContrast(C,S,v,E,A,x){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,u.treatGlyphAsBackgroundColor)(E.getCode()))return!1;let O=this._getContrastCache(E),I;if(A||x||(I=O.getColor(S.rgba,v.rgba)),I===void 0){let k=this._optionsService.rawOptions.minimumContrastRatio/(E.isDim()?2:1);I=g.color.ensureContrastRatio(A||S,x||v,k),O.setColor((A||S).rgba,(x||v).rgba,I??null)}return!!I&&(this._addStyle(C,`color:${I.css}`),!0)}_getContrastCache(C){return C.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(C,S){C.setAttribute("style",`${C.getAttribute("style")||""}${S};`)}_isCellInSelection(C,S){let v=this._selectionStart,E=this._selectionEnd;return!(!v||!E)&&(this._columnSelectMode?v[0]<=E[0]?C>=v[0]&&S>=v[1]&&C<E[0]&&S<=E[1]:C<v[0]&&S>=v[1]&&C>=E[0]&&S<=E[1]:S>v[1]&&S<E[1]||v[1]===E[1]&&S===v[1]&&C>=v[0]&&C<E[0]||v[1]<E[1]&&S===E[1]&&C<E[0]||v[1]<E[1]&&S===v[1]&&C>=v[0])}};function b(C,S,v){for(;C.length<v;)C=S+C;return C}i.DomRendererRowFactory=_=a([c(1,d.ICharacterJoinerService),c(2,y.IOptionsService),c(3,d.ICoreBrowserService),c(4,y.ICoreService),c(5,y.IDecorationService),c(6,d.IThemeService)],_)},2550:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WidthCache=void 0,i.WidthCache=class{constructor(o,a){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=o.createElement("div"),this._container.classList.add("xterm-width-cache-measure-container"),this._container.setAttribute("aria-hidden","true"),this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";let c=o.createElement("span");c.classList.add("xterm-char-measure-element");let l=o.createElement("span");l.classList.add("xterm-char-measure-element"),l.style.fontWeight="bold";let p=o.createElement("span");p.classList.add("xterm-char-measure-element"),p.style.fontStyle="italic";let m=o.createElement("span");m.classList.add("xterm-char-measure-element"),m.style.fontWeight="bold",m.style.fontStyle="italic",this._measureElements=[c,l,p,m],this._container.appendChild(c),this._container.appendChild(l),this._container.appendChild(p),this._container.appendChild(m),a.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(o,a,c,l){o===this._font&&a===this._fontSize&&c===this._weight&&l===this._weightBold||(this._font=o,this._fontSize=a,this._weight=c,this._weightBold=l,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${c}`,this._measureElements[1].style.fontWeight=`${l}`,this._measureElements[2].style.fontWeight=`${c}`,this._measureElements[3].style.fontWeight=`${l}`,this.clear())}get(o,a,c){let l=0;if(!a&&!c&&o.length===1&&(l=o.charCodeAt(0))<256){if(this._flat[l]!==-9999)return this._flat[l];let y=this._measure(o,0);return y>0&&(this._flat[l]=y),y}let p=o;a&&(p+="B"),c&&(p+="I");let m=this._holey.get(p);if(m===void 0){let y=0;a&&(y|=1),c&&(y|=2),m=this._measure(o,y),m>0&&this._holey.set(p,m)}return m}_measure(o,a){let c=this._measureElements[a];return c.textContent=o.repeat(32),c.offsetWidth/32}}},2223:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TEXT_BASELINE=i.DIM_OPACITY=i.INVERTED_DEFAULT_COLOR=void 0;let a=o(6114);i.INVERTED_DEFAULT_COLOR=257,i.DIM_OPACITY=.5,i.TEXT_BASELINE=a.isFirefox||a.isLegacyEdge?"bottom":"ideographic"},6171:(s,i)=>{function o(c){return 57508<=c&&c<=57558}function a(c){return c>=128512&&c<=128591||c>=127744&&c<=128511||c>=128640&&c<=128767||c>=9728&&c<=9983||c>=9984&&c<=10175||c>=65024&&c<=65039||c>=129280&&c<=129535||c>=127462&&c<=127487}Object.defineProperty(i,"__esModule",{value:!0}),i.computeNextVariantOffset=i.createRenderDimensions=i.treatGlyphAsBackgroundColor=i.allowRescaling=i.isEmoji=i.isRestrictedPowerlineGlyph=i.isPowerlineGlyph=i.throwIfFalsy=void 0,i.throwIfFalsy=function(c){if(!c)throw new Error("value must not be falsy");return c},i.isPowerlineGlyph=o,i.isRestrictedPowerlineGlyph=function(c){return 57520<=c&&c<=57527},i.isEmoji=a,i.allowRescaling=function(c,l,p,m){return l===1&&p>Math.ceil(1.5*m)&&c!==void 0&&c>255&&!a(c)&&!o(c)&&!(function(y){return 57344<=y&&y<=63743})(c)},i.treatGlyphAsBackgroundColor=function(c){return o(c)||(function(l){return 9472<=l&&l<=9631})(c)},i.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}},i.computeNextVariantOffset=function(c,l,p=0){return(c-(2*Math.round(l)-p))%(2*Math.round(l))}},6052:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createSelectionRenderModel=void 0;class o{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(c,l,p,m=!1){if(this.selectionStart=l,this.selectionEnd=p,!l||!p||l[0]===p[0]&&l[1]===p[1])return void this.clear();let y=c.buffers.active.ydisp,g=l[1]-y,d=p[1]-y,f=Math.max(g,0),u=Math.min(d,c.rows-1);f>=c.rows||u<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=m,this.viewportStartRow=g,this.viewportEndRow=d,this.viewportCappedStartRow=f,this.viewportCappedEndRow=u,this.startCol=l[0],this.endCol=p[0])}isCellSelected(c,l,p){return!!this.hasSelection&&(p-=c.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?l>=this.startCol&&p>=this.viewportCappedStartRow&&l<this.endCol&&p<=this.viewportCappedEndRow:l<this.startCol&&p>=this.viewportCappedStartRow&&l>=this.endCol&&p<=this.viewportCappedEndRow:p>this.viewportStartRow&&p<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&p===this.viewportStartRow&&l>=this.startCol&&l<this.endCol||this.viewportStartRow<this.viewportEndRow&&p===this.viewportEndRow&&l<this.endCol||this.viewportStartRow<this.viewportEndRow&&p===this.viewportStartRow&&l>=this.startCol)}}i.createSelectionRenderModel=function(){return new o}},456:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SelectionModel=void 0,i.SelectionModel=class{constructor(o){this._bufferService=o,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){let o=this.selectionStart[0]+this.selectionStartLength;return o>this._bufferService.cols?o%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(o/this._bufferService.cols)-1]:[o%this._bufferService.cols,this.selectionStart[1]+Math.floor(o/this._bufferService.cols)]:[o,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){let o=this.selectionStart[0]+this.selectionStartLength;return o>this._bufferService.cols?[o%this._bufferService.cols,this.selectionStart[1]+Math.floor(o/this._bufferService.cols)]:[Math.max(o,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){let o=this.selectionStart,a=this.selectionEnd;return!(!o||!a)&&(o[1]>a[1]||o[1]===a[1]&&o[0]>a[0])}handleTrim(o){return this.selectionStart&&(this.selectionStart[1]-=o),this.selectionEnd&&(this.selectionEnd[1]-=o),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(s,i,o){var a=this&&this.__decorate||function(u,h,_,b){var C,S=arguments.length,v=S<3?h:b===null?b=Object.getOwnPropertyDescriptor(h,_):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(u,h,_,b);else for(var E=u.length-1;E>=0;E--)(C=u[E])&&(v=(S<3?C(v):S>3?C(h,_,v):C(h,_))||v);return S>3&&v&&Object.defineProperty(h,_,v),v},c=this&&this.__param||function(u,h){return function(_,b){h(_,b,u)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CharSizeService=void 0;let l=o(2585),p=o(8460),m=o(844),y=i.CharSizeService=class extends m.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(u,h,_){super(),this._optionsService=_,this.width=0,this.height=0,this._onCharSizeChange=this.register(new p.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event;try{this._measureStrategy=this.register(new f(this._optionsService))}catch{this._measureStrategy=this.register(new d(u,h,this._optionsService))}this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){let u=this._measureStrategy.measure();u.width===this.width&&u.height===this.height||(this.width=u.width,this.height=u.height,this._onCharSizeChange.fire())}};i.CharSizeService=y=a([c(2,l.IOptionsService)],y);class g extends m.Disposable{constructor(){super(...arguments),this._result={width:0,height:0}}_validateAndSet(h,_){h!==void 0&&h>0&&_!==void 0&&_>0&&(this._result.width=h,this._result.height=_)}}class d extends g{constructor(h,_,b){super(),this._document=h,this._parentElement=_,this._optionsService=b,this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){return this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`,this._validateAndSet(Number(this._measureElement.offsetWidth)/32,Number(this._measureElement.offsetHeight)),this._result}}class f extends g{constructor(h){super(),this._optionsService=h,this._canvas=new OffscreenCanvas(100,100),this._ctx=this._canvas.getContext("2d");let _=this._ctx.measureText("W");if(!("width"in _&&"fontBoundingBoxAscent"in _&&"fontBoundingBoxDescent"in _))throw new Error("Required font metrics not supported")}measure(){this._ctx.font=`${this._optionsService.rawOptions.fontSize}px ${this._optionsService.rawOptions.fontFamily}`;let h=this._ctx.measureText("W");return this._validateAndSet(h.width,h.fontBoundingBoxAscent+h.fontBoundingBoxDescent),this._result}}},4269:function(s,i,o){var a=this&&this.__decorate||function(f,u,h,_){var b,C=arguments.length,S=C<3?u:_===null?_=Object.getOwnPropertyDescriptor(u,h):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(f,u,h,_);else for(var v=f.length-1;v>=0;v--)(b=f[v])&&(S=(C<3?b(S):C>3?b(u,h,S):b(u,h))||S);return C>3&&S&&Object.defineProperty(u,h,S),S},c=this&&this.__param||function(f,u){return function(h,_){u(h,_,f)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CharacterJoinerService=i.JoinedCellData=void 0;let l=o(3734),p=o(643),m=o(511),y=o(2585);class g extends l.AttributeData{constructor(u,h,_){super(),this.content=0,this.combinedData="",this.fg=u.fg,this.bg=u.bg,this.combinedData=h,this._width=_}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(u){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.JoinedCellData=g;let d=i.CharacterJoinerService=class Fv{constructor(u){this._bufferService=u,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new m.CellData}register(u){let h={id:this._nextCharacterJoinerId++,handler:u};return this._characterJoiners.push(h),h.id}deregister(u){for(let h=0;h<this._characterJoiners.length;h++)if(this._characterJoiners[h].id===u)return this._characterJoiners.splice(h,1),!0;return!1}getJoinedCharacters(u){if(this._characterJoiners.length===0)return[];let h=this._bufferService.buffer.lines.get(u);if(!h||h.length===0)return[];let _=[],b=h.translateToString(!0),C=0,S=0,v=0,E=h.getFg(0),A=h.getBg(0);for(let x=0;x<h.getTrimmedLength();x++)if(h.loadCell(x,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==E||this._workCell.bg!==A){if(x-C>1){let O=this._getJoinedRanges(b,v,S,h,C);for(let I=0;I<O.length;I++)_.push(O[I])}C=x,v=S,E=this._workCell.fg,A=this._workCell.bg}S+=this._workCell.getChars().length||p.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-C>1){let x=this._getJoinedRanges(b,v,S,h,C);for(let O=0;O<x.length;O++)_.push(x[O])}return _}_getJoinedRanges(u,h,_,b,C){let S=u.substring(h,_),v=[];try{v=this._characterJoiners[0].handler(S)}catch(E){console.error(E)}for(let E=1;E<this._characterJoiners.length;E++)try{let A=this._characterJoiners[E].handler(S);for(let x=0;x<A.length;x++)Fv._mergeRanges(v,A[x])}catch(A){console.error(A)}return this._stringRangesToCellRanges(v,b,C),v}_stringRangesToCellRanges(u,h,_){let b=0,C=!1,S=0,v=u[b];if(v){for(let E=_;E<this._bufferService.cols;E++){let A=h.getWidth(E),x=h.getString(E).length||p.WHITESPACE_CELL_CHAR.length;if(A!==0){if(!C&&v[0]<=S&&(v[0]=E,C=!0),v[1]<=S){if(v[1]=E,v=u[++b],!v)break;v[0]<=S?(v[0]=E,C=!0):C=!1}S+=x}}v&&(v[1]=this._bufferService.cols)}}static _mergeRanges(u,h){let _=!1;for(let b=0;b<u.length;b++){let C=u[b];if(_){if(h[1]<=C[0])return u[b-1][1]=h[1],u;if(h[1]<=C[1])return u[b-1][1]=Math.max(h[1],C[1]),u.splice(b,1),u;u.splice(b,1),b--}else{if(h[1]<=C[0])return u.splice(b,0,h),u;if(h[1]<=C[1])return C[0]=Math.min(h[0],C[0]),u;h[0]<C[1]&&(C[0]=Math.min(h[0],C[0]),_=!0)}}return _?u[u.length-1][1]=h[1]:u.push(h),u}};i.CharacterJoinerService=d=a([c(0,y.IBufferService)],d)},5114:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CoreBrowserService=void 0;let a=o(844),c=o(8460),l=o(3656);class p extends a.Disposable{constructor(g,d,f){super(),this._textarea=g,this._window=d,this.mainDocument=f,this._isFocused=!1,this._cachedIsFocused=void 0,this._screenDprMonitor=new m(this._window),this._onDprChange=this.register(new c.EventEmitter),this.onDprChange=this._onDprChange.event,this._onWindowChange=this.register(new c.EventEmitter),this.onWindowChange=this._onWindowChange.event,this.register(this.onWindowChange(u=>this._screenDprMonitor.setWindow(u))),this.register((0,c.forwardEvent)(this._screenDprMonitor.onDprChange,this._onDprChange)),this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get window(){return this._window}set window(g){this._window!==g&&(this._window=g,this._onWindowChange.fire(this._window))}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}i.CoreBrowserService=p;class m extends a.Disposable{constructor(g){super(),this._parentWindow=g,this._windowResizeListener=this.register(new a.MutableDisposable),this._onDprChange=this.register(new c.EventEmitter),this.onDprChange=this._onDprChange.event,this._outerListener=()=>this._setDprAndFireIfDiffers(),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._updateDpr(),this._setWindowResizeListener(),this.register((0,a.toDisposable)(()=>this.clearListener()))}setWindow(g){this._parentWindow=g,this._setWindowResizeListener(),this._setDprAndFireIfDiffers()}_setWindowResizeListener(){this._windowResizeListener.value=(0,l.addDisposableDomListener)(this._parentWindow,"resize",()=>this._setDprAndFireIfDiffers())}_setDprAndFireIfDiffers(){this._parentWindow.devicePixelRatio!==this._currentDevicePixelRatio&&this._onDprChange.fire(this._parentWindow.devicePixelRatio),this._updateDpr()}_updateDpr(){this._outerListener&&(this._resolutionMediaMatchList?.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._outerListener=void 0)}}},779:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.LinkProviderService=void 0;let a=o(844);class c extends a.Disposable{constructor(){super(),this.linkProviders=[],this.register((0,a.toDisposable)(()=>this.linkProviders.length=0))}registerLinkProvider(p){return this.linkProviders.push(p),{dispose:()=>{let m=this.linkProviders.indexOf(p);m!==-1&&this.linkProviders.splice(m,1)}}}}i.LinkProviderService=c},8934:function(s,i,o){var a=this&&this.__decorate||function(y,g,d,f){var u,h=arguments.length,_=h<3?g:f===null?f=Object.getOwnPropertyDescriptor(g,d):f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")_=Reflect.decorate(y,g,d,f);else for(var b=y.length-1;b>=0;b--)(u=y[b])&&(_=(h<3?u(_):h>3?u(g,d,_):u(g,d))||_);return h>3&&_&&Object.defineProperty(g,d,_),_},c=this&&this.__param||function(y,g){return function(d,f){g(d,f,y)}};Object.defineProperty(i,"__esModule",{value:!0}),i.MouseService=void 0;let l=o(4725),p=o(9806),m=i.MouseService=class{constructor(y,g){this._renderService=y,this._charSizeService=g}getCoords(y,g,d,f,u){return(0,p.getCoords)(window,y,g,d,f,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,u)}getMouseReportCoords(y,g){let d=(0,p.getCoordsRelativeToElement)(window,y,g);if(this._charSizeService.hasValidSize)return d[0]=Math.min(Math.max(d[0],0),this._renderService.dimensions.css.canvas.width-1),d[1]=Math.min(Math.max(d[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(d[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(d[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(d[0]),y:Math.floor(d[1])}}};i.MouseService=m=a([c(0,l.IRenderService),c(1,l.ICharSizeService)],m)},3230:function(s,i,o){var a=this&&this.__decorate||function(u,h,_,b){var C,S=arguments.length,v=S<3?h:b===null?b=Object.getOwnPropertyDescriptor(h,_):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(u,h,_,b);else for(var E=u.length-1;E>=0;E--)(C=u[E])&&(v=(S<3?C(v):S>3?C(h,_,v):C(h,_))||v);return S>3&&v&&Object.defineProperty(h,_,v),v},c=this&&this.__param||function(u,h){return function(_,b){h(_,b,u)}};Object.defineProperty(i,"__esModule",{value:!0}),i.RenderService=void 0;let l=o(6193),p=o(4725),m=o(8460),y=o(844),g=o(7226),d=o(2585),f=i.RenderService=class extends y.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(u,h,_,b,C,S,v,E){super(),this._rowCount=u,this._charSizeService=b,this._renderer=this.register(new y.MutableDisposable),this._pausedResizeTask=new g.DebouncedIdleTask,this._observerDisposable=this.register(new y.MutableDisposable),this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new m.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new m.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new m.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new m.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new l.RenderDebouncer((A,x)=>this._renderRows(A,x),v),this.register(this._renderDebouncer),this.register(v.onDprChange(()=>this.handleDevicePixelRatioChange())),this.register(S.onResize(()=>this._fullRefresh())),this.register(S.buffers.onBufferActivate(()=>this._renderer.value?.clear())),this.register(_.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(C.onDecorationRegistered(()=>this._fullRefresh())),this.register(C.onDecorationRemoved(()=>this._fullRefresh())),this.register(_.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio","rescaleOverlappingGlyphs"],()=>{this.clear(),this.handleResize(S.cols,S.rows),this._fullRefresh()})),this.register(_.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(S.buffer.y,S.buffer.y,!0))),this.register(E.onChangeColors(()=>this._fullRefresh())),this._registerIntersectionObserver(v.window,h),this.register(v.onWindowChange(A=>this._registerIntersectionObserver(A,h)))}_registerIntersectionObserver(u,h){if("IntersectionObserver"in u){let _=new u.IntersectionObserver(b=>this._handleIntersectionChange(b[b.length-1]),{threshold:0});_.observe(h),this._observerDisposable.value=(0,y.toDisposable)(()=>_.disconnect())}}_handleIntersectionChange(u){this._isPaused=u.isIntersecting===void 0?u.intersectionRatio===0:!u.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(u,h,_=!1){this._isPaused?this._needsFullRefresh=!0:(_||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(u,h,this._rowCount))}_renderRows(u,h){this._renderer.value&&(u=Math.min(u,this._rowCount-1),h=Math.min(h,this._rowCount-1),this._renderer.value.renderRows(u,h),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:u,end:h}),this._onRender.fire({start:u,end:h}),this._isNextRenderRedrawOnly=!0)}resize(u,h){this._rowCount=h,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(u){this._renderer.value=u,this._renderer.value&&(this._renderer.value.onRequestRedraw(h=>this.refreshRows(h.start,h.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh())}addRefreshCallback(u){return this._renderDebouncer.addRefreshCallback(u)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){this._renderer.value&&(this._renderer.value.clearTextureAtlas?.(),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(u,h){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.value?.handleResize(u,h)):this._renderer.value.handleResize(u,h),this._fullRefresh())}handleCharSizeChanged(){this._renderer.value?.handleCharSizeChanged()}handleBlur(){this._renderer.value?.handleBlur()}handleFocus(){this._renderer.value?.handleFocus()}handleSelectionChanged(u,h,_){this._selectionState.start=u,this._selectionState.end=h,this._selectionState.columnSelectMode=_,this._renderer.value?.handleSelectionChanged(u,h,_)}handleCursorMove(){this._renderer.value?.handleCursorMove()}clear(){this._renderer.value?.clear()}};i.RenderService=f=a([c(2,d.IOptionsService),c(3,p.ICharSizeService),c(4,d.IDecorationService),c(5,d.IBufferService),c(6,p.ICoreBrowserService),c(7,p.IThemeService)],f)},9312:function(s,i,o){var a=this&&this.__decorate||function(v,E,A,x){var O,I=arguments.length,k=I<3?E:x===null?x=Object.getOwnPropertyDescriptor(E,A):x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(v,E,A,x);else for(var B=v.length-1;B>=0;B--)(O=v[B])&&(k=(I<3?O(k):I>3?O(E,A,k):O(E,A))||k);return I>3&&k&&Object.defineProperty(E,A,k),k},c=this&&this.__param||function(v,E){return function(A,x){E(A,x,v)}};Object.defineProperty(i,"__esModule",{value:!0}),i.SelectionService=void 0;let l=o(9806),p=o(9504),m=o(456),y=o(4725),g=o(8460),d=o(844),f=o(6114),u=o(4841),h=o(511),_=o(2585),b="\xA0",C=new RegExp(b,"g"),S=i.SelectionService=class extends d.Disposable{constructor(v,E,A,x,O,I,k,B,z){super(),this._element=v,this._screenElement=E,this._linkifier=A,this._bufferService=x,this._coreService=O,this._mouseService=I,this._optionsService=k,this._renderService=B,this._coreBrowserService=z,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new h.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new g.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new g.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new g.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new g.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=Z=>this._handleMouseMove(Z),this._mouseUpListener=Z=>this._handleMouseUp(Z),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(Z=>this._handleTrim(Z)),this.register(this._bufferService.buffers.onBufferActivate(Z=>this._handleBufferActivate(Z))),this.enable(),this._model=new m.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,d.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){let v=this._model.finalSelectionStart,E=this._model.finalSelectionEnd;return!(!v||!E||v[0]===E[0]&&v[1]===E[1])}get selectionText(){let v=this._model.finalSelectionStart,E=this._model.finalSelectionEnd;if(!v||!E)return"";let A=this._bufferService.buffer,x=[];if(this._activeSelectionMode===3){if(v[0]===E[0])return"";let O=v[0]<E[0]?v[0]:E[0],I=v[0]<E[0]?E[0]:v[0];for(let k=v[1];k<=E[1];k++){let B=A.translateBufferLineToString(k,!0,O,I);x.push(B)}}else{let O=v[1]===E[1]?E[0]:void 0;x.push(A.translateBufferLineToString(v[1],!0,v[0],O));for(let I=v[1]+1;I<=E[1]-1;I++){let k=A.lines.get(I),B=A.translateBufferLineToString(I,!0);k?.isWrapped?x[x.length-1]+=B:x.push(B)}if(v[1]!==E[1]){let I=A.lines.get(E[1]),k=A.translateBufferLineToString(E[1],!0,0,E[0]);I&&I.isWrapped?x[x.length-1]+=k:x.push(k)}}return x.map(O=>O.replace(C," ")).join(f.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(v){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),f.isLinux&&v&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(v){let E=this._getMouseBufferCoords(v),A=this._model.finalSelectionStart,x=this._model.finalSelectionEnd;return!!(A&&x&&E)&&this._areCoordsInSelection(E,A,x)}isCellInSelection(v,E){let A=this._model.finalSelectionStart,x=this._model.finalSelectionEnd;return!(!A||!x)&&this._areCoordsInSelection([v,E],A,x)}_areCoordsInSelection(v,E,A){return v[1]>E[1]&&v[1]<A[1]||E[1]===A[1]&&v[1]===E[1]&&v[0]>=E[0]&&v[0]<A[0]||E[1]<A[1]&&v[1]===A[1]&&v[0]<A[0]||E[1]<A[1]&&v[1]===E[1]&&v[0]>=E[0]}_selectWordAtCursor(v,E){let A=this._linkifier.currentLink?.link?.range;if(A)return this._model.selectionStart=[A.start.x-1,A.start.y-1],this._model.selectionStartLength=(0,u.getRangeLength)(A,this._bufferService.cols),this._model.selectionEnd=void 0,!0;let x=this._getMouseBufferCoords(v);return!!x&&(this._selectWordAt(x,E),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(v,E){this._model.clearSelection(),v=Math.max(v,0),E=Math.min(E,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,v],this._model.selectionEnd=[this._bufferService.cols,E],this.refresh(),this._onSelectionChange.fire()}_handleTrim(v){this._model.handleTrim(v)&&this.refresh()}_getMouseBufferCoords(v){let E=this._mouseService.getCoords(v,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(E)return E[0]--,E[1]--,E[1]+=this._bufferService.buffer.ydisp,E}_getMouseEventScrollAmount(v){let E=(0,l.getCoordsRelativeToElement)(this._coreBrowserService.window,v,this._screenElement)[1],A=this._renderService.dimensions.css.canvas.height;return E>=0&&E<=A?0:(E>A&&(E-=A),E=Math.min(Math.max(E,-50),50),E/=50,E/Math.abs(E)+Math.round(14*E))}shouldForceSelection(v){return f.isMac?v.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:v.shiftKey}handleMouseDown(v){if(this._mouseDownTimeStamp=v.timeStamp,(v.button!==2||!this.hasSelection)&&v.button===0){if(!this._enabled){if(!this.shouldForceSelection(v))return;v.stopPropagation()}v.preventDefault(),this._dragScrollAmount=0,this._enabled&&v.shiftKey?this._handleIncrementalClick(v):v.detail===1?this._handleSingleClick(v):v.detail===2?this._handleDoubleClick(v):v.detail===3&&this._handleTripleClick(v),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(v){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(v))}_handleSingleClick(v){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(v)?3:0,this._model.selectionStart=this._getMouseBufferCoords(v),!this._model.selectionStart)return;this._model.selectionEnd=void 0;let E=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);E&&E.length!==this._model.selectionStart[0]&&E.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(v){this._selectWordAtCursor(v,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(v){let E=this._getMouseBufferCoords(v);E&&(this._activeSelectionMode=2,this._selectLineAt(E[1]))}shouldColumnSelect(v){return v.altKey&&!(f.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(v){if(v.stopImmediatePropagation(),!this._model.selectionStart)return;let E=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(v),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(v),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));let A=this._bufferService.buffer;if(this._model.selectionEnd[1]<A.lines.length){let x=A.lines.get(this._model.selectionEnd[1]);x&&x.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]<this._bufferService.cols&&this._model.selectionEnd[0]++}E&&E[0]===this._model.selectionEnd[0]&&E[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});let v=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(v.ydisp+this._bufferService.rows,v.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=v.ydisp),this.refresh()}}_handleMouseUp(v){let E=v.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&E<500&&v.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){let A=this._mouseService.getCoords(v,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(A&&A[0]!==void 0&&A[1]!==void 0){let x=(0,p.moveToCellSequence)(A[0]-1,A[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(x,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){let v=this._model.finalSelectionStart,E=this._model.finalSelectionEnd,A=!(!v||!E||v[0]===E[0]&&v[1]===E[1]);A?v&&E&&(this._oldSelectionStart&&this._oldSelectionEnd&&v[0]===this._oldSelectionStart[0]&&v[1]===this._oldSelectionStart[1]&&E[0]===this._oldSelectionEnd[0]&&E[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(v,E,A)):this._oldHasSelection&&this._fireOnSelectionChange(v,E,A)}_fireOnSelectionChange(v,E,A){this._oldSelectionStart=v,this._oldSelectionEnd=E,this._oldHasSelection=A,this._onSelectionChange.fire()}_handleBufferActivate(v){this.clearSelection(),this._trimListener.dispose(),this._trimListener=v.activeBuffer.lines.onTrim(E=>this._handleTrim(E))}_convertViewportColToCharacterIndex(v,E){let A=E;for(let x=0;E>=x;x++){let O=v.loadCell(x,this._workCell).getChars().length;this._workCell.getWidth()===0?A--:O>1&&E!==x&&(A+=O-1)}return A}setSelection(v,E,A){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[v,E],this._model.selectionStartLength=A,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(v){this._isClickInSelection(v)||(this._selectWordAtCursor(v,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(v,E,A=!0,x=!0){if(v[0]>=this._bufferService.cols)return;let O=this._bufferService.buffer,I=O.lines.get(v[1]);if(!I)return;let k=O.translateBufferLineToString(v[1],!1),B=this._convertViewportColToCharacterIndex(I,v[0]),z=B,Z=v[0]-B,$=0,D=0,M=0,T=0;if(k.charAt(B)===" "){for(;B>0&&k.charAt(B-1)===" ";)B--;for(;z<k.length&&k.charAt(z+1)===" ";)z++}else{let G=v[0],ee=v[0];I.getWidth(G)===0&&($++,G--),I.getWidth(ee)===2&&(D++,ee++);let ie=I.getString(ee).length;for(ie>1&&(T+=ie-1,z+=ie-1);G>0&&B>0&&!this._isCharWordSeparator(I.loadCell(G-1,this._workCell));){I.loadCell(G-1,this._workCell);let N=this._workCell.getChars().length;this._workCell.getWidth()===0?($++,G--):N>1&&(M+=N-1,B-=N-1),B--,G--}for(;ee<I.length&&z+1<k.length&&!this._isCharWordSeparator(I.loadCell(ee+1,this._workCell));){I.loadCell(ee+1,this._workCell);let N=this._workCell.getChars().length;this._workCell.getWidth()===2?(D++,ee++):N>1&&(T+=N-1,z+=N-1),z++,ee++}}z++;let R=B+Z-$+M,F=Math.min(this._bufferService.cols,z-B+$+D-M-T);if(E||k.slice(B,z).trim()!==""){if(A&&R===0&&I.getCodePoint(0)!==32){let G=O.lines.get(v[1]-1);if(G&&I.isWrapped&&G.getCodePoint(this._bufferService.cols-1)!==32){let ee=this._getWordAt([this._bufferService.cols-1,v[1]-1],!1,!0,!1);if(ee){let ie=this._bufferService.cols-ee.start;R-=ie,F+=ie}}}if(x&&R+F===this._bufferService.cols&&I.getCodePoint(this._bufferService.cols-1)!==32){let G=O.lines.get(v[1]+1);if(G?.isWrapped&&G.getCodePoint(0)!==32){let ee=this._getWordAt([0,v[1]+1],!1,!1,!0);ee&&(F+=ee.length)}}return{start:R,length:F}}}_selectWordAt(v,E){let A=this._getWordAt(v,E);if(A){for(;A.start<0;)A.start+=this._bufferService.cols,v[1]--;this._model.selectionStart=[A.start,v[1]],this._model.selectionStartLength=A.length}}_selectToWordAt(v){let E=this._getWordAt(v,!0);if(E){let A=v[1];for(;E.start<0;)E.start+=this._bufferService.cols,A--;if(!this._model.areSelectionValuesReversed())for(;E.start+E.length>this._bufferService.cols;)E.length-=this._bufferService.cols,A++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?E.start:E.start+E.length,A]}}_isCharWordSeparator(v){return v.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(v.getChars())>=0}_selectLineAt(v){let E=this._bufferService.buffer.getWrappedRangeForLine(v),A={start:{x:0,y:E.first},end:{x:this._bufferService.cols-1,y:E.last}};this._model.selectionStart=[0,E.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,u.getRangeLength)(A,this._bufferService.cols)}};i.SelectionService=S=a([c(3,_.IBufferService),c(4,_.ICoreService),c(5,y.IMouseService),c(6,_.IOptionsService),c(7,y.IRenderService),c(8,y.ICoreBrowserService)],S)},4725:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ILinkProviderService=i.IThemeService=i.ICharacterJoinerService=i.ISelectionService=i.IRenderService=i.IMouseService=i.ICoreBrowserService=i.ICharSizeService=void 0;let a=o(8343);i.ICharSizeService=(0,a.createDecorator)("CharSizeService"),i.ICoreBrowserService=(0,a.createDecorator)("CoreBrowserService"),i.IMouseService=(0,a.createDecorator)("MouseService"),i.IRenderService=(0,a.createDecorator)("RenderService"),i.ISelectionService=(0,a.createDecorator)("SelectionService"),i.ICharacterJoinerService=(0,a.createDecorator)("CharacterJoinerService"),i.IThemeService=(0,a.createDecorator)("ThemeService"),i.ILinkProviderService=(0,a.createDecorator)("LinkProviderService")},6731:function(s,i,o){var a=this&&this.__decorate||function(S,v,E,A){var x,O=arguments.length,I=O<3?v:A===null?A=Object.getOwnPropertyDescriptor(v,E):A;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")I=Reflect.decorate(S,v,E,A);else for(var k=S.length-1;k>=0;k--)(x=S[k])&&(I=(O<3?x(I):O>3?x(v,E,I):x(v,E))||I);return O>3&&I&&Object.defineProperty(v,E,I),I},c=this&&this.__param||function(S,v){return function(E,A){v(E,A,S)}};Object.defineProperty(i,"__esModule",{value:!0}),i.ThemeService=i.DEFAULT_ANSI_COLORS=void 0;let l=o(7239),p=o(8055),m=o(8460),y=o(844),g=o(2585),d=p.css.toColor("#ffffff"),f=p.css.toColor("#000000"),u=p.css.toColor("#ffffff"),h=p.css.toColor("#000000"),_={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};i.DEFAULT_ANSI_COLORS=Object.freeze((()=>{let S=[p.css.toColor("#2e3436"),p.css.toColor("#cc0000"),p.css.toColor("#4e9a06"),p.css.toColor("#c4a000"),p.css.toColor("#3465a4"),p.css.toColor("#75507b"),p.css.toColor("#06989a"),p.css.toColor("#d3d7cf"),p.css.toColor("#555753"),p.css.toColor("#ef2929"),p.css.toColor("#8ae234"),p.css.toColor("#fce94f"),p.css.toColor("#729fcf"),p.css.toColor("#ad7fa8"),p.css.toColor("#34e2e2"),p.css.toColor("#eeeeec")],v=[0,95,135,175,215,255];for(let E=0;E<216;E++){let A=v[E/36%6|0],x=v[E/6%6|0],O=v[E%6];S.push({css:p.channels.toCss(A,x,O),rgba:p.channels.toRgba(A,x,O)})}for(let E=0;E<24;E++){let A=8+10*E;S.push({css:p.channels.toCss(A,A,A),rgba:p.channels.toRgba(A,A,A)})}return S})());let b=i.ThemeService=class extends y.Disposable{get colors(){return this._colors}constructor(S){super(),this._optionsService=S,this._contrastCache=new l.ColorContrastCache,this._halfContrastCache=new l.ColorContrastCache,this._onChangeColors=this.register(new m.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:d,background:f,cursor:u,cursorAccent:h,selectionForeground:void 0,selectionBackgroundTransparent:_,selectionBackgroundOpaque:p.color.blend(f,_),selectionInactiveBackgroundTransparent:_,selectionInactiveBackgroundOpaque:p.color.blend(f,_),ansi:i.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(S={}){let v=this._colors;if(v.foreground=C(S.foreground,d),v.background=C(S.background,f),v.cursor=C(S.cursor,u),v.cursorAccent=C(S.cursorAccent,h),v.selectionBackgroundTransparent=C(S.selectionBackground,_),v.selectionBackgroundOpaque=p.color.blend(v.background,v.selectionBackgroundTransparent),v.selectionInactiveBackgroundTransparent=C(S.selectionInactiveBackground,v.selectionBackgroundTransparent),v.selectionInactiveBackgroundOpaque=p.color.blend(v.background,v.selectionInactiveBackgroundTransparent),v.selectionForeground=S.selectionForeground?C(S.selectionForeground,p.NULL_COLOR):void 0,v.selectionForeground===p.NULL_COLOR&&(v.selectionForeground=void 0),p.color.isOpaque(v.selectionBackgroundTransparent)&&(v.selectionBackgroundTransparent=p.color.opacity(v.selectionBackgroundTransparent,.3)),p.color.isOpaque(v.selectionInactiveBackgroundTransparent)&&(v.selectionInactiveBackgroundTransparent=p.color.opacity(v.selectionInactiveBackgroundTransparent,.3)),v.ansi=i.DEFAULT_ANSI_COLORS.slice(),v.ansi[0]=C(S.black,i.DEFAULT_ANSI_COLORS[0]),v.ansi[1]=C(S.red,i.DEFAULT_ANSI_COLORS[1]),v.ansi[2]=C(S.green,i.DEFAULT_ANSI_COLORS[2]),v.ansi[3]=C(S.yellow,i.DEFAULT_ANSI_COLORS[3]),v.ansi[4]=C(S.blue,i.DEFAULT_ANSI_COLORS[4]),v.ansi[5]=C(S.magenta,i.DEFAULT_ANSI_COLORS[5]),v.ansi[6]=C(S.cyan,i.DEFAULT_ANSI_COLORS[6]),v.ansi[7]=C(S.white,i.DEFAULT_ANSI_COLORS[7]),v.ansi[8]=C(S.brightBlack,i.DEFAULT_ANSI_COLORS[8]),v.ansi[9]=C(S.brightRed,i.DEFAULT_ANSI_COLORS[9]),v.ansi[10]=C(S.brightGreen,i.DEFAULT_ANSI_COLORS[10]),v.ansi[11]=C(S.brightYellow,i.DEFAULT_ANSI_COLORS[11]),v.ansi[12]=C(S.brightBlue,i.DEFAULT_ANSI_COLORS[12]),v.ansi[13]=C(S.brightMagenta,i.DEFAULT_ANSI_COLORS[13]),v.ansi[14]=C(S.brightCyan,i.DEFAULT_ANSI_COLORS[14]),v.ansi[15]=C(S.brightWhite,i.DEFAULT_ANSI_COLORS[15]),S.extendedAnsi){let E=Math.min(v.ansi.length-16,S.extendedAnsi.length);for(let A=0;A<E;A++)v.ansi[A+16]=C(S.extendedAnsi[A],i.DEFAULT_ANSI_COLORS[A+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(S){this._restoreColor(S),this._onChangeColors.fire(this.colors)}_restoreColor(S){if(S!==void 0)switch(S){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[S]=this._restoreColors.ansi[S]}else for(let v=0;v<this._restoreColors.ansi.length;++v)this._colors.ansi[v]=this._restoreColors.ansi[v]}modifyColors(S){S(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function C(S,v){if(S!==void 0)try{return p.css.toColor(S)}catch{}return v}i.ThemeService=b=a([c(0,g.IOptionsService)],b)},6349:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CircularList=void 0;let a=o(8460),c=o(844);class l extends c.Disposable{constructor(m){super(),this._maxLength=m,this.onDeleteEmitter=this.register(new a.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new a.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new a.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(m){if(this._maxLength===m)return;let y=new Array(m);for(let g=0;g<Math.min(m,this.length);g++)y[g]=this._array[this._getCyclicIndex(g)];this._array=y,this._maxLength=m,this._startIndex=0}get length(){return this._length}set length(m){if(m>this._length)for(let y=this._length;y<m;y++)this._array[y]=void 0;this._length=m}get(m){return this._array[this._getCyclicIndex(m)]}set(m,y){this._array[this._getCyclicIndex(m)]=y}push(m){this._array[this._getCyclicIndex(this._length)]=m,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(m,y,...g){if(y){for(let d=m;d<this._length-y;d++)this._array[this._getCyclicIndex(d)]=this._array[this._getCyclicIndex(d+y)];this._length-=y,this.onDeleteEmitter.fire({index:m,amount:y})}for(let d=this._length-1;d>=m;d--)this._array[this._getCyclicIndex(d+g.length)]=this._array[this._getCyclicIndex(d)];for(let d=0;d<g.length;d++)this._array[this._getCyclicIndex(m+d)]=g[d];if(g.length&&this.onInsertEmitter.fire({index:m,amount:g.length}),this._length+g.length>this._maxLength){let d=this._length+g.length-this._maxLength;this._startIndex+=d,this._length=this._maxLength,this.onTrimEmitter.fire(d)}else this._length+=g.length}trimStart(m){m>this._length&&(m=this._length),this._startIndex+=m,this._length-=m,this.onTrimEmitter.fire(m)}shiftElements(m,y,g){if(!(y<=0)){if(m<0||m>=this._length)throw new Error("start argument out of range");if(m+g<0)throw new Error("Cannot shift elements in list beyond index 0");if(g>0){for(let f=y-1;f>=0;f--)this.set(m+f+g,this.get(m+f));let d=m+y+g-this._length;if(d>0)for(this._length+=d;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let d=0;d<y;d++)this.set(m+d+g,this.get(m+d))}}_getCyclicIndex(m){return(this._startIndex+m)%this._maxLength}}i.CircularList=l},1439:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.clone=void 0,i.clone=function o(a,c=5){if(typeof a!="object")return a;let l=Array.isArray(a)?[]:{};for(let p in a)l[p]=c<=1?a[p]:a[p]&&o(a[p],c-1);return l}},8055:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.contrastRatio=i.toPaddedHex=i.rgba=i.rgb=i.css=i.color=i.channels=i.NULL_COLOR=void 0;let o=0,a=0,c=0,l=0;var p,m,y,g,d;function f(h){let _=h.toString(16);return _.length<2?"0"+_:_}function u(h,_){return h<_?(_+.05)/(h+.05):(h+.05)/(_+.05)}i.NULL_COLOR={css:"#00000000",rgba:0},(function(h){h.toCss=function(_,b,C,S){return S!==void 0?`#${f(_)}${f(b)}${f(C)}${f(S)}`:`#${f(_)}${f(b)}${f(C)}`},h.toRgba=function(_,b,C,S=255){return(_<<24|b<<16|C<<8|S)>>>0},h.toColor=function(_,b,C,S){return{css:h.toCss(_,b,C,S),rgba:h.toRgba(_,b,C,S)}}})(p||(i.channels=p={})),(function(h){function _(b,C){return l=Math.round(255*C),[o,a,c]=d.toChannels(b.rgba),{css:p.toCss(o,a,c,l),rgba:p.toRgba(o,a,c,l)}}h.blend=function(b,C){if(l=(255&C.rgba)/255,l===1)return{css:C.css,rgba:C.rgba};let S=C.rgba>>24&255,v=C.rgba>>16&255,E=C.rgba>>8&255,A=b.rgba>>24&255,x=b.rgba>>16&255,O=b.rgba>>8&255;return o=A+Math.round((S-A)*l),a=x+Math.round((v-x)*l),c=O+Math.round((E-O)*l),{css:p.toCss(o,a,c),rgba:p.toRgba(o,a,c)}},h.isOpaque=function(b){return(255&b.rgba)==255},h.ensureContrastRatio=function(b,C,S){let v=d.ensureContrastRatio(b.rgba,C.rgba,S);if(v)return p.toColor(v>>24&255,v>>16&255,v>>8&255)},h.opaque=function(b){let C=(255|b.rgba)>>>0;return[o,a,c]=d.toChannels(C),{css:p.toCss(o,a,c),rgba:C}},h.opacity=_,h.multiplyOpacity=function(b,C){return l=255&b.rgba,_(b,l*C/255)},h.toColorRGB=function(b){return[b.rgba>>24&255,b.rgba>>16&255,b.rgba>>8&255]}})(m||(i.color=m={})),(function(h){let _,b;try{let C=document.createElement("canvas");C.width=1,C.height=1;let S=C.getContext("2d",{willReadFrequently:!0});S&&(_=S,_.globalCompositeOperation="copy",b=_.createLinearGradient(0,0,1,1))}catch{}h.toColor=function(C){if(C.match(/#[\da-f]{3,8}/i))switch(C.length){case 4:return o=parseInt(C.slice(1,2).repeat(2),16),a=parseInt(C.slice(2,3).repeat(2),16),c=parseInt(C.slice(3,4).repeat(2),16),p.toColor(o,a,c);case 5:return o=parseInt(C.slice(1,2).repeat(2),16),a=parseInt(C.slice(2,3).repeat(2),16),c=parseInt(C.slice(3,4).repeat(2),16),l=parseInt(C.slice(4,5).repeat(2),16),p.toColor(o,a,c,l);case 7:return{css:C,rgba:(parseInt(C.slice(1),16)<<8|255)>>>0};case 9:return{css:C,rgba:parseInt(C.slice(1),16)>>>0}}let S=C.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(S)return o=parseInt(S[1]),a=parseInt(S[2]),c=parseInt(S[3]),l=Math.round(255*(S[5]===void 0?1:parseFloat(S[5]))),p.toColor(o,a,c,l);if(!_||!b)throw new Error("css.toColor: Unsupported css format");if(_.fillStyle=b,_.fillStyle=C,typeof _.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(_.fillRect(0,0,1,1),[o,a,c,l]=_.getImageData(0,0,1,1).data,l!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:p.toRgba(o,a,c,l),css:C}}})(y||(i.css=y={})),(function(h){function _(b,C,S){let v=b/255,E=C/255,A=S/255;return .2126*(v<=.03928?v/12.92:Math.pow((v+.055)/1.055,2.4))+.7152*(E<=.03928?E/12.92:Math.pow((E+.055)/1.055,2.4))+.0722*(A<=.03928?A/12.92:Math.pow((A+.055)/1.055,2.4))}h.relativeLuminance=function(b){return _(b>>16&255,b>>8&255,255&b)},h.relativeLuminance2=_})(g||(i.rgb=g={})),(function(h){function _(C,S,v){let E=C>>24&255,A=C>>16&255,x=C>>8&255,O=S>>24&255,I=S>>16&255,k=S>>8&255,B=u(g.relativeLuminance2(O,I,k),g.relativeLuminance2(E,A,x));for(;B<v&&(O>0||I>0||k>0);)O-=Math.max(0,Math.ceil(.1*O)),I-=Math.max(0,Math.ceil(.1*I)),k-=Math.max(0,Math.ceil(.1*k)),B=u(g.relativeLuminance2(O,I,k),g.relativeLuminance2(E,A,x));return(O<<24|I<<16|k<<8|255)>>>0}function b(C,S,v){let E=C>>24&255,A=C>>16&255,x=C>>8&255,O=S>>24&255,I=S>>16&255,k=S>>8&255,B=u(g.relativeLuminance2(O,I,k),g.relativeLuminance2(E,A,x));for(;B<v&&(O<255||I<255||k<255);)O=Math.min(255,O+Math.ceil(.1*(255-O))),I=Math.min(255,I+Math.ceil(.1*(255-I))),k=Math.min(255,k+Math.ceil(.1*(255-k))),B=u(g.relativeLuminance2(O,I,k),g.relativeLuminance2(E,A,x));return(O<<24|I<<16|k<<8|255)>>>0}h.blend=function(C,S){if(l=(255&S)/255,l===1)return S;let v=S>>24&255,E=S>>16&255,A=S>>8&255,x=C>>24&255,O=C>>16&255,I=C>>8&255;return o=x+Math.round((v-x)*l),a=O+Math.round((E-O)*l),c=I+Math.round((A-I)*l),p.toRgba(o,a,c)},h.ensureContrastRatio=function(C,S,v){let E=g.relativeLuminance(C>>8),A=g.relativeLuminance(S>>8);if(u(E,A)<v){if(A<E){let I=_(C,S,v),k=u(E,g.relativeLuminance(I>>8));if(k<v){let B=b(C,S,v);return k>u(E,g.relativeLuminance(B>>8))?I:B}return I}let x=b(C,S,v),O=u(E,g.relativeLuminance(x>>8));if(O<v){let I=_(C,S,v);return O>u(E,g.relativeLuminance(I>>8))?x:I}return x}},h.reduceLuminance=_,h.increaseLuminance=b,h.toChannels=function(C){return[C>>24&255,C>>16&255,C>>8&255,255&C]}})(d||(i.rgba=d={})),i.toPaddedHex=f,i.contrastRatio=u},8969:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CoreTerminal=void 0;let a=o(844),c=o(2585),l=o(4348),p=o(7866),m=o(744),y=o(7302),g=o(6975),d=o(8460),f=o(1753),u=o(1480),h=o(7994),_=o(9282),b=o(5435),C=o(5981),S=o(2660),v=!1;class E extends a.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new d.EventEmitter),this._onScroll.event(x=>{this._onScrollApi?.fire(x.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(x){for(let O in x)this.optionsService.options[O]=x[O]}constructor(x){super(),this._windowsWrappingHeuristics=this.register(new a.MutableDisposable),this._onBinary=this.register(new d.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new d.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new d.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new d.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new d.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new d.EventEmitter),this._instantiationService=new l.InstantiationService,this.optionsService=this.register(new y.OptionsService(x)),this._instantiationService.setService(c.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(m.BufferService)),this._instantiationService.setService(c.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(p.LogService)),this._instantiationService.setService(c.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(g.CoreService)),this._instantiationService.setService(c.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(f.CoreMouseService)),this._instantiationService.setService(c.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(u.UnicodeService)),this._instantiationService.setService(c.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(h.CharsetService),this._instantiationService.setService(c.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(S.OscLinkService),this._instantiationService.setService(c.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new b.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,d.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,d.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,d.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,d.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(O=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(O=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new C.WriteBuffer((O,I)=>this._inputHandler.parse(O,I))),this.register((0,d.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(x,O){this._writeBuffer.write(x,O)}writeSync(x,O){this._logService.logLevel<=c.LogLevelEnum.WARN&&!v&&(this._logService.warn("writeSync is unreliable and will be removed soon."),v=!0),this._writeBuffer.writeSync(x,O)}input(x,O=!0){this.coreService.triggerDataEvent(x,O)}resize(x,O){isNaN(x)||isNaN(O)||(x=Math.max(x,m.MINIMUM_COLS),O=Math.max(O,m.MINIMUM_ROWS),this._bufferService.resize(x,O))}scroll(x,O=!1){this._bufferService.scroll(x,O)}scrollLines(x,O,I){this._bufferService.scrollLines(x,O,I)}scrollPages(x){this.scrollLines(x*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(x){let O=x-this._bufferService.buffer.ydisp;O!==0&&this.scrollLines(O)}registerEscHandler(x,O){return this._inputHandler.registerEscHandler(x,O)}registerDcsHandler(x,O){return this._inputHandler.registerDcsHandler(x,O)}registerCsiHandler(x,O){return this._inputHandler.registerCsiHandler(x,O)}registerOscHandler(x,O){return this._inputHandler.registerOscHandler(x,O)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let x=!1,O=this.optionsService.rawOptions.windowsPty;O&&O.buildNumber!==void 0&&O.buildNumber!==void 0?x=O.backend==="conpty"&&O.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(x=!0),x?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){let x=[];x.push(this.onLineFeed(_.updateWindowsModeWrappedState.bind(null,this._bufferService))),x.push(this.registerCsiHandler({final:"H"},()=>((0,_.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,a.toDisposable)(()=>{for(let O of x)O.dispose()})}}}i.CoreTerminal=E},8460:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.runAndSubscribe=i.forwardEvent=i.EventEmitter=void 0,i.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=o=>(this._listeners.push(o),{dispose:()=>{if(!this._disposed){for(let a=0;a<this._listeners.length;a++)if(this._listeners[a]===o)return void this._listeners.splice(a,1)}}})),this._event}fire(o,a){let c=[];for(let l=0;l<this._listeners.length;l++)c.push(this._listeners[l]);for(let l=0;l<c.length;l++)c[l].call(void 0,o,a)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},i.forwardEvent=function(o,a){return o(c=>a.fire(c))},i.runAndSubscribe=function(o,a){return a(void 0),o(c=>a(c))}},5435:function(s,i,o){var a=this&&this.__decorate||function($,D,M,T){var R,F=arguments.length,G=F<3?D:T===null?T=Object.getOwnPropertyDescriptor(D,M):T;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")G=Reflect.decorate($,D,M,T);else for(var ee=$.length-1;ee>=0;ee--)(R=$[ee])&&(G=(F<3?R(G):F>3?R(D,M,G):R(D,M))||G);return F>3&&G&&Object.defineProperty(D,M,G),G},c=this&&this.__param||function($,D){return function(M,T){D(M,T,$)}};Object.defineProperty(i,"__esModule",{value:!0}),i.InputHandler=i.WindowsOptionsReportType=void 0;let l=o(2584),p=o(7116),m=o(2015),y=o(844),g=o(482),d=o(8437),f=o(8460),u=o(643),h=o(511),_=o(3734),b=o(2585),C=o(1480),S=o(6242),v=o(6351),E=o(5941),A={"(":0,")":1,"*":2,"+":3,"-":1,".":2},x=131072;function O($,D){if($>24)return D.setWinLines||!1;switch($){case 1:return!!D.restoreWin;case 2:return!!D.minimizeWin;case 3:return!!D.setWinPosition;case 4:return!!D.setWinSizePixels;case 5:return!!D.raiseWin;case 6:return!!D.lowerWin;case 7:return!!D.refreshWin;case 8:return!!D.setWinSizeChars;case 9:return!!D.maximizeWin;case 10:return!!D.fullscreenWin;case 11:return!!D.getWinState;case 13:return!!D.getWinPosition;case 14:return!!D.getWinSizePixels;case 15:return!!D.getScreenSizePixels;case 16:return!!D.getCellSizePixels;case 18:return!!D.getWinSizeChars;case 19:return!!D.getScreenSizeChars;case 20:return!!D.getIconTitle;case 21:return!!D.getWinTitle;case 22:return!!D.pushTitle;case 23:return!!D.popTitle;case 24:return!!D.setWinLines}return!1}var I;(function($){$[$.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",$[$.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(I||(i.WindowsOptionsReportType=I={}));let k=0;class B extends y.Disposable{getAttrData(){return this._curAttrData}constructor(D,M,T,R,F,G,ee,ie,N=new m.EscapeSequenceParser){super(),this._bufferService=D,this._charsetService=M,this._coreService=T,this._logService=R,this._optionsService=F,this._oscLinkService=G,this._coreMouseService=ee,this._unicodeService=ie,this._parser=N,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new g.StringToUtf32,this._utf8Decoder=new g.Utf8ToUtf32,this._workCell=new h.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=d.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=d.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new f.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new f.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new f.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new f.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new f.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new f.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new f.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new f.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new f.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new f.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new f.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new f.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new f.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new z(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(w=>this._activeBuffer=w.activeBuffer)),this._parser.setCsiHandlerFallback((w,L)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(w),params:L.toArray()})}),this._parser.setEscHandlerFallback(w=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(w)})}),this._parser.setExecuteHandlerFallback(w=>{this._logService.debug("Unknown EXECUTE code: ",{code:w})}),this._parser.setOscHandlerFallback((w,L,j)=>{this._logService.debug("Unknown OSC code: ",{identifier:w,action:L,data:j})}),this._parser.setDcsHandlerFallback((w,L,j)=>{L==="HOOK"&&(j=j.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(w),action:L,payload:j})}),this._parser.setPrintHandler((w,L,j)=>this.print(w,L,j)),this._parser.registerCsiHandler({final:"@"},w=>this.insertChars(w)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},w=>this.scrollLeft(w)),this._parser.registerCsiHandler({final:"A"},w=>this.cursorUp(w)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},w=>this.scrollRight(w)),this._parser.registerCsiHandler({final:"B"},w=>this.cursorDown(w)),this._parser.registerCsiHandler({final:"C"},w=>this.cursorForward(w)),this._parser.registerCsiHandler({final:"D"},w=>this.cursorBackward(w)),this._parser.registerCsiHandler({final:"E"},w=>this.cursorNextLine(w)),this._parser.registerCsiHandler({final:"F"},w=>this.cursorPrecedingLine(w)),this._parser.registerCsiHandler({final:"G"},w=>this.cursorCharAbsolute(w)),this._parser.registerCsiHandler({final:"H"},w=>this.cursorPosition(w)),this._parser.registerCsiHandler({final:"I"},w=>this.cursorForwardTab(w)),this._parser.registerCsiHandler({final:"J"},w=>this.eraseInDisplay(w,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},w=>this.eraseInDisplay(w,!0)),this._parser.registerCsiHandler({final:"K"},w=>this.eraseInLine(w,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},w=>this.eraseInLine(w,!0)),this._parser.registerCsiHandler({final:"L"},w=>this.insertLines(w)),this._parser.registerCsiHandler({final:"M"},w=>this.deleteLines(w)),this._parser.registerCsiHandler({final:"P"},w=>this.deleteChars(w)),this._parser.registerCsiHandler({final:"S"},w=>this.scrollUp(w)),this._parser.registerCsiHandler({final:"T"},w=>this.scrollDown(w)),this._parser.registerCsiHandler({final:"X"},w=>this.eraseChars(w)),this._parser.registerCsiHandler({final:"Z"},w=>this.cursorBackwardTab(w)),this._parser.registerCsiHandler({final:"`"},w=>this.charPosAbsolute(w)),this._parser.registerCsiHandler({final:"a"},w=>this.hPositionRelative(w)),this._parser.registerCsiHandler({final:"b"},w=>this.repeatPrecedingCharacter(w)),this._parser.registerCsiHandler({final:"c"},w=>this.sendDeviceAttributesPrimary(w)),this._parser.registerCsiHandler({prefix:">",final:"c"},w=>this.sendDeviceAttributesSecondary(w)),this._parser.registerCsiHandler({final:"d"},w=>this.linePosAbsolute(w)),this._parser.registerCsiHandler({final:"e"},w=>this.vPositionRelative(w)),this._parser.registerCsiHandler({final:"f"},w=>this.hVPosition(w)),this._parser.registerCsiHandler({final:"g"},w=>this.tabClear(w)),this._parser.registerCsiHandler({final:"h"},w=>this.setMode(w)),this._parser.registerCsiHandler({prefix:"?",final:"h"},w=>this.setModePrivate(w)),this._parser.registerCsiHandler({final:"l"},w=>this.resetMode(w)),this._parser.registerCsiHandler({prefix:"?",final:"l"},w=>this.resetModePrivate(w)),this._parser.registerCsiHandler({final:"m"},w=>this.charAttributes(w)),this._parser.registerCsiHandler({final:"n"},w=>this.deviceStatus(w)),this._parser.registerCsiHandler({prefix:"?",final:"n"},w=>this.deviceStatusPrivate(w)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},w=>this.softReset(w)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},w=>this.setCursorStyle(w)),this._parser.registerCsiHandler({final:"r"},w=>this.setScrollRegion(w)),this._parser.registerCsiHandler({final:"s"},w=>this.saveCursor(w)),this._parser.registerCsiHandler({final:"t"},w=>this.windowOptions(w)),this._parser.registerCsiHandler({final:"u"},w=>this.restoreCursor(w)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},w=>this.insertColumns(w)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},w=>this.deleteColumns(w)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},w=>this.selectProtected(w)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},w=>this.requestMode(w,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},w=>this.requestMode(w,!1)),this._parser.setExecuteHandler(l.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(l.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(l.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(l.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(l.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(l.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(l.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(l.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(l.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(l.C1.IND,()=>this.index()),this._parser.setExecuteHandler(l.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(l.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new S.OscHandler(w=>(this.setTitle(w),this.setIconName(w),!0))),this._parser.registerOscHandler(1,new S.OscHandler(w=>this.setIconName(w))),this._parser.registerOscHandler(2,new S.OscHandler(w=>this.setTitle(w))),this._parser.registerOscHandler(4,new S.OscHandler(w=>this.setOrReportIndexedColor(w))),this._parser.registerOscHandler(8,new S.OscHandler(w=>this.setHyperlink(w))),this._parser.registerOscHandler(10,new S.OscHandler(w=>this.setOrReportFgColor(w))),this._parser.registerOscHandler(11,new S.OscHandler(w=>this.setOrReportBgColor(w))),this._parser.registerOscHandler(12,new S.OscHandler(w=>this.setOrReportCursorColor(w))),this._parser.registerOscHandler(104,new S.OscHandler(w=>this.restoreIndexedColor(w))),this._parser.registerOscHandler(110,new S.OscHandler(w=>this.restoreFgColor(w))),this._parser.registerOscHandler(111,new S.OscHandler(w=>this.restoreBgColor(w))),this._parser.registerOscHandler(112,new S.OscHandler(w=>this.restoreCursorColor(w))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(let w in p.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:w},()=>this.selectCharset("("+w)),this._parser.registerEscHandler({intermediates:")",final:w},()=>this.selectCharset(")"+w)),this._parser.registerEscHandler({intermediates:"*",final:w},()=>this.selectCharset("*"+w)),this._parser.registerEscHandler({intermediates:"+",final:w},()=>this.selectCharset("+"+w)),this._parser.registerEscHandler({intermediates:"-",final:w},()=>this.selectCharset("-"+w)),this._parser.registerEscHandler({intermediates:".",final:w},()=>this.selectCharset("."+w)),this._parser.registerEscHandler({intermediates:"/",final:w},()=>this.selectCharset("/"+w));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(w=>(this._logService.error("Parsing error: ",w),w)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new v.DcsHandler((w,L)=>this.requestStatusString(w,L)))}_preserveStack(D,M,T,R){this._parseStack.paused=!0,this._parseStack.cursorStartX=D,this._parseStack.cursorStartY=M,this._parseStack.decodedLength=T,this._parseStack.position=R}_logSlowResolvingAsync(D){this._logService.logLevel<=b.LogLevelEnum.WARN&&Promise.race([D,new Promise((M,T)=>setTimeout(()=>T("#SLOW_TIMEOUT"),5e3))]).catch(M=>{if(M!=="#SLOW_TIMEOUT")throw M;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(D,M){let T,R=this._activeBuffer.x,F=this._activeBuffer.y,G=0,ee=this._parseStack.paused;if(ee){if(T=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,M))return this._logSlowResolvingAsync(T),T;R=this._parseStack.cursorStartX,F=this._parseStack.cursorStartY,this._parseStack.paused=!1,D.length>x&&(G=this._parseStack.position+x)}if(this._logService.logLevel<=b.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof D=="string"?` "${D}"`:` "${Array.prototype.map.call(D,w=>String.fromCharCode(w)).join("")}"`),typeof D=="string"?D.split("").map(w=>w.charCodeAt(0)):D),this._parseBuffer.length<D.length&&this._parseBuffer.length<x&&(this._parseBuffer=new Uint32Array(Math.min(D.length,x))),ee||this._dirtyRowTracker.clearRange(),D.length>x)for(let w=G;w<D.length;w+=x){let L=w+x<D.length?w+x:D.length,j=typeof D=="string"?this._stringDecoder.decode(D.substring(w,L),this._parseBuffer):this._utf8Decoder.decode(D.subarray(w,L),this._parseBuffer);if(T=this._parser.parse(this._parseBuffer,j))return this._preserveStack(R,F,j,w),this._logSlowResolvingAsync(T),T}else if(!ee){let w=typeof D=="string"?this._stringDecoder.decode(D,this._parseBuffer):this._utf8Decoder.decode(D,this._parseBuffer);if(T=this._parser.parse(this._parseBuffer,w))return this._preserveStack(R,F,w,0),this._logSlowResolvingAsync(T),T}this._activeBuffer.x===R&&this._activeBuffer.y===F||this._onCursorMove.fire();let ie=this._dirtyRowTracker.end+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp),N=this._dirtyRowTracker.start+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp);N<this._bufferService.rows&&this._onRequestRefreshRows.fire(Math.min(N,this._bufferService.rows-1),Math.min(ie,this._bufferService.rows-1))}print(D,M,T){let R,F,G=this._charsetService.charset,ee=this._optionsService.rawOptions.screenReaderMode,ie=this._bufferService.cols,N=this._coreService.decPrivateModes.wraparound,w=this._coreService.modes.insertMode,L=this._curAttrData,j=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&T-M>0&&j.getWidth(this._activeBuffer.x-1)===2&&j.setCellFromCodepoint(this._activeBuffer.x-1,0,1,L);let K=this._parser.precedingJoinState;for(let q=M;q<T;++q){if(R=D[q],R<127&&G){let it=G[String.fromCharCode(R)];it&&(R=it.charCodeAt(0))}let me=this._unicodeService.charProperties(R,K);F=C.UnicodeService.extractWidth(me);let Te=C.UnicodeService.extractShouldJoin(me),Ae=Te?C.UnicodeService.extractWidth(K):0;if(K=me,ee&&this._onA11yChar.fire((0,g.stringFromCodePoint)(R)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),this._activeBuffer.x+F-Ae>ie){if(N){let it=j,ae=this._activeBuffer.x-Ae;for(this._activeBuffer.x=Ae,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),j=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y),Ae>0&&j instanceof d.BufferLine&&j.copyCellsFrom(it,ae,0,Ae,!1);ae<ie;)it.setCellFromCodepoint(ae++,0,1,L)}else if(this._activeBuffer.x=ie-1,F===2)continue}if(Te&&this._activeBuffer.x){let it=j.getWidth(this._activeBuffer.x-1)?1:2;j.addCodepointToCell(this._activeBuffer.x-it,R,F);for(let ae=F-Ae;--ae>=0;)j.setCellFromCodepoint(this._activeBuffer.x++,0,0,L)}else if(w&&(j.insertCells(this._activeBuffer.x,F-Ae,this._activeBuffer.getNullCell(L)),j.getWidth(ie-1)===2&&j.setCellFromCodepoint(ie-1,u.NULL_CELL_CODE,u.NULL_CELL_WIDTH,L)),j.setCellFromCodepoint(this._activeBuffer.x++,R,F,L),F>0)for(;--F;)j.setCellFromCodepoint(this._activeBuffer.x++,0,0,L)}this._parser.precedingJoinState=K,this._activeBuffer.x<ie&&T-M>0&&j.getWidth(this._activeBuffer.x)===0&&!j.hasContent(this._activeBuffer.x)&&j.setCellFromCodepoint(this._activeBuffer.x,0,1,L),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(D,M){return D.final!=="t"||D.prefix||D.intermediates?this._parser.registerCsiHandler(D,M):this._parser.registerCsiHandler(D,T=>!O(T.params[0],this._optionsService.rawOptions.windowOptions)||M(T))}registerDcsHandler(D,M){return this._parser.registerDcsHandler(D,new v.DcsHandler(M))}registerEscHandler(D,M){return this._parser.registerEscHandler(D,M)}registerOscHandler(D,M){return this._parser.registerOscHandler(D,new S.OscHandler(M))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)?.isWrapped){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;let D=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);D.hasWidth(this._activeBuffer.x)&&!D.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let D=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-D),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(D=this._bufferService.cols-1){this._activeBuffer.x=Math.min(D,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(D,M){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=D,this._activeBuffer.y=this._activeBuffer.scrollTop+M):(this._activeBuffer.x=D,this._activeBuffer.y=M),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(D,M){this._restrictCursor(),this._setCursor(this._activeBuffer.x+D,this._activeBuffer.y+M)}cursorUp(D){let M=this._activeBuffer.y-this._activeBuffer.scrollTop;return M>=0?this._moveCursor(0,-Math.min(M,D.params[0]||1)):this._moveCursor(0,-(D.params[0]||1)),!0}cursorDown(D){let M=this._activeBuffer.scrollBottom-this._activeBuffer.y;return M>=0?this._moveCursor(0,Math.min(M,D.params[0]||1)):this._moveCursor(0,D.params[0]||1),!0}cursorForward(D){return this._moveCursor(D.params[0]||1,0),!0}cursorBackward(D){return this._moveCursor(-(D.params[0]||1),0),!0}cursorNextLine(D){return this.cursorDown(D),this._activeBuffer.x=0,!0}cursorPrecedingLine(D){return this.cursorUp(D),this._activeBuffer.x=0,!0}cursorCharAbsolute(D){return this._setCursor((D.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(D){return this._setCursor(D.length>=2?(D.params[1]||1)-1:0,(D.params[0]||1)-1),!0}charPosAbsolute(D){return this._setCursor((D.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(D){return this._moveCursor(D.params[0]||1,0),!0}linePosAbsolute(D){return this._setCursor(this._activeBuffer.x,(D.params[0]||1)-1),!0}vPositionRelative(D){return this._moveCursor(0,D.params[0]||1),!0}hVPosition(D){return this.cursorPosition(D),!0}tabClear(D){let M=D.params[0];return M===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:M===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(D){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let M=D.params[0]||1;for(;M--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(D){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let M=D.params[0]||1;for(;M--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(D){let M=D.params[0];return M===1&&(this._curAttrData.bg|=536870912),M!==2&&M!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(D,M,T,R=!1,F=!1){let G=this._activeBuffer.lines.get(this._activeBuffer.ybase+D);G.replaceCells(M,T,this._activeBuffer.getNullCell(this._eraseAttrData()),F),R&&(G.isWrapped=!1)}_resetBufferLine(D,M=!1){let T=this._activeBuffer.lines.get(this._activeBuffer.ybase+D);T&&(T.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),M),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+D),T.isWrapped=!1)}eraseInDisplay(D,M=!1){let T;switch(this._restrictCursor(this._bufferService.cols),D.params[0]){case 0:for(T=this._activeBuffer.y,this._dirtyRowTracker.markDirty(T),this._eraseInBufferLine(T++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,M);T<this._bufferService.rows;T++)this._resetBufferLine(T,M);this._dirtyRowTracker.markDirty(T);break;case 1:for(T=this._activeBuffer.y,this._dirtyRowTracker.markDirty(T),this._eraseInBufferLine(T,0,this._activeBuffer.x+1,!0,M),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(T+1).isWrapped=!1);T--;)this._resetBufferLine(T,M);this._dirtyRowTracker.markDirty(0);break;case 2:for(T=this._bufferService.rows,this._dirtyRowTracker.markDirty(T-1);T--;)this._resetBufferLine(T,M);this._dirtyRowTracker.markDirty(0);break;case 3:let R=this._activeBuffer.lines.length-this._bufferService.rows;R>0&&(this._activeBuffer.lines.trimStart(R),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-R,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-R,0),this._onScroll.fire(0))}return!0}eraseInLine(D,M=!1){switch(this._restrictCursor(this._bufferService.cols),D.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,M);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,M);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,M)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(D){this._restrictCursor();let M=D.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let T=this._activeBuffer.ybase+this._activeBuffer.y,R=this._bufferService.rows-1-this._activeBuffer.scrollBottom,F=this._bufferService.rows-1+this._activeBuffer.ybase-R+1;for(;M--;)this._activeBuffer.lines.splice(F-1,1),this._activeBuffer.lines.splice(T,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(D){this._restrictCursor();let M=D.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let T=this._activeBuffer.ybase+this._activeBuffer.y,R;for(R=this._bufferService.rows-1-this._activeBuffer.scrollBottom,R=this._bufferService.rows-1+this._activeBuffer.ybase-R;M--;)this._activeBuffer.lines.splice(T,1),this._activeBuffer.lines.splice(R,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(D){this._restrictCursor();let M=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return M&&(M.insertCells(this._activeBuffer.x,D.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(D){this._restrictCursor();let M=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return M&&(M.deleteCells(this._activeBuffer.x,D.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(D){let M=D.params[0]||1;for(;M--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(D){let M=D.params[0]||1;for(;M--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(d.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(D){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let M=D.params[0]||1;for(let T=this._activeBuffer.scrollTop;T<=this._activeBuffer.scrollBottom;++T){let R=this._activeBuffer.lines.get(this._activeBuffer.ybase+T);R.deleteCells(0,M,this._activeBuffer.getNullCell(this._eraseAttrData())),R.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(D){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let M=D.params[0]||1;for(let T=this._activeBuffer.scrollTop;T<=this._activeBuffer.scrollBottom;++T){let R=this._activeBuffer.lines.get(this._activeBuffer.ybase+T);R.insertCells(0,M,this._activeBuffer.getNullCell(this._eraseAttrData())),R.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(D){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let M=D.params[0]||1;for(let T=this._activeBuffer.scrollTop;T<=this._activeBuffer.scrollBottom;++T){let R=this._activeBuffer.lines.get(this._activeBuffer.ybase+T);R.insertCells(this._activeBuffer.x,M,this._activeBuffer.getNullCell(this._eraseAttrData())),R.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(D){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let M=D.params[0]||1;for(let T=this._activeBuffer.scrollTop;T<=this._activeBuffer.scrollBottom;++T){let R=this._activeBuffer.lines.get(this._activeBuffer.ybase+T);R.deleteCells(this._activeBuffer.x,M,this._activeBuffer.getNullCell(this._eraseAttrData())),R.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(D){this._restrictCursor();let M=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return M&&(M.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(D.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(D){let M=this._parser.precedingJoinState;if(!M)return!0;let T=D.params[0]||1,R=C.UnicodeService.extractWidth(M),F=this._activeBuffer.x-R,G=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).getString(F),ee=new Uint32Array(G.length*T),ie=0;for(let w=0;w<G.length;){let L=G.codePointAt(w)||0;ee[ie++]=L,w+=L>65535?2:1}let N=ie;for(let w=1;w<T;++w)ee.copyWithin(N,0,ie),N+=ie;return this.print(ee,0,N),!0}sendDeviceAttributesPrimary(D){return D.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(l.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(l.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(D){return D.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(l.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(l.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(D.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(l.C0.ESC+"[>83;40003;0c")),!0}_is(D){return(this._optionsService.rawOptions.termName+"").indexOf(D)===0}setMode(D){for(let M=0;M<D.length;M++)switch(D.params[M]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(D){for(let M=0;M<D.length;M++)switch(D.params[M]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,p.DEFAULT_CHARSET),this._charsetService.setgCharset(1,p.DEFAULT_CHARSET),this._charsetService.setgCharset(2,p.DEFAULT_CHARSET),this._charsetService.setgCharset(3,p.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(D){for(let M=0;M<D.length;M++)switch(D.params[M]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(D){for(let M=0;M<D.length;M++)switch(D.params[M]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),D.params[M]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(D,M){let T=this._coreService.decPrivateModes,{activeProtocol:R,activeEncoding:F}=this._coreMouseService,G=this._coreService,{buffers:ee,cols:ie}=this._bufferService,{active:N,alt:w}=ee,L=this._optionsService.rawOptions,j=Te=>Te?1:2,K=D.params[0];return q=K,me=M?K===2?4:K===4?j(G.modes.insertMode):K===12?3:K===20?j(L.convertEol):0:K===1?j(T.applicationCursorKeys):K===3?L.windowOptions.setWinLines?ie===80?2:ie===132?1:0:0:K===6?j(T.origin):K===7?j(T.wraparound):K===8?3:K===9?j(R==="X10"):K===12?j(L.cursorBlink):K===25?j(!G.isCursorHidden):K===45?j(T.reverseWraparound):K===66?j(T.applicationKeypad):K===67?4:K===1e3?j(R==="VT200"):K===1002?j(R==="DRAG"):K===1003?j(R==="ANY"):K===1004?j(T.sendFocus):K===1005?4:K===1006?j(F==="SGR"):K===1015?4:K===1016?j(F==="SGR_PIXELS"):K===1048?1:K===47||K===1047||K===1049?j(N===w):K===2004?j(T.bracketedPasteMode):0,G.triggerDataEvent(`${l.C0.ESC}[${M?"":"?"}${q};${me}$y`),!0;var q,me}_updateAttrColor(D,M,T,R,F){return M===2?(D|=50331648,D&=-16777216,D|=_.AttributeData.fromColorRGB([T,R,F])):M===5&&(D&=-50331904,D|=33554432|255&T),D}_extractColor(D,M,T){let R=[0,0,-1,0,0,0],F=0,G=0;do{if(R[G+F]=D.params[M+G],D.hasSubParams(M+G)){let ee=D.getSubParams(M+G),ie=0;do R[1]===5&&(F=1),R[G+ie+1+F]=ee[ie];while(++ie<ee.length&&ie+G+1+F<R.length);break}if(R[1]===5&&G+F>=2||R[1]===2&&G+F>=5)break;R[1]&&(F=1)}while(++G+M<D.length&&G+F<R.length);for(let ee=2;ee<R.length;++ee)R[ee]===-1&&(R[ee]=0);switch(R[0]){case 38:T.fg=this._updateAttrColor(T.fg,R[1],R[3],R[4],R[5]);break;case 48:T.bg=this._updateAttrColor(T.bg,R[1],R[3],R[4],R[5]);break;case 58:T.extended=T.extended.clone(),T.extended.underlineColor=this._updateAttrColor(T.extended.underlineColor,R[1],R[3],R[4],R[5])}return G}_processUnderline(D,M){M.extended=M.extended.clone(),(!~D||D>5)&&(D=1),M.extended.underlineStyle=D,M.fg|=268435456,D===0&&(M.fg&=-268435457),M.updateExtended()}_processSGR0(D){D.fg=d.DEFAULT_ATTR_DATA.fg,D.bg=d.DEFAULT_ATTR_DATA.bg,D.extended=D.extended.clone(),D.extended.underlineStyle=0,D.extended.underlineColor&=-67108864,D.updateExtended()}charAttributes(D){if(D.length===1&&D.params[0]===0)return this._processSGR0(this._curAttrData),!0;let M=D.length,T,R=this._curAttrData;for(let F=0;F<M;F++)T=D.params[F],T>=30&&T<=37?(R.fg&=-50331904,R.fg|=16777216|T-30):T>=40&&T<=47?(R.bg&=-50331904,R.bg|=16777216|T-40):T>=90&&T<=97?(R.fg&=-50331904,R.fg|=16777224|T-90):T>=100&&T<=107?(R.bg&=-50331904,R.bg|=16777224|T-100):T===0?this._processSGR0(R):T===1?R.fg|=134217728:T===3?R.bg|=67108864:T===4?(R.fg|=268435456,this._processUnderline(D.hasSubParams(F)?D.getSubParams(F)[0]:1,R)):T===5?R.fg|=536870912:T===7?R.fg|=67108864:T===8?R.fg|=1073741824:T===9?R.fg|=2147483648:T===2?R.bg|=134217728:T===21?this._processUnderline(2,R):T===22?(R.fg&=-134217729,R.bg&=-134217729):T===23?R.bg&=-67108865:T===24?(R.fg&=-268435457,this._processUnderline(0,R)):T===25?R.fg&=-536870913:T===27?R.fg&=-67108865:T===28?R.fg&=-1073741825:T===29?R.fg&=2147483647:T===39?(R.fg&=-67108864,R.fg|=16777215&d.DEFAULT_ATTR_DATA.fg):T===49?(R.bg&=-67108864,R.bg|=16777215&d.DEFAULT_ATTR_DATA.bg):T===38||T===48||T===58?F+=this._extractColor(D,F,R):T===53?R.bg|=1073741824:T===55?R.bg&=-1073741825:T===59?(R.extended=R.extended.clone(),R.extended.underlineColor=-1,R.updateExtended()):T===100?(R.fg&=-67108864,R.fg|=16777215&d.DEFAULT_ATTR_DATA.fg,R.bg&=-67108864,R.bg|=16777215&d.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",T);return!0}deviceStatus(D){switch(D.params[0]){case 5:this._coreService.triggerDataEvent(`${l.C0.ESC}[0n`);break;case 6:let M=this._activeBuffer.y+1,T=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${l.C0.ESC}[${M};${T}R`)}return!0}deviceStatusPrivate(D){if(D.params[0]===6){let M=this._activeBuffer.y+1,T=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${l.C0.ESC}[?${M};${T}R`)}return!0}softReset(D){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=d.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(D){let M=D.params[0]||1;switch(M){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}let T=M%2==1;return this._optionsService.options.cursorBlink=T,!0}setScrollRegion(D){let M=D.params[0]||1,T;return(D.length<2||(T=D.params[1])>this._bufferService.rows||T===0)&&(T=this._bufferService.rows),T>M&&(this._activeBuffer.scrollTop=M-1,this._activeBuffer.scrollBottom=T-1,this._setCursor(0,0)),!0}windowOptions(D){if(!O(D.params[0],this._optionsService.rawOptions.windowOptions))return!0;let M=D.length>1?D.params[1]:0;switch(D.params[0]){case 14:M!==2&&this._onRequestWindowsOptionsReport.fire(I.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(I.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${l.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:M!==0&&M!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),M!==0&&M!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:M!==0&&M!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),M!==0&&M!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(D){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(D){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(D){return this._windowTitle=D,this._onTitleChange.fire(D),!0}setIconName(D){return this._iconName=D,!0}setOrReportIndexedColor(D){let M=[],T=D.split(";");for(;T.length>1;){let R=T.shift(),F=T.shift();if(/^\d+$/.exec(R)){let G=parseInt(R);if(Z(G))if(F==="?")M.push({type:0,index:G});else{let ee=(0,E.parseColor)(F);ee&&M.push({type:1,index:G,color:ee})}}}return M.length&&this._onColor.fire(M),!0}setHyperlink(D){let M=D.split(";");return!(M.length<2)&&(M[1]?this._createHyperlink(M[0],M[1]):!M[0]&&this._finishHyperlink())}_createHyperlink(D,M){this._getCurrentLinkId()&&this._finishHyperlink();let T=D.split(":"),R,F=T.findIndex(G=>G.startsWith("id="));return F!==-1&&(R=T[F].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:R,uri:M}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(D,M){let T=D.split(";");for(let R=0;R<T.length&&!(M>=this._specialColors.length);++R,++M)if(T[R]==="?")this._onColor.fire([{type:0,index:this._specialColors[M]}]);else{let F=(0,E.parseColor)(T[R]);F&&this._onColor.fire([{type:1,index:this._specialColors[M],color:F}])}return!0}setOrReportFgColor(D){return this._setOrReportSpecialColor(D,0)}setOrReportBgColor(D){return this._setOrReportSpecialColor(D,1)}setOrReportCursorColor(D){return this._setOrReportSpecialColor(D,2)}restoreIndexedColor(D){if(!D)return this._onColor.fire([{type:2}]),!0;let M=[],T=D.split(";");for(let R=0;R<T.length;++R)if(/^\d+$/.exec(T[R])){let F=parseInt(T[R]);Z(F)&&M.push({type:2,index:F})}return M.length&&this._onColor.fire(M),!0}restoreFgColor(D){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(D){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(D){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,p.DEFAULT_CHARSET),!0}selectCharset(D){return D.length!==2?(this.selectDefaultCharset(),!0):(D[0]==="/"||this._charsetService.setgCharset(A[D[0]],p.CHARSETS[D[1]]||p.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){let D=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,D,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=d.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=d.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(D){return this._charsetService.setgLevel(D),!0}screenAlignmentPattern(){let D=new h.CellData;D.content=4194373,D.fg=this._curAttrData.fg,D.bg=this._curAttrData.bg,this._setCursor(0,0);for(let M=0;M<this._bufferService.rows;++M){let T=this._activeBuffer.ybase+this._activeBuffer.y+M,R=this._activeBuffer.lines.get(T);R&&(R.fill(D),R.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(D,M){let T=this._bufferService.buffer,R=this._optionsService.rawOptions;return(F=>(this._coreService.triggerDataEvent(`${l.C0.ESC}${F}${l.C0.ESC}\\`),!0))(D==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:D==='"p'?'P1$r61;1"p':D==="r"?`P1$r${T.scrollTop+1};${T.scrollBottom+1}r`:D==="m"?"P1$r0m":D===" q"?`P1$r${{block:2,underline:4,bar:6}[R.cursorStyle]-(R.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(D,M){this._dirtyRowTracker.markRangeDirty(D,M)}}i.InputHandler=B;let z=class{constructor($){this._bufferService=$,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty($){$<this.start?this.start=$:$>this.end&&(this.end=$)}markRangeDirty($,D){$>D&&(k=$,$=D,D=k),$<this.start&&(this.start=$),D>this.end&&(this.end=D)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function Z($){return 0<=$&&$<256}z=a([c(0,b.IBufferService)],z)},844:(s,i)=>{function o(a){for(let c of a)c.dispose();a.length=0}Object.defineProperty(i,"__esModule",{value:!0}),i.getDisposeArrayDisposable=i.disposeArray=i.toDisposable=i.MutableDisposable=i.Disposable=void 0,i.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(let a of this._disposables)a.dispose();this._disposables.length=0}register(a){return this._disposables.push(a),a}unregister(a){let c=this._disposables.indexOf(a);c!==-1&&this._disposables.splice(c,1)}},i.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(a){this._isDisposed||a===this._value||(this._value?.dispose(),this._value=a)}clear(){this.value=void 0}dispose(){this._isDisposed=!0,this._value?.dispose(),this._value=void 0}},i.toDisposable=function(a){return{dispose:a}},i.disposeArray=o,i.getDisposeArrayDisposable=function(a){return{dispose:()=>o(a)}}},1505:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.FourKeyMap=i.TwoKeyMap=void 0;class o{constructor(){this._data={}}set(c,l,p){this._data[c]||(this._data[c]={}),this._data[c][l]=p}get(c,l){return this._data[c]?this._data[c][l]:void 0}clear(){this._data={}}}i.TwoKeyMap=o,i.FourKeyMap=class{constructor(){this._data=new o}set(a,c,l,p,m){this._data.get(a,c)||this._data.set(a,c,new o),this._data.get(a,c).set(l,p,m)}get(a,c,l,p){return this._data.get(a,c)?.get(l,p)}clear(){this._data.clear()}}},6114:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.isChromeOS=i.isLinux=i.isWindows=i.isIphone=i.isIpad=i.isMac=i.getSafariVersion=i.isSafari=i.isLegacyEdge=i.isFirefox=i.isNode=void 0,i.isNode=typeof process<"u"&&"title"in process;let o=i.isNode?"node":navigator.userAgent,a=i.isNode?"node":navigator.platform;i.isFirefox=o.includes("Firefox"),i.isLegacyEdge=o.includes("Edge"),i.isSafari=/^((?!chrome|android).)*safari/i.test(o),i.getSafariVersion=function(){if(!i.isSafari)return 0;let c=o.match(/Version\/(\d+)/);return c===null||c.length<2?0:parseInt(c[1])},i.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(a),i.isIpad=a==="iPad",i.isIphone=a==="iPhone",i.isWindows=["Windows","Win16","Win32","WinCE"].includes(a),i.isLinux=a.indexOf("Linux")>=0,i.isChromeOS=/\bCrOS\b/.test(o)},6106:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SortedList=void 0;let o=0;i.SortedList=class{constructor(a){this._getKey=a,this._array=[]}clear(){this._array.length=0}insert(a){this._array.length!==0?(o=this._search(this._getKey(a)),this._array.splice(o,0,a)):this._array.push(a)}delete(a){if(this._array.length===0)return!1;let c=this._getKey(a);if(c===void 0||(o=this._search(c),o===-1)||this._getKey(this._array[o])!==c)return!1;do if(this._array[o]===a)return this._array.splice(o,1),!0;while(++o<this._array.length&&this._getKey(this._array[o])===c);return!1}*getKeyIterator(a){if(this._array.length!==0&&(o=this._search(a),!(o<0||o>=this._array.length)&&this._getKey(this._array[o])===a))do yield this._array[o];while(++o<this._array.length&&this._getKey(this._array[o])===a)}forEachByKey(a,c){if(this._array.length!==0&&(o=this._search(a),!(o<0||o>=this._array.length)&&this._getKey(this._array[o])===a))do c(this._array[o]);while(++o<this._array.length&&this._getKey(this._array[o])===a)}values(){return[...this._array].values()}_search(a){let c=0,l=this._array.length-1;for(;l>=c;){let p=c+l>>1,m=this._getKey(this._array[p]);if(m>a)l=p-1;else{if(!(m<a)){for(;p>0&&this._getKey(this._array[p-1])===a;)p--;return p}c=p+1}}return c}}},7226:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DebouncedIdleTask=i.IdleTaskQueue=i.PriorityTaskQueue=void 0;let a=o(6114);class c{constructor(){this._tasks=[],this._i=0}enqueue(m){this._tasks.push(m),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(m){this._idleCallback=void 0;let y=0,g=0,d=m.timeRemaining(),f=0;for(;this._i<this._tasks.length;){if(y=Date.now(),this._tasks[this._i]()||this._i++,y=Math.max(1,Date.now()-y),g=Math.max(y,g),f=m.timeRemaining(),1.5*g>f)return d-y<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(d-y))}ms`),void this._start();d=f}this.clear()}}class l extends c{_requestCallback(m){return setTimeout(()=>m(this._createDeadline(16)))}_cancelCallback(m){clearTimeout(m)}_createDeadline(m){let y=Date.now()+m;return{timeRemaining:()=>Math.max(0,y-Date.now())}}}i.PriorityTaskQueue=l,i.IdleTaskQueue=!a.isNode&&"requestIdleCallback"in window?class extends c{_requestCallback(p){return requestIdleCallback(p)}_cancelCallback(p){cancelIdleCallback(p)}}:l,i.DebouncedIdleTask=class{constructor(){this._queue=new i.IdleTaskQueue}set(p){this._queue.clear(),this._queue.enqueue(p)}flush(){this._queue.flush()}}},9282:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.updateWindowsModeWrappedState=void 0;let a=o(643);i.updateWindowsModeWrappedState=function(c){let l=c.buffer.lines.get(c.buffer.ybase+c.buffer.y-1),p=l?.get(c.cols-1),m=c.buffer.lines.get(c.buffer.ybase+c.buffer.y);m&&p&&(m.isWrapped=p[a.CHAR_DATA_CODE_INDEX]!==a.NULL_CELL_CODE&&p[a.CHAR_DATA_CODE_INDEX]!==a.WHITESPACE_CELL_CODE)}},3734:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ExtendedAttrs=i.AttributeData=void 0;class o{constructor(){this.fg=0,this.bg=0,this.extended=new a}static toColorRGB(l){return[l>>>16&255,l>>>8&255,255&l]}static fromColorRGB(l){return(255&l[0])<<16|(255&l[1])<<8|255&l[2]}clone(){let l=new o;return l.fg=this.fg,l.bg=this.bg,l.extended=this.extended.clone(),l}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}}i.AttributeData=o;class a{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(l){this._ext=l}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(l){this._ext&=-469762049,this._ext|=l<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(l){this._ext&=-67108864,this._ext|=67108863&l}get urlId(){return this._urlId}set urlId(l){this._urlId=l}get underlineVariantOffset(){let l=(3758096384&this._ext)>>29;return l<0?4294967288^l:l}set underlineVariantOffset(l){this._ext&=536870911,this._ext|=l<<29&3758096384}constructor(l=0,p=0){this._ext=0,this._urlId=0,this._ext=l,this._urlId=p}clone(){return new a(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}i.ExtendedAttrs=a},9092:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Buffer=i.MAX_BUFFER_SIZE=void 0;let a=o(6349),c=o(7226),l=o(3734),p=o(8437),m=o(4634),y=o(511),g=o(643),d=o(4863),f=o(7116);i.MAX_BUFFER_SIZE=4294967295,i.Buffer=class{constructor(u,h,_){this._hasScrollback=u,this._optionsService=h,this._bufferService=_,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=p.DEFAULT_ATTR_DATA.clone(),this.savedCharset=f.DEFAULT_CHARSET,this.markers=[],this._nullCell=y.CellData.fromCharData([0,g.NULL_CELL_CHAR,g.NULL_CELL_WIDTH,g.NULL_CELL_CODE]),this._whitespaceCell=y.CellData.fromCharData([0,g.WHITESPACE_CELL_CHAR,g.WHITESPACE_CELL_WIDTH,g.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new c.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new a.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(u){return u?(this._nullCell.fg=u.fg,this._nullCell.bg=u.bg,this._nullCell.extended=u.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new l.ExtendedAttrs),this._nullCell}getWhitespaceCell(u){return u?(this._whitespaceCell.fg=u.fg,this._whitespaceCell.bg=u.bg,this._whitespaceCell.extended=u.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new l.ExtendedAttrs),this._whitespaceCell}getBlankLine(u,h){return new p.BufferLine(this._bufferService.cols,this.getNullCell(u),h)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){let u=this.ybase+this.y-this.ydisp;return u>=0&&u<this._rows}_getCorrectBufferLength(u){if(!this._hasScrollback)return u;let h=u+this._optionsService.rawOptions.scrollback;return h>i.MAX_BUFFER_SIZE?i.MAX_BUFFER_SIZE:h}fillViewportRows(u){if(this.lines.length===0){u===void 0&&(u=p.DEFAULT_ATTR_DATA);let h=this._rows;for(;h--;)this.lines.push(this.getBlankLine(u))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new a.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(u,h){let _=this.getNullCell(p.DEFAULT_ATTR_DATA),b=0,C=this._getCorrectBufferLength(h);if(C>this.lines.maxLength&&(this.lines.maxLength=C),this.lines.length>0){if(this._cols<u)for(let v=0;v<this.lines.length;v++)b+=+this.lines.get(v).resize(u,_);let S=0;if(this._rows<h)for(let v=this._rows;v<h;v++)this.lines.length<h+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new p.BufferLine(u,_)):this.ybase>0&&this.lines.length<=this.ybase+this.y+S+1?(this.ybase--,S++,this.ydisp>0&&this.ydisp--):this.lines.push(new p.BufferLine(u,_)));else for(let v=this._rows;v>h;v--)this.lines.length>h+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(C<this.lines.maxLength){let v=this.lines.length-C;v>0&&(this.lines.trimStart(v),this.ybase=Math.max(this.ybase-v,0),this.ydisp=Math.max(this.ydisp-v,0),this.savedY=Math.max(this.savedY-v,0)),this.lines.maxLength=C}this.x=Math.min(this.x,u-1),this.y=Math.min(this.y,h-1),S&&(this.y+=S),this.savedX=Math.min(this.savedX,u-1),this.scrollTop=0}if(this.scrollBottom=h-1,this._isReflowEnabled&&(this._reflow(u,h),this._cols>u))for(let S=0;S<this.lines.length;S++)b+=+this.lines.get(S).resize(u,_);this._cols=u,this._rows=h,this._memoryCleanupQueue.clear(),b>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let u=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,u=!1);let h=0;for(;this._memoryCleanupPosition<this.lines.length;)if(h+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),h>100)return!0;return u}get _isReflowEnabled(){let u=this._optionsService.rawOptions.windowsPty;return u&&u.buildNumber?this._hasScrollback&&u.backend==="conpty"&&u.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(u,h){this._cols!==u&&(u>this._cols?this._reflowLarger(u,h):this._reflowSmaller(u,h))}_reflowLarger(u,h){let _=(0,m.reflowLargerGetLinesToRemove)(this.lines,this._cols,u,this.ybase+this.y,this.getNullCell(p.DEFAULT_ATTR_DATA));if(_.length>0){let b=(0,m.reflowLargerCreateNewLayout)(this.lines,_);(0,m.reflowLargerApplyNewLayout)(this.lines,b.layout),this._reflowLargerAdjustViewport(u,h,b.countRemoved)}}_reflowLargerAdjustViewport(u,h,_){let b=this.getNullCell(p.DEFAULT_ATTR_DATA),C=_;for(;C-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<h&&this.lines.push(new p.BufferLine(u,b))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-_,0)}_reflowSmaller(u,h){let _=this.getNullCell(p.DEFAULT_ATTR_DATA),b=[],C=0;for(let S=this.lines.length-1;S>=0;S--){let v=this.lines.get(S);if(!v||!v.isWrapped&&v.getTrimmedLength()<=u)continue;let E=[v];for(;v.isWrapped&&S>0;)v=this.lines.get(--S),E.unshift(v);let A=this.ybase+this.y;if(A>=S&&A<S+E.length)continue;let x=E[E.length-1].getTrimmedLength(),O=(0,m.reflowSmallerGetNewLineLengths)(E,this._cols,u),I=O.length-E.length,k;k=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+I):Math.max(0,this.lines.length-this.lines.maxLength+I);let B=[];for(let T=0;T<I;T++){let R=this.getBlankLine(p.DEFAULT_ATTR_DATA,!0);B.push(R)}B.length>0&&(b.push({start:S+E.length+C,newLines:B}),C+=B.length),E.push(...B);let z=O.length-1,Z=O[z];Z===0&&(z--,Z=O[z]);let $=E.length-I-1,D=x;for(;$>=0;){let T=Math.min(D,Z);if(E[z]===void 0)break;if(E[z].copyCellsFrom(E[$],D-T,Z-T,T,!0),Z-=T,Z===0&&(z--,Z=O[z]),D-=T,D===0){$--;let R=Math.max($,0);D=(0,m.getWrappedLineTrimmedLength)(E,R,this._cols)}}for(let T=0;T<E.length;T++)O[T]<u&&E[T].setCell(O[T],_);let M=I-k;for(;M-- >0;)this.ybase===0?this.y<h-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+C)-h&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+I,this.ybase+h-1)}if(b.length>0){let S=[],v=[];for(let z=0;z<this.lines.length;z++)v.push(this.lines.get(z));let E=this.lines.length,A=E-1,x=0,O=b[x];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+C);let I=0;for(let z=Math.min(this.lines.maxLength-1,E+C-1);z>=0;z--)if(O&&O.start>A+I){for(let Z=O.newLines.length-1;Z>=0;Z--)this.lines.set(z--,O.newLines[Z]);z++,S.push({index:A+1,amount:O.newLines.length}),I+=O.newLines.length,O=b[++x]}else this.lines.set(z,v[A--]);let k=0;for(let z=S.length-1;z>=0;z--)S[z].index+=k,this.lines.onInsertEmitter.fire(S[z]),k+=S[z].amount;let B=Math.max(0,E+C-this.lines.maxLength);B>0&&this.lines.onTrimEmitter.fire(B)}}translateBufferLineToString(u,h,_=0,b){let C=this.lines.get(u);return C?C.translateToString(h,_,b):""}getWrappedRangeForLine(u){let h=u,_=u;for(;h>0&&this.lines.get(h).isWrapped;)h--;for(;_+1<this.lines.length&&this.lines.get(_+1).isWrapped;)_++;return{first:h,last:_}}setupTabStops(u){for(u!=null?this.tabs[u]||(u=this.prevStop(u)):(this.tabs={},u=0);u<this._cols;u+=this._optionsService.rawOptions.tabStopWidth)this.tabs[u]=!0}prevStop(u){for(u==null&&(u=this.x);!this.tabs[--u]&&u>0;);return u>=this._cols?this._cols-1:u<0?0:u}nextStop(u){for(u==null&&(u=this.x);!this.tabs[++u]&&u<this._cols;);return u>=this._cols?this._cols-1:u<0?0:u}clearMarkers(u){this._isClearing=!0;for(let h=0;h<this.markers.length;h++)this.markers[h].line===u&&(this.markers[h].dispose(),this.markers.splice(h--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let u=0;u<this.markers.length;u++)this.markers[u].dispose(),this.markers.splice(u--,1);this._isClearing=!1}addMarker(u){let h=new d.Marker(u);return this.markers.push(h),h.register(this.lines.onTrim(_=>{h.line-=_,h.line<0&&h.dispose()})),h.register(this.lines.onInsert(_=>{h.line>=_.index&&(h.line+=_.amount)})),h.register(this.lines.onDelete(_=>{h.line>=_.index&&h.line<_.index+_.amount&&h.dispose(),h.line>_.index&&(h.line-=_.amount)})),h.register(h.onDispose(()=>this._removeMarker(h))),h}_removeMarker(u){this._isClearing||this.markers.splice(this.markers.indexOf(u),1)}}},8437:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferLine=i.DEFAULT_ATTR_DATA=void 0;let a=o(3734),c=o(511),l=o(643),p=o(482);i.DEFAULT_ATTR_DATA=Object.freeze(new a.AttributeData);let m=0;class y{constructor(d,f,u=!1){this.isWrapped=u,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*d);let h=f||c.CellData.fromCharData([0,l.NULL_CELL_CHAR,l.NULL_CELL_WIDTH,l.NULL_CELL_CODE]);for(let _=0;_<d;++_)this.setCell(_,h);this.length=d}get(d){let f=this._data[3*d+0],u=2097151&f;return[this._data[3*d+1],2097152&f?this._combined[d]:u?(0,p.stringFromCodePoint)(u):"",f>>22,2097152&f?this._combined[d].charCodeAt(this._combined[d].length-1):u]}set(d,f){this._data[3*d+1]=f[l.CHAR_DATA_ATTR_INDEX],f[l.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[d]=f[1],this._data[3*d+0]=2097152|d|f[l.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*d+0]=f[l.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|f[l.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(d){return this._data[3*d+0]>>22}hasWidth(d){return 12582912&this._data[3*d+0]}getFg(d){return this._data[3*d+1]}getBg(d){return this._data[3*d+2]}hasContent(d){return 4194303&this._data[3*d+0]}getCodePoint(d){let f=this._data[3*d+0];return 2097152&f?this._combined[d].charCodeAt(this._combined[d].length-1):2097151&f}isCombined(d){return 2097152&this._data[3*d+0]}getString(d){let f=this._data[3*d+0];return 2097152&f?this._combined[d]:2097151&f?(0,p.stringFromCodePoint)(2097151&f):""}isProtected(d){return 536870912&this._data[3*d+2]}loadCell(d,f){return m=3*d,f.content=this._data[m+0],f.fg=this._data[m+1],f.bg=this._data[m+2],2097152&f.content&&(f.combinedData=this._combined[d]),268435456&f.bg&&(f.extended=this._extendedAttrs[d]),f}setCell(d,f){2097152&f.content&&(this._combined[d]=f.combinedData),268435456&f.bg&&(this._extendedAttrs[d]=f.extended),this._data[3*d+0]=f.content,this._data[3*d+1]=f.fg,this._data[3*d+2]=f.bg}setCellFromCodepoint(d,f,u,h){268435456&h.bg&&(this._extendedAttrs[d]=h.extended),this._data[3*d+0]=f|u<<22,this._data[3*d+1]=h.fg,this._data[3*d+2]=h.bg}addCodepointToCell(d,f,u){let h=this._data[3*d+0];2097152&h?this._combined[d]+=(0,p.stringFromCodePoint)(f):2097151&h?(this._combined[d]=(0,p.stringFromCodePoint)(2097151&h)+(0,p.stringFromCodePoint)(f),h&=-2097152,h|=2097152):h=f|4194304,u&&(h&=-12582913,h|=u<<22),this._data[3*d+0]=h}insertCells(d,f,u){if((d%=this.length)&&this.getWidth(d-1)===2&&this.setCellFromCodepoint(d-1,0,1,u),f<this.length-d){let h=new c.CellData;for(let _=this.length-d-f-1;_>=0;--_)this.setCell(d+f+_,this.loadCell(d+_,h));for(let _=0;_<f;++_)this.setCell(d+_,u)}else for(let h=d;h<this.length;++h)this.setCell(h,u);this.getWidth(this.length-1)===2&&this.setCellFromCodepoint(this.length-1,0,1,u)}deleteCells(d,f,u){if(d%=this.length,f<this.length-d){let h=new c.CellData;for(let _=0;_<this.length-d-f;++_)this.setCell(d+_,this.loadCell(d+f+_,h));for(let _=this.length-f;_<this.length;++_)this.setCell(_,u)}else for(let h=d;h<this.length;++h)this.setCell(h,u);d&&this.getWidth(d-1)===2&&this.setCellFromCodepoint(d-1,0,1,u),this.getWidth(d)!==0||this.hasContent(d)||this.setCellFromCodepoint(d,0,1,u)}replaceCells(d,f,u,h=!1){if(h)for(d&&this.getWidth(d-1)===2&&!this.isProtected(d-1)&&this.setCellFromCodepoint(d-1,0,1,u),f<this.length&&this.getWidth(f-1)===2&&!this.isProtected(f)&&this.setCellFromCodepoint(f,0,1,u);d<f&&d<this.length;)this.isProtected(d)||this.setCell(d,u),d++;else for(d&&this.getWidth(d-1)===2&&this.setCellFromCodepoint(d-1,0,1,u),f<this.length&&this.getWidth(f-1)===2&&this.setCellFromCodepoint(f,0,1,u);d<f&&d<this.length;)this.setCell(d++,u)}resize(d,f){if(d===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;let u=3*d;if(d>this.length){if(this._data.buffer.byteLength>=4*u)this._data=new Uint32Array(this._data.buffer,0,u);else{let h=new Uint32Array(u);h.set(this._data),this._data=h}for(let h=this.length;h<d;++h)this.setCell(h,f)}else{this._data=this._data.subarray(0,u);let h=Object.keys(this._combined);for(let b=0;b<h.length;b++){let C=parseInt(h[b],10);C>=d&&delete this._combined[C]}let _=Object.keys(this._extendedAttrs);for(let b=0;b<_.length;b++){let C=parseInt(_[b],10);C>=d&&delete this._extendedAttrs[C]}}return this.length=d,4*u*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){let d=new Uint32Array(this._data.length);return d.set(this._data),this._data=d,1}return 0}fill(d,f=!1){if(f)for(let u=0;u<this.length;++u)this.isProtected(u)||this.setCell(u,d);else{this._combined={},this._extendedAttrs={};for(let u=0;u<this.length;++u)this.setCell(u,d)}}copyFrom(d){this.length!==d.length?this._data=new Uint32Array(d._data):this._data.set(d._data),this.length=d.length,this._combined={};for(let f in d._combined)this._combined[f]=d._combined[f];this._extendedAttrs={};for(let f in d._extendedAttrs)this._extendedAttrs[f]=d._extendedAttrs[f];this.isWrapped=d.isWrapped}clone(){let d=new y(0);d._data=new Uint32Array(this._data),d.length=this.length;for(let f in this._combined)d._combined[f]=this._combined[f];for(let f in this._extendedAttrs)d._extendedAttrs[f]=this._extendedAttrs[f];return d.isWrapped=this.isWrapped,d}getTrimmedLength(){for(let d=this.length-1;d>=0;--d)if(4194303&this._data[3*d+0])return d+(this._data[3*d+0]>>22);return 0}getNoBgTrimmedLength(){for(let d=this.length-1;d>=0;--d)if(4194303&this._data[3*d+0]||50331648&this._data[3*d+2])return d+(this._data[3*d+0]>>22);return 0}copyCellsFrom(d,f,u,h,_){let b=d._data;if(_)for(let S=h-1;S>=0;S--){for(let v=0;v<3;v++)this._data[3*(u+S)+v]=b[3*(f+S)+v];268435456&b[3*(f+S)+2]&&(this._extendedAttrs[u+S]=d._extendedAttrs[f+S])}else for(let S=0;S<h;S++){for(let v=0;v<3;v++)this._data[3*(u+S)+v]=b[3*(f+S)+v];268435456&b[3*(f+S)+2]&&(this._extendedAttrs[u+S]=d._extendedAttrs[f+S])}let C=Object.keys(d._combined);for(let S=0;S<C.length;S++){let v=parseInt(C[S],10);v>=f&&(this._combined[v-f+u]=d._combined[v])}}translateToString(d,f,u,h){f=f??0,u=u??this.length,d&&(u=Math.min(u,this.getTrimmedLength())),h&&(h.length=0);let _="";for(;f<u;){let b=this._data[3*f+0],C=2097151&b,S=2097152&b?this._combined[f]:C?(0,p.stringFromCodePoint)(C):l.WHITESPACE_CELL_CHAR;if(_+=S,h)for(let v=0;v<S.length;++v)h.push(f);f+=b>>22||1}return h&&h.push(f),_}}i.BufferLine=y},4841:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.getRangeLength=void 0,i.getRangeLength=function(o,a){if(o.start.y>o.end.y)throw new Error(`Buffer range end (${o.end.x}, ${o.end.y}) cannot be before start (${o.start.x}, ${o.start.y})`);return a*(o.end.y-o.start.y)+(o.end.x-o.start.x+1)}},4634:(s,i)=>{function o(a,c,l){if(c===a.length-1)return a[c].getTrimmedLength();let p=!a[c].hasContent(l-1)&&a[c].getWidth(l-1)===1,m=a[c+1].getWidth(0)===2;return p&&m?l-1:l}Object.defineProperty(i,"__esModule",{value:!0}),i.getWrappedLineTrimmedLength=i.reflowSmallerGetNewLineLengths=i.reflowLargerApplyNewLayout=i.reflowLargerCreateNewLayout=i.reflowLargerGetLinesToRemove=void 0,i.reflowLargerGetLinesToRemove=function(a,c,l,p,m){let y=[];for(let g=0;g<a.length-1;g++){let d=g,f=a.get(++d);if(!f.isWrapped)continue;let u=[a.get(g)];for(;d<a.length&&f.isWrapped;)u.push(f),f=a.get(++d);if(p>=g&&p<d){g+=u.length-1;continue}let h=0,_=o(u,h,c),b=1,C=0;for(;b<u.length;){let v=o(u,b,c),E=v-C,A=l-_,x=Math.min(E,A);u[h].copyCellsFrom(u[b],C,_,x,!1),_+=x,_===l&&(h++,_=0),C+=x,C===v&&(b++,C=0),_===0&&h!==0&&u[h-1].getWidth(l-1)===2&&(u[h].copyCellsFrom(u[h-1],l-1,_++,1,!1),u[h-1].setCell(l-1,m))}u[h].replaceCells(_,l,m);let S=0;for(let v=u.length-1;v>0&&(v>h||u[v].getTrimmedLength()===0);v--)S++;S>0&&(y.push(g+u.length-S),y.push(S)),g+=u.length-1}return y},i.reflowLargerCreateNewLayout=function(a,c){let l=[],p=0,m=c[p],y=0;for(let g=0;g<a.length;g++)if(m===g){let d=c[++p];a.onDeleteEmitter.fire({index:g-y,amount:d}),g+=d-1,y+=d,m=c[++p]}else l.push(g);return{layout:l,countRemoved:y}},i.reflowLargerApplyNewLayout=function(a,c){let l=[];for(let p=0;p<c.length;p++)l.push(a.get(c[p]));for(let p=0;p<l.length;p++)a.set(p,l[p]);a.length=c.length},i.reflowSmallerGetNewLineLengths=function(a,c,l){let p=[],m=a.map((f,u)=>o(a,u,c)).reduce((f,u)=>f+u),y=0,g=0,d=0;for(;d<m;){if(m-d<l){p.push(m-d);break}y+=l;let f=o(a,g,c);y>f&&(y-=f,g++);let u=a[g].getWidth(y-1)===2;u&&y--;let h=u?l-1:l;p.push(h),d+=h}return p},i.getWrappedLineTrimmedLength=o},5295:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferSet=void 0;let a=o(8460),c=o(844),l=o(9092);class p extends c.Disposable{constructor(y,g){super(),this._optionsService=y,this._bufferService=g,this._onBufferActivate=this.register(new a.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new l.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new l.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(y){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(y),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(y,g){this._normal.resize(y,g),this._alt.resize(y,g),this.setupTabStops(y)}setupTabStops(y){this._normal.setupTabStops(y),this._alt.setupTabStops(y)}}i.BufferSet=p},511:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CellData=void 0;let a=o(482),c=o(643),l=o(3734);class p extends l.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new l.ExtendedAttrs,this.combinedData=""}static fromCharData(y){let g=new p;return g.setFromCharData(y),g}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,a.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(y){this.fg=y[c.CHAR_DATA_ATTR_INDEX],this.bg=0;let g=!1;if(y[c.CHAR_DATA_CHAR_INDEX].length>2)g=!0;else if(y[c.CHAR_DATA_CHAR_INDEX].length===2){let d=y[c.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=d&&d<=56319){let f=y[c.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=f&&f<=57343?this.content=1024*(d-55296)+f-56320+65536|y[c.CHAR_DATA_WIDTH_INDEX]<<22:g=!0}else g=!0}else this.content=y[c.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|y[c.CHAR_DATA_WIDTH_INDEX]<<22;g&&(this.combinedData=y[c.CHAR_DATA_CHAR_INDEX],this.content=2097152|y[c.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.CellData=p},643:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WHITESPACE_CELL_CODE=i.WHITESPACE_CELL_WIDTH=i.WHITESPACE_CELL_CHAR=i.NULL_CELL_CODE=i.NULL_CELL_WIDTH=i.NULL_CELL_CHAR=i.CHAR_DATA_CODE_INDEX=i.CHAR_DATA_WIDTH_INDEX=i.CHAR_DATA_CHAR_INDEX=i.CHAR_DATA_ATTR_INDEX=i.DEFAULT_EXT=i.DEFAULT_ATTR=i.DEFAULT_COLOR=void 0,i.DEFAULT_COLOR=0,i.DEFAULT_ATTR=256|i.DEFAULT_COLOR<<9,i.DEFAULT_EXT=0,i.CHAR_DATA_ATTR_INDEX=0,i.CHAR_DATA_CHAR_INDEX=1,i.CHAR_DATA_WIDTH_INDEX=2,i.CHAR_DATA_CODE_INDEX=3,i.NULL_CELL_CHAR="",i.NULL_CELL_WIDTH=1,i.NULL_CELL_CODE=0,i.WHITESPACE_CELL_CHAR=" ",i.WHITESPACE_CELL_WIDTH=1,i.WHITESPACE_CELL_CODE=32},4863:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Marker=void 0;let a=o(8460),c=o(844);class l{get id(){return this._id}constructor(m){this.line=m,this.isDisposed=!1,this._disposables=[],this._id=l._nextId++,this._onDispose=this.register(new a.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,c.disposeArray)(this._disposables),this._disposables.length=0)}register(m){return this._disposables.push(m),m}}i.Marker=l,l._nextId=1},7116:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DEFAULT_CHARSET=i.CHARSETS=void 0,i.CHARSETS={},i.DEFAULT_CHARSET=i.CHARSETS.B,i.CHARSETS[0]={"`":"\u25C6",a:"\u2592",b:"\u2409",c:"\u240C",d:"\u240D",e:"\u240A",f:"\xB0",g:"\xB1",h:"\u2424",i:"\u240B",j:"\u2518",k:"\u2510",l:"\u250C",m:"\u2514",n:"\u253C",o:"\u23BA",p:"\u23BB",q:"\u2500",r:"\u23BC",s:"\u23BD",t:"\u251C",u:"\u2524",v:"\u2534",w:"\u252C",x:"\u2502",y:"\u2264",z:"\u2265","{":"\u03C0","|":"\u2260","}":"\xA3","~":"\xB7"},i.CHARSETS.A={"#":"\xA3"},i.CHARSETS.B=void 0,i.CHARSETS[4]={"#":"\xA3","@":"\xBE","[":"ij","\\":"\xBD","]":"|","{":"\xA8","|":"f","}":"\xBC","~":"\xB4"},i.CHARSETS.C=i.CHARSETS[5]={"[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},i.CHARSETS.R={"#":"\xA3","@":"\xE0","[":"\xB0","\\":"\xE7","]":"\xA7","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xA8"},i.CHARSETS.Q={"@":"\xE0","[":"\xE2","\\":"\xE7","]":"\xEA","^":"\xEE","`":"\xF4","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xFB"},i.CHARSETS.K={"@":"\xA7","[":"\xC4","\\":"\xD6","]":"\xDC","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xDF"},i.CHARSETS.Y={"#":"\xA3","@":"\xA7","[":"\xB0","\\":"\xE7","]":"\xE9","`":"\xF9","{":"\xE0","|":"\xF2","}":"\xE8","~":"\xEC"},i.CHARSETS.E=i.CHARSETS[6]={"@":"\xC4","[":"\xC6","\\":"\xD8","]":"\xC5","^":"\xDC","`":"\xE4","{":"\xE6","|":"\xF8","}":"\xE5","~":"\xFC"},i.CHARSETS.Z={"#":"\xA3","@":"\xA7","[":"\xA1","\\":"\xD1","]":"\xBF","{":"\xB0","|":"\xF1","}":"\xE7"},i.CHARSETS.H=i.CHARSETS[7]={"@":"\xC9","[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},i.CHARSETS["="]={"#":"\xF9","@":"\xE0","[":"\xE9","\\":"\xE7","]":"\xEA","^":"\xEE",_:"\xE8","`":"\xF4","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xFB"}},2584:(s,i)=>{var o,a,c;Object.defineProperty(i,"__esModule",{value:!0}),i.C1_ESCAPED=i.C1=i.C0=void 0,(function(l){l.NUL="\0",l.SOH="",l.STX="",l.ETX="",l.EOT="",l.ENQ="",l.ACK="",l.BEL="\x07",l.BS="\b",l.HT="	",l.LF=`
`,l.VT="\v",l.FF="\f",l.CR="\r",l.SO="",l.SI="",l.DLE="",l.DC1="",l.DC2="",l.DC3="",l.DC4="",l.NAK="",l.SYN="",l.ETB="",l.CAN="",l.EM="",l.SUB="",l.ESC="\x1B",l.FS="",l.GS="",l.RS="",l.US="",l.SP=" ",l.DEL="\x7F"})(o||(i.C0=o={})),(function(l){l.PAD="\x80",l.HOP="\x81",l.BPH="\x82",l.NBH="\x83",l.IND="\x84",l.NEL="\x85",l.SSA="\x86",l.ESA="\x87",l.HTS="\x88",l.HTJ="\x89",l.VTS="\x8A",l.PLD="\x8B",l.PLU="\x8C",l.RI="\x8D",l.SS2="\x8E",l.SS3="\x8F",l.DCS="\x90",l.PU1="\x91",l.PU2="\x92",l.STS="\x93",l.CCH="\x94",l.MW="\x95",l.SPA="\x96",l.EPA="\x97",l.SOS="\x98",l.SGCI="\x99",l.SCI="\x9A",l.CSI="\x9B",l.ST="\x9C",l.OSC="\x9D",l.PM="\x9E",l.APC="\x9F"})(a||(i.C1=a={})),(function(l){l.ST=`${o.ESC}\\`})(c||(i.C1_ESCAPED=c={}))},7399:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.evaluateKeyboardEvent=void 0;let a=o(2584),c={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};i.evaluateKeyboardEvent=function(l,p,m,y){let g={type:0,cancel:!1,key:void 0},d=(l.shiftKey?1:0)|(l.altKey?2:0)|(l.ctrlKey?4:0)|(l.metaKey?8:0);switch(l.keyCode){case 0:l.key==="UIKeyInputUpArrow"?g.key=p?a.C0.ESC+"OA":a.C0.ESC+"[A":l.key==="UIKeyInputLeftArrow"?g.key=p?a.C0.ESC+"OD":a.C0.ESC+"[D":l.key==="UIKeyInputRightArrow"?g.key=p?a.C0.ESC+"OC":a.C0.ESC+"[C":l.key==="UIKeyInputDownArrow"&&(g.key=p?a.C0.ESC+"OB":a.C0.ESC+"[B");break;case 8:g.key=l.ctrlKey?"\b":a.C0.DEL,l.altKey&&(g.key=a.C0.ESC+g.key);break;case 9:if(l.shiftKey){g.key=a.C0.ESC+"[Z";break}g.key=a.C0.HT,g.cancel=!0;break;case 13:g.key=l.altKey?a.C0.ESC+a.C0.CR:a.C0.CR,g.cancel=!0;break;case 27:g.key=a.C0.ESC,l.altKey&&(g.key=a.C0.ESC+a.C0.ESC),g.cancel=!0;break;case 37:if(l.metaKey)break;d?(g.key=a.C0.ESC+"[1;"+(d+1)+"D",g.key===a.C0.ESC+"[1;3D"&&(g.key=a.C0.ESC+(m?"b":"[1;5D"))):g.key=p?a.C0.ESC+"OD":a.C0.ESC+"[D";break;case 39:if(l.metaKey)break;d?(g.key=a.C0.ESC+"[1;"+(d+1)+"C",g.key===a.C0.ESC+"[1;3C"&&(g.key=a.C0.ESC+(m?"f":"[1;5C"))):g.key=p?a.C0.ESC+"OC":a.C0.ESC+"[C";break;case 38:if(l.metaKey)break;d?(g.key=a.C0.ESC+"[1;"+(d+1)+"A",m||g.key!==a.C0.ESC+"[1;3A"||(g.key=a.C0.ESC+"[1;5A")):g.key=p?a.C0.ESC+"OA":a.C0.ESC+"[A";break;case 40:if(l.metaKey)break;d?(g.key=a.C0.ESC+"[1;"+(d+1)+"B",m||g.key!==a.C0.ESC+"[1;3B"||(g.key=a.C0.ESC+"[1;5B")):g.key=p?a.C0.ESC+"OB":a.C0.ESC+"[B";break;case 45:l.shiftKey||l.ctrlKey||(g.key=a.C0.ESC+"[2~");break;case 46:g.key=d?a.C0.ESC+"[3;"+(d+1)+"~":a.C0.ESC+"[3~";break;case 36:g.key=d?a.C0.ESC+"[1;"+(d+1)+"H":p?a.C0.ESC+"OH":a.C0.ESC+"[H";break;case 35:g.key=d?a.C0.ESC+"[1;"+(d+1)+"F":p?a.C0.ESC+"OF":a.C0.ESC+"[F";break;case 33:l.shiftKey?g.type=2:l.ctrlKey?g.key=a.C0.ESC+"[5;"+(d+1)+"~":g.key=a.C0.ESC+"[5~";break;case 34:l.shiftKey?g.type=3:l.ctrlKey?g.key=a.C0.ESC+"[6;"+(d+1)+"~":g.key=a.C0.ESC+"[6~";break;case 112:g.key=d?a.C0.ESC+"[1;"+(d+1)+"P":a.C0.ESC+"OP";break;case 113:g.key=d?a.C0.ESC+"[1;"+(d+1)+"Q":a.C0.ESC+"OQ";break;case 114:g.key=d?a.C0.ESC+"[1;"+(d+1)+"R":a.C0.ESC+"OR";break;case 115:g.key=d?a.C0.ESC+"[1;"+(d+1)+"S":a.C0.ESC+"OS";break;case 116:g.key=d?a.C0.ESC+"[15;"+(d+1)+"~":a.C0.ESC+"[15~";break;case 117:g.key=d?a.C0.ESC+"[17;"+(d+1)+"~":a.C0.ESC+"[17~";break;case 118:g.key=d?a.C0.ESC+"[18;"+(d+1)+"~":a.C0.ESC+"[18~";break;case 119:g.key=d?a.C0.ESC+"[19;"+(d+1)+"~":a.C0.ESC+"[19~";break;case 120:g.key=d?a.C0.ESC+"[20;"+(d+1)+"~":a.C0.ESC+"[20~";break;case 121:g.key=d?a.C0.ESC+"[21;"+(d+1)+"~":a.C0.ESC+"[21~";break;case 122:g.key=d?a.C0.ESC+"[23;"+(d+1)+"~":a.C0.ESC+"[23~";break;case 123:g.key=d?a.C0.ESC+"[24;"+(d+1)+"~":a.C0.ESC+"[24~";break;default:if(!l.ctrlKey||l.shiftKey||l.altKey||l.metaKey)if(m&&!y||!l.altKey||l.metaKey)!m||l.altKey||l.ctrlKey||l.shiftKey||!l.metaKey?l.key&&!l.ctrlKey&&!l.altKey&&!l.metaKey&&l.keyCode>=48&&l.key.length===1?g.key=l.key:l.key&&l.ctrlKey&&(l.key==="_"&&(g.key=a.C0.US),l.key==="@"&&(g.key=a.C0.NUL)):l.keyCode===65&&(g.type=1);else{let f=c[l.keyCode],u=f?.[l.shiftKey?1:0];if(u)g.key=a.C0.ESC+u;else if(l.keyCode>=65&&l.keyCode<=90){let h=l.ctrlKey?l.keyCode-64:l.keyCode+32,_=String.fromCharCode(h);l.shiftKey&&(_=_.toUpperCase()),g.key=a.C0.ESC+_}else if(l.keyCode===32)g.key=a.C0.ESC+(l.ctrlKey?a.C0.NUL:" ");else if(l.key==="Dead"&&l.code.startsWith("Key")){let h=l.code.slice(3,4);l.shiftKey||(h=h.toLowerCase()),g.key=a.C0.ESC+h,g.cancel=!0}}else l.keyCode>=65&&l.keyCode<=90?g.key=String.fromCharCode(l.keyCode-64):l.keyCode===32?g.key=a.C0.NUL:l.keyCode>=51&&l.keyCode<=55?g.key=String.fromCharCode(l.keyCode-51+27):l.keyCode===56?g.key=a.C0.DEL:l.keyCode===219?g.key=a.C0.ESC:l.keyCode===220?g.key=a.C0.FS:l.keyCode===221&&(g.key=a.C0.GS)}return g}},482:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Utf8ToUtf32=i.StringToUtf32=i.utf32ToString=i.stringFromCodePoint=void 0,i.stringFromCodePoint=function(o){return o>65535?(o-=65536,String.fromCharCode(55296+(o>>10))+String.fromCharCode(o%1024+56320)):String.fromCharCode(o)},i.utf32ToString=function(o,a=0,c=o.length){let l="";for(let p=a;p<c;++p){let m=o[p];m>65535?(m-=65536,l+=String.fromCharCode(55296+(m>>10))+String.fromCharCode(m%1024+56320)):l+=String.fromCharCode(m)}return l},i.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(o,a){let c=o.length;if(!c)return 0;let l=0,p=0;if(this._interim){let m=o.charCodeAt(p++);56320<=m&&m<=57343?a[l++]=1024*(this._interim-55296)+m-56320+65536:(a[l++]=this._interim,a[l++]=m),this._interim=0}for(let m=p;m<c;++m){let y=o.charCodeAt(m);if(55296<=y&&y<=56319){if(++m>=c)return this._interim=y,l;let g=o.charCodeAt(m);56320<=g&&g<=57343?a[l++]=1024*(y-55296)+g-56320+65536:(a[l++]=y,a[l++]=g)}else y!==65279&&(a[l++]=y)}return l}},i.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(o,a){let c=o.length;if(!c)return 0;let l,p,m,y,g=0,d=0,f=0;if(this.interim[0]){let _=!1,b=this.interim[0];b&=(224&b)==192?31:(240&b)==224?15:7;let C,S=0;for(;(C=63&this.interim[++S])&&S<4;)b<<=6,b|=C;let v=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,E=v-S;for(;f<E;){if(f>=c)return 0;if(C=o[f++],(192&C)!=128){f--,_=!0;break}this.interim[S++]=C,b<<=6,b|=63&C}_||(v===2?b<128?f--:a[g++]=b:v===3?b<2048||b>=55296&&b<=57343||b===65279||(a[g++]=b):b<65536||b>1114111||(a[g++]=b)),this.interim.fill(0)}let u=c-4,h=f;for(;h<c;){for(;!(!(h<u)||128&(l=o[h])||128&(p=o[h+1])||128&(m=o[h+2])||128&(y=o[h+3]));)a[g++]=l,a[g++]=p,a[g++]=m,a[g++]=y,h+=4;if(l=o[h++],l<128)a[g++]=l;else if((224&l)==192){if(h>=c)return this.interim[0]=l,g;if(p=o[h++],(192&p)!=128){h--;continue}if(d=(31&l)<<6|63&p,d<128){h--;continue}a[g++]=d}else if((240&l)==224){if(h>=c)return this.interim[0]=l,g;if(p=o[h++],(192&p)!=128){h--;continue}if(h>=c)return this.interim[0]=l,this.interim[1]=p,g;if(m=o[h++],(192&m)!=128){h--;continue}if(d=(15&l)<<12|(63&p)<<6|63&m,d<2048||d>=55296&&d<=57343||d===65279)continue;a[g++]=d}else if((248&l)==240){if(h>=c)return this.interim[0]=l,g;if(p=o[h++],(192&p)!=128){h--;continue}if(h>=c)return this.interim[0]=l,this.interim[1]=p,g;if(m=o[h++],(192&m)!=128){h--;continue}if(h>=c)return this.interim[0]=l,this.interim[1]=p,this.interim[2]=m,g;if(y=o[h++],(192&y)!=128){h--;continue}if(d=(7&l)<<18|(63&p)<<12|(63&m)<<6|63&y,d<65536||d>1114111)continue;a[g++]=d}}return g}}},225:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeV6=void 0;let a=o(1480),c=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],l=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],p;i.UnicodeV6=class{constructor(){if(this.version="6",!p){p=new Uint8Array(65536),p.fill(1),p[0]=0,p.fill(0,1,32),p.fill(0,127,160),p.fill(2,4352,4448),p[9001]=2,p[9002]=2,p.fill(2,11904,42192),p[12351]=1,p.fill(2,44032,55204),p.fill(2,63744,64256),p.fill(2,65040,65050),p.fill(2,65072,65136),p.fill(2,65280,65377),p.fill(2,65504,65511);for(let m=0;m<c.length;++m)p.fill(0,c[m][0],c[m][1]+1)}}wcwidth(m){return m<32?0:m<127?1:m<65536?p[m]:(function(y,g){let d,f=0,u=g.length-1;if(y<g[0][0]||y>g[u][1])return!1;for(;u>=f;)if(d=f+u>>1,y>g[d][1])f=d+1;else{if(!(y<g[d][0]))return!0;u=d-1}return!1})(m,l)?0:m>=131072&&m<=196605||m>=196608&&m<=262141?2:1}charProperties(m,y){let g=this.wcwidth(m),d=g===0&&y!==0;if(d){let f=a.UnicodeService.extractWidth(y);f===0?d=!1:f>g&&(g=f)}return a.UnicodeService.createPropertyValue(0,g,d)}}},5981:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WriteBuffer=void 0;let a=o(8460),c=o(844);class l extends c.Disposable{constructor(m){super(),this._action=m,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new a.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(m,y){if(y!==void 0&&this._syncCalls>y)return void(this._syncCalls=0);if(this._pendingData+=m.length,this._writeBuffer.push(m),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let g;for(this._isSyncWriting=!0;g=this._writeBuffer.shift();){this._action(g);let d=this._callbacks.shift();d&&d()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(m,y){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=m.length,this._writeBuffer.push(m),this._callbacks.push(y),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=m.length,this._writeBuffer.push(m),this._callbacks.push(y)}_innerWrite(m=0,y=!0){let g=m||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){let d=this._writeBuffer[this._bufferOffset],f=this._action(d,y);if(f){let h=_=>Date.now()-g>=12?setTimeout(()=>this._innerWrite(0,_)):this._innerWrite(g,_);return void f.catch(_=>(queueMicrotask(()=>{throw _}),Promise.resolve(!1))).then(h)}let u=this._callbacks[this._bufferOffset];if(u&&u(),this._bufferOffset++,this._pendingData-=d.length,Date.now()-g>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}i.WriteBuffer=l},5941:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.toRgbString=i.parseColor=void 0;let o=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,a=/^[\da-f]+$/;function c(l,p){let m=l.toString(16),y=m.length<2?"0"+m:m;switch(p){case 4:return m[0];case 8:return y;case 12:return(y+y).slice(0,3);default:return y+y}}i.parseColor=function(l){if(!l)return;let p=l.toLowerCase();if(p.indexOf("rgb:")===0){p=p.slice(4);let m=o.exec(p);if(m){let y=m[1]?15:m[4]?255:m[7]?4095:65535;return[Math.round(parseInt(m[1]||m[4]||m[7]||m[10],16)/y*255),Math.round(parseInt(m[2]||m[5]||m[8]||m[11],16)/y*255),Math.round(parseInt(m[3]||m[6]||m[9]||m[12],16)/y*255)]}}else if(p.indexOf("#")===0&&(p=p.slice(1),a.exec(p)&&[3,6,9,12].includes(p.length))){let m=p.length/3,y=[0,0,0];for(let g=0;g<3;++g){let d=parseInt(p.slice(m*g,m*g+m),16);y[g]=m===1?d<<4:m===2?d:m===3?d>>4:d>>8}return y}},i.toRgbString=function(l,p=16){let[m,y,g]=l;return`rgb:${c(m,p)}/${c(y,p)}/${c(g,p)}`}},5770:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.PAYLOAD_LIMIT=void 0,i.PAYLOAD_LIMIT=1e7},6351:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DcsHandler=i.DcsParser=void 0;let a=o(482),c=o(8742),l=o(5770),p=[];i.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=p,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=p}registerHandler(y,g){this._handlers[y]===void 0&&(this._handlers[y]=[]);let d=this._handlers[y];return d.push(g),{dispose:()=>{let f=d.indexOf(g);f!==-1&&d.splice(f,1)}}}clearHandler(y){this._handlers[y]&&delete this._handlers[y]}setHandlerFallback(y){this._handlerFb=y}reset(){if(this._active.length)for(let y=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;y>=0;--y)this._active[y].unhook(!1);this._stack.paused=!1,this._active=p,this._ident=0}hook(y,g){if(this.reset(),this._ident=y,this._active=this._handlers[y]||p,this._active.length)for(let d=this._active.length-1;d>=0;d--)this._active[d].hook(g);else this._handlerFb(this._ident,"HOOK",g)}put(y,g,d){if(this._active.length)for(let f=this._active.length-1;f>=0;f--)this._active[f].put(y,g,d);else this._handlerFb(this._ident,"PUT",(0,a.utf32ToString)(y,g,d))}unhook(y,g=!0){if(this._active.length){let d=!1,f=this._active.length-1,u=!1;if(this._stack.paused&&(f=this._stack.loopPosition-1,d=g,u=this._stack.fallThrough,this._stack.paused=!1),!u&&d===!1){for(;f>=0&&(d=this._active[f].unhook(y),d!==!0);f--)if(d instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=f,this._stack.fallThrough=!1,d;f--}for(;f>=0;f--)if(d=this._active[f].unhook(!1),d instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=f,this._stack.fallThrough=!0,d}else this._handlerFb(this._ident,"UNHOOK",y);this._active=p,this._ident=0}};let m=new c.Params;m.addParam(0),i.DcsHandler=class{constructor(y){this._handler=y,this._data="",this._params=m,this._hitLimit=!1}hook(y){this._params=y.length>1||y.params[0]?y.clone():m,this._data="",this._hitLimit=!1}put(y,g,d){this._hitLimit||(this._data+=(0,a.utf32ToString)(y,g,d),this._data.length>l.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(y){let g=!1;if(this._hitLimit)g=!1;else if(y&&(g=this._handler(this._data,this._params),g instanceof Promise))return g.then(d=>(this._params=m,this._data="",this._hitLimit=!1,d));return this._params=m,this._data="",this._hitLimit=!1,g}}},2015:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.EscapeSequenceParser=i.VT500_TRANSITION_TABLE=i.TransitionTable=void 0;let a=o(844),c=o(8742),l=o(6242),p=o(6351);class m{constructor(f){this.table=new Uint8Array(f)}setDefault(f,u){this.table.fill(f<<4|u)}add(f,u,h,_){this.table[u<<8|f]=h<<4|_}addMany(f,u,h,_){for(let b=0;b<f.length;b++)this.table[u<<8|f[b]]=h<<4|_}}i.TransitionTable=m;let y=160;i.VT500_TRANSITION_TABLE=(function(){let d=new m(4095),f=Array.apply(null,Array(256)).map((S,v)=>v),u=(S,v)=>f.slice(S,v),h=u(32,127),_=u(0,24);_.push(25),_.push.apply(_,u(28,32));let b=u(0,14),C;for(C in d.setDefault(1,0),d.addMany(h,0,2,0),b)d.addMany([24,26,153,154],C,3,0),d.addMany(u(128,144),C,3,0),d.addMany(u(144,152),C,3,0),d.add(156,C,0,0),d.add(27,C,11,1),d.add(157,C,4,8),d.addMany([152,158,159],C,0,7),d.add(155,C,11,3),d.add(144,C,11,9);return d.addMany(_,0,3,0),d.addMany(_,1,3,1),d.add(127,1,0,1),d.addMany(_,8,0,8),d.addMany(_,3,3,3),d.add(127,3,0,3),d.addMany(_,4,3,4),d.add(127,4,0,4),d.addMany(_,6,3,6),d.addMany(_,5,3,5),d.add(127,5,0,5),d.addMany(_,2,3,2),d.add(127,2,0,2),d.add(93,1,4,8),d.addMany(h,8,5,8),d.add(127,8,5,8),d.addMany([156,27,24,26,7],8,6,0),d.addMany(u(28,32),8,0,8),d.addMany([88,94,95],1,0,7),d.addMany(h,7,0,7),d.addMany(_,7,0,7),d.add(156,7,0,0),d.add(127,7,0,7),d.add(91,1,11,3),d.addMany(u(64,127),3,7,0),d.addMany(u(48,60),3,8,4),d.addMany([60,61,62,63],3,9,4),d.addMany(u(48,60),4,8,4),d.addMany(u(64,127),4,7,0),d.addMany([60,61,62,63],4,0,6),d.addMany(u(32,64),6,0,6),d.add(127,6,0,6),d.addMany(u(64,127),6,0,0),d.addMany(u(32,48),3,9,5),d.addMany(u(32,48),5,9,5),d.addMany(u(48,64),5,0,6),d.addMany(u(64,127),5,7,0),d.addMany(u(32,48),4,9,5),d.addMany(u(32,48),1,9,2),d.addMany(u(32,48),2,9,2),d.addMany(u(48,127),2,10,0),d.addMany(u(48,80),1,10,0),d.addMany(u(81,88),1,10,0),d.addMany([89,90,92],1,10,0),d.addMany(u(96,127),1,10,0),d.add(80,1,11,9),d.addMany(_,9,0,9),d.add(127,9,0,9),d.addMany(u(28,32),9,0,9),d.addMany(u(32,48),9,9,12),d.addMany(u(48,60),9,8,10),d.addMany([60,61,62,63],9,9,10),d.addMany(_,11,0,11),d.addMany(u(32,128),11,0,11),d.addMany(u(28,32),11,0,11),d.addMany(_,10,0,10),d.add(127,10,0,10),d.addMany(u(28,32),10,0,10),d.addMany(u(48,60),10,8,10),d.addMany([60,61,62,63],10,0,11),d.addMany(u(32,48),10,9,12),d.addMany(_,12,0,12),d.add(127,12,0,12),d.addMany(u(28,32),12,0,12),d.addMany(u(32,48),12,9,12),d.addMany(u(48,64),12,0,11),d.addMany(u(64,127),12,12,13),d.addMany(u(64,127),10,12,13),d.addMany(u(64,127),9,12,13),d.addMany(_,13,13,13),d.addMany(h,13,13,13),d.add(127,13,0,13),d.addMany([27,156,24,26],13,14,0),d.add(y,0,2,0),d.add(y,8,5,8),d.add(y,6,0,6),d.add(y,11,0,11),d.add(y,13,13,13),d})();class g extends a.Disposable{constructor(f=i.VT500_TRANSITION_TABLE){super(),this._transitions=f,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new c.Params,this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._printHandlerFb=(u,h,_)=>{},this._executeHandlerFb=u=>{},this._csiHandlerFb=(u,h)=>{},this._escHandlerFb=u=>{},this._errorHandlerFb=u=>u,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,a.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new l.OscParser),this._dcsParser=this.register(new p.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(f,u=[64,126]){let h=0;if(f.prefix){if(f.prefix.length>1)throw new Error("only one byte as prefix supported");if(h=f.prefix.charCodeAt(0),h&&60>h||h>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(f.intermediates){if(f.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let b=0;b<f.intermediates.length;++b){let C=f.intermediates.charCodeAt(b);if(32>C||C>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");h<<=8,h|=C}}if(f.final.length!==1)throw new Error("final must be a single byte");let _=f.final.charCodeAt(0);if(u[0]>_||_>u[1])throw new Error(`final must be in range ${u[0]} .. ${u[1]}`);return h<<=8,h|=_,h}identToString(f){let u=[];for(;f;)u.push(String.fromCharCode(255&f)),f>>=8;return u.reverse().join("")}setPrintHandler(f){this._printHandler=f}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(f,u){let h=this._identifier(f,[48,126]);this._escHandlers[h]===void 0&&(this._escHandlers[h]=[]);let _=this._escHandlers[h];return _.push(u),{dispose:()=>{let b=_.indexOf(u);b!==-1&&_.splice(b,1)}}}clearEscHandler(f){this._escHandlers[this._identifier(f,[48,126])]&&delete this._escHandlers[this._identifier(f,[48,126])]}setEscHandlerFallback(f){this._escHandlerFb=f}setExecuteHandler(f,u){this._executeHandlers[f.charCodeAt(0)]=u}clearExecuteHandler(f){this._executeHandlers[f.charCodeAt(0)]&&delete this._executeHandlers[f.charCodeAt(0)]}setExecuteHandlerFallback(f){this._executeHandlerFb=f}registerCsiHandler(f,u){let h=this._identifier(f);this._csiHandlers[h]===void 0&&(this._csiHandlers[h]=[]);let _=this._csiHandlers[h];return _.push(u),{dispose:()=>{let b=_.indexOf(u);b!==-1&&_.splice(b,1)}}}clearCsiHandler(f){this._csiHandlers[this._identifier(f)]&&delete this._csiHandlers[this._identifier(f)]}setCsiHandlerFallback(f){this._csiHandlerFb=f}registerDcsHandler(f,u){return this._dcsParser.registerHandler(this._identifier(f),u)}clearDcsHandler(f){this._dcsParser.clearHandler(this._identifier(f))}setDcsHandlerFallback(f){this._dcsParser.setHandlerFallback(f)}registerOscHandler(f,u){return this._oscParser.registerHandler(f,u)}clearOscHandler(f){this._oscParser.clearHandler(f)}setOscHandlerFallback(f){this._oscParser.setHandlerFallback(f)}setErrorHandler(f){this._errorHandler=f}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(f,u,h,_,b){this._parseStack.state=f,this._parseStack.handlers=u,this._parseStack.handlerPos=h,this._parseStack.transition=_,this._parseStack.chunkPos=b}parse(f,u,h){let _,b=0,C=0,S=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,S=this._parseStack.chunkPos+1;else{if(h===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");let v=this._parseStack.handlers,E=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(h===!1&&E>-1){for(;E>=0&&(_=v[E](this._params),_!==!0);E--)if(_ instanceof Promise)return this._parseStack.handlerPos=E,_}this._parseStack.handlers=[];break;case 4:if(h===!1&&E>-1){for(;E>=0&&(_=v[E](),_!==!0);E--)if(_ instanceof Promise)return this._parseStack.handlerPos=E,_}this._parseStack.handlers=[];break;case 6:if(b=f[this._parseStack.chunkPos],_=this._dcsParser.unhook(b!==24&&b!==26,h),_)return _;b===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(b=f[this._parseStack.chunkPos],_=this._oscParser.end(b!==24&&b!==26,h),_)return _;b===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,S=this._parseStack.chunkPos+1,this.precedingJoinState=0,this.currentState=15&this._parseStack.transition}for(let v=S;v<u;++v){switch(b=f[v],C=this._transitions.table[this.currentState<<8|(b<160?b:y)],C>>4){case 2:for(let I=v+1;;++I){if(I>=u||(b=f[I])<32||b>126&&b<y){this._printHandler(f,v,I),v=I-1;break}if(++I>=u||(b=f[I])<32||b>126&&b<y){this._printHandler(f,v,I),v=I-1;break}if(++I>=u||(b=f[I])<32||b>126&&b<y){this._printHandler(f,v,I),v=I-1;break}if(++I>=u||(b=f[I])<32||b>126&&b<y){this._printHandler(f,v,I),v=I-1;break}}break;case 3:this._executeHandlers[b]?this._executeHandlers[b]():this._executeHandlerFb(b),this.precedingJoinState=0;break;case 0:break;case 1:if(this._errorHandler({position:v,code:b,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:let E=this._csiHandlers[this._collect<<8|b],A=E?E.length-1:-1;for(;A>=0&&(_=E[A](this._params),_!==!0);A--)if(_ instanceof Promise)return this._preserveStack(3,E,A,C,v),_;A<0&&this._csiHandlerFb(this._collect<<8|b,this._params),this.precedingJoinState=0;break;case 8:do switch(b){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(b-48)}while(++v<u&&(b=f[v])>47&&b<60);v--;break;case 9:this._collect<<=8,this._collect|=b;break;case 10:let x=this._escHandlers[this._collect<<8|b],O=x?x.length-1:-1;for(;O>=0&&(_=x[O](),_!==!0);O--)if(_ instanceof Promise)return this._preserveStack(4,x,O,C,v),_;O<0&&this._escHandlerFb(this._collect<<8|b),this.precedingJoinState=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|b,this._params);break;case 13:for(let I=v+1;;++I)if(I>=u||(b=f[I])===24||b===26||b===27||b>127&&b<y){this._dcsParser.put(f,v,I),v=I-1;break}break;case 14:if(_=this._dcsParser.unhook(b!==24&&b!==26),_)return this._preserveStack(6,[],0,C,v),_;b===27&&(C|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break;case 4:this._oscParser.start();break;case 5:for(let I=v+1;;I++)if(I>=u||(b=f[I])<32||b>127&&b<y){this._oscParser.put(f,v,I),v=I-1;break}break;case 6:if(_=this._oscParser.end(b!==24&&b!==26),_)return this._preserveStack(5,[],0,C,v),_;b===27&&(C|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0}this.currentState=15&C}}}i.EscapeSequenceParser=g},6242:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.OscHandler=i.OscParser=void 0;let a=o(5770),c=o(482),l=[];i.OscParser=class{constructor(){this._state=0,this._active=l,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(p,m){this._handlers[p]===void 0&&(this._handlers[p]=[]);let y=this._handlers[p];return y.push(m),{dispose:()=>{let g=y.indexOf(m);g!==-1&&y.splice(g,1)}}}clearHandler(p){this._handlers[p]&&delete this._handlers[p]}setHandlerFallback(p){this._handlerFb=p}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=l}reset(){if(this._state===2)for(let p=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;p>=0;--p)this._active[p].end(!1);this._stack.paused=!1,this._active=l,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||l,this._active.length)for(let p=this._active.length-1;p>=0;p--)this._active[p].start();else this._handlerFb(this._id,"START")}_put(p,m,y){if(this._active.length)for(let g=this._active.length-1;g>=0;g--)this._active[g].put(p,m,y);else this._handlerFb(this._id,"PUT",(0,c.utf32ToString)(p,m,y))}start(){this.reset(),this._state=1}put(p,m,y){if(this._state!==3){if(this._state===1)for(;m<y;){let g=p[m++];if(g===59){this._state=2,this._start();break}if(g<48||57<g)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+g-48}this._state===2&&y-m>0&&this._put(p,m,y)}}end(p,m=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let y=!1,g=this._active.length-1,d=!1;if(this._stack.paused&&(g=this._stack.loopPosition-1,y=m,d=this._stack.fallThrough,this._stack.paused=!1),!d&&y===!1){for(;g>=0&&(y=this._active[g].end(p),y!==!0);g--)if(y instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=g,this._stack.fallThrough=!1,y;g--}for(;g>=0;g--)if(y=this._active[g].end(!1),y instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=g,this._stack.fallThrough=!0,y}else this._handlerFb(this._id,"END",p);this._active=l,this._id=-1,this._state=0}}},i.OscHandler=class{constructor(p){this._handler=p,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(p,m,y){this._hitLimit||(this._data+=(0,c.utf32ToString)(p,m,y),this._data.length>a.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(p){let m=!1;if(this._hitLimit)m=!1;else if(p&&(m=this._handler(this._data),m instanceof Promise))return m.then(y=>(this._data="",this._hitLimit=!1,y));return this._data="",this._hitLimit=!1,m}}},8742:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Params=void 0;let o=2147483647;class a{static fromArray(l){let p=new a;if(!l.length)return p;for(let m=Array.isArray(l[0])?1:0;m<l.length;++m){let y=l[m];if(Array.isArray(y))for(let g=0;g<y.length;++g)p.addSubParam(y[g]);else p.addParam(y)}return p}constructor(l=32,p=32){if(this.maxLength=l,this.maxSubParamsLength=p,p>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(l),this.length=0,this._subParams=new Int32Array(p),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(l),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){let l=new a(this.maxLength,this.maxSubParamsLength);return l.params.set(this.params),l.length=this.length,l._subParams.set(this._subParams),l._subParamsLength=this._subParamsLength,l._subParamsIdx.set(this._subParamsIdx),l._rejectDigits=this._rejectDigits,l._rejectSubDigits=this._rejectSubDigits,l._digitIsSub=this._digitIsSub,l}toArray(){let l=[];for(let p=0;p<this.length;++p){l.push(this.params[p]);let m=this._subParamsIdx[p]>>8,y=255&this._subParamsIdx[p];y-m>0&&l.push(Array.prototype.slice.call(this._subParams,m,y))}return l}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(l){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(l<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=l>o?o:l}}addSubParam(l){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(l<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=l>o?o:l,this._subParamsIdx[this.length-1]++}}hasSubParams(l){return(255&this._subParamsIdx[l])-(this._subParamsIdx[l]>>8)>0}getSubParams(l){let p=this._subParamsIdx[l]>>8,m=255&this._subParamsIdx[l];return m-p>0?this._subParams.subarray(p,m):null}getSubParamsAll(){let l={};for(let p=0;p<this.length;++p){let m=this._subParamsIdx[p]>>8,y=255&this._subParamsIdx[p];y-m>0&&(l[p]=this._subParams.slice(m,y))}return l}addDigit(l){let p;if(this._rejectDigits||!(p=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;let m=this._digitIsSub?this._subParams:this.params,y=m[p-1];m[p-1]=~y?Math.min(10*y+l,o):l}}i.Params=a},5741:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.AddonManager=void 0,i.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let o=this._addons.length-1;o>=0;o--)this._addons[o].instance.dispose()}loadAddon(o,a){let c={instance:a,dispose:a.dispose,isDisposed:!1};this._addons.push(c),a.dispose=()=>this._wrappedAddonDispose(c),a.activate(o)}_wrappedAddonDispose(o){if(o.isDisposed)return;let a=-1;for(let c=0;c<this._addons.length;c++)if(this._addons[c]===o){a=c;break}if(a===-1)throw new Error("Could not dispose an addon that has not been loaded");o.isDisposed=!0,o.dispose.apply(o.instance),this._addons.splice(a,1)}}},8771:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferApiView=void 0;let a=o(3785),c=o(511);i.BufferApiView=class{constructor(l,p){this._buffer=l,this.type=p}init(l){return this._buffer=l,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(l){let p=this._buffer.lines.get(l);if(p)return new a.BufferLineApiView(p)}getNullCell(){return new c.CellData}}},3785:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferLineApiView=void 0;let a=o(511);i.BufferLineApiView=class{constructor(c){this._line=c}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(c,l){if(!(c<0||c>=this._line.length))return l?(this._line.loadCell(c,l),l):this._line.loadCell(c,new a.CellData)}translateToString(c,l,p){return this._line.translateToString(c,l,p)}}},8285:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferNamespaceApi=void 0;let a=o(8771),c=o(8460),l=o(844);class p extends l.Disposable{constructor(y){super(),this._core=y,this._onBufferChange=this.register(new c.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new a.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new a.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}i.BufferNamespaceApi=p},7975:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ParserApi=void 0,i.ParserApi=class{constructor(o){this._core=o}registerCsiHandler(o,a){return this._core.registerCsiHandler(o,c=>a(c.toArray()))}addCsiHandler(o,a){return this.registerCsiHandler(o,a)}registerDcsHandler(o,a){return this._core.registerDcsHandler(o,(c,l)=>a(c,l.toArray()))}addDcsHandler(o,a){return this.registerDcsHandler(o,a)}registerEscHandler(o,a){return this._core.registerEscHandler(o,a)}addEscHandler(o,a){return this.registerEscHandler(o,a)}registerOscHandler(o,a){return this._core.registerOscHandler(o,a)}addOscHandler(o,a){return this.registerOscHandler(o,a)}}},7090:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeApi=void 0,i.UnicodeApi=class{constructor(o){this._core=o}register(o){this._core.unicodeService.register(o)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(o){this._core.unicodeService.activeVersion=o}}},744:function(s,i,o){var a=this&&this.__decorate||function(d,f,u,h){var _,b=arguments.length,C=b<3?f:h===null?h=Object.getOwnPropertyDescriptor(f,u):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(d,f,u,h);else for(var S=d.length-1;S>=0;S--)(_=d[S])&&(C=(b<3?_(C):b>3?_(f,u,C):_(f,u))||C);return b>3&&C&&Object.defineProperty(f,u,C),C},c=this&&this.__param||function(d,f){return function(u,h){f(u,h,d)}};Object.defineProperty(i,"__esModule",{value:!0}),i.BufferService=i.MINIMUM_ROWS=i.MINIMUM_COLS=void 0;let l=o(8460),p=o(844),m=o(5295),y=o(2585);i.MINIMUM_COLS=2,i.MINIMUM_ROWS=1;let g=i.BufferService=class extends p.Disposable{get buffer(){return this.buffers.active}constructor(d){super(),this.isUserScrolling=!1,this._onResize=this.register(new l.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new l.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(d.rawOptions.cols||0,i.MINIMUM_COLS),this.rows=Math.max(d.rawOptions.rows||0,i.MINIMUM_ROWS),this.buffers=this.register(new m.BufferSet(d,this))}resize(d,f){this.cols=d,this.rows=f,this.buffers.resize(d,f),this._onResize.fire({cols:d,rows:f})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(d,f=!1){let u=this.buffer,h;h=this._cachedBlankLine,h&&h.length===this.cols&&h.getFg(0)===d.fg&&h.getBg(0)===d.bg||(h=u.getBlankLine(d,f),this._cachedBlankLine=h),h.isWrapped=f;let _=u.ybase+u.scrollTop,b=u.ybase+u.scrollBottom;if(u.scrollTop===0){let C=u.lines.isFull;b===u.lines.length-1?C?u.lines.recycle().copyFrom(h):u.lines.push(h.clone()):u.lines.splice(b+1,0,h.clone()),C?this.isUserScrolling&&(u.ydisp=Math.max(u.ydisp-1,0)):(u.ybase++,this.isUserScrolling||u.ydisp++)}else{let C=b-_+1;u.lines.shiftElements(_+1,C-1,-1),u.lines.set(b,h.clone())}this.isUserScrolling||(u.ydisp=u.ybase),this._onScroll.fire(u.ydisp)}scrollLines(d,f,u){let h=this.buffer;if(d<0){if(h.ydisp===0)return;this.isUserScrolling=!0}else d+h.ydisp>=h.ybase&&(this.isUserScrolling=!1);let _=h.ydisp;h.ydisp=Math.max(Math.min(h.ydisp+d,h.ybase),0),_!==h.ydisp&&(f||this._onScroll.fire(h.ydisp))}};i.BufferService=g=a([c(0,y.IOptionsService)],g)},7994:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CharsetService=void 0,i.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(o){this.glevel=o,this.charset=this._charsets[o]}setgCharset(o,a){this._charsets[o]=a,this.glevel===o&&(this.charset=a)}}},1753:function(s,i,o){var a=this&&this.__decorate||function(h,_,b,C){var S,v=arguments.length,E=v<3?_:C===null?C=Object.getOwnPropertyDescriptor(_,b):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(h,_,b,C);else for(var A=h.length-1;A>=0;A--)(S=h[A])&&(E=(v<3?S(E):v>3?S(_,b,E):S(_,b))||E);return v>3&&E&&Object.defineProperty(_,b,E),E},c=this&&this.__param||function(h,_){return function(b,C){_(b,C,h)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CoreMouseService=void 0;let l=o(2585),p=o(8460),m=o(844),y={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:h=>h.button!==4&&h.action===1&&(h.ctrl=!1,h.alt=!1,h.shift=!1,!0)},VT200:{events:19,restrict:h=>h.action!==32},DRAG:{events:23,restrict:h=>h.action!==32||h.button!==3},ANY:{events:31,restrict:h=>!0}};function g(h,_){let b=(h.ctrl?16:0)|(h.shift?4:0)|(h.alt?8:0);return h.button===4?(b|=64,b|=h.action):(b|=3&h.button,4&h.button&&(b|=64),8&h.button&&(b|=128),h.action===32?b|=32:h.action!==0||_||(b|=3)),b}let d=String.fromCharCode,f={DEFAULT:h=>{let _=[g(h,!1)+32,h.col+32,h.row+32];return _[0]>255||_[1]>255||_[2]>255?"":`\x1B[M${d(_[0])}${d(_[1])}${d(_[2])}`},SGR:h=>{let _=h.action===0&&h.button!==4?"m":"M";return`\x1B[<${g(h,!0)};${h.col};${h.row}${_}`},SGR_PIXELS:h=>{let _=h.action===0&&h.button!==4?"m":"M";return`\x1B[<${g(h,!0)};${h.x};${h.y}${_}`}},u=i.CoreMouseService=class extends m.Disposable{constructor(h,_){super(),this._bufferService=h,this._coreService=_,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new p.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(let b of Object.keys(y))this.addProtocol(b,y[b]);for(let b of Object.keys(f))this.addEncoding(b,f[b]);this.reset()}addProtocol(h,_){this._protocols[h]=_}addEncoding(h,_){this._encodings[h]=_}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(h){if(!this._protocols[h])throw new Error(`unknown protocol "${h}"`);this._activeProtocol=h,this._onProtocolChange.fire(this._protocols[h].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(h){if(!this._encodings[h])throw new Error(`unknown encoding "${h}"`);this._activeEncoding=h}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(h){if(h.col<0||h.col>=this._bufferService.cols||h.row<0||h.row>=this._bufferService.rows||h.button===4&&h.action===32||h.button===3&&h.action!==32||h.button!==4&&(h.action===2||h.action===3)||(h.col++,h.row++,h.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,h,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(h))return!1;let _=this._encodings[this._activeEncoding](h);return _&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(_):this._coreService.triggerDataEvent(_,!0)),this._lastEvent=h,!0}explainEvents(h){return{down:!!(1&h),up:!!(2&h),drag:!!(4&h),move:!!(8&h),wheel:!!(16&h)}}_equalEvents(h,_,b){if(b){if(h.x!==_.x||h.y!==_.y)return!1}else if(h.col!==_.col||h.row!==_.row)return!1;return h.button===_.button&&h.action===_.action&&h.ctrl===_.ctrl&&h.alt===_.alt&&h.shift===_.shift}};i.CoreMouseService=u=a([c(0,l.IBufferService),c(1,l.ICoreService)],u)},6975:function(s,i,o){var a=this&&this.__decorate||function(u,h,_,b){var C,S=arguments.length,v=S<3?h:b===null?b=Object.getOwnPropertyDescriptor(h,_):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(u,h,_,b);else for(var E=u.length-1;E>=0;E--)(C=u[E])&&(v=(S<3?C(v):S>3?C(h,_,v):C(h,_))||v);return S>3&&v&&Object.defineProperty(h,_,v),v},c=this&&this.__param||function(u,h){return function(_,b){h(_,b,u)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CoreService=void 0;let l=o(1439),p=o(8460),m=o(844),y=o(2585),g=Object.freeze({insertMode:!1}),d=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0}),f=i.CoreService=class extends m.Disposable{constructor(u,h,_){super(),this._bufferService=u,this._logService=h,this._optionsService=_,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new p.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new p.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new p.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new p.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,l.clone)(g),this.decPrivateModes=(0,l.clone)(d)}reset(){this.modes=(0,l.clone)(g),this.decPrivateModes=(0,l.clone)(d)}triggerDataEvent(u,h=!1){if(this._optionsService.rawOptions.disableStdin)return;let _=this._bufferService.buffer;h&&this._optionsService.rawOptions.scrollOnUserInput&&_.ybase!==_.ydisp&&this._onRequestScrollToBottom.fire(),h&&this._onUserInput.fire(),this._logService.debug(`sending data "${u}"`,()=>u.split("").map(b=>b.charCodeAt(0))),this._onData.fire(u)}triggerBinaryEvent(u){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${u}"`,()=>u.split("").map(h=>h.charCodeAt(0))),this._onBinary.fire(u))}};i.CoreService=f=a([c(0,y.IBufferService),c(1,y.ILogService),c(2,y.IOptionsService)],f)},9074:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DecorationService=void 0;let a=o(8055),c=o(8460),l=o(844),p=o(6106),m=0,y=0;class g extends l.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new p.SortedList(u=>u?.marker.line),this._onDecorationRegistered=this.register(new c.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new c.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,l.toDisposable)(()=>this.reset()))}registerDecoration(u){if(u.marker.isDisposed)return;let h=new d(u);if(h){let _=h.marker.onDispose(()=>h.dispose());h.onDispose(()=>{h&&(this._decorations.delete(h)&&this._onDecorationRemoved.fire(h),_.dispose())}),this._decorations.insert(h),this._onDecorationRegistered.fire(h)}return h}reset(){for(let u of this._decorations.values())u.dispose();this._decorations.clear()}*getDecorationsAtCell(u,h,_){let b=0,C=0;for(let S of this._decorations.getKeyIterator(h))b=S.options.x??0,C=b+(S.options.width??1),u>=b&&u<C&&(!_||(S.options.layer??"bottom")===_)&&(yield S)}forEachDecorationAtCell(u,h,_,b){this._decorations.forEachByKey(h,C=>{m=C.options.x??0,y=m+(C.options.width??1),u>=m&&u<y&&(!_||(C.options.layer??"bottom")===_)&&b(C)})}}i.DecorationService=g;class d extends l.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=a.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=a.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(u){super(),this.options=u,this.onRenderEmitter=this.register(new c.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new c.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=u.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.InstantiationService=i.ServiceCollection=void 0;let a=o(2585),c=o(8343);class l{constructor(...m){this._entries=new Map;for(let[y,g]of m)this.set(y,g)}set(m,y){let g=this._entries.get(m);return this._entries.set(m,y),g}forEach(m){for(let[y,g]of this._entries.entries())m(y,g)}has(m){return this._entries.has(m)}get(m){return this._entries.get(m)}}i.ServiceCollection=l,i.InstantiationService=class{constructor(){this._services=new l,this._services.set(a.IInstantiationService,this)}setService(p,m){this._services.set(p,m)}getService(p){return this._services.get(p)}createInstance(p,...m){let y=(0,c.getServiceDependencies)(p).sort((f,u)=>f.index-u.index),g=[];for(let f of y){let u=this._services.get(f.id);if(!u)throw new Error(`[createInstance] ${p.name} depends on UNKNOWN service ${f.id}.`);g.push(u)}let d=y.length>0?y[0].index:m.length;if(m.length!==d)throw new Error(`[createInstance] First service dependency of ${p.name} at position ${d+1} conflicts with ${m.length} static arguments`);return new p(...m,...g)}}},7866:function(s,i,o){var a=this&&this.__decorate||function(d,f,u,h){var _,b=arguments.length,C=b<3?f:h===null?h=Object.getOwnPropertyDescriptor(f,u):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(d,f,u,h);else for(var S=d.length-1;S>=0;S--)(_=d[S])&&(C=(b<3?_(C):b>3?_(f,u,C):_(f,u))||C);return b>3&&C&&Object.defineProperty(f,u,C),C},c=this&&this.__param||function(d,f){return function(u,h){f(u,h,d)}};Object.defineProperty(i,"__esModule",{value:!0}),i.traceCall=i.setTraceLogger=i.LogService=void 0;let l=o(844),p=o(2585),m={trace:p.LogLevelEnum.TRACE,debug:p.LogLevelEnum.DEBUG,info:p.LogLevelEnum.INFO,warn:p.LogLevelEnum.WARN,error:p.LogLevelEnum.ERROR,off:p.LogLevelEnum.OFF},y,g=i.LogService=class extends l.Disposable{get logLevel(){return this._logLevel}constructor(d){super(),this._optionsService=d,this._logLevel=p.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),y=this}_updateLogLevel(){this._logLevel=m[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(d){for(let f=0;f<d.length;f++)typeof d[f]=="function"&&(d[f]=d[f]())}_log(d,f,u){this._evalLazyOptionalParams(u),d.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+f,...u)}trace(d,...f){this._logLevel<=p.LogLevelEnum.TRACE&&this._log(this._optionsService.options.logger?.trace.bind(this._optionsService.options.logger)??console.log,d,f)}debug(d,...f){this._logLevel<=p.LogLevelEnum.DEBUG&&this._log(this._optionsService.options.logger?.debug.bind(this._optionsService.options.logger)??console.log,d,f)}info(d,...f){this._logLevel<=p.LogLevelEnum.INFO&&this._log(this._optionsService.options.logger?.info.bind(this._optionsService.options.logger)??console.info,d,f)}warn(d,...f){this._logLevel<=p.LogLevelEnum.WARN&&this._log(this._optionsService.options.logger?.warn.bind(this._optionsService.options.logger)??console.warn,d,f)}error(d,...f){this._logLevel<=p.LogLevelEnum.ERROR&&this._log(this._optionsService.options.logger?.error.bind(this._optionsService.options.logger)??console.error,d,f)}};i.LogService=g=a([c(0,p.IOptionsService)],g),i.setTraceLogger=function(d){y=d},i.traceCall=function(d,f,u){if(typeof u.value!="function")throw new Error("not supported");let h=u.value;u.value=function(..._){if(y.logLevel!==p.LogLevelEnum.TRACE)return h.apply(this,_);y.trace(`GlyphRenderer#${h.name}(${_.map(C=>JSON.stringify(C)).join(", ")})`);let b=h.apply(this,_);return y.trace(`GlyphRenderer#${h.name} return`,b),b}}},7302:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.OptionsService=i.DEFAULT_OPTIONS=void 0;let a=o(8460),c=o(844),l=o(6114);i.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,documentOverride:null,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rescaleOverlappingGlyphs:!1,rightClickSelectsWord:l.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};let p=["normal","bold","100","200","300","400","500","600","700","800","900"];class m extends c.Disposable{constructor(g){super(),this._onOptionChange=this.register(new a.EventEmitter),this.onOptionChange=this._onOptionChange.event;let d=H({},i.DEFAULT_OPTIONS);for(let f in g)if(f in d)try{let u=g[f];d[f]=this._sanitizeAndValidateOption(f,u)}catch(u){console.error(u)}this.rawOptions=d,this.options=H({},d),this._setupOptions(),this.register((0,c.toDisposable)(()=>{this.rawOptions.linkHandler=null,this.rawOptions.documentOverride=null}))}onSpecificOptionChange(g,d){return this.onOptionChange(f=>{f===g&&d(this.rawOptions[g])})}onMultipleOptionChange(g,d){return this.onOptionChange(f=>{g.indexOf(f)!==-1&&d()})}_setupOptions(){let g=f=>{if(!(f in i.DEFAULT_OPTIONS))throw new Error(`No option with key "${f}"`);return this.rawOptions[f]},d=(f,u)=>{if(!(f in i.DEFAULT_OPTIONS))throw new Error(`No option with key "${f}"`);u=this._sanitizeAndValidateOption(f,u),this.rawOptions[f]!==u&&(this.rawOptions[f]=u,this._onOptionChange.fire(f))};for(let f in this.rawOptions){let u={get:g.bind(this,f),set:d.bind(this,f)};Object.defineProperty(this.options,f,u)}}_sanitizeAndValidateOption(g,d){switch(g){case"cursorStyle":if(d||(d=i.DEFAULT_OPTIONS[g]),!(function(f){return f==="block"||f==="underline"||f==="bar"})(d))throw new Error(`"${d}" is not a valid value for ${g}`);break;case"wordSeparator":d||(d=i.DEFAULT_OPTIONS[g]);break;case"fontWeight":case"fontWeightBold":if(typeof d=="number"&&1<=d&&d<=1e3)break;d=p.includes(d)?d:i.DEFAULT_OPTIONS[g];break;case"cursorWidth":d=Math.floor(d);case"lineHeight":case"tabStopWidth":if(d<1)throw new Error(`${g} cannot be less than 1, value: ${d}`);break;case"minimumContrastRatio":d=Math.max(1,Math.min(21,Math.round(10*d)/10));break;case"scrollback":if((d=Math.min(d,4294967295))<0)throw new Error(`${g} cannot be less than 0, value: ${d}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(d<=0)throw new Error(`${g} cannot be less than or equal to 0, value: ${d}`);break;case"rows":case"cols":if(!d&&d!==0)throw new Error(`${g} must be numeric, value: ${d}`);break;case"windowsPty":d=d??{}}return d}}i.OptionsService=m},2660:function(s,i,o){var a=this&&this.__decorate||function(m,y,g,d){var f,u=arguments.length,h=u<3?y:d===null?d=Object.getOwnPropertyDescriptor(y,g):d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(m,y,g,d);else for(var _=m.length-1;_>=0;_--)(f=m[_])&&(h=(u<3?f(h):u>3?f(y,g,h):f(y,g))||h);return u>3&&h&&Object.defineProperty(y,g,h),h},c=this&&this.__param||function(m,y){return function(g,d){y(g,d,m)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OscLinkService=void 0;let l=o(2585),p=i.OscLinkService=class{constructor(m){this._bufferService=m,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(m){let y=this._bufferService.buffer;if(m.id===void 0){let _=y.addMarker(y.ybase+y.y),b={data:m,id:this._nextId++,lines:[_]};return _.onDispose(()=>this._removeMarkerFromLink(b,_)),this._dataByLinkId.set(b.id,b),b.id}let g=m,d=this._getEntryIdKey(g),f=this._entriesWithId.get(d);if(f)return this.addLineToLink(f.id,y.ybase+y.y),f.id;let u=y.addMarker(y.ybase+y.y),h={id:this._nextId++,key:this._getEntryIdKey(g),data:g,lines:[u]};return u.onDispose(()=>this._removeMarkerFromLink(h,u)),this._entriesWithId.set(h.key,h),this._dataByLinkId.set(h.id,h),h.id}addLineToLink(m,y){let g=this._dataByLinkId.get(m);if(g&&g.lines.every(d=>d.line!==y)){let d=this._bufferService.buffer.addMarker(y);g.lines.push(d),d.onDispose(()=>this._removeMarkerFromLink(g,d))}}getLinkData(m){return this._dataByLinkId.get(m)?.data}_getEntryIdKey(m){return`${m.id};;${m.uri}`}_removeMarkerFromLink(m,y){let g=m.lines.indexOf(y);g!==-1&&(m.lines.splice(g,1),m.lines.length===0&&(m.data.id!==void 0&&this._entriesWithId.delete(m.key),this._dataByLinkId.delete(m.id)))}};i.OscLinkService=p=a([c(0,l.IBufferService)],p)},8343:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createDecorator=i.getServiceDependencies=i.serviceRegistry=void 0;let o="di$target",a="di$dependencies";i.serviceRegistry=new Map,i.getServiceDependencies=function(c){return c[a]||[]},i.createDecorator=function(c){if(i.serviceRegistry.has(c))return i.serviceRegistry.get(c);let l=function(p,m,y){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(g,d,f){d[o]===d?d[a].push({id:g,index:f}):(d[a]=[{id:g,index:f}],d[o]=d)})(l,p,y)};return l.toString=()=>c,i.serviceRegistry.set(c,l),l}},2585:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.IDecorationService=i.IUnicodeService=i.IOscLinkService=i.IOptionsService=i.ILogService=i.LogLevelEnum=i.IInstantiationService=i.ICharsetService=i.ICoreService=i.ICoreMouseService=i.IBufferService=void 0;let a=o(8343);var c;i.IBufferService=(0,a.createDecorator)("BufferService"),i.ICoreMouseService=(0,a.createDecorator)("CoreMouseService"),i.ICoreService=(0,a.createDecorator)("CoreService"),i.ICharsetService=(0,a.createDecorator)("CharsetService"),i.IInstantiationService=(0,a.createDecorator)("InstantiationService"),(function(l){l[l.TRACE=0]="TRACE",l[l.DEBUG=1]="DEBUG",l[l.INFO=2]="INFO",l[l.WARN=3]="WARN",l[l.ERROR=4]="ERROR",l[l.OFF=5]="OFF"})(c||(i.LogLevelEnum=c={})),i.ILogService=(0,a.createDecorator)("LogService"),i.IOptionsService=(0,a.createDecorator)("OptionsService"),i.IOscLinkService=(0,a.createDecorator)("OscLinkService"),i.IUnicodeService=(0,a.createDecorator)("UnicodeService"),i.IDecorationService=(0,a.createDecorator)("DecorationService")},1480:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeService=void 0;let a=o(8460),c=o(225);class l{static extractShouldJoin(m){return(1&m)!=0}static extractWidth(m){return m>>1&3}static extractCharKind(m){return m>>3}static createPropertyValue(m,y,g=!1){return(16777215&m)<<3|(3&y)<<1|(g?1:0)}constructor(){this._providers=Object.create(null),this._active="",this._onChange=new a.EventEmitter,this.onChange=this._onChange.event;let m=new c.UnicodeV6;this.register(m),this._active=m.version,this._activeProvider=m}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(m){if(!this._providers[m])throw new Error(`unknown Unicode version "${m}"`);this._active=m,this._activeProvider=this._providers[m],this._onChange.fire(m)}register(m){this._providers[m.version]=m}wcwidth(m){return this._activeProvider.wcwidth(m)}getStringCellWidth(m){let y=0,g=0,d=m.length;for(let f=0;f<d;++f){let u=m.charCodeAt(f);if(55296<=u&&u<=56319){if(++f>=d)return y+this.wcwidth(u);let b=m.charCodeAt(f);56320<=b&&b<=57343?u=1024*(u-55296)+b-56320+65536:y+=this.wcwidth(b)}let h=this.charProperties(u,g),_=l.extractWidth(h);l.extractShouldJoin(h)&&(_-=l.extractWidth(g)),y+=_,g=h}return y}charProperties(m,y){return this._activeProvider.charProperties(m,y)}}i.UnicodeService=l}},t={};function n(s){var i=t[s];if(i!==void 0)return i.exports;var o=t[s]={exports:{}};return e[s].call(o.exports,o,o.exports,n),o.exports}var r={};return(()=>{var s=r;Object.defineProperty(s,"__esModule",{value:!0}),s.Terminal=void 0;let i=n(9042),o=n(3236),a=n(844),c=n(5741),l=n(8285),p=n(7975),m=n(7090),y=["cols","rows"];class g extends a.Disposable{constructor(f){super(),this._core=this.register(new o.Terminal(f)),this._addonManager=this.register(new c.AddonManager),this._publicOptions=H({},this._core.options);let u=_=>this._core.options[_],h=(_,b)=>{this._checkReadonlyOptions(_),this._core.options[_]=b};for(let _ in this._core.options){let b={get:u.bind(this,_),set:h.bind(this,_)};Object.defineProperty(this._publicOptions,_,b)}}_checkReadonlyOptions(f){if(y.includes(f))throw new Error(`Option "${f}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new p.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new m.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new l.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){let f=this._core.coreService.decPrivateModes,u="none";switch(this._core.coreMouseService.activeProtocol){case"X10":u="x10";break;case"VT200":u="vt200";break;case"DRAG":u="drag";break;case"ANY":u="any"}return{applicationCursorKeysMode:f.applicationCursorKeys,applicationKeypadMode:f.applicationKeypad,bracketedPasteMode:f.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:u,originMode:f.origin,reverseWraparoundMode:f.reverseWraparound,sendFocusMode:f.sendFocus,wraparoundMode:f.wraparound}}get options(){return this._publicOptions}set options(f){for(let u in f)this._publicOptions[u]=f[u]}blur(){this._core.blur()}focus(){this._core.focus()}input(f,u=!0){this._core.input(f,u)}resize(f,u){this._verifyIntegers(f,u),this._core.resize(f,u)}open(f){this._core.open(f)}attachCustomKeyEventHandler(f){this._core.attachCustomKeyEventHandler(f)}attachCustomWheelEventHandler(f){this._core.attachCustomWheelEventHandler(f)}registerLinkProvider(f){return this._core.registerLinkProvider(f)}registerCharacterJoiner(f){return this._checkProposedApi(),this._core.registerCharacterJoiner(f)}deregisterCharacterJoiner(f){this._checkProposedApi(),this._core.deregisterCharacterJoiner(f)}registerMarker(f=0){return this._verifyIntegers(f),this._core.registerMarker(f)}registerDecoration(f){return this._checkProposedApi(),this._verifyPositiveIntegers(f.x??0,f.width??0,f.height??0),this._core.registerDecoration(f)}hasSelection(){return this._core.hasSelection()}select(f,u,h){this._verifyIntegers(f,u,h),this._core.select(f,u,h)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(f,u){this._verifyIntegers(f,u),this._core.selectLines(f,u)}dispose(){super.dispose()}scrollLines(f){this._verifyIntegers(f),this._core.scrollLines(f)}scrollPages(f){this._verifyIntegers(f),this._core.scrollPages(f)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(f){this._verifyIntegers(f),this._core.scrollToLine(f)}clear(){this._core.clear()}write(f,u){this._core.write(f,u)}writeln(f,u){this._core.write(f),this._core.write(`\r
`,u)}paste(f){this._core.paste(f)}refresh(f,u){this._verifyIntegers(f,u),this._core.refresh(f,u)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(f){this._addonManager.loadAddon(this,f)}static get strings(){return i}_verifyIntegers(...f){for(let u of f)if(u===1/0||isNaN(u)||u%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...f){for(let u of f)if(u&&(u===1/0||isNaN(u)||u%1!=0||u<0))throw new Error("This API only accepts positive integers")}}s.Terminal=g})(),r})())});var jv=Xh((Vc,Zh)=>{"use strict";(function(e,t){typeof Vc=="object"&&typeof Zh=="object"?Zh.exports=t():typeof define=="function"&&define.amd?define([],t):typeof Vc=="object"?Vc.FitAddon=t():e.FitAddon=t()})(self,()=>(()=>{"use strict";var e={};return(()=>{var t=e;Object.defineProperty(t,"__esModule",{value:!0}),t.FitAddon=void 0,t.FitAddon=class{activate(n){this._terminal=n}dispose(){}fit(){let n=this.proposeDimensions();if(!n||!this._terminal||isNaN(n.cols)||isNaN(n.rows))return;let r=this._terminal._core;this._terminal.rows===n.rows&&this._terminal.cols===n.cols||(r._renderService.clear(),this._terminal.resize(n.cols,n.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;let n=this._terminal._core,r=n._renderService.dimensions;if(r.css.cell.width===0||r.css.cell.height===0)return;let s=this._terminal.options.scrollback===0?0:n.viewport.scrollBarWidth,i=window.getComputedStyle(this._terminal.element.parentElement),o=parseInt(i.getPropertyValue("height")),a=Math.max(0,parseInt(i.getPropertyValue("width"))),c=window.getComputedStyle(this._terminal.element),l=o-(parseInt(c.getPropertyValue("padding-top"))+parseInt(c.getPropertyValue("padding-bottom"))),p=a-(parseInt(c.getPropertyValue("padding-right"))+parseInt(c.getPropertyValue("padding-left")))-s;return{cols:Math.max(2,Math.floor(p/r.css.cell.width)),rows:Math.max(1,Math.floor(l/r.css.cell.height))}}}})(),e})())});var Kc;function to(){return Kc}function Vt(e){let t=Kc;return Kc=e,t}var tf=Symbol("NotFound");function Cr(e){return e===tf||e?.name==="\u0275NotFound"}var Xe=null,no=!1,Zc=1,Jv=null,et=Symbol("SIGNAL");function se(e){let t=Xe;return Xe=e,t}function oo(){return Xe}var br={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Sr(e){if(no)throw new Error("");if(Xe===null)return;Xe.consumerOnSignalRead(e);let t=Xe.producersTail;if(t!==void 0&&t.producer===e)return;let n,r=Xe.recomputing;if(r&&(n=t!==void 0?t.nextProducer:Xe.producers,n!==void 0&&n.producer===e)){Xe.producersTail=n,n.lastReadVersion=e.version;return}let s=e.consumersTail;if(s!==void 0&&s.consumer===Xe&&(!r||ey(s,Xe)))return;let i=Dr(Xe),o={producer:e,consumer:Xe,nextProducer:n,prevConsumer:s,lastReadVersion:e.version,nextConsumer:void 0};Xe.producersTail=o,t!==void 0?t.nextProducer=o:Xe.producers=o,i&&of(e,o)}function nf(){Zc++}function ao(e){if(!(Dr(e)&&!e.dirty)&&!(!e.dirty&&e.lastCleanEpoch===Zc)){if(!e.producerMustRecompute(e)&&!ji(e)){so(e);return}e.producerRecomputeValue(e),so(e)}}function Yc(e){if(e.consumers===void 0)return;let t=no;no=!0;try{for(let n=e.consumers;n!==void 0;n=n.nextConsumer){let r=n.consumer;r.dirty||Xv(r)}}finally{no=t}}function Qc(){return Xe?.consumerAllowSignalWrites!==!1}function Xv(e){e.dirty=!0,Yc(e),e.consumerMarkedDirty?.(e)}function so(e){e.dirty=!1,e.lastCleanEpoch=Zc}function Er(e){return e&&rf(e),se(e)}function rf(e){e.producersTail=void 0,e.recomputing=!0}function Bi(e,t){se(t),e&&sf(e)}function sf(e){e.recomputing=!1;let t=e.producersTail,n=t!==void 0?t.nextProducer:e.producers;if(n!==void 0){if(Dr(e))do n=Jc(n);while(n!==void 0);t!==void 0?t.nextProducer=void 0:e.producers=void 0}}function ji(e){for(let t=e.producers;t!==void 0;t=t.nextProducer){let n=t.producer,r=t.lastReadVersion;if(r!==n.version||(ao(n),r!==n.version))return!0}return!1}function Vi(e){if(Dr(e)){let t=e.producers;for(;t!==void 0;)t=Jc(t)}e.producers=void 0,e.producersTail=void 0,e.consumers=void 0,e.consumersTail=void 0}function of(e,t){let n=e.consumersTail,r=Dr(e);if(n!==void 0?(t.nextConsumer=n.nextConsumer,n.nextConsumer=t):(t.nextConsumer=void 0,e.consumers=t),t.prevConsumer=n,e.consumersTail=t,!r)for(let s=e.producers;s!==void 0;s=s.nextProducer)of(s.producer,s)}function Jc(e){let t=e.producer,n=e.nextProducer,r=e.nextConsumer,s=e.prevConsumer;if(e.nextConsumer=void 0,e.prevConsumer=void 0,r!==void 0?r.prevConsumer=s:t.consumersTail=s,s!==void 0)s.nextConsumer=r;else if(t.consumers=r,!Dr(t)){let i=t.producers;for(;i!==void 0;)i=Jc(i)}return n}function Dr(e){return e.consumerIsAlwaysLive||e.consumers!==void 0}function co(e){Jv?.(e)}function ey(e,t){let n=t.producersTail;if(n!==void 0){let r=t.producers;do{if(r===e)return!0;if(r===n)break;r=r.nextProducer}while(r!==void 0)}return!1}function lo(e,t){return Object.is(e,t)}function uo(e,t){let n=Object.create(ty);n.computation=e,t!==void 0&&(n.equal=t);let r=()=>{if(ao(n),Sr(n),n.value===Fi)throw n.error;return n.value};return r[et]=n,co(n),r}var ro=Symbol("UNSET"),io=Symbol("COMPUTING"),Fi=Symbol("ERRORED"),ty=fe(H({},br),{value:ro,dirty:!0,error:null,equal:lo,kind:"computed",producerMustRecompute(e){return e.value===ro||e.value===io},producerRecomputeValue(e){if(e.value===io)throw new Error("");let t=e.value;e.value=io;let n=Er(e),r,s=!1;try{r=e.computation(),se(null),s=t!==ro&&t!==Fi&&r!==Fi&&e.equal(t,r)}catch(i){r=Fi,e.error=i}finally{Bi(e,n)}if(s){e.value=t;return}e.value=r,e.version++}});function ny(){throw new Error}var af=ny;function cf(e){af(e)}function Xc(e){af=e}var ry=null;function el(e,t){let n=Object.create(ho);n.value=e,t!==void 0&&(n.equal=t);let r=()=>lf(n);return r[et]=n,co(n),[r,o=>wr(n,o),o=>tl(n,o)]}function lf(e){return Sr(e),e.value}function wr(e,t){Qc()||cf(e),e.equal(e.value,t)||(e.value=t,iy(e))}function tl(e,t){Qc()||cf(e),wr(e,t(e.value))}var ho=fe(H({},br),{equal:lo,value:void 0,kind:"signal"});function iy(e){e.version++,nf(),Yc(e),ry?.(e)}function ce(e){return typeof e=="function"}function Ir(e){let n=e(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var fo=Ir(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,s)=>`${s+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Vn(e,t){if(e){let n=e.indexOf(t);0<=n&&e.splice(n,1)}}var xe=class e{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let i of n)i.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(ce(r))try{r()}catch(i){t=i instanceof fo?i.errors:[i]}let{_finalizers:s}=this;if(s){this._finalizers=null;for(let i of s)try{uf(i)}catch(o){t=t??[],o instanceof fo?t=[...t,...o.errors]:t.push(o)}}if(t)throw new fo(t)}}add(t){var n;if(t&&t!==this)if(this.closed)uf(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}}_hasParent(t){let{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){let{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&Vn(n,t)}remove(t){let{_finalizers:n}=this;n&&Vn(n,t),t instanceof e&&t._removeParent(this)}};xe.EMPTY=(()=>{let e=new xe;return e.closed=!0,e})();var nl=xe.EMPTY;function po(e){return e instanceof xe||e&&"closed"in e&&ce(e.remove)&&ce(e.add)&&ce(e.unsubscribe)}function uf(e){ce(e)?e():e.unsubscribe()}var At={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Mr={setTimeout(e,t,...n){let{delegate:r}=Mr;return r?.setTimeout?r.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){let{delegate:t}=Mr;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function go(e){Mr.setTimeout(()=>{let{onUnhandledError:t}=At;if(t)t(e);else throw e})}function Hi(){}var df=rl("C",void 0,void 0);function hf(e){return rl("E",void 0,e)}function ff(e){return rl("N",e,void 0)}function rl(e,t,n){return{kind:e,value:t,error:n}}var Hn=null;function Tr(e){if(At.useDeprecatedSynchronousErrorHandling){let t=!Hn;if(t&&(Hn={errorThrown:!1,error:null}),e(),t){let{errorThrown:n,error:r}=Hn;if(Hn=null,n)throw r}}else e()}function pf(e){At.useDeprecatedSynchronousErrorHandling&&Hn&&(Hn.errorThrown=!0,Hn.error=e)}var Un=class extends xe{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,po(t)&&t.add(this)):this.destination=ay}static create(t,n,r){return new Ar(t,n,r)}next(t){this.isStopped?sl(ff(t),this):this._next(t)}error(t){this.isStopped?sl(hf(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?sl(df,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},sy=Function.prototype.bind;function il(e,t){return sy.call(e,t)}var ol=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(r){mo(r)}}error(t){let{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(r){mo(r)}else mo(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){mo(n)}}},Ar=class extends Un{constructor(t,n,r){super();let s;if(ce(t)||!t)s={next:t??void 0,error:n??void 0,complete:r??void 0};else{let i;this&&At.useDeprecatedNextContext?(i=Object.create(t),i.unsubscribe=()=>this.unsubscribe(),s={next:t.next&&il(t.next,i),error:t.error&&il(t.error,i),complete:t.complete&&il(t.complete,i)}):s=t}this.destination=new ol(s)}};function mo(e){At.useDeprecatedSynchronousErrorHandling?pf(e):go(e)}function oy(e){throw e}function sl(e,t){let{onStoppedNotification:n}=At;n&&Mr.setTimeout(()=>n(e,t))}var ay={closed:!0,next:Hi,error:oy,complete:Hi};var xr=typeof Symbol=="function"&&Symbol.observable||"@@observable";function ht(e){return e}function al(...e){return cl(e)}function cl(e){return e.length===0?ht:e.length===1?e[0]:function(n){return e.reduce((r,s)=>s(r),n)}}var de=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new e;return r.source=this,r.operator=n,r}subscribe(n,r,s){let i=ly(n)?n:new Ar(n,r,s);return Tr(()=>{let{operator:o,source:a}=this;i.add(o?o.call(i,a):a?this._subscribe(i):this._trySubscribe(i))}),i}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=gf(r),new r((s,i)=>{let o=new Ar({next:a=>{try{n(a)}catch(c){i(c),o.unsubscribe()}},error:i,complete:s});this.subscribe(o)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[xr](){return this}pipe(...n){return cl(n)(this)}toPromise(n){return n=gf(n),new n((r,s)=>{let i;this.subscribe(o=>i=o,o=>s(o),()=>r(i))})}}return e.create=t=>new e(t),e})();function gf(e){var t;return(t=e??At.Promise)!==null&&t!==void 0?t:Promise}function cy(e){return e&&ce(e.next)&&ce(e.error)&&ce(e.complete)}function ly(e){return e&&e instanceof Un||cy(e)&&po(e)}function ll(e){return ce(e?.lift)}function _e(e){return t=>{if(ll(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function pe(e,t,n,r,s){return new ul(e,t,n,r,s)}var ul=class extends Un{constructor(t,n,r,s,i,o){super(t),this.onFinalize=i,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(c){t.error(c)}}:super._next,this._error=s?function(a){try{s(a)}catch(c){t.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};function Rr(){return _e((e,t)=>{let n=null;e._refCount++;let r=pe(t,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount){n=null;return}let s=e._connection,i=n;n=null,s&&(!i||s===i)&&s.unsubscribe(),t.unsubscribe()});e.subscribe(r),r.closed||(n=e.connect())})}var Or=class extends de{constructor(t,n){super(),this.source=t,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,ll(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){let t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new xe;let n=this.getSubject();t.add(this.source.subscribe(pe(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),t.closed&&(this._connection=null,t=xe.EMPTY)}return t}refCount(){return Rr()(this)}};var mf=Ir(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ie=(()=>{class e extends de{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new _o(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new mf}next(n){Tr(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Tr(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Tr(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:s,observers:i}=this;return r||s?nl:(this.currentObservers=null,i.push(n),new xe(()=>{this.currentObservers=null,Vn(i,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:s,isStopped:i}=this;r?n.error(s):i&&n.complete()}asObservable(){let n=new de;return n.source=this,n}}return e.create=(t,n)=>new _o(t,n),e})(),_o=class extends Ie{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,t)}error(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,t)}complete(){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||n===void 0||n.call(t)}_subscribe(t){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(t))!==null&&r!==void 0?r:nl}};var Ge=class extends Ie{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){let{hasError:t,thrownError:n,_value:r}=this;if(t)throw n;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}};var dl={now(){return(dl.delegate||Date).now()},delegate:void 0};var vo=class extends xe{constructor(t,n){super()}schedule(t,n=0){return this}};var Ui={setInterval(e,t,...n){let{delegate:r}=Ui;return r?.setInterval?r.setInterval(e,t,...n):setInterval(e,t,...n)},clearInterval(e){let{delegate:t}=Ui;return(t?.clearInterval||clearInterval)(e)},delegate:void 0};var yo=class extends vo{constructor(t,n){super(t,n),this.scheduler=t,this.work=n,this.pending=!1}schedule(t,n=0){var r;if(this.closed)return this;this.state=t;let s=this.id,i=this.scheduler;return s!=null&&(this.id=this.recycleAsyncId(i,s,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(i,this.id,n),this}requestAsyncId(t,n,r=0){return Ui.setInterval(t.flush.bind(t,this),r)}recycleAsyncId(t,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&Ui.clearInterval(n)}execute(t,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(t,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,n){let r=!1,s;try{this.work(t)}catch(i){r=!0,s=i||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),s}unsubscribe(){if(!this.closed){let{id:t,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Vn(r,this),t!=null&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null,super.unsubscribe()}}};var Nr=class e{constructor(t,n=e.now){this.schedulerActionCtor=t,this.now=n}schedule(t,n=0,r){return new this.schedulerActionCtor(this,t).schedule(r,n)}};Nr.now=dl.now;var Co=class extends Nr{constructor(t,n=Nr.now){super(t,n),this.actions=[],this._active=!1}flush(t){let{actions:n}=this;if(this._active){n.push(t);return}let r;this._active=!0;do if(r=t.execute(t.state,t.delay))break;while(t=n.shift());if(this._active=!1,r){for(;t=n.shift();)t.unsubscribe();throw r}}};var hl=new Co(yo),_f=hl;var st=new de(e=>e.complete());function bo(e){return e&&ce(e.schedule)}function vf(e){return e[e.length-1]}function So(e){return ce(vf(e))?e.pop():void 0}function Sn(e){return bo(vf(e))?e.pop():void 0}function Cf(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(p){try{l(r.next(p))}catch(m){o(m)}}function c(p){try{l(r.throw(p))}catch(m){o(m)}}function l(p){p.done?i(p.value):s(p.value).then(a,c)}l((r=r.apply(e,t||[])).next())})}function yf(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function $n(e){return this instanceof $n?(this.v=e,this):new $n(e)}function bf(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),s,i=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),s[Symbol.asyncIterator]=function(){return this},s;function o(g){return function(d){return Promise.resolve(d).then(g,m)}}function a(g,d){r[g]&&(s[g]=function(f){return new Promise(function(u,h){i.push([g,f,u,h])>1||c(g,f)})},d&&(s[g]=d(s[g])))}function c(g,d){try{l(r[g](d))}catch(f){y(i[0][3],f)}}function l(g){g.value instanceof $n?Promise.resolve(g.value.v).then(p,m):y(i[0][2],g)}function p(g){c("next",g)}function m(g){c("throw",g)}function y(g,d){g(d),i.shift(),i.length&&c(i[0][0],i[0][1])}}function Sf(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof yf=="function"?yf(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=e[i]&&function(o){return new Promise(function(a,c){o=e[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},o)}}var Eo=e=>e&&typeof e.length=="number"&&typeof e!="function";function Do(e){return ce(e?.then)}function wo(e){return ce(e[xr])}function Io(e){return Symbol.asyncIterator&&ce(e?.[Symbol.asyncIterator])}function Mo(e){return new TypeError(`You provided ${e!==null&&typeof e=="object"?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function uy(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var To=uy();function Ao(e){return ce(e?.[To])}function xo(e){return bf(this,arguments,function*(){let n=e.getReader();try{for(;;){let{value:r,done:s}=yield $n(n.read());if(s)return yield $n(void 0);yield yield $n(r)}}finally{n.releaseLock()}})}function Ro(e){return ce(e?.getReader)}function Pe(e){if(e instanceof de)return e;if(e!=null){if(wo(e))return dy(e);if(Eo(e))return hy(e);if(Do(e))return fy(e);if(Io(e))return Ef(e);if(Ao(e))return py(e);if(Ro(e))return gy(e)}throw Mo(e)}function dy(e){return new de(t=>{let n=e[xr]();if(ce(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function hy(e){return new de(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function fy(e){return new de(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,go)})}function py(e){return new de(t=>{for(let n of e)if(t.next(n),t.closed)return;t.complete()})}function Ef(e){return new de(t=>{my(e,t).catch(n=>t.error(n))})}function gy(e){return Ef(xo(e))}function my(e,t){var n,r,s,i;return Cf(this,void 0,void 0,function*(){try{for(n=Sf(e);r=yield n.next(),!r.done;){let o=r.value;if(t.next(o),t.closed)return}}catch(o){s={error:o}}finally{try{r&&!r.done&&(i=n.return)&&(yield i.call(n))}finally{if(s)throw s.error}}t.complete()})}function ot(e,t,n,r=0,s=!1){let i=t.schedule(function(){n(),s?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(i),!s)return i}function Oo(e,t=0){return _e((n,r)=>{n.subscribe(pe(r,s=>ot(r,e,()=>r.next(s),t),()=>ot(r,e,()=>r.complete(),t),s=>ot(r,e,()=>r.error(s),t)))})}function No(e,t=0){return _e((n,r)=>{r.add(e.schedule(()=>n.subscribe(r),t))})}function Df(e,t){return Pe(e).pipe(No(t),Oo(t))}function wf(e,t){return Pe(e).pipe(No(t),Oo(t))}function If(e,t){return new de(n=>{let r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}function Mf(e,t){return new de(n=>{let r;return ot(n,t,()=>{r=e[To](),ot(n,t,()=>{let s,i;try{({value:s,done:i}=r.next())}catch(o){n.error(o);return}i?n.complete():n.next(s)},0,!0)}),()=>ce(r?.return)&&r.return()})}function ko(e,t){if(!e)throw new Error("Iterable cannot be null");return new de(n=>{ot(n,t,()=>{let r=e[Symbol.asyncIterator]();ot(n,t,()=>{r.next().then(s=>{s.done?n.complete():n.next(s.value)})},0,!0)})})}function Tf(e,t){return ko(xo(e),t)}function Af(e,t){if(e!=null){if(wo(e))return Df(e,t);if(Eo(e))return If(e,t);if(Do(e))return wf(e,t);if(Io(e))return ko(e,t);if(Ao(e))return Mf(e,t);if(Ro(e))return Tf(e,t)}throw Mo(e)}function Re(e,t){return t?Af(e,t):Pe(e)}function te(...e){let t=Sn(e);return Re(e,t)}function kr(e,t){let n=ce(e)?e:()=>e,r=s=>s.error(n());return new de(t?s=>t.schedule(r,0,s):r)}function fl(e){return!!e&&(e instanceof de||ce(e.lift)&&ce(e.subscribe))}var Qt=Ir(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function xf(e){return e instanceof Date&&!isNaN(e)}function ue(e,t){return _e((n,r)=>{let s=0;n.subscribe(pe(r,i=>{r.next(e.call(t,i,s++))}))})}var{isArray:_y}=Array;function vy(e,t){return _y(t)?e(...t):e(t)}function Po(e){return ue(t=>vy(e,t))}var{isArray:yy}=Array,{getPrototypeOf:Cy,prototype:by,keys:Sy}=Object;function Lo(e){if(e.length===1){let t=e[0];if(yy(t))return{args:t,keys:null};if(Ey(t)){let n=Sy(t);return{args:n.map(r=>t[r]),keys:n}}}return{args:e,keys:null}}function Ey(e){return e&&typeof e=="object"&&Cy(e)===by}function Fo(e,t){return e.reduce((n,r,s)=>(n[r]=t[s],n),{})}function Bo(...e){let t=Sn(e),n=So(e),{args:r,keys:s}=Lo(e);if(r.length===0)return Re([],t);let i=new de(Dy(r,t,s?o=>Fo(s,o):ht));return n?i.pipe(Po(n)):i}function Dy(e,t,n=ht){return r=>{Rf(t,()=>{let{length:s}=e,i=new Array(s),o=s,a=s;for(let c=0;c<s;c++)Rf(t,()=>{let l=Re(e[c],t),p=!1;l.subscribe(pe(r,m=>{i[c]=m,p||(p=!0,a--),a||r.next(n(i.slice()))},()=>{--o||r.complete()}))},r)},r)}}function Rf(e,t,n){e?ot(n,e,t):t()}function Of(e,t,n,r,s,i,o,a){let c=[],l=0,p=0,m=!1,y=()=>{m&&!c.length&&!l&&t.complete()},g=f=>l<r?d(f):c.push(f),d=f=>{i&&t.next(f),l++;let u=!1;Pe(n(f,p++)).subscribe(pe(t,h=>{s?.(h),i?g(h):t.next(h)},()=>{u=!0},void 0,()=>{if(u)try{for(l--;c.length&&l<r;){let h=c.shift();o?ot(t,o,()=>d(h)):d(h)}y()}catch(h){t.error(h)}}))};return e.subscribe(pe(t,g,()=>{m=!0,y()})),()=>{a?.()}}function Be(e,t,n=1/0){return ce(t)?Be((r,s)=>ue((i,o)=>t(r,i,s,o))(Pe(e(r,s))),n):(typeof t=="number"&&(n=t),_e((r,s)=>Of(r,s,e,n)))}function Nf(e=1/0){return Be(ht,e)}function kf(){return Nf(1)}function Pr(...e){return kf()(Re(e,Sn(e)))}function $i(e){return new de(t=>{Pe(e()).subscribe(t)})}function pl(...e){let t=So(e),{args:n,keys:r}=Lo(e),s=new de(i=>{let{length:o}=n;if(!o){i.complete();return}let a=new Array(o),c=o,l=o;for(let p=0;p<o;p++){let m=!1;Pe(n[p]).subscribe(pe(i,y=>{m||(m=!0,l--),a[p]=y},()=>c--,void 0,()=>{(!c||!m)&&(l||i.next(r?Fo(r,a):a),i.complete())}))}});return t?s.pipe(Po(t)):s}function Pf(e=0,t,n=_f){let r=-1;return t!=null&&(bo(t)?n=t:r=t),new de(s=>{let i=xf(e)?+e-n.now():e;i<0&&(i=0);let o=0;return n.schedule(function(){s.closed||(s.next(o++),0<=r?this.schedule(void 0,r):s.complete())},i)})}function gl(e=0,t=hl){return e<0&&(e=0),Pf(e,e,t)}function at(e,t){return _e((n,r)=>{let s=0;n.subscribe(pe(r,i=>e.call(t,i,s++)&&r.next(i)))})}function Ct(e){return _e((t,n)=>{let r=null,s=!1,i;r=t.subscribe(pe(n,void 0,void 0,o=>{i=Pe(e(o,Ct(e)(t))),r?(r.unsubscribe(),r=null,i.subscribe(n)):s=!0})),s&&(r.unsubscribe(),r=null,i.subscribe(n))})}function Lf(e,t,n,r,s){return(i,o)=>{let a=n,c=t,l=0;i.subscribe(pe(o,p=>{let m=l++;c=a?e(c,p,m):(a=!0,p),r&&o.next(c)},s&&(()=>{a&&o.next(c),o.complete()})))}}function En(e,t){return ce(t)?Be(e,t,1):Be(e,1)}function Dn(e){return _e((t,n)=>{let r=!1;t.subscribe(pe(n,s=>{r=!0,n.next(s)},()=>{r||n.next(e),n.complete()}))})}function Jt(e){return e<=0?()=>st:_e((t,n)=>{let r=0;t.subscribe(pe(n,s=>{++r<=e&&(n.next(s),e<=r&&n.complete())}))})}function jo(e=wy){return _e((t,n)=>{let r=!1;t.subscribe(pe(n,s=>{r=!0,n.next(s)},()=>r?n.complete():n.error(e())))})}function wy(){return new Qt}function Wn(e){return _e((t,n)=>{try{t.subscribe(n)}finally{n.add(e)}})}function Xt(e,t){let n=arguments.length>=2;return r=>r.pipe(e?at((s,i)=>e(s,i,r)):ht,Jt(1),n?Dn(t):jo(()=>new Qt))}function Lr(e){return e<=0?()=>st:_e((t,n)=>{let r=[];t.subscribe(pe(n,s=>{r.push(s),e<r.length&&r.shift()},()=>{for(let s of r)n.next(s);n.complete()},void 0,()=>{r=null}))})}function ml(e,t){let n=arguments.length>=2;return r=>r.pipe(e?at((s,i)=>e(s,i,r)):ht,Lr(1),n?Dn(t):jo(()=>new Qt))}function _l(e,t){return _e(Lf(e,t,arguments.length>=2,!0))}function vl(...e){let t=Sn(e);return _e((n,r)=>{(t?Pr(e,n,t):Pr(e,n)).subscribe(r)})}function je(e,t){return _e((n,r)=>{let s=null,i=0,o=!1,a=()=>o&&!s&&r.complete();n.subscribe(pe(r,c=>{s?.unsubscribe();let l=0,p=i++;Pe(e(c,p)).subscribe(s=pe(r,m=>r.next(t?t(c,m,p,l++):m),()=>{s=null,a()}))},()=>{o=!0,a()}))})}function Vo(e){return _e((t,n)=>{Pe(e).subscribe(pe(n,()=>n.complete(),Hi)),!n.closed&&t.subscribe(n)})}function Oe(e,t,n){let r=ce(e)||t||n?{next:e,error:t,complete:n}:e;return r?_e((s,i)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;s.subscribe(pe(i,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),i.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),i.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),i.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):ht}function Ff(e){let t=se(null);try{return e()}finally{se(t)}}var xl="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",J=class extends Error{code;constructor(t,n){super(Br(t,n)),this.code=t}};function Iy(e){return`NG0${Math.abs(e)}`}function Br(e,t){return`${Iy(e)}${t?": "+t:""}`}function ve(e){for(let t in e)if(e[t]===ve)return t;throw Error("")}function Vf(e,t){for(let n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function tn(e){if(typeof e=="string")return e;if(Array.isArray(e))return`[${e.map(tn).join(", ")}]`;if(e==null)return""+e;let t=e.overriddenName||e.name;if(t)return`${t}`;let n=e.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function Rl(e,t){return e?t?`${e} ${t}`:e:t||""}var My=ve({__forward_ref__:ve});function rn(e){return e.__forward_ref__=rn,e.toString=function(){return tn(this())},e}function qe(e){return Ol(e)?e():e}function Ol(e){return typeof e=="function"&&e.hasOwnProperty(My)&&e.__forward_ref__===rn}function Q(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function Ht(e){return{providers:e.providers||[],imports:e.imports||[]}}function qi(e){return Ty(e,Wo)}function Nl(e){return qi(e)!==null}function Ty(e,t){return e.hasOwnProperty(t)&&e[t]||null}function Ay(e){let t=e?.[Wo]??null;return t||null}function Cl(e){return e&&e.hasOwnProperty(Uo)?e[Uo]:null}var Wo=ve({\u0275prov:ve}),Uo=ve({\u0275inj:ve}),X=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(t,n){this._desc=t,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=Q({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function kl(e){return e&&!!e.\u0275providers}var Pl=ve({\u0275cmp:ve}),Ll=ve({\u0275dir:ve}),Fl=ve({\u0275pipe:ve}),Bl=ve({\u0275mod:ve}),zi=ve({\u0275fac:ve}),Yn=ve({__NG_ELEMENT_ID__:ve}),Bf=ve({__NG_ENV_ID__:ve});function Ki(e){return typeof e=="string"?e:e==null?"":String(e)}function Hf(e){return typeof e=="function"?e.name||e.toString():typeof e=="object"&&e!=null&&typeof e.type=="function"?e.type.name||e.type.toString():Ki(e)}var Uf=ve({ngErrorCode:ve}),xy=ve({ngErrorMessage:ve}),Ry=ve({ngTokenPath:ve});function jl(e,t){return $f("",-200,t)}function zo(e,t){throw new J(-201,!1)}function $f(e,t,n){let r=new J(t,e);return r[Uf]=t,r[xy]=e,n&&(r[Ry]=n),r}function Oy(e){return e[Uf]}var bl;function Wf(){return bl}function ft(e){let t=bl;return bl=e,t}function Vl(e,t,n){let r=qi(e);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&8)return null;if(t!==void 0)return t;zo(e,"Injector")}var Ny={},zn=Ny,ky="__NG_DI_FLAG__",Sl=class{injector;constructor(t){this.injector=t}retrieve(t,n){let r=Gn(n)||0;try{return this.injector.get(t,r&8?null:zn,r)}catch(s){if(Cr(s))return s;throw s}}};function Py(e,t=0){let n=to();if(n===void 0)throw new J(-203,!1);if(n===null)return Vl(e,void 0,t);{let r=Ly(t),s=n.retrieve(e,r);if(Cr(s)){if(r.optional)return null;throw s}return s}}function re(e,t=0){return(Wf()||Py)(qe(e),t)}function P(e,t){return re(e,Gn(t))}function Gn(e){return typeof e>"u"||typeof e=="number"?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function Ly(e){return{optional:!!(e&8),host:!!(e&1),self:!!(e&2),skipSelf:!!(e&4)}}function El(e){let t=[];for(let n=0;n<e.length;n++){let r=qe(e[n]);if(Array.isArray(r)){if(r.length===0)throw new J(900,!1);let s,i=0;for(let o=0;o<r.length;o++){let a=r[o],c=Fy(a);typeof c=="number"?c===-1?s=a.token:i|=c:s=a}t.push(re(s,i))}else t.push(re(r))}return t}function Fy(e){return e[ky]}function qn(e,t){let n=e.hasOwnProperty(zi);return n?e[zi]:null}function zf(e,t,n){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++){let s=e[r],i=t[r];if(n&&(s=n(s),i=n(i)),i!==s)return!1}return!0}function Gf(e){return e.flat(Number.POSITIVE_INFINITY)}function Go(e,t){e.forEach(n=>Array.isArray(n)?Go(n,t):t(n))}function Hl(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function Zi(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function qf(e,t,n,r){let s=e.length;if(s==t)e.push(n,r);else if(s===1)e.push(r,e[0]),e[0]=n;else{for(s--,e.push(e[s-1],e[s]);s>t;){let i=s-2;e[s]=e[i],s--}e[t]=n,e[t+1]=r}}function Kf(e,t,n){let r=jr(e,t);return r>=0?e[r|1]=n:(r=~r,qf(e,r,t,n)),r}function qo(e,t){let n=jr(e,t);if(n>=0)return e[n|1]}function jr(e,t){return By(e,t,1)}function By(e,t,n){let r=0,s=e.length>>n;for(;s!==r;){let i=r+(s-r>>1),o=e[i<<n];if(t===o)return i<<n;o>t?s=i:r=i+1}return~(s<<n)}var In={},pt=[],sn=new X(""),Ul=new X("",-1),$l=new X(""),Gi=class{get(t,n=zn){if(n===zn){let s=$f("",-201);throw s.name="\u0275NotFound",s}return n}};function Wl(e){return e[Bl]||null}function Mn(e){return e[Pl]||null}function zl(e){return e[Ll]||null}function Zf(e){return e[Fl]||null}function on(e){return{\u0275providers:e}}function Yf(e){return on([{provide:sn,multi:!0,useValue:e}])}function Qf(...e){return{\u0275providers:Gl(!0,e),\u0275fromNgModule:!0}}function Gl(e,...t){let n=[],r=new Set,s,i=o=>{n.push(o)};return Go(t,o=>{let a=o;$o(a,i,[],r)&&(s||=[],s.push(a))}),s!==void 0&&Jf(s,i),n}function Jf(e,t){for(let n=0;n<e.length;n++){let{ngModule:r,providers:s}=e[n];ql(s,i=>{t(i,r)})}}function $o(e,t,n,r){if(e=qe(e),!e)return!1;let s=null,i=Cl(e),o=!i&&Mn(e);if(!i&&!o){let c=e.ngModule;if(i=Cl(c),i)s=c;else return!1}else{if(o&&!o.standalone)return!1;s=e}let a=r.has(s);if(o){if(a)return!1;if(r.add(s),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of c)$o(l,t,n,r)}}else if(i){if(i.imports!=null&&!a){r.add(s);let l;try{Go(i.imports,p=>{$o(p,t,n,r)&&(l||=[],l.push(p))})}finally{}l!==void 0&&Jf(l,t)}if(!a){let l=qn(s)||(()=>new s);t({provide:s,useFactory:l,deps:pt},s),t({provide:$l,useValue:s,multi:!0},s),t({provide:sn,useValue:()=>re(s),multi:!0},s)}let c=i.providers;if(c!=null&&!a){let l=e;ql(c,p=>{t(p,l)})}}else return!1;return s!==e&&e.providers!==void 0}function ql(e,t){for(let n of e)kl(n)&&(n=n.\u0275providers),Array.isArray(n)?ql(n,t):t(n)}var jy=ve({provide:String,useValue:ve});function Xf(e){return e!==null&&typeof e=="object"&&jy in e}function Vy(e){return!!(e&&e.useExisting)}function Hy(e){return!!(e&&e.useFactory)}function Kn(e){return typeof e=="function"}function ep(e){return!!e.useClass}var Yi=new X(""),Ho={},jf={},yl;function Qi(){return yl===void 0&&(yl=new Gi),yl}var Ve=class{},Zn=class extends Ve{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(t,n,r,s){super(),this.parent=n,this.source=r,this.scopes=s,wl(t,o=>this.processProvider(o)),this.records.set(Ul,Fr(void 0,this)),s.has("environment")&&this.records.set(Ve,Fr(void 0,this));let i=this.records.get(Yi);i!=null&&typeof i.value=="string"&&this.scopes.add(i.value),this.injectorDefTypes=new Set(this.get($l,pt,{self:!0}))}retrieve(t,n){let r=Gn(n)||0;try{return this.get(t,zn,r)}catch(s){if(Cr(s))return s;throw s}}destroy(){Wi(this),this._destroyed=!0;let t=se(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),se(t)}}onDestroy(t){return Wi(this),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){Wi(this);let n=Vt(this),r=ft(void 0),s;try{return t()}finally{Vt(n),ft(r)}}get(t,n=zn,r){if(Wi(this),t.hasOwnProperty(Bf))return t[Bf](this);let s=Gn(r),i,o=Vt(this),a=ft(void 0);try{if(!(s&4)){let l=this.records.get(t);if(l===void 0){let p=Gy(t)&&qi(t);p&&this.injectableDefInScope(p)?l=Fr(Dl(t),Ho):l=null,this.records.set(t,l)}if(l!=null)return this.hydrate(t,l,s)}let c=s&2?Qi():this.parent;return n=s&8&&n===zn?null:n,c.get(t,n)}catch(c){let l=Oy(c);throw l===-200||l===-201?new J(l,null):c}finally{ft(a),Vt(o)}}resolveInjectorInitializers(){let t=se(null),n=Vt(this),r=ft(void 0),s;try{let i=this.get(sn,pt,{self:!0});for(let o of i)o()}finally{Vt(n),ft(r),se(t)}}toString(){let t=[],n=this.records;for(let r of n.keys())t.push(tn(r));return`R3Injector[${t.join(", ")}]`}processProvider(t){t=qe(t);let n=Kn(t)?t:qe(t&&t.provide),r=$y(t);if(!Kn(t)&&t.multi===!0){let s=this.records.get(n);s||(s=Fr(void 0,Ho,!0),s.factory=()=>El(s.multi),this.records.set(n,s)),n=t,s.multi.push(t)}this.records.set(n,r)}hydrate(t,n,r){let s=se(null);try{if(n.value===jf)throw jl(tn(t));return n.value===Ho&&(n.value=jf,n.value=n.factory(void 0,r)),typeof n.value=="object"&&n.value&&zy(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{se(s)}}injectableDefInScope(t){if(!t.providedIn)return!1;let n=qe(t.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(t){let n=this._onDestroyHooks.indexOf(t);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Dl(e){let t=qi(e),n=t!==null?t.factory:qn(e);if(n!==null)return n;if(e instanceof X)throw new J(204,!1);if(e instanceof Function)return Uy(e);throw new J(204,!1)}function Uy(e){if(e.length>0)throw new J(204,!1);let n=Ay(e);return n!==null?()=>n.factory(e):()=>new e}function $y(e){if(Xf(e))return Fr(void 0,e.useValue);{let t=Kl(e);return Fr(t,Ho)}}function Kl(e,t,n){let r;if(Kn(e)){let s=qe(e);return qn(s)||Dl(s)}else if(Xf(e))r=()=>qe(e.useValue);else if(Hy(e))r=()=>e.useFactory(...El(e.deps||[]));else if(Vy(e))r=(s,i)=>re(qe(e.useExisting),i!==void 0&&i&8?8:void 0);else{let s=qe(e&&(e.useClass||e.provide));if(Wy(e))r=()=>new s(...El(e.deps));else return qn(s)||Dl(s)}return r}function Wi(e){if(e.destroyed)throw new J(205,!1)}function Fr(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function Wy(e){return!!e.deps}function zy(e){return e!==null&&typeof e=="object"&&typeof e.ngOnDestroy=="function"}function Gy(e){return typeof e=="function"||typeof e=="object"&&e.ngMetadataName==="InjectionToken"}function wl(e,t){for(let n of e)Array.isArray(n)?wl(n,t):n&&kl(n)?wl(n.\u0275providers,t):t(n)}function Ke(e,t){let n;e instanceof Zn?(Wi(e),n=e):n=new Sl(e);let r,s=Vt(n),i=ft(void 0);try{return t()}finally{Vt(s),ft(i)}}function tp(){return Wf()!==void 0||to()!=null}var Rt=0,ne=1,oe=2,He=3,St=4,Et=5,Vr=6,Hr=7,Ne=8,Tn=9,an=10,Me=11,Ur=12,Zl=13,Qn=14,gt=15,An=16,Jn=17,Ut=18,Ji=19,Yl=20,en=21,Ko=22,Xi=23,mt=24,Xn=25,er=26,Ze=27,np=1,Ql=6,xn=7,es=8,tr=9,Le=10;function $t(e){return Array.isArray(e)&&typeof e[np]=="object"}function Ot(e){return Array.isArray(e)&&e[np]===!0}function Jl(e){return(e.flags&4)!==0}function Rn(e){return e.componentOffset>-1}function Zo(e){return(e.flags&1)===1}function Wt(e){return!!e.template}function $r(e){return(e[oe]&512)!==0}function nr(e){return(e[oe]&256)===256}var rp="svg",ip="math";function Dt(e){for(;Array.isArray(e);)e=e[Rt];return e}function Xl(e,t){return Dt(t[e])}function zt(e,t){return Dt(t[e.index])}function ts(e,t){return e.data[t]}function wt(e,t){let n=t[e];return $t(n)?n:n[Rt]}function sp(e){return(e[oe]&4)===4}function Yo(e){return(e[oe]&128)===128}function op(e){return Ot(e[He])}function Gt(e,t){return t==null?null:e[t]}function eu(e){e[Jn]=0}function tu(e){e[oe]&1024||(e[oe]|=1024,Yo(e)&&Wr(e))}function ap(e,t){for(;e>0;)t=t[Qn],e--;return t}function ns(e){return!!(e[oe]&9216||e[mt]?.dirty)}function Qo(e){e[an].changeDetectionScheduler?.notify(8),e[oe]&64&&(e[oe]|=1024),ns(e)&&Wr(e)}function Wr(e){e[an].changeDetectionScheduler?.notify(0);let t=wn(e);for(;t!==null&&!(t[oe]&8192||(t[oe]|=8192,!Yo(t)));)t=wn(t)}function nu(e,t){if(nr(e))throw new J(911,!1);e[en]===null&&(e[en]=[]),e[en].push(t)}function cp(e,t){if(e[en]===null)return;let n=e[en].indexOf(t);n!==-1&&e[en].splice(n,1)}function wn(e){let t=e[He];return Ot(t)?t[He]:t}function ru(e){return e[Hr]??=[]}function iu(e){return e.cleanup??=[]}function lp(e,t,n,r){let s=ru(t);s.push(n),e.firstCreatePass&&iu(e).push(r,s.length-1)}var he={lFrame:Ep(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Il=!1;function up(){return he.lFrame.elementDepthCount}function dp(){he.lFrame.elementDepthCount++}function su(){he.lFrame.elementDepthCount--}function hp(){return he.bindingsEnabled}function fp(){return he.skipHydrationRootTNode!==null}function ou(e){return he.skipHydrationRootTNode===e}function au(){he.skipHydrationRootTNode=null}function ge(){return he.lFrame.lView}function Ye(){return he.lFrame.tView}function ct(e){return he.lFrame.contextLView=e,e[Ne]}function lt(e){return he.lFrame.contextLView=null,e}function Qe(){let e=cu();for(;e!==null&&e.type===64;)e=e.parent;return e}function cu(){return he.lFrame.currentTNode}function pp(){let e=he.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}function zr(e,t){let n=he.lFrame;n.currentTNode=e,n.isParent=t}function lu(){return he.lFrame.isParent}function gp(){he.lFrame.isParent=!1}function uu(){return Il}function du(e){let t=Il;return Il=e,t}function mp(){return he.lFrame.bindingIndex}function _p(e){return he.lFrame.bindingIndex=e}function Gr(){return he.lFrame.bindingIndex++}function hu(e){let t=he.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function vp(){return he.lFrame.inI18n}function yp(e,t){let n=he.lFrame;n.bindingIndex=n.bindingRootIndex=e,Jo(t)}function Cp(){return he.lFrame.currentDirectiveIndex}function Jo(e){he.lFrame.currentDirectiveIndex=e}function bp(e){let t=he.lFrame.currentDirectiveIndex;return t===-1?null:e[t]}function fu(){return he.lFrame.currentQueryIndex}function Xo(e){he.lFrame.currentQueryIndex=e}function qy(e){let t=e[ne];return t.type===2?t.declTNode:t.type===1?e[Et]:null}function pu(e,t,n){if(n&4){let s=t,i=e;for(;s=s.parent,s===null&&!(n&1);)if(s=qy(i),s===null||(i=i[Qn],s.type&10))break;if(s===null)return!1;t=s,e=i}let r=he.lFrame=Sp();return r.currentTNode=t,r.lView=e,!0}function ea(e){let t=Sp(),n=e[ne];he.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function Sp(){let e=he.lFrame,t=e===null?null:e.child;return t===null?Ep(e):t}function Ep(e){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return e!==null&&(e.child=t),t}function Dp(){let e=he.lFrame;return he.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}var gu=Dp;function ta(){let e=Dp();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function wp(e){return(he.lFrame.contextLView=ap(e,he.lFrame.contextLView))[Ne]}function cn(){return he.lFrame.selectedIndex}function On(e){he.lFrame.selectedIndex=e}function mu(){let e=he.lFrame;return ts(e.tView,e.selectedIndex)}function Ip(){return he.lFrame.currentNamespace}var Mp=!0;function na(){return Mp}function ra(e){Mp=e}function Ml(e,t=null,n=null,r){let s=_u(e,t,n,r);return s.resolveInjectorInitializers(),s}function _u(e,t=null,n=null,r,s=new Set){let i=[n||pt,Qf(e)];return r=r||(typeof e=="object"?void 0:tn(e)),new Zn(i,t||Qi(),r||null,s)}var bt=class e{static THROW_IF_NOT_FOUND=zn;static NULL=new Gi;static create(t,n){if(Array.isArray(t))return Ml({name:""},n,t,"");{let r=t.name??"";return Ml({name:r},t.parent,t.providers,r)}}static \u0275prov=Q({token:e,providedIn:"any",factory:()=>re(Ul)});static __NG_ELEMENT_ID__=-1},Fe=new X(""),Nt=(()=>{class e{static __NG_ELEMENT_ID__=Ky;static __NG_ENV_ID__=n=>n}return e})(),Tl=class extends Nt{_lView;constructor(t){super(),this._lView=t}get destroyed(){return nr(this._lView)}onDestroy(t){let n=this._lView;return nu(n,t),()=>cp(n,t)}};function Ky(){return new Tl(ge())}var xt=class{_console=console;handleError(t){this._console.error("ERROR",t)}},_t=new X("",{providedIn:"root",factory:()=>{let e=P(Ve),t;return n=>{e.destroyed&&!t?setTimeout(()=>{throw n}):(t??=e.get(xt),t.handleError(n))}}}),Tp={provide:sn,useValue:()=>void P(xt),multi:!0},Zy=new X("",{providedIn:"root",factory:()=>{let e=P(Fe).defaultView;if(!e)return;let t=P(_t),n=i=>{t(i.reason),i.preventDefault()},r=i=>{i.error?t(i.error):t(new Error(i.message,{cause:i})),i.preventDefault()},s=()=>{e.addEventListener("unhandledrejection",n),e.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(s):s(),P(Nt).onDestroy(()=>{e.removeEventListener("error",r),e.removeEventListener("unhandledrejection",n)})}});function vu(){return on([Yf(()=>void P(Zy))])}function yu(e){return typeof e=="function"&&e[et]!==void 0}function be(e,t){let[n,r,s]=el(e,t?.equal),i=n,o=i[et];return i.set=r,i.update=s,i.asReadonly=Ap.bind(i),i}function Ap(){let e=this[et];if(e.readonlyFn===void 0){let t=()=>this();t[et]=e,e.readonlyFn=t}return e.readonlyFn}function Cu(e){return yu(e)&&typeof e.set=="function"}var ia=(()=>{class e{view;node;constructor(n,r){this.view=n,this.node=r}static __NG_ELEMENT_ID__=Yy}return e})();function Yy(){return new ia(ge(),Qe())}var nn=class{},rs=new X("",{providedIn:"root",factory:()=>!1});var bu=new X(""),Su=new X(""),qt=(()=>{class e{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new Ge(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new de(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=Q({token:e,providedIn:"root",factory:()=>new e})}return e})(),sa=(()=>{class e{internalPendingTasks=P(qt);scheduler=P(nn);errorHandler=P(_t);add(){let n=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(n)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(n))}}run(n){let r=this.add();n().catch(this.errorHandler).finally(r)}static \u0275prov=Q({token:e,providedIn:"root",factory:()=>new e})}return e})();function is(...e){}var Eu=(()=>{class e{static \u0275prov=Q({token:e,providedIn:"root",factory:()=>new Al})}return e})(),Al=class{dirtyEffectCount=0;queues=new Map;add(t){this.enqueue(t),this.schedule(t)}schedule(t){t.dirty&&this.dirtyEffectCount++}remove(t){let n=t.zone,r=this.queues.get(n);r.has(t)&&(r.delete(t),t.dirty&&this.dirtyEffectCount--)}enqueue(t){let n=t.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(t)||r.add(t)}flush(){for(;this.dirtyEffectCount>0;){let t=!1;for(let[n,r]of this.queues)n===null?t||=this.flushQueue(r):t||=n.run(()=>this.flushQueue(r));t||(this.dirtyEffectCount=0)}}flushQueue(t){let n=!1;for(let r of t)r.dirty&&(this.dirtyEffectCount--,n=!0,r.run());return n}};function fs(e){return{toString:e}.toString()}function s0(e){return typeof e=="function"}var ha=class{previousValue;currentValue;firstChange;constructor(t,n,r){this.previousValue=t,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function ag(e,t,n,r){t!==null?t.applyValueToInputSignal(t,r):e[n]=r}var ni=(()=>{let e=()=>cg;return e.ngInherit=!0,e})();function cg(e){return e.type.prototype.ngOnChanges&&(e.setInput=a0),o0}function o0(){let e=ug(this),t=e?.current;if(t){let n=e.previous;if(n===In)e.previous=t;else for(let r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function a0(e,t,n,r,s){let i=this.declaredInputs[r],o=ug(e)||c0(e,{previous:In,current:null}),a=o.current||(o.current={}),c=o.previous,l=c[i];a[i]=new ha(l&&l.currentValue,n,c===In),ag(e,t,s,n)}var lg="__ngSimpleChanges__";function ug(e){return e[lg]||null}function c0(e,t){return e[lg]=t}var xp=[];var Ce=function(e,t=null,n){for(let r=0;r<xp.length;r++){let s=xp[r];s(e,t,n)}};function l0(e,t,n){let{ngOnChanges:r,ngOnInit:s,ngDoCheck:i}=t.type.prototype;if(r){let o=cg(t);(n.preOrderHooks??=[]).push(e,o),(n.preOrderCheckHooks??=[]).push(e,o)}s&&(n.preOrderHooks??=[]).push(0-e,s),i&&((n.preOrderHooks??=[]).push(e,i),(n.preOrderCheckHooks??=[]).push(e,i))}function u0(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){let i=e.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:p}=i;o&&(e.contentHooks??=[]).push(-n,o),a&&((e.contentHooks??=[]).push(n,a),(e.contentCheckHooks??=[]).push(n,a)),c&&(e.viewHooks??=[]).push(-n,c),l&&((e.viewHooks??=[]).push(n,l),(e.viewCheckHooks??=[]).push(n,l)),p!=null&&(e.destroyHooks??=[]).push(n,p)}}function aa(e,t,n){dg(e,t,3,n)}function ca(e,t,n,r){(e[oe]&3)===n&&dg(e,t,n,r)}function Du(e,t){let n=e[oe];(n&3)===t&&(n&=16383,n+=1,e[oe]=n)}function dg(e,t,n,r){let s=r!==void 0?e[Jn]&65535:0,i=r??-1,o=t.length-1,a=0;for(let c=s;c<o;c++)if(typeof t[c+1]=="number"){if(a=t[c],r!=null&&a>=r)break}else t[c]<0&&(e[Jn]+=65536),(a<i||i==-1)&&(d0(e,n,t,c),e[Jn]=(e[Jn]&4294901760)+c+2),c++}function Rp(e,t){Ce(4,e,t);let n=se(null);try{t.call(e)}finally{se(n),Ce(5,e,t)}}function d0(e,t,n,r){let s=n[r]<0,i=n[r+1],o=s?-n[r]:n[r],a=e[o];s?e[oe]>>14<e[Jn]>>16&&(e[oe]&3)===t&&(e[oe]+=16384,Rp(a,i)):Rp(a,i)}var Kr=-1,ir=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(t,n,r,s){this.factory=t,this.name=s,this.canSeeViewProviders=n,this.injectImpl=r}};function h0(e){return(e.flags&8)!==0}function f0(e){return(e.flags&16)!==0}function p0(e,t,n){let r=0;for(;r<n.length;){let s=n[r];if(typeof s=="number"){if(s!==0)break;r++;let i=n[r++],o=n[r++],a=n[r++];e.setAttribute(t,o,a,i)}else{let i=s,o=n[++r];m0(i)?e.setProperty(t,i,o):e.setAttribute(t,i,o),r++}}return r}function g0(e){return e===3||e===4||e===6}function m0(e){return e.charCodeAt(0)===64}function Zr(e,t){if(!(t===null||t.length===0))if(e===null||e.length===0)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){let s=t[r];typeof s=="number"?n=s:n===0||(n===-1||n===2?Op(e,n,s,null,t[++r]):Op(e,n,s,null,null))}}return e}function Op(e,t,n,r,s){let i=0,o=e.length;if(t===-1)o=-1;else for(;i<e.length;){let a=e[i++];if(typeof a=="number"){if(a===t){o=-1;break}else if(a>t){o=i-1;break}}}for(;i<e.length;){let a=e[i];if(typeof a=="number")break;if(a===n){s!==null&&(e[i+1]=s);return}i++,s!==null&&i++}o!==-1&&(e.splice(o,0,t),i=o+1),e.splice(i++,0,n),s!==null&&e.splice(i++,0,s)}function hg(e){return e!==Kr}function fa(e){return e&32767}function _0(e){return e>>16}function pa(e,t){let n=_0(e),r=t;for(;n>0;)r=r[Qn],n--;return r}var ku=!0;function Np(e){let t=ku;return ku=e,t}var v0=256,fg=v0-1,pg=5,y0=0,Kt={};function C0(e,t,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Yn)&&(r=n[Yn]),r==null&&(r=n[Yn]=y0++);let s=r&fg,i=1<<s;t.data[e+(s>>pg)]|=i}function ga(e,t){let n=gg(e,t);if(n!==-1)return n;let r=t[ne];r.firstCreatePass&&(e.injectorIndex=t.length,wu(r.data,e),wu(t,null),wu(r.blueprint,null));let s=hd(e,t),i=e.injectorIndex;if(hg(s)){let o=fa(s),a=pa(s,t),c=a[ne].data;for(let l=0;l<8;l++)t[i+l]=a[o+l]|c[o+l]}return t[i+8]=s,i}function wu(e,t){e.push(0,0,0,0,0,0,0,0,t)}function gg(e,t){return e.injectorIndex===-1||e.parent&&e.parent.injectorIndex===e.injectorIndex||t[e.injectorIndex+8]===null?-1:e.injectorIndex}function hd(e,t){if(e.parent&&e.parent.injectorIndex!==-1)return e.parent.injectorIndex;let n=0,r=null,s=t;for(;s!==null;){if(r=Cg(s),r===null)return Kr;if(n++,s=s[Qn],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Kr}function Pu(e,t,n){C0(e,t,n)}function mg(e,t,n){if(n&8||e!==void 0)return e;zo(t,"NodeInjector")}function _g(e,t,n,r){if(n&8&&r===void 0&&(r=null),(n&3)===0){let s=e[Tn],i=ft(void 0);try{return s?s.get(t,r,n&8):Vl(t,r,n&8)}finally{ft(i)}}return mg(r,t,n)}function vg(e,t,n,r=0,s){if(e!==null){if(t[oe]&2048&&!(r&2)){let o=D0(e,t,n,r,Kt);if(o!==Kt)return o}let i=yg(e,t,n,r,Kt);if(i!==Kt)return i}return _g(t,n,r,s)}function yg(e,t,n,r,s){let i=S0(n);if(typeof i=="function"){if(!pu(t,e,r))return r&1?mg(s,n,r):_g(t,n,r,s);try{let o;if(o=i(r),o==null&&!(r&8))zo(n);else return o}finally{gu()}}else if(typeof i=="number"){let o=null,a=gg(e,t),c=Kr,l=r&1?t[gt][Et]:null;for((a===-1||r&4)&&(c=a===-1?hd(e,t):t[a+8],c===Kr||!Pp(r,!1)?a=-1:(o=t[ne],a=fa(c),t=pa(c,t)));a!==-1;){let p=t[ne];if(kp(i,a,p.data)){let m=b0(a,t,n,o,r,l);if(m!==Kt)return m}c=t[a+8],c!==Kr&&Pp(r,t[ne].data[a+8]===l)&&kp(i,a,t)?(o=p,a=fa(c),t=pa(c,t)):a=-1}}return s}function b0(e,t,n,r,s,i){let o=t[ne],a=o.data[e+8],c=r==null?Rn(a)&&ku:r!=o&&(a.type&3)!==0,l=s&1&&i===a,p=la(a,o,n,c,l);return p!==null?as(t,o,p,a,s):Kt}function la(e,t,n,r,s){let i=e.providerIndexes,o=t.data,a=i&1048575,c=e.directiveStart,l=e.directiveEnd,p=i>>20,m=r?a:a+p,y=s?a+p:l;for(let g=m;g<y;g++){let d=o[g];if(g<c&&n===d||g>=c&&d.type===n)return g}if(s){let g=o[c];if(g&&Wt(g)&&g.type===n)return c}return null}function as(e,t,n,r,s){let i=e[n],o=t.data;if(i instanceof ir){let a=i;if(a.resolving){let g=Hf(o[n]);throw jl(g)}let c=Np(a.canSeeViewProviders);a.resolving=!0;let l=o[n].type||o[n],p,m=a.injectImpl?ft(a.injectImpl):null,y=pu(e,r,0);try{i=e[n]=a.factory(void 0,s,o,e,r),t.firstCreatePass&&n>=r.directiveStart&&l0(n,o[n],t)}finally{m!==null&&ft(m),Np(c),a.resolving=!1,gu()}}return i}function S0(e){if(typeof e=="string")return e.charCodeAt(0)||0;let t=e.hasOwnProperty(Yn)?e[Yn]:void 0;return typeof t=="number"?t>=0?t&fg:E0:t}function kp(e,t,n){let r=1<<e;return!!(n[t+(e>>pg)]&r)}function Pp(e,t){return!(e&2)&&!(e&1&&t)}var rr=class{_tNode;_lView;constructor(t,n){this._tNode=t,this._lView=n}get(t,n,r){return vg(this._tNode,this._lView,t,Gn(r),n)}};function E0(){return new rr(Qe(),ge())}function Pn(e){return fs(()=>{let t=e.prototype.constructor,n=t[zi]||Lu(t),r=Object.prototype,s=Object.getPrototypeOf(e.prototype).constructor;for(;s&&s!==r;){let i=s[zi]||Lu(s);if(i&&i!==n)return i;s=Object.getPrototypeOf(s)}return i=>new i})}function Lu(e){return Ol(e)?()=>{let t=Lu(qe(e));return t&&t()}:qn(e)}function D0(e,t,n,r,s){let i=e,o=t;for(;i!==null&&o!==null&&o[oe]&2048&&!$r(o);){let a=yg(i,o,n,r|2,Kt);if(a!==Kt)return a;let c=i.parent;if(!c){let l=o[Yl];if(l){let p=l.get(n,Kt,r);if(p!==Kt)return p}c=Cg(o),o=o[Qn]}i=c}return s}function Cg(e){let t=e[ne],n=t.type;return n===2?t.declTNode:n===1?e[Et]:null}function w0(){return ri(Qe(),ge())}function ri(e,t){return new Pt(zt(e,t))}var Pt=(()=>{class e{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=w0}return e})();function I0(e){return e instanceof Pt?e.nativeElement:e}function M0(){return this._results[Symbol.iterator]()}var ma=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Ie}constructor(t=!1){this._emitDistinctChangesOnly=t}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,n){return this._results.reduce(t,n)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,n){this.dirty=!1;let r=Gf(t);(this._changesDetected=!zf(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(t){this._onDirty=t}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=M0};function bg(e){return(e.flags&128)===128}var fd=(function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e})(fd||{}),Sg=new Map,T0=0;function A0(){return T0++}function x0(e){Sg.set(e[Ji],e)}function Fu(e){Sg.delete(e[Ji])}var Lp="__ngContext__";function Yr(e,t){$t(t)?(e[Lp]=t[Ji],x0(t)):e[Lp]=t}function Eg(e){return wg(e[Ur])}function Dg(e){return wg(e[St])}function wg(e){for(;e!==null&&!Ot(e);)e=e[St];return e}var Bu;function pd(e){Bu=e}function Ig(){if(Bu!==void 0)return Bu;if(typeof document<"u")return document;throw new J(210,!1)}var Oa=new X("",{providedIn:"root",factory:()=>R0}),R0="ng",Na=new X(""),ii=new X("",{providedIn:"platform",factory:()=>"unknown"});var ka=new X("",{providedIn:"root",factory:()=>Ig().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var O0="h",N0="b";var Mg="r";var Tg="di";var Ag=!1,xg=new X("",{providedIn:"root",factory:()=>Ag});var k0=(e,t,n,r)=>{};function P0(e,t,n,r){k0(e,t,n,r)}function gd(e){return(e.flags&32)===32}var L0=()=>null;function Rg(e,t,n=!1){return L0(e,t,n)}function Og(e,t){let n=e.contentQueries;if(n!==null){let r=se(null);try{for(let s=0;s<n.length;s+=2){let i=n[s],o=n[s+1];if(o!==-1){let a=e.data[o];Xo(i),a.contentQueries(2,t[o],o)}}}finally{se(r)}}}function ju(e,t,n){Xo(0);let r=se(null);try{t(e,n)}finally{se(r)}}function Ng(e,t,n){if(Jl(t)){let r=se(null);try{let s=t.directiveStart,i=t.directiveEnd;for(let o=s;o<i;o++){let a=e.data[o];if(a.contentQueries){let c=n[o];a.contentQueries(1,c,o)}}}finally{se(r)}}}var ln=(function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e})(ln||{});var Vu=class{changingThisBreaksApplicationSecurity;constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${xl})`}};function kg(e){return e instanceof Vu?e.changingThisBreaksApplicationSecurity:e}function Pg(e){return e instanceof Function?e():e}function F0(e,t,n){let r=e.length;for(;;){let s=e.indexOf(t,n);if(s===-1)return s;if(s===0||e.charCodeAt(s-1)<=32){let i=t.length;if(s+i===r||e.charCodeAt(s+i)<=32)return s}n=s+1}}var Lg="ng-template";function B0(e,t,n,r){let s=0;if(r){for(;s<t.length&&typeof t[s]=="string";s+=2)if(t[s]==="class"&&F0(t[s+1].toLowerCase(),n,0)!==-1)return!0}else if(md(e))return!1;if(s=t.indexOf(1,s),s>-1){let i;for(;++s<t.length&&typeof(i=t[s])=="string";)if(i.toLowerCase()===n)return!0}return!1}function md(e){return e.type===4&&e.value!==Lg}function j0(e,t,n){let r=e.type===4&&!n?Lg:e.value;return t===r}function V0(e,t,n){let r=4,s=e.attrs,i=s!==null?$0(s):0,o=!1;for(let a=0;a<t.length;a++){let c=t[a];if(typeof c=="number"){if(!o&&!kt(r)&&!kt(c))return!1;if(o&&kt(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!j0(e,c,n)||c===""&&t.length===1){if(kt(r))return!1;o=!0}}else if(r&8){if(s===null||!B0(e,s,c,n)){if(kt(r))return!1;o=!0}}else{let l=t[++a],p=H0(c,s,md(e),n);if(p===-1){if(kt(r))return!1;o=!0;continue}if(l!==""){let m;if(p>i?m="":m=s[p+1].toLowerCase(),r&2&&l!==m){if(kt(r))return!1;o=!0}}}}return kt(r)||o}function kt(e){return(e&1)===0}function H0(e,t,n,r){if(t===null)return-1;let s=0;if(r||!n){let i=!1;for(;s<t.length;){let o=t[s];if(o===e)return s;if(o===3||o===6)i=!0;else if(o===1||o===2){let a=t[++s];for(;typeof a=="string";)a=t[++s];continue}else{if(o===4)break;if(o===0){s+=4;continue}}s+=i?1:2}return-1}else return W0(t,e)}function U0(e,t,n=!1){for(let r=0;r<t.length;r++)if(V0(e,t[r],n))return!0;return!1}function $0(e){for(let t=0;t<e.length;t++){let n=e[t];if(g0(n))return t}return e.length}function W0(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){let r=e[n];if(typeof r=="number")return-1;if(r===t)return n;n++}return-1}function Fp(e,t){return e?":not("+t.trim()+")":t}function z0(e){let t=e[0],n=1,r=2,s="",i=!1;for(;n<e.length;){let o=e[n];if(typeof o=="string")if(r&2){let a=e[++n];s+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?s+="."+o:r&4&&(s+=" "+o);else s!==""&&!kt(o)&&(t+=Fp(i,s),s=""),r=o,i=i||!kt(r);n++}return s!==""&&(t+=Fp(i,s)),t}function G0(e){return e.map(z0).join(",")}function q0(e){let t=[],n=[],r=1,s=2;for(;r<e.length;){let i=e[r];if(typeof i=="string")s===2?i!==""&&t.push(i,e[++r]):s===8&&n.push(i);else{if(!kt(s))break;s=i}r++}return n.length&&t.push(1,...n),t}var Lt={};function K0(e,t){return e.createText(t)}function Z0(e,t,n){e.setValue(t,n)}function Fg(e,t,n){return e.createElement(t,n)}function _a(e,t,n,r,s){e.insertBefore(t,n,r,s)}function Bg(e,t,n){e.appendChild(t,n)}function Bp(e,t,n,r,s){r!==null?_a(e,t,n,r,s):Bg(e,t,n)}function jg(e,t,n,r){e.removeChild(null,t,n,r)}function Y0(e,t,n){e.setAttribute(t,"style",n)}function Q0(e,t,n){n===""?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function Vg(e,t,n){let{mergedAttrs:r,classes:s,styles:i}=n;r!==null&&p0(e,t,r),s!==null&&Q0(e,t,s),i!==null&&Y0(e,t,i)}function _d(e,t,n,r,s,i,o,a,c,l,p){let m=Ze+r,y=m+s,g=J0(m,y),d=typeof l=="function"?l():l;return g[ne]={type:e,blueprint:g,template:n,queries:null,viewQuery:a,declTNode:t,data:g.slice().fill(null,m),bindingStartIndex:m,expandoStartIndex:y,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof i=="function"?i():i,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:d,incompleteFirstPass:!1,ssrId:p}}function J0(e,t){let n=[];for(let r=0;r<t;r++)n.push(r<e?null:Lt);return n}function X0(e){let t=e.tView;return t===null||t.incompleteFirstPass?e.tView=_d(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):t}function vd(e,t,n,r,s,i,o,a,c,l,p){let m=t.blueprint.slice();return m[Rt]=s,m[oe]=r|4|128|8|64|1024,(l!==null||e&&e[oe]&2048)&&(m[oe]|=2048),eu(m),m[He]=m[Qn]=e,m[Ne]=n,m[an]=o||e&&e[an],m[Me]=a||e&&e[Me],m[Tn]=c||e&&e[Tn]||null,m[Et]=i,m[Ji]=A0(),m[Vr]=p,m[Yl]=l,m[gt]=t.type==2?e[gt]:m,m}function eC(e,t,n){let r=zt(t,e),s=X0(n),i=e[an].rendererFactory,o=yd(e,vd(e,s,null,Hg(n),r,t,null,i.createRenderer(r,n),null,null,null));return e[t.index]=o}function Hg(e){let t=16;return e.signals?t=4096:e.onPush&&(t=64),t}function Ug(e,t,n,r){if(n===0)return-1;let s=t.length;for(let i=0;i<n;i++)t.push(r),e.blueprint.push(r),e.data.push(null);return s}function yd(e,t){return e[Ur]?e[Zl][St]=t:e[Ur]=t,e[Zl]=t,t}function Y(e=1){$g(Ye(),ge(),cn()+e,!1)}function $g(e,t,n,r){if(!r)if((t[oe]&3)===3){let i=e.preOrderCheckHooks;i!==null&&aa(t,i,n)}else{let i=e.preOrderHooks;i!==null&&ca(t,i,0,n)}On(n)}var Pa=(function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e})(Pa||{});function Hu(e,t,n,r){let s=se(null);try{let[i,o,a]=e.inputs[n],c=null;(o&Pa.SignalBased)!==0&&(c=t[i][et]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(t,r)),e.setInput!==null?e.setInput(t,c,r,n,i):ag(t,c,i,r)}finally{se(s)}}var un=(function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e})(un||{}),tC;function Cd(e,t){return tC(e,t)}var Qr=new Set,La=(function(e){return e[e.CHANGE_DETECTION=0]="CHANGE_DETECTION",e[e.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",e})(La||{}),ar=new X(""),jp=new Set;function dn(e){jp.has(e)||(jp.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}var Wg=!1,Uu=class extends Ie{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(t=!1){super(),this.__isAsync=t,tp()&&(this.destroyRef=P(Nt,{optional:!0})??void 0,this.pendingTasks=P(qt,{optional:!0})??void 0)}emit(t){let n=se(null);try{super.next(t)}finally{se(n)}}subscribe(t,n,r){let s=t,i=n||(()=>null),o=r;if(t&&typeof t=="object"){let c=t;s=c.next?.bind(c),i=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(i=this.wrapInTimeout(i),s&&(s=this.wrapInTimeout(s)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:s,error:i,complete:o});return t instanceof xe&&t.add(a),a}wrapInTimeout(t){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{t(n)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},Ue=Uu;function zg(e){let t,n;function r(){e=is;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),t!==void 0&&clearTimeout(t)}catch{}}return t=setTimeout(()=>{e(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{e(),r()})),()=>r()}function Vp(e){return queueMicrotask(()=>e()),()=>{e=is}}var bd="isAngularZone",va=bd+"_ID",nC=0,ke=class e{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Ue(!1);onMicrotaskEmpty=new Ue(!1);onStable=new Ue(!1);onError=new Ue(!1);constructor(t){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:s=!1,scheduleInRootZone:i=Wg}=t;if(typeof Zone>"u")throw new J(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!s&&r,o.shouldCoalesceRunChangeDetection=s,o.callbackScheduled=!1,o.scheduleInRootZone=i,sC(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(bd)===!0}static assertInAngularZone(){if(!e.isInAngularZone())throw new J(909,!1)}static assertNotInAngularZone(){if(e.isInAngularZone())throw new J(909,!1)}run(t,n,r){return this._inner.run(t,n,r)}runTask(t,n,r,s){let i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+s,t,rC,is,is);try{return i.runTask(o,n,r)}finally{i.cancelTask(o)}}runGuarded(t,n,r){return this._inner.runGuarded(t,n,r)}runOutsideAngular(t){return this._outer.run(t)}},rC={};function Sd(e){if(e._nesting==0&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function iC(e){if(e.isCheckStableRunning||e.callbackScheduled)return;e.callbackScheduled=!0;function t(){zg(()=>{e.callbackScheduled=!1,$u(e),e.isCheckStableRunning=!0,Sd(e),e.isCheckStableRunning=!1})}e.scheduleInRootZone?Zone.root.run(()=>{t()}):e._outer.run(()=>{t()}),$u(e)}function sC(e){let t=()=>{iC(e)},n=nC++;e._inner=e._inner.fork({name:"angular",properties:{[bd]:!0,[va]:n,[va+n]:!0},onInvokeTask:(r,s,i,o,a,c)=>{if(oC(c))return r.invokeTask(i,o,a,c);try{return Hp(e),r.invokeTask(i,o,a,c)}finally{(e.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||e.shouldCoalesceRunChangeDetection)&&t(),Up(e)}},onInvoke:(r,s,i,o,a,c,l)=>{try{return Hp(e),r.invoke(i,o,a,c,l)}finally{e.shouldCoalesceRunChangeDetection&&!e.callbackScheduled&&!aC(c)&&t(),Up(e)}},onHasTask:(r,s,i,o)=>{r.hasTask(i,o),s===i&&(o.change=="microTask"?(e._hasPendingMicrotasks=o.microTask,$u(e),Sd(e)):o.change=="macroTask"&&(e.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,s,i,o)=>(r.handleError(i,o),e.runOutsideAngular(()=>e.onError.emit(o)),!1)})}function $u(e){e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&e.callbackScheduled===!0?e.hasPendingMicrotasks=!0:e.hasPendingMicrotasks=!1}function Hp(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function Up(e){e._nesting--,Sd(e)}var ya=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Ue;onMicrotaskEmpty=new Ue;onStable=new Ue;onError=new Ue;run(t,n,r){return t.apply(n,r)}runGuarded(t,n,r){return t.apply(n,r)}runOutsideAngular(t){return t()}runTask(t,n,r,s){return t.apply(n,r)}};function oC(e){return Gg(e,"__ignore_ng_zone__")}function aC(e){return Gg(e,"__scheduler_tick__")}function Gg(e,t){return!Array.isArray(e)||e.length!==1?!1:e[0]?.data?.[t]===!0}var Ed=(()=>{class e{impl=null;execute(){this.impl?.execute()}static \u0275prov=Q({token:e,providedIn:"root",factory:()=>new e})}return e})(),qg=[0,1,2,3],Kg=(()=>{class e{ngZone=P(ke);scheduler=P(nn);errorHandler=P(xt,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){P(ar,{optional:!0})}execute(){let n=this.sequences.size>0;n&&Ce(16),this.executing=!0;for(let r of qg)for(let s of this.sequences)if(!(s.erroredOrDestroyed||!s.hooks[r]))try{s.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let i=s.hooks[r];return i(s.pipelinedValue)},s.snapshot))}catch(i){s.erroredOrDestroyed=!0,this.errorHandler?.handleError(i)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),n&&Ce(17)}register(n){let{view:r}=n;r!==void 0?((r[Xn]??=[]).push(n),Wr(r),r[oe]|=8192):this.executing?this.deferredRegistrations.add(n):this.addSequence(n)}addSequence(n){this.sequences.add(n),this.scheduler.notify(7)}unregister(n){this.executing&&this.sequences.has(n)?(n.erroredOrDestroyed=!0,n.pipelinedValue=void 0,n.once=!0):(this.sequences.delete(n),this.deferredRegistrations.delete(n))}maybeTrace(n,r){return r?r.run(La.AFTER_NEXT_RENDER,n):n()}static \u0275prov=Q({token:e,providedIn:"root",factory:()=>new e})}return e})(),Ca=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(t,n,r,s,i,o=null){this.impl=t,this.hooks=n,this.view=r,this.once=s,this.snapshot=o,this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let t=this.view?.[Xn];t&&(this.view[Xn]=t.filter(n=>n!==this))}};function Fa(e,t){let n=t?.injector??P(bt);return dn("NgAfterNextRender"),lC(e,n,t,!0)}function cC(e){return e instanceof Function?[void 0,void 0,e,void 0]:[e.earlyRead,e.write,e.mixedReadWrite,e.read]}function lC(e,t,n,r){let s=t.get(Ed);s.impl??=t.get(Kg);let i=t.get(ar,null,{optional:!0}),o=n?.manualCleanup!==!0?t.get(Nt):null,a=t.get(ia,null,{optional:!0}),c=new Ca(s.impl,cC(e),a?.view,r,o,i?.snapshot(null));return s.impl.register(c),c}var uC=new X("",{providedIn:"root",factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function Zg(e,t){let n=e.get(uC);if(Array.isArray(t))for(let r of t)n.queue.add(r);else n.queue.add(t);n.scheduler&&n.scheduler(e)}function dC(e,t){for(let[n,r]of t)Zg(e,r.animateFns)}function $p(e,t,n,r){let s=e?.[er]?.enter;t!==null&&s&&s.has(n.index)&&dC(r,s)}function qr(e,t,n,r,s,i,o,a){if(s!=null){let c,l=!1;Ot(s)?c=s:$t(s)&&(l=!0,s=s[Rt]);let p=Dt(s);e===0&&r!==null?($p(a,r,i,n),o==null?Bg(t,r,p):_a(t,r,p,o||null,!0)):e===1&&r!==null?($p(a,r,i,n),_a(t,r,p,o||null,!0)):e===2?Wp(a,i,n,m=>{jg(t,p,l,m)}):e===3&&Wp(a,i,n,()=>{t.destroyNode(p)}),c!=null&&DC(t,e,n,c,i,r,o)}}function hC(e,t){Yg(e,t),t[Rt]=null,t[Et]=null}function fC(e,t,n,r,s,i){r[Rt]=s,r[Et]=t,ja(e,r,n,1,s,i)}function Yg(e,t){t[an].changeDetectionScheduler?.notify(9),ja(e,t,t[Me],2,null,null)}function pC(e){let t=e[Ur];if(!t)return Iu(e[ne],e);for(;t;){let n=null;if($t(t))n=t[Ur];else{let r=t[Le];r&&(n=r)}if(!n){for(;t&&!t[St]&&t!==e;)$t(t)&&Iu(t[ne],t),t=t[He];t===null&&(t=e),$t(t)&&Iu(t[ne],t),n=t&&t[St]}t=n}}function Dd(e,t){let n=e[tr],r=n.indexOf(t);n.splice(r,1)}function Ba(e,t){if(nr(t))return;let n=t[Me];n.destroyNode&&ja(e,t,n,3,null,null),pC(t)}function Iu(e,t){if(nr(t))return;let n=se(null);try{t[oe]&=-129,t[oe]|=256,t[mt]&&Vi(t[mt]),_C(e,t),mC(e,t),t[ne].type===1&&t[Me].destroy();let r=t[An];if(r!==null&&Ot(t[He])){r!==t[He]&&Dd(r,t);let s=t[Ut];s!==null&&s.detachView(e)}Fu(t)}finally{se(n)}}function Wp(e,t,n,r){let s=e?.[er];if(s==null||s.leave==null||!s.leave.has(t.index))return r(!1);if(s.skipLeaveAnimations)return s.skipLeaveAnimations=!1,r(!1);e&&Qr.add(e),Zg(n,()=>{if(s.leave&&s.leave.has(t.index)){let o=s.leave.get(t.index),a=[];if(o)for(let c=0;c<o.animateFns.length;c++){let l=o.animateFns[c],{promise:p}=l();a.push(p)}s.running=Promise.allSettled(a),gC(e,r)}else e&&Qr.delete(e),r(!1)})}function gC(e,t){let n=e[er]?.running;if(n){n.then(()=>{e[er].running=void 0,Qr.delete(e),t(!0)});return}t(!1)}function mC(e,t){let n=e.cleanup,r=t[Hr];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let a=n[o+3];a>=0?r[a]():r[-a].unsubscribe(),o+=2}else{let a=r[n[o+1]];n[o].call(a)}r!==null&&(t[Hr]=null);let s=t[en];if(s!==null){t[en]=null;for(let o=0;o<s.length;o++){let a=s[o];a()}}let i=t[Xi];if(i!==null){t[Xi]=null;for(let o of i)o.destroy()}}function _C(e,t){let n;if(e!=null&&(n=e.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let s=t[n[r]];if(!(s instanceof ir)){let i=n[r+1];if(Array.isArray(i))for(let o=0;o<i.length;o+=2){let a=s[i[o]],c=i[o+1];Ce(4,a,c);try{c.call(a)}finally{Ce(5,a,c)}}else{Ce(4,s,i);try{i.call(s)}finally{Ce(5,s,i)}}}}}function vC(e,t,n){return yC(e,t.parent,n)}function yC(e,t,n){let r=t;for(;r!==null&&r.type&168;)t=r,r=t.parent;if(r===null)return n[Rt];if(Rn(r)){let{encapsulation:s}=e.data[r.directiveStart+r.componentOffset];if(s===ln.None||s===ln.Emulated)return null}return zt(r,n)}function CC(e,t,n){return SC(e,t,n)}function bC(e,t,n){return e.type&40?zt(e,n):null}var SC=bC,zp;function wd(e,t,n,r){let s=vC(e,r,t),i=t[Me],o=r.parent||t[Et],a=CC(o,r,t);if(s!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)Bp(i,s,n[c],a,!1);else Bp(i,s,n,a,!1);zp!==void 0&&zp(i,r,t,n,s)}function ss(e,t){if(t!==null){let n=t.type;if(n&3)return zt(t,e);if(n&4)return Wu(-1,e[t.index]);if(n&8){let r=t.child;if(r!==null)return ss(e,r);{let s=e[t.index];return Ot(s)?Wu(-1,s):Dt(s)}}else{if(n&128)return ss(e,t.next);if(n&32)return Cd(t,e)()||Dt(e[t.index]);{let r=Qg(e,t);if(r!==null){if(Array.isArray(r))return r[0];let s=wn(e[gt]);return ss(s,r)}else return ss(e,t.next)}}}return null}function Qg(e,t){if(t!==null){let r=e[gt][Et],s=t.projection;return r.projection[s]}return null}function Wu(e,t){let n=Le+e+1;if(n<t.length){let r=t[n],s=r[ne].firstChild;if(s!==null)return ss(r,s)}return t[xn]}function Id(e,t,n,r,s,i,o){for(;n!=null;){let a=r[Tn];if(n.type===128){n=n.next;continue}let c=r[n.index],l=n.type;if(o&&t===0&&(c&&Yr(Dt(c),r),n.flags|=2),!gd(n))if(l&8)Id(e,t,n.child,r,s,i,!1),qr(t,e,a,s,c,n,i,r);else if(l&32){let p=Cd(n,r),m;for(;m=p();)qr(t,e,a,s,m,n,i,r);qr(t,e,a,s,c,n,i,r)}else l&16?EC(e,t,r,n,s,i):qr(t,e,a,s,c,n,i,r);n=o?n.projectionNext:n.next}}function ja(e,t,n,r,s,i){Id(n,r,e.firstChild,t,s,i,!1)}function EC(e,t,n,r,s,i){let o=n[gt],c=o[Et].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let p=c[l];qr(t,e,n[Tn],s,p,r,i,n)}else{let l=c,p=o[He];bg(r)&&(l.flags|=128),Id(e,t,l,p,s,i,!0)}}function DC(e,t,n,r,s,i,o){let a=r[xn],c=Dt(r);a!==c&&qr(t,e,n,i,a,s,o);for(let l=Le;l<r.length;l++){let p=r[l];ja(p[ne],p,e,t,i,a)}}function wC(e,t,n,r,s){if(t)s?e.addClass(n,r):e.removeClass(n,r);else{let i=r.indexOf("-")===-1?void 0:un.DashCase;s==null?e.removeStyle(n,r,i):(typeof s=="string"&&s.endsWith("!important")&&(s=s.slice(0,-10),i|=un.Important),e.setStyle(n,r,s,i))}}function Jg(e,t,n,r,s){let i=cn(),o=r&2;try{On(-1),o&&t.length>Ze&&$g(e,t,Ze,!1),Ce(o?2:0,s,n),n(r,s)}finally{On(i),Ce(o?3:1,s,n)}}function Xg(e,t,n){OC(e,t,n),(n.flags&64)===64&&NC(e,t,n)}function Md(e,t,n=zt){let r=t.localNames;if(r!==null){let s=t.index+1;for(let i=0;i<r.length;i+=2){let o=r[i+1],a=o===-1?n(t,e):e[o];e[s++]=a}}}function IC(e,t,n,r){let i=r.get(xg,Ag)||n===ln.ShadowDom,o=e.selectRootElement(t,i);return MC(o),o}function MC(e){TC(e)}var TC=()=>null;function AC(e){return e==="class"?"className":e==="for"?"htmlFor":e==="formaction"?"formAction":e==="innerHtml"?"innerHTML":e==="readonly"?"readOnly":e==="tabindex"?"tabIndex":e}function em(e,t,n,r,s,i){let o=t[ne];if(Td(e,o,t,n,r)){Rn(e)&&RC(t,e.index);return}e.type&3&&(n=AC(n)),xC(e,t,n,r,s,i)}function xC(e,t,n,r,s,i){if(e.type&3){let o=zt(e,t);r=i!=null?i(r,e.value||"",n):r,s.setProperty(o,n,r)}else e.type&12}function RC(e,t){let n=wt(t,e);n[oe]&16||(n[oe]|=64)}function OC(e,t,n){let r=n.directiveStart,s=n.directiveEnd;Rn(n)&&eC(t,n,e.data[r+n.componentOffset]),e.firstCreatePass||ga(n,t);let i=n.initialInputs;for(let o=r;o<s;o++){let a=e.data[o],c=as(t,e,o,n);if(Yr(c,t),i!==null&&LC(t,o-r,c,a,n,i),Wt(a)){let l=wt(n.index,t);l[Ne]=as(t,e,o,n)}}}function NC(e,t,n){let r=n.directiveStart,s=n.directiveEnd,i=n.index,o=Cp();try{On(i);for(let a=r;a<s;a++){let c=e.data[a],l=t[a];Jo(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&kC(c,l)}}finally{On(-1),Jo(o)}}function kC(e,t){e.hostBindings!==null&&e.hostBindings(1,t)}function PC(e,t){let n=e.directiveRegistry,r=null;if(n)for(let s=0;s<n.length;s++){let i=n[s];U0(t,i.selectors,!1)&&(r??=[],Wt(i)?r.unshift(i):r.push(i))}return r}function LC(e,t,n,r,s,i){let o=i[t];if(o!==null)for(let a=0;a<o.length;a+=2){let c=o[a],l=o[a+1];Hu(r,n,c,l)}}function tm(e,t,n,r,s){let i=Ze+n,o=t[ne],a=s(o,t,e,r,n);t[i]=a,zr(e,!0);let c=e.type===2;return c?(Vg(t[Me],a,e),(up()===0||Zo(e))&&Yr(a,t),dp()):Yr(a,t),na()&&(!c||!gd(e))&&wd(o,t,a,e),e}function nm(e){let t=e;return lu()?gp():(t=t.parent,zr(t,!1)),t}function FC(e,t){let n=e[Tn];if(!n)return;let r;try{r=n.get(_t,null)}catch{r=null}r?.(t)}function Td(e,t,n,r,s){let i=e.inputs?.[r],o=e.hostDirectiveInputs?.[r],a=!1;if(o)for(let c=0;c<o.length;c+=2){let l=o[c],p=o[c+1],m=t.data[l];Hu(m,n[l],p,s),a=!0}if(i)for(let c of i){let l=n[c],p=t.data[c];Hu(p,l,r,s),a=!0}return a}function BC(e,t){let n=wt(t,e),r=n[ne];jC(r,n);let s=n[Rt];s!==null&&n[Vr]===null&&(n[Vr]=Rg(s,n[Tn])),Ce(18),Ad(r,n,n[Ne]),Ce(19,n[Ne])}function jC(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}function Ad(e,t,n){ea(t);try{let r=e.viewQuery;r!==null&&ju(1,r,n);let s=e.template;s!==null&&Jg(e,t,s,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),t[Ut]?.finishViewCreation(e),e.staticContentQueries&&Og(e,t),e.staticViewQueries&&ju(2,e.viewQuery,n);let i=e.components;i!==null&&VC(t,i)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[oe]&=-5,ta()}}function VC(e,t){for(let n=0;n<t.length;n++)BC(e,t[n])}function Va(e,t,n,r){let s=se(null);try{let i=t.tView,a=e[oe]&4096?4096:16,c=vd(e,i,n,a,null,t,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=e[t.index];c[An]=l;let p=e[Ut];return p!==null&&(c[Ut]=p.createEmbeddedView(i)),Ad(i,c,n),c}finally{se(s)}}function cs(e,t){return!t||t.firstChild===null||bg(e)}function ls(e,t,n,r,s=!1){for(;n!==null;){if(n.type===128){n=s?n.projectionNext:n.next;continue}let i=t[n.index];i!==null&&r.push(Dt(i)),Ot(i)&&rm(i,r);let o=n.type;if(o&8)ls(e,t,n.child,r);else if(o&32){let a=Cd(n,t),c;for(;c=a();)r.push(c)}else if(o&16){let a=Qg(t,n);if(Array.isArray(a))r.push(...a);else{let c=wn(t[gt]);ls(c[ne],c,a,r,!0)}}n=s?n.projectionNext:n.next}return r}function rm(e,t){for(let n=Le;n<e.length;n++){let r=e[n],s=r[ne].firstChild;s!==null&&ls(r[ne],r,s,t)}e[xn]!==e[Rt]&&t.push(e[xn])}function im(e){if(e[Xn]!==null){for(let t of e[Xn])t.impl.addSequence(t);e[Xn].length=0}}var sm=[];function HC(e){return e[mt]??UC(e)}function UC(e){let t=sm.pop()??Object.create(WC);return t.lView=e,t}function $C(e){e.lView[mt]!==e&&(e.lView=null,sm.push(e))}var WC=fe(H({},br),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:e=>{Wr(e.lView)},consumerOnSignalRead(){this.lView[mt]=this}});function zC(e){let t=e[mt]??Object.create(GC);return t.lView=e,t}var GC=fe(H({},br),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:e=>{let t=wn(e.lView);for(;t&&!om(t[ne]);)t=wn(t);t&&tu(t)},consumerOnSignalRead(){this.lView[mt]=this}});function om(e){return e.type!==2}function am(e){if(e[Xi]===null)return;let t=!0;for(;t;){let n=!1;for(let r of e[Xi])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));t=n&&!!(e[oe]&8192)}}var qC=100;function cm(e,t=0){let r=e[an].rendererFactory,s=!1;s||r.begin?.();try{KC(e,t)}finally{s||r.end?.()}}function KC(e,t){let n=uu();try{du(!0),zu(e,t);let r=0;for(;ns(e);){if(r===qC)throw new J(103,!1);r++,zu(e,1)}}finally{du(n)}}function ZC(e,t,n,r){if(nr(t))return;let s=t[oe],i=!1,o=!1;ea(t);let a=!0,c=null,l=null;i||(om(e)?(l=HC(t),c=Er(l)):oo()===null?(a=!1,l=zC(t),c=Er(l)):t[mt]&&(Vi(t[mt]),t[mt]=null));try{eu(t),_p(e.bindingStartIndex),n!==null&&Jg(e,t,n,2,r);let p=(s&3)===3;if(!i)if(p){let g=e.preOrderCheckHooks;g!==null&&aa(t,g,null)}else{let g=e.preOrderHooks;g!==null&&ca(t,g,0,null),Du(t,0)}if(o||YC(t),am(t),lm(t,0),e.contentQueries!==null&&Og(e,t),!i)if(p){let g=e.contentCheckHooks;g!==null&&aa(t,g)}else{let g=e.contentHooks;g!==null&&ca(t,g,1),Du(t,1)}JC(e,t);let m=e.components;m!==null&&dm(t,m,0);let y=e.viewQuery;if(y!==null&&ju(2,y,r),!i)if(p){let g=e.viewCheckHooks;g!==null&&aa(t,g)}else{let g=e.viewHooks;g!==null&&ca(t,g,2),Du(t,2)}if(e.firstUpdatePass===!0&&(e.firstUpdatePass=!1),t[Ko]){for(let g of t[Ko])g();t[Ko]=null}i||(im(t),t[oe]&=-73)}catch(p){throw i||Wr(t),p}finally{l!==null&&(Bi(l,c),a&&$C(l)),ta()}}function lm(e,t){for(let n=Eg(e);n!==null;n=Dg(n))for(let r=Le;r<n.length;r++){let s=n[r];um(s,t)}}function YC(e){for(let t=Eg(e);t!==null;t=Dg(t)){if(!(t[oe]&2))continue;let n=t[tr];for(let r=0;r<n.length;r++){let s=n[r];tu(s)}}}function QC(e,t,n){Ce(18);let r=wt(t,e);um(r,n),Ce(19,r[Ne])}function um(e,t){Yo(e)&&zu(e,t)}function zu(e,t){let r=e[ne],s=e[oe],i=e[mt],o=!!(t===0&&s&16);if(o||=!!(s&64&&t===0),o||=!!(s&1024),o||=!!(i?.dirty&&ji(i)),o||=!1,i&&(i.dirty=!1),e[oe]&=-9217,o)ZC(r,e,r.template,e[Ne]);else if(s&8192){let a=se(null);try{am(e),lm(e,1);let c=r.components;c!==null&&dm(e,c,1),im(e)}finally{se(a)}}}function dm(e,t,n){for(let r=0;r<t.length;r++)QC(e,t[r],n)}function JC(e,t){let n=e.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let s=n[r];if(s<0)On(~s);else{let i=s,o=n[++r],a=n[++r];yp(o,i);let c=t[i];Ce(24,c),a(2,c),Ce(25,c)}}}finally{On(-1)}}function xd(e,t){let n=uu()?64:1088;for(e[an].changeDetectionScheduler?.notify(t);e;){e[oe]|=n;let r=wn(e);if($r(e)&&!r)return e;e=r}return null}function hm(e,t,n,r){return[e,!0,0,t,null,r,null,n,null,null]}function fm(e,t){let n=Le+t;if(n<e.length)return e[n]}function Ha(e,t,n,r=!0){let s=t[ne];if(XC(s,t,e,n),r){let o=Wu(n,e),a=t[Me],c=a.parentNode(e[xn]);c!==null&&fC(s,e[Et],a,t,c,o)}let i=t[Vr];i!==null&&i.firstChild!==null&&(i.firstChild=null)}function pm(e,t){let n=us(e,t);return n!==void 0&&Ba(n[ne],n),n}function us(e,t){if(e.length<=Le)return;let n=Le+t,r=e[n];if(r){let s=r[An];s!==null&&s!==e&&Dd(s,r),t>0&&(e[n-1][St]=r[St]);let i=Zi(e,Le+t);hC(r[ne],r);let o=i[Ut];o!==null&&o.detachView(i[ne]),r[He]=null,r[St]=null,r[oe]&=-129}return r}function XC(e,t,n,r){let s=Le+r,i=n.length;r>0&&(n[s-1][St]=t),r<i-Le?(t[St]=n[s],Hl(n,Le+r,t)):(n.push(t),t[St]=null),t[He]=n;let o=t[An];o!==null&&n!==o&&gm(o,t);let a=t[Ut];a!==null&&a.insertView(e),Qo(t),t[oe]|=128}function gm(e,t){let n=e[tr],r=t[He];if($t(r))e[oe]|=2;else{let s=r[He][gt];t[gt]!==s&&(e[oe]|=2)}n===null?e[tr]=[t]:n.push(t)}var Nn=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let t=this._lView,n=t[ne];return ls(n,t,n.firstChild,[])}constructor(t,n){this._lView=t,this._cdRefInjectingView=n}get context(){return this._lView[Ne]}set context(t){this._lView[Ne]=t}get destroyed(){return nr(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[He];if(Ot(t)){let n=t[es],r=n?n.indexOf(this):-1;r>-1&&(us(t,r),Zi(n,r))}this._attachedToViewContainer=!1}Ba(this._lView[ne],this._lView)}onDestroy(t){nu(this._lView,t)}markForCheck(){xd(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[oe]&=-129}reattach(){Qo(this._lView),this._lView[oe]|=128}detectChanges(){this._lView[oe]|=1024,cm(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new J(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let t=$r(this._lView),n=this._lView[An];n!==null&&!t&&Dd(n,this._lView),Yg(this._lView[ne],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new J(902,!1);this._appRef=t;let n=$r(this._lView),r=this._lView[An];r!==null&&!n&&gm(r,this._lView),Qo(this._lView)}};var Jr=(()=>{class e{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=eb;constructor(n,r,s){this._declarationLView=n,this._declarationTContainer=r,this.elementRef=s}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,r){return this.createEmbeddedViewImpl(n,r)}createEmbeddedViewImpl(n,r,s){let i=Va(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:r,dehydratedView:s});return new Nn(i)}}return e})();function eb(){return Rd(Qe(),ge())}function Rd(e,t){return e.type&4?new Jr(t,e,ri(e,t)):null}function Ua(e,t,n,r,s){let i=e.data[t];if(i===null)i=tb(e,t,n,r,s),vp()&&(i.flags|=32);else if(i.type&64){i.type=n,i.value=r,i.attrs=s;let o=pp();i.injectorIndex=o===null?-1:o.injectorIndex}return zr(i,!0),i}function tb(e,t,n,r,s){let i=cu(),o=lu(),a=o?i:i&&i.parent,c=e.data[t]=rb(e,a,n,t,r,s);return nb(e,c,i,o),c}function nb(e,t,n,r){e.firstChild===null&&(e.firstChild=t),n!==null&&(r?n.child==null&&t.parent!==null&&(n.child=t):n.next===null&&(n.next=t,t.prev=n))}function rb(e,t,n,r,s,i){let o=t?t.injectorIndex:-1,a=0;return fp()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:s,attrs:i,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var HN=new RegExp(`^(\\d+)*(${N0}|${O0})*(.*)`);function ib(e){let t=e[Ql]??[],r=e[He][Me],s=[];for(let i of t)i.data[Tg]!==void 0?s.push(i):sb(i,r);e[Ql]=s}function sb(e,t){let n=0,r=e.firstChild;if(r){let s=e.data[Mg];for(;n<s;){let i=r.nextSibling;jg(t,r,!1),r=i,n++}}}var ob=()=>null,ab=()=>null;function Gu(e,t){return ob(e,t)}function mm(e,t,n){return ab(e,t,n)}var _m=class{},$a=class{},qu=class{resolveComponentFactory(t){throw new J(917,!1)}},ps=class{static NULL=new qu},sr=class{},cr=(()=>{class e{destroyNode=null;static __NG_ELEMENT_ID__=()=>cb()}return e})();function cb(){let e=ge(),t=Qe(),n=wt(t.index,e);return($t(n)?n:e)[Me]}var vm=(()=>{class e{static \u0275prov=Q({token:e,providedIn:"root",factory:()=>null})}return e})();var ua={},Ku=class{injector;parentInjector;constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,r){let s=this.injector.get(t,ua,r);return s!==ua||n===ua?s:this.parentInjector.get(t,n,r)}};function ba(e,t,n){let r=n?e.styles:null,s=n?e.classes:null,i=0;if(t!==null)for(let o=0;o<t.length;o++){let a=t[o];if(typeof a=="number")i=a;else if(i==1)s=Rl(s,a);else if(i==2){let c=a,l=t[++o];r=Rl(r,c+": "+l+";")}}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=s:e.classesWithoutHost=s}function Ee(e,t=0){let n=ge();if(n===null)return re(e,t);let r=Qe();return vg(r,n,qe(e),t)}function lb(e,t,n,r,s){let i=r===null?null:{"":-1},o=s(e,n);if(o!==null){let a=o,c=null,l=null;for(let p of o)if(p.resolveHostDirectives!==null){[a,c,l]=p.resolveHostDirectives(o);break}hb(e,t,n,a,i,c,l)}i!==null&&r!==null&&ub(n,r,i)}function ub(e,t,n){let r=e.localNames=[];for(let s=0;s<t.length;s+=2){let i=n[t[s+1]];if(i==null)throw new J(-301,!1);r.push(t[s],i)}}function db(e,t,n){t.componentOffset=n,(e.components??=[]).push(t.index)}function hb(e,t,n,r,s,i,o){let a=r.length,c=!1;for(let y=0;y<a;y++){let g=r[y];!c&&Wt(g)&&(c=!0,db(e,n,y)),Pu(ga(n,t),e,g.type)}vb(n,e.data.length,a);for(let y=0;y<a;y++){let g=r[y];g.providersResolver&&g.providersResolver(g)}let l=!1,p=!1,m=Ug(e,t,a,null);a>0&&(n.directiveToIndex=new Map);for(let y=0;y<a;y++){let g=r[y];if(n.mergedAttrs=Zr(n.mergedAttrs,g.hostAttrs),pb(e,n,t,m,g),_b(m,g,s),o!==null&&o.has(g)){let[f,u]=o.get(g);n.directiveToIndex.set(g.type,[m,f+n.directiveStart,u+n.directiveStart])}else(i===null||!i.has(g))&&n.directiveToIndex.set(g.type,m);g.contentQueries!==null&&(n.flags|=4),(g.hostBindings!==null||g.hostAttrs!==null||g.hostVars!==0)&&(n.flags|=64);let d=g.type.prototype;!l&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((e.preOrderHooks??=[]).push(n.index),l=!0),!p&&(d.ngOnChanges||d.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(n.index),p=!0),m++}fb(e,n,i)}function fb(e,t,n){for(let r=t.directiveStart;r<t.directiveEnd;r++){let s=e.data[r];if(n===null||!n.has(s))Gp(0,t,s,r),Gp(1,t,s,r),Kp(t,r,!1);else{let i=n.get(s);qp(0,t,i,r),qp(1,t,i,r),Kp(t,r,!0)}}}function Gp(e,t,n,r){let s=e===0?n.inputs:n.outputs;for(let i in s)if(s.hasOwnProperty(i)){let o;e===0?o=t.inputs??={}:o=t.outputs??={},o[i]??=[],o[i].push(r),ym(t,i)}}function qp(e,t,n,r){let s=e===0?n.inputs:n.outputs;for(let i in s)if(s.hasOwnProperty(i)){let o=s[i],a;e===0?a=t.hostDirectiveInputs??={}:a=t.hostDirectiveOutputs??={},a[o]??=[],a[o].push(r,i),ym(t,o)}}function ym(e,t){t==="class"?e.flags|=8:t==="style"&&(e.flags|=16)}function Kp(e,t,n){let{attrs:r,inputs:s,hostDirectiveInputs:i}=e;if(r===null||!n&&s===null||n&&i===null||md(e)){e.initialInputs??=[],e.initialInputs.push(null);return}let o=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!n&&s.hasOwnProperty(c)){let l=s[c];for(let p of l)if(p===t){o??=[],o.push(c,r[a+1]);break}}else if(n&&i.hasOwnProperty(c)){let l=i[c];for(let p=0;p<l.length;p+=2)if(l[p]===t){o??=[],o.push(l[p+1],r[a+1]);break}}a+=2}e.initialInputs??=[],e.initialInputs.push(o)}function pb(e,t,n,r,s){e.data[r]=s;let i=s.factory||(s.factory=qn(s.type,!0)),o=new ir(i,Wt(s),Ee,null);e.blueprint[r]=o,n[r]=o,gb(e,t,r,Ug(e,n,s.hostVars,Lt),s)}function gb(e,t,n,r,s){let i=s.hostBindings;if(i){let o=e.hostBindingOpCodes;o===null&&(o=e.hostBindingOpCodes=[]);let a=~t.index;mb(o)!=a&&o.push(a),o.push(n,r,i)}}function mb(e){let t=e.length;for(;t>0;){let n=e[--t];if(typeof n=="number"&&n<0)return n}return 0}function _b(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;Wt(t)&&(n[""]=e)}}function vb(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function Cm(e,t,n,r,s,i,o,a){let c=t[ne],l=c.consts,p=Gt(l,o),m=Ua(c,e,n,r,p);return i&&lb(c,t,m,Gt(l,a),s),m.mergedAttrs=Zr(m.mergedAttrs,m.attrs),m.attrs!==null&&ba(m,m.attrs,!1),m.mergedAttrs!==null&&ba(m,m.mergedAttrs,!0),c.queries!==null&&c.queries.elementStart(c,m),m}function bm(e,t){u0(e,t),Jl(t)&&e.queries.elementEnd(t)}function yb(e,t,n,r,s,i){let o=t.consts,a=Gt(o,s),c=Ua(t,e,n,r,a);if(c.mergedAttrs=Zr(c.mergedAttrs,c.attrs),i!=null){let l=Gt(o,i);c.localNames=[];for(let p=0;p<l.length;p+=2)c.localNames.push(l[p],-1)}return c.attrs!==null&&ba(c,c.attrs,!1),c.mergedAttrs!==null&&ba(c,c.mergedAttrs,!0),t.queries!==null&&t.queries.elementStart(t,c),c}function kn(e,t,n){if(n===Lt)return!1;let r=e[t];return Object.is(r,n)?!1:(e[t]=n,!0)}function Cb(e,t,n,r){let s=kn(e,t,n);return kn(e,t+1,r)||s}function da(e,t,n){return function r(s){let i=Rn(e)?wt(e.index,t):t;xd(i,5);let o=t[Ne],a=Zp(t,o,n,s),c=r.__ngNextListenerFn__;for(;c;)a=Zp(t,o,c,s)&&a,c=c.__ngNextListenerFn__;return a}}function Zp(e,t,n,r){let s=se(null);try{return Ce(6,t,n),n(r)!==!1}catch(i){return FC(e,i),!1}finally{Ce(7,t,n),se(s)}}function Sm(e,t,n,r,s,i,o,a){let c=Zo(e),l=!1,p=null;if(!r&&c&&(p=Sb(t,n,i,e.index)),p!==null){let m=p.__ngLastListenerFn__||p;m.__ngNextListenerFn__=o,p.__ngLastListenerFn__=o,l=!0}else{let m=zt(e,n),y=r?r(m):m;P0(n,y,i,a);let g=s.listen(y,i,a);if(!bb(i)){let d=r?f=>r(Dt(f[e.index])):e.index;Em(d,t,n,i,a,g,!1)}}return l}function bb(e){return e.startsWith("animation")||e.startsWith("transition")}function Sb(e,t,n,r){let s=e.cleanup;if(s!=null)for(let i=0;i<s.length-1;i+=2){let o=s[i];if(o===n&&s[i+1]===r){let a=t[Hr],c=s[i+2];return a&&a.length>c?a[c]:null}typeof o=="string"&&(i+=2)}return null}function Em(e,t,n,r,s,i,o){let a=t.firstCreatePass?iu(t):null,c=ru(n),l=c.length;c.push(s,i),a&&a.push(r,e,l,(l+1)*(o?-1:1))}function Yp(e,t,n,r,s,i){let o=t[n],a=t[ne],l=a.data[n].outputs[r],m=o[l].subscribe(i);Em(e.index,a,t,s,i,m,!0)}var Zu=Symbol("BINDING");var Sa=class extends ps{ngModule;constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let n=Mn(t);return new Xr(n,this.ngModule)}};function Eb(e){return Object.keys(e).map(t=>{let[n,r,s]=e[t],i={propName:n,templateName:t,isSignal:(r&Pa.SignalBased)!==0};return s&&(i.transform=s),i})}function Db(e){return Object.keys(e).map(t=>({propName:e[t],templateName:t}))}function wb(e,t,n){let r=t instanceof Ve?t:t?.injector;return r&&e.getStandaloneInjector!==null&&(r=e.getStandaloneInjector(r)||r),r?new Ku(n,r):n}function Ib(e){let t=e.get(sr,null);if(t===null)throw new J(407,!1);let n=e.get(vm,null),r=e.get(nn,null);return{rendererFactory:t,sanitizer:n,changeDetectionScheduler:r,ngReflect:!1}}function Mb(e,t){let n=Dm(e);return Fg(t,n,n==="svg"?rp:n==="math"?ip:null)}function Dm(e){return(e.selectors[0][0]||"div").toLowerCase()}var Xr=class extends $a{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=Eb(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=Db(this.componentDef.outputs),this.cachedOutputs}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=G0(t.selectors),this.ngContentSelectors=t.ngContentSelectors??[],this.isBoundToModule=!!n}create(t,n,r,s,i,o){Ce(22);let a=se(null);try{let c=this.componentDef,l=Tb(r,c,o,i),p=wb(c,s||this.ngModule,t),m=Ib(p),y=m.rendererFactory.createRenderer(null,c),g=r?IC(y,r,c.encapsulation,p):Mb(c,y),d=o?.some(Qp)||i?.some(h=>typeof h!="function"&&h.bindings.some(Qp)),f=vd(null,l,null,512|Hg(c),null,null,m,y,p,null,Rg(g,p,!0));f[Ze]=g,ea(f);let u=null;try{let h=Cm(Ze,f,2,"#host",()=>l.directiveRegistry,!0,0);Vg(y,g,h),Yr(g,f),Xg(l,f,h),Ng(l,h,f),bm(l,h),n!==void 0&&xb(h,this.ngContentSelectors,n),u=wt(h.index,f),f[Ne]=u[Ne],Ad(l,f,null)}catch(h){throw u!==null&&Fu(u),Fu(f),h}finally{Ce(23),ta()}return new Ea(this.componentType,f,!!d)}finally{se(a)}}};function Tb(e,t,n,r){let s=e?["ng-version","20.3.10"]:q0(t.selectors[0]),i=null,o=null,a=0;if(n)for(let p of n)a+=p[Zu].requiredVars,p.create&&(p.targetIdx=0,(i??=[]).push(p)),p.update&&(p.targetIdx=0,(o??=[]).push(p));if(r)for(let p=0;p<r.length;p++){let m=r[p];if(typeof m!="function")for(let y of m.bindings){a+=y[Zu].requiredVars;let g=p+1;y.create&&(y.targetIdx=g,(i??=[]).push(y)),y.update&&(y.targetIdx=g,(o??=[]).push(y))}}let c=[t];if(r)for(let p of r){let m=typeof p=="function"?p:p.type,y=zl(m);c.push(y)}return _d(0,null,Ab(i,o),1,a,c,null,null,null,[s],null)}function Ab(e,t){return!e&&!t?null:n=>{if(n&1&&e)for(let r of e)r.create();if(n&2&&t)for(let r of t)r.update()}}function Qp(e){let t=e[Zu].kind;return t==="input"||t==="twoWay"}var Ea=class extends _m{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(t,n,r){super(),this._rootLView=n,this._hasInputBindings=r,this._tNode=ts(n[ne],Ze),this.location=ri(this._tNode,n),this.instance=wt(this._tNode.index,n)[Ne],this.hostView=this.changeDetectorRef=new Nn(n,void 0),this.componentType=t}setInput(t,n){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),n))return;let s=this._rootLView,i=Td(r,s[ne],s,t,n);this.previousInputValues.set(t,n);let o=wt(r.index,s);xd(o,1)}get injector(){return new rr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function xb(e,t,n){let r=e.projection=[];for(let s=0;s<t.length;s++){let i=n[s];r.push(i!=null&&i.length?Array.from(i):null)}}var lr=(()=>{class e{static __NG_ELEMENT_ID__=Rb}return e})();function Rb(){let e=Qe();return Im(e,ge())}var Ob=lr,wm=class extends Ob{_lContainer;_hostTNode;_hostLView;constructor(t,n,r){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=r}get element(){return ri(this._hostTNode,this._hostLView)}get injector(){return new rr(this._hostTNode,this._hostLView)}get parentInjector(){let t=hd(this._hostTNode,this._hostLView);if(hg(t)){let n=pa(t,this._hostLView),r=fa(t),s=n[ne].data[r+8];return new rr(s,n)}else return new rr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let n=Jp(this._lContainer);return n!==null&&n[t]||null}get length(){return this._lContainer.length-Le}createEmbeddedView(t,n,r){let s,i;typeof r=="number"?s=r:r!=null&&(s=r.index,i=r.injector);let o=Gu(this._lContainer,t.ssrId),a=t.createEmbeddedViewImpl(n||{},i,o);return this.insertImpl(a,s,cs(this._hostTNode,o)),a}createComponent(t,n,r,s,i,o,a){let c=t&&!s0(t),l;if(c)l=n;else{let u=n||{};l=u.index,r=u.injector,s=u.projectableNodes,i=u.environmentInjector||u.ngModuleRef,o=u.directives,a=u.bindings}let p=c?t:new Xr(Mn(t)),m=r||this.parentInjector;if(!i&&p.ngModule==null){let h=(c?m:this.parentInjector).get(Ve,null);h&&(i=h)}let y=Mn(p.componentType??{}),g=Gu(this._lContainer,y?.id??null),d=g?.firstChild??null,f=p.create(m,s,d,i,o,a);return this.insertImpl(f.hostView,l,cs(this._hostTNode,g)),f}insert(t,n){return this.insertImpl(t,n,!0)}insertImpl(t,n,r){let s=t._lView;if(op(s)){let a=this.indexOf(t);if(a!==-1)this.detach(a);else{let c=s[He],l=new wm(c,c[Et],c[He]);l.detach(l.indexOf(t))}}let i=this._adjustIndex(n),o=this._lContainer;return Ha(o,s,i,r),t.attachToViewContainerRef(),Hl(Mu(o),i,t),t}move(t,n){return this.insert(t,n)}indexOf(t){let n=Jp(this._lContainer);return n!==null?n.indexOf(t):-1}remove(t){let n=this._adjustIndex(t,-1),r=us(this._lContainer,n);r&&(Zi(Mu(this._lContainer),n),Ba(r[ne],r))}detach(t){let n=this._adjustIndex(t,-1),r=us(this._lContainer,n);return r&&Zi(Mu(this._lContainer),n)!=null?new Nn(r):null}_adjustIndex(t,n=0){return t??this.length+n}};function Jp(e){return e[es]}function Mu(e){return e[es]||(e[es]=[])}function Im(e,t){let n,r=t[e.index];return Ot(r)?n=r:(n=hm(r,t,null,e),t[e.index]=n,yd(t,n)),kb(n,t,e,r),new wm(n,e,t)}function Nb(e,t){let n=e[Me],r=n.createComment(""),s=zt(t,e),i=n.parentNode(s);return _a(n,i,r,n.nextSibling(s),!1),r}var kb=Fb,Pb=()=>!1;function Lb(e,t,n){return Pb(e,t,n)}function Fb(e,t,n,r){if(e[xn])return;let s;n.type&8?s=Dt(r):s=Nb(t,n),e[xn]=s}var Yu=class e{queryList;matches=null;constructor(t){this.queryList=t}clone(){return new e(this.queryList)}setDirty(){this.queryList.setDirty()}},Qu=class e{queries;constructor(t=[]){this.queries=t}createEmbeddedView(t){let n=t.queries;if(n!==null){let r=t.contentQueries!==null?t.contentQueries[0]:n.length,s=[];for(let i=0;i<r;i++){let o=n.getByIndex(i),a=this.queries[o.indexInDeclarationView];s.push(a.clone())}return new e(s)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}finishViewCreation(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let n=0;n<this.queries.length;n++)Od(t,n).matches!==null&&this.queries[n].setDirty()}},Ju=class{flags;read;predicate;constructor(t,n,r=null){this.flags=n,this.read=r,typeof t=="string"?this.predicate=zb(t):this.predicate=t}},Xu=class e{queries;constructor(t=[]){this.queries=t}elementStart(t,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(t,n)}elementEnd(t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(t)}embeddedTView(t){let n=null;for(let r=0;r<this.length;r++){let s=n!==null?n.length:0,i=this.getByIndex(r).embeddedTView(t,s);i&&(i.indexInDeclarationView=r,n!==null?n.push(i):n=[i])}return n!==null?new e(n):null}template(t,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(t,n)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}},ed=class e{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(t,n=-1){this.metadata=t,this._declarationNodeIndex=n}elementStart(t,n){this.isApplyingToNode(n)&&this.matchTNode(t,n)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,n){this.elementStart(t,n)}embeddedTView(t,n){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,n),new e(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=t.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(t,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let s=0;s<r.length;s++){let i=r[s];this.matchTNodeWithReadOption(t,n,Bb(n,i)),this.matchTNodeWithReadOption(t,n,la(n,t,i,!1,!1))}else r===Jr?n.type&4&&this.matchTNodeWithReadOption(t,n,-1):this.matchTNodeWithReadOption(t,n,la(n,t,r,!1,!1))}matchTNodeWithReadOption(t,n,r){if(r!==null){let s=this.metadata.read;if(s!==null)if(s===Pt||s===lr||s===Jr&&n.type&4)this.addMatch(n.index,-2);else{let i=la(n,t,s,!1,!1);i!==null&&this.addMatch(n.index,i)}else this.addMatch(n.index,r)}}addMatch(t,n){this.matches===null?this.matches=[t,n]:this.matches.push(t,n)}};function Bb(e,t){let n=e.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===t)return n[r+1]}return null}function jb(e,t){return e.type&11?ri(e,t):e.type&4?Rd(e,t):null}function Vb(e,t,n,r){return n===-1?jb(t,e):n===-2?Hb(e,t,r):as(e,e[ne],n,t)}function Hb(e,t,n){if(n===Pt)return ri(t,e);if(n===Jr)return Rd(t,e);if(n===lr)return Im(t,e)}function Mm(e,t,n,r){let s=t[Ut].queries[r];if(s.matches===null){let i=e.data,o=n.matches,a=[];for(let c=0;o!==null&&c<o.length;c+=2){let l=o[c];if(l<0)a.push(null);else{let p=i[l];a.push(Vb(t,p,o[c+1],n.metadata.read))}}s.matches=a}return s.matches}function td(e,t,n,r){let s=e.queries.getByIndex(n),i=s.matches;if(i!==null){let o=Mm(e,t,s,n);for(let a=0;a<i.length;a+=2){let c=i[a];if(c>0)r.push(o[a/2]);else{let l=i[a+1],p=t[-c];for(let m=Le;m<p.length;m++){let y=p[m];y[An]===y[He]&&td(y[ne],y,l,r)}if(p[tr]!==null){let m=p[tr];for(let y=0;y<m.length;y++){let g=m[y];td(g[ne],g,l,r)}}}}}return r}function Ub(e,t){return e[Ut].queries[t].queryList}function $b(e,t,n){let r=new ma((n&4)===4);return lp(e,t,r,r.destroy),(t[Ut]??=new Qu).queries.push(new Yu(r))-1}function Wb(e,t,n){let r=Ye();return r.firstCreatePass&&(Gb(r,new Ju(e,t,n),-1),(t&2)===2&&(r.staticViewQueries=!0)),$b(r,ge(),t)}function zb(e){return e.split(",").map(t=>t.trim())}function Gb(e,t,n){e.queries===null&&(e.queries=new Xu),e.queries.track(new ed(t,n))}function Od(e,t){return e.queries.getByIndex(t)}function qb(e,t){let n=e[ne],r=Od(n,t);return r.crossesNgTemplate?td(n,e,t,[]):Mm(n,e,r,t)}var ei=class{},Wa=class{};var Da=class extends ei{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Sa(this);constructor(t,n,r,s=!0){super(),this.ngModuleType=t,this._parent=n;let i=Wl(t);this._bootstrapComponents=Pg(i.bootstrap),this._r3Injector=_u(t,n,[{provide:ei,useValue:this},{provide:ps,useValue:this.componentFactoryResolver},...r],tn(t),new Set(["environment"])),s&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},wa=class extends Wa{moduleType;constructor(t){super(),this.moduleType=t}create(t){return new Da(this.moduleType,t,[])}};var ds=class extends ei{injector;componentFactoryResolver=new Sa(this);instance=null;constructor(t){super();let n=new Zn([...t.providers,{provide:ei,useValue:this},{provide:ps,useValue:this.componentFactoryResolver}],t.parent||Qi(),t.debugName,new Set(["environment"]));this.injector=n,t.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function gs(e,t,n=null){return new ds({providers:e,parent:t,debugName:n,runEnvironmentInitializers:!0}).injector}var Kb=(()=>{class e{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=Gl(!1,n.type),s=r.length>0?gs([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,s)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=Q({token:e,providedIn:"environment",factory:()=>new e(re(Ve))})}return e})();function hn(e){return fs(()=>{let t=Tm(e),n=fe(H({},t),{decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===fd.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:t.standalone?s=>s.get(Kb).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||ln.Emulated,styles:e.styles||pt,_:null,schemas:e.schemas||null,tView:null,id:""});t.standalone&&dn("NgStandalone"),Am(n);let r=e.dependencies;return n.directiveDefs=Xp(r,Zb),n.pipeDefs=Xp(r,Zf),n.id=Jb(n),n})}function Zb(e){return Mn(e)||zl(e)}function fn(e){return fs(()=>({type:e.type,bootstrap:e.bootstrap||pt,declarations:e.declarations||pt,imports:e.imports||pt,exports:e.exports||pt,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function Yb(e,t){if(e==null)return In;let n={};for(let r in e)if(e.hasOwnProperty(r)){let s=e[r],i,o,a,c;Array.isArray(s)?(a=s[0],i=s[1],o=s[2]??i,c=s[3]||null):(i=s,o=s,a=Pa.None,c=null),n[i]=[r,a,c],t[i]=o}return n}function Qb(e){if(e==null)return In;let t={};for(let n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}function ut(e){return fs(()=>{let t=Tm(e);return Am(t),t})}function Tm(e){let t={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputConfig:e.inputs||In,exportAs:e.exportAs||null,standalone:e.standalone??!0,signals:e.signals===!0,selectors:e.selectors||pt,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:Yb(e.inputs,t),outputs:Qb(e.outputs),debugInfo:null}}function Am(e){e.features?.forEach(t=>t(e))}function Xp(e,t){return e?()=>{let n=typeof e=="function"?e():e,r=[];for(let s of n){let i=t(s);i!==null&&r.push(i)}return r}:null}function Jb(e){let t=0,n=typeof e.consts=="function"?"":e.consts,r=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,n,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery];for(let i of r.join("|"))t=Math.imul(31,t)+i.charCodeAt(0)<<0;return t+=2147483648,"c"+t}function Xb(e){return Object.getPrototypeOf(e.prototype).constructor}function pn(e){let t=Xb(e.type),n=!0,r=[e];for(;t;){let s;if(Wt(e))s=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new J(903,!1);s=t.\u0275dir}if(s){if(n){r.push(s);let o=e;o.inputs=Tu(e.inputs),o.declaredInputs=Tu(e.declaredInputs),o.outputs=Tu(e.outputs);let a=s.hostBindings;a&&iS(e,a);let c=s.viewQuery,l=s.contentQueries;if(c&&nS(e,c),l&&rS(e,l),eS(e,s),Vf(e.outputs,s.outputs),Wt(s)&&s.data.animation){let p=e.data;p.animation=(p.animation||[]).concat(s.data.animation)}}let i=s.features;if(i)for(let o=0;o<i.length;o++){let a=i[o];a&&a.ngInherit&&a(e),a===pn&&(n=!1)}}t=Object.getPrototypeOf(t)}tS(r)}function eS(e,t){for(let n in t.inputs){if(!t.inputs.hasOwnProperty(n)||e.inputs.hasOwnProperty(n))continue;let r=t.inputs[n];r!==void 0&&(e.inputs[n]=r,e.declaredInputs[n]=t.declaredInputs[n])}}function tS(e){let t=0,n=null;for(let r=e.length-1;r>=0;r--){let s=e[r];s.hostVars=t+=s.hostVars,s.hostAttrs=Zr(s.hostAttrs,n=Zr(n,s.hostAttrs))}}function Tu(e){return e===In?{}:e===pt?[]:e}function nS(e,t){let n=e.viewQuery;n?e.viewQuery=(r,s)=>{t(r,s),n(r,s)}:e.viewQuery=t}function rS(e,t){let n=e.contentQueries;n?e.contentQueries=(r,s,i)=>{t(r,s,i),n(r,s,i)}:e.contentQueries=t}function iS(e,t){let n=e.hostBindings;n?e.hostBindings=(r,s)=>{t(r,s),n(r,s)}:e.hostBindings=t}function sS(e,t,n,r,s,i,o,a){if(n.firstCreatePass){e.mergedAttrs=Zr(e.mergedAttrs,e.attrs);let p=e.tView=_d(2,e,s,i,o,n.directiveRegistry,n.pipeRegistry,null,n.schemas,n.consts,null);n.queries!==null&&(n.queries.template(n,e),p.queries=n.queries.embeddedTView(e))}a&&(e.flags|=a),zr(e,!1);let c=oS(n,t,e,r);na()&&wd(n,t,c,e),Yr(c,t);let l=hm(c,t,c,e);t[r+Ze]=l,yd(t,l),Lb(l,e,t)}function Ia(e,t,n,r,s,i,o,a,c,l,p){let m=n+Ze,y;if(t.firstCreatePass){if(y=Ua(t,m,4,o||null,a||null),l!=null){let g=Gt(t.consts,l);y.localNames=[];for(let d=0;d<g.length;d+=2)y.localNames.push(g[d],-1)}}else y=t.data[m];return sS(y,e,t,n,r,s,i,c),l!=null&&Md(e,y,p),y}var oS=aS;function aS(e,t,n,r){return ra(!0),t[Me].createComment("")}var Nd=(()=>{class e{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})();var kd=new X("");function ur(e){return!!e&&typeof e.then=="function"}function xm(e){return!!e&&typeof e.subscribe=="function"}var Rm=new X("");var Pd=(()=>{class e{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=P(Rm,{optional:!0})??[];injector=P(bt);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let s of this.appInits){let i=Ke(this.injector,s);if(ur(i))n.push(i);else if(xm(i)){let o=new Promise((a,c)=>{i.subscribe({complete:a,error:c})});n.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(s=>{this.reject(s)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||e)};static \u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),za=new X("");function Om(){Xc(()=>{let e="";throw new J(600,e)})}function Nm(e){return e.isBoundToModule}var cS=10;var gn=(()=>{class e{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=P(_t);afterRenderManager=P(Ed);zonelessEnabled=P(rs);rootEffectScheduler=P(Eu);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Ie;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=P(qt);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(ue(n=>!n))}constructor(){P(ar,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:s=>{s&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=P(Ve);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,s=bt.NULL){return this._injector.get(ke).run(()=>{Ce(10);let o=n instanceof $a;if(!this._injector.get(Pd).done){let d="";throw new J(405,d)}let c;o?c=n:c=this._injector.get(ps).resolveComponentFactory(n),this.componentTypes.push(c.componentType);let l=Nm(c)?void 0:this._injector.get(ei),p=r||c.selector,m=c.create(s,[],p,l),y=m.location.nativeElement,g=m.injector.get(kd,null);return g?.registerApplication(y),m.onDestroy(()=>{this.detachView(m.hostView),os(this.components,m),g?.unregisterApplication(y)}),this._loadComponent(m),Ce(11,m),m})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Ce(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(La.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new J(101,!1);let n=se(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,se(n),this.afterTick.next(),Ce(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(sr,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<cS;)Ce(14),this.synchronizeOnce(),Ce(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:s}of this.allViews){if(!r&&!ns(s))continue;let i=r&&!this.zonelessEnabled?0:1;cm(s,i),n=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>ns(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;os(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(s){this.internalErrorHandler(s)}this.components.push(n),this._injector.get(za,[]).forEach(s=>s(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>os(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new J(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||e)};static \u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function os(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}var KN=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";var nd=class{destroy(t){}updateValue(t,n){}swap(t,n){let r=Math.min(t,n),s=Math.max(t,n),i=this.detach(s);if(s-r>1){let o=this.detach(r);this.attach(r,i),this.attach(s,o)}else this.attach(r,i)}move(t,n){this.attach(n,this.detach(t,!0))}};function Au(e,t,n,r,s){return e===n&&Object.is(t,r)?1:Object.is(s(e,t),s(n,r))?-1:0}function lS(e,t,n){let r,s,i=0,o=e.length-1,a=void 0;if(Array.isArray(t)){let c=t.length-1;for(;i<=o&&i<=c;){let l=e.at(i),p=t[i],m=Au(i,l,i,p,n);if(m!==0){m<0&&e.updateValue(i,p),i++;continue}let y=e.at(o),g=t[c],d=Au(o,y,c,g,n);if(d!==0){d<0&&e.updateValue(o,g),o--,c--;continue}let f=n(i,l),u=n(o,y),h=n(i,p);if(Object.is(h,u)){let _=n(c,g);Object.is(_,f)?(e.swap(i,o),e.updateValue(o,g),c--,o--):e.move(o,i),e.updateValue(i,p),i++;continue}if(r??=new Ma,s??=tg(e,i,o,n),rd(e,r,i,h))e.updateValue(i,p),i++,o++;else if(s.has(h))r.set(f,e.detach(i)),o--;else{let _=e.create(i,t[i]);e.attach(i,_),i++,o++}}for(;i<=c;)eg(e,r,n,i,t[i]),i++}else if(t!=null){let c=t[Symbol.iterator](),l=c.next();for(;!l.done&&i<=o;){let p=e.at(i),m=l.value,y=Au(i,p,i,m,n);if(y!==0)y<0&&e.updateValue(i,m),i++,l=c.next();else{r??=new Ma,s??=tg(e,i,o,n);let g=n(i,m);if(rd(e,r,i,g))e.updateValue(i,m),i++,o++,l=c.next();else if(!s.has(g))e.attach(i,e.create(i,m)),i++,o++,l=c.next();else{let d=n(i,p);r.set(d,e.detach(i)),o--}}}for(;!l.done;)eg(e,r,n,e.length,l.value),l=c.next()}for(;i<=o;)e.destroy(e.detach(o--));r?.forEach(c=>{e.destroy(c)})}function rd(e,t,n,r){return t!==void 0&&t.has(r)?(e.attach(n,t.get(r)),t.delete(r),!0):!1}function eg(e,t,n,r,s){if(rd(e,t,r,n(r,s)))e.updateValue(r,s);else{let i=e.create(r,s);e.attach(r,i)}}function tg(e,t,n,r){let s=new Set;for(let i=t;i<=n;i++)s.add(r(i,e.at(i)));return s}var Ma=class{kvMap=new Map;_vMap=void 0;has(t){return this.kvMap.has(t)}delete(t){if(!this.has(t))return!1;let n=this.kvMap.get(t);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(t,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(t),!0}get(t){return this.kvMap.get(t)}set(t,n){if(this.kvMap.has(t)){let r=this.kvMap.get(t);this._vMap===void 0&&(this._vMap=new Map);let s=this._vMap;for(;s.has(r);)r=s.get(r);s.set(r,n)}else this.kvMap.set(t,n)}forEach(t){for(let[n,r]of this.kvMap)if(t(r,n),this._vMap!==void 0){let s=this._vMap;for(;s.has(r);)r=s.get(r),t(r,n)}}};function $e(e,t,n,r,s,i,o,a){dn("NgControlFlow");let c=ge(),l=Ye(),p=Gt(l.consts,i);return Ia(c,l,e,t,n,r,s,p,256,o,a),Ld}function Ld(e,t,n,r,s,i,o,a){dn("NgControlFlow");let c=ge(),l=Ye(),p=Gt(l.consts,i);return Ia(c,l,e,t,n,r,s,p,512,o,a),Ld}function We(e,t){dn("NgControlFlow");let n=ge(),r=Gr(),s=n[r]!==Lt?n[r]:-1,i=s!==-1?Ta(n,Ze+s):void 0,o=0;if(kn(n,r,e)){let a=se(null);try{if(i!==void 0&&pm(i,o),e!==-1){let c=Ze+e,l=Ta(n,c),p=ad(n[ne],c),m=mm(l,p,n),y=Va(n,p,t,{dehydratedView:m});Ha(l,y,o,cs(p,m))}}finally{se(a)}}else if(i!==void 0){let a=fm(i,o);a!==void 0&&(a[Ne]=t)}}var id=class{lContainer;$implicit;$index;constructor(t,n,r){this.lContainer=t,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-Le}};function Ga(e){return e}var sd=class{hasEmptyBlock;trackByFn;liveCollection;constructor(t,n,r){this.hasEmptyBlock=t,this.trackByFn=n,this.liveCollection=r}};function dr(e,t,n,r,s,i,o,a,c,l,p,m,y){dn("NgControlFlow");let g=ge(),d=Ye(),f=c!==void 0,u=ge(),h=a?o.bind(u[gt][Ne]):o,_=new sd(f,h);u[Ze+e]=_,Ia(g,d,e+1,t,n,r,s,Gt(d.consts,i),256),f&&Ia(g,d,e+2,c,l,p,m,Gt(d.consts,y),512)}var od=class extends nd{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(t,n,r){super(),this.lContainer=t,this.hostLView=n,this.templateTNode=r}get length(){return this.lContainer.length-Le}at(t){return this.getLView(t)[Ne].$implicit}attach(t,n){let r=n[Vr];this.needsIndexUpdate||=t!==this.length,Ha(this.lContainer,n,t,cs(this.templateTNode,r))}detach(t,n){return this.needsIndexUpdate||=t!==this.length-1,n&&uS(this.lContainer,t),dS(this.lContainer,t)}create(t,n){let r=Gu(this.lContainer,this.templateTNode.tView.ssrId),s=Va(this.hostLView,this.templateTNode,new id(this.lContainer,n,t),{dehydratedView:r});return this.operationsCounter?.recordCreate(),s}destroy(t){Ba(t[ne],t),this.operationsCounter?.recordDestroy()}updateValue(t,n){this.getLView(t)[Ne].$implicit=n}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let t=0;t<this.length;t++)this.getLView(t)[Ne].$index=t}getLView(t){return hS(this.lContainer,t)}};function hr(e){let t=se(null),n=cn();try{let r=ge(),s=r[ne],i=r[n],o=n+1,a=Ta(r,o);if(i.liveCollection===void 0){let l=ad(s,o);i.liveCollection=new od(a,r,l)}else i.liveCollection.reset();let c=i.liveCollection;if(lS(c,e,i.trackByFn),c.updateIndexes(),i.hasEmptyBlock){let l=Gr(),p=c.length===0;if(kn(r,l,p)){let m=n+2,y=Ta(r,m);if(p){let g=ad(s,m),d=mm(y,g,r),f=Va(r,g,void 0,{dehydratedView:d});Ha(y,f,0,cs(g,d))}else s.firstUpdatePass&&ib(y),pm(y,0)}}}finally{se(t)}}function Ta(e,t){return e[t]}function uS(e,t){if(e.length<=Le)return;let n=Le+t,r=e[n];r&&r[er]&&(r[er].skipLeaveAnimations=!0)}function dS(e,t){return us(e,t)}function hS(e,t){return fm(e,t)}function ad(e,t){return ts(e,t)}function ms(e,t,n){let r=ge(),s=Gr();if(kn(r,s,t)){let i=Ye(),o=mu();em(o,r,e,t,r[Me],n)}return ms}function ng(e,t,n,r,s){Td(t,e,n,s?"class":"style",r)}function U(e,t,n,r){let s=ge(),i=s[ne],o=e+Ze,a=i.firstCreatePass?Cm(o,s,2,t,PC,hp(),n,r):i.data[o];if(tm(a,s,e,t,km),Zo(a)){let c=s[ne];Xg(c,s,a),Ng(c,a,s)}return r!=null&&Md(s,a),U}function V(){let e=Ye(),t=Qe(),n=nm(t);return e.firstCreatePass&&bm(e,n),ou(n)&&au(),su(),n.classesWithoutHost!=null&&h0(n)&&ng(e,n,ge(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&f0(n)&&ng(e,n,ge(),n.stylesWithoutHost,!1),V}function It(e,t,n,r){return U(e,t,n,r),V(),It}function si(e,t,n,r){let s=ge(),i=s[ne],o=e+Ze,a=i.firstCreatePass?yb(o,i,2,t,n,r):i.data[o];return tm(a,s,e,t,km),r!=null&&Md(s,a),si}function fr(){let e=Qe(),t=nm(e);return ou(t)&&au(),su(),fr}function oi(e,t,n,r){return si(e,t,n,r),fr(),oi}var km=(e,t,n,r,s)=>(ra(!0),Fg(t[Me],r,Ip()));function Zt(){return ge()}var _s="en-US";var fS=_s;function Pm(e){typeof e=="string"&&(fS=e.toLowerCase().replace(/_/g,"-"))}function ze(e,t,n){let r=ge(),s=Ye(),i=Qe();return Lm(s,r,r[Me],i,e,t,n),ze}function qa(e,t,n){let r=ge(),s=Ye(),i=Qe();return(i.type&3||n)&&Sm(i,s,r,n,r[Me],e,t,da(i,r,t)),qa}function Lm(e,t,n,r,s,i,o){let a=!0,c=null;if((r.type&3||o)&&(c??=da(r,t,i),Sm(r,e,t,o,n,s,i,c)&&(a=!1)),a){let l=r.outputs?.[s],p=r.hostDirectiveOutputs?.[s];if(p&&p.length)for(let m=0;m<p.length;m+=2){let y=p[m],g=p[m+1];c??=da(r,t,i),Yp(r,t,y,g,s,c)}if(l&&l.length)for(let m of l)c??=da(r,t,i),Yp(r,t,m,s,s,c)}}function De(e=1){return wp(e)}function vs(e,t,n){Wb(e,t,n)}function ys(e){let t=ge(),n=Ye(),r=fu();Xo(r+1);let s=Od(n,r);if(e.dirty&&sp(t)===((s.metadata.flags&2)===2)){if(s.matches===null)e.reset([]);else{let i=qb(t,r);e.reset(i,I0),e.notifyOnChanges()}return!0}return!1}function Cs(){return Ub(ge(),fu())}function oa(e,t){return e<<17|t<<2}function or(e){return e>>17&32767}function pS(e){return(e&2)==2}function gS(e,t){return e&131071|t<<17}function cd(e){return e|2}function ti(e){return(e&131068)>>2}function xu(e,t){return e&-131069|t<<2}function mS(e){return(e&1)===1}function ld(e){return e|1}function _S(e,t,n,r,s,i){let o=i?t.classBindings:t.styleBindings,a=or(o),c=ti(o);e[r]=n;let l=!1,p;if(Array.isArray(n)){let m=n;p=m[1],(p===null||jr(m,p)>0)&&(l=!0)}else p=n;if(s)if(c!==0){let y=or(e[a+1]);e[r+1]=oa(y,a),y!==0&&(e[y+1]=xu(e[y+1],r)),e[a+1]=gS(e[a+1],r)}else e[r+1]=oa(a,0),a!==0&&(e[a+1]=xu(e[a+1],r)),a=r;else e[r+1]=oa(c,0),a===0?a=r:e[c+1]=xu(e[c+1],r),c=r;l&&(e[r+1]=cd(e[r+1])),rg(e,p,r,!0),rg(e,p,r,!1),vS(t,p,e,r,i),o=oa(a,c),i?t.classBindings=o:t.styleBindings=o}function vS(e,t,n,r,s){let i=s?e.residualClasses:e.residualStyles;i!=null&&typeof t=="string"&&jr(i,t)>=0&&(n[r+1]=ld(n[r+1]))}function rg(e,t,n,r){let s=e[n+1],i=t===null,o=r?or(s):ti(s),a=!1;for(;o!==0&&(a===!1||i);){let c=e[o],l=e[o+1];yS(c,t)&&(a=!0,e[o+1]=r?ld(l):cd(l)),o=r?or(l):ti(l)}a&&(e[n+1]=r?cd(s):ld(s))}function yS(e,t){return e===null||t==null||(Array.isArray(e)?e[1]:e)===t?!0:Array.isArray(e)&&typeof t=="string"?jr(e,t)>=0:!1}function tt(e,t){return CS(e,t,null,!0),tt}function CS(e,t,n,r){let s=ge(),i=Ye(),o=hu(2);if(i.firstUpdatePass&&SS(i,e,o,r),t!==Lt&&kn(s,o,t)){let a=i.data[cn()];MS(i,a,s,s[Me],e,s[o+1]=TS(t,n),r,o)}}function bS(e,t){return t>=e.expandoStartIndex}function SS(e,t,n,r){let s=e.data;if(s[n+1]===null){let i=s[cn()],o=bS(e,n);AS(i,r)&&t===null&&!o&&(t=!1),t=ES(s,i,t,r),_S(s,i,t,n,o,r)}}function ES(e,t,n,r){let s=bp(e),i=r?t.residualClasses:t.residualStyles;if(s===null)(r?t.classBindings:t.styleBindings)===0&&(n=Ru(null,e,t,n,r),n=hs(n,t.attrs,r),i=null);else{let o=t.directiveStylingLast;if(o===-1||e[o]!==s)if(n=Ru(s,e,t,n,r),i===null){let c=DS(e,t,r);c!==void 0&&Array.isArray(c)&&(c=Ru(null,e,t,c[1],r),c=hs(c,t.attrs,r),wS(e,t,r,c))}else i=IS(e,t,r)}return i!==void 0&&(r?t.residualClasses=i:t.residualStyles=i),n}function DS(e,t,n){let r=n?t.classBindings:t.styleBindings;if(ti(r)!==0)return e[or(r)]}function wS(e,t,n,r){let s=n?t.classBindings:t.styleBindings;e[or(s)]=r}function IS(e,t,n){let r,s=t.directiveEnd;for(let i=1+t.directiveStylingLast;i<s;i++){let o=e[i].hostAttrs;r=hs(r,o,n)}return hs(r,t.attrs,n)}function Ru(e,t,n,r,s){let i=null,o=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<o&&(i=t[a],r=hs(r,i.hostAttrs,s),i!==e);)a++;return e!==null&&(n.directiveStylingLast=a),r}function hs(e,t,n){let r=n?1:2,s=-1;if(t!==null)for(let i=0;i<t.length;i++){let o=t[i];typeof o=="number"?s=o:s===r&&(Array.isArray(e)||(e=e===void 0?[]:["",e]),Kf(e,o,n?!0:t[++i]))}return e===void 0?null:e}function MS(e,t,n,r,s,i,o,a){if(!(t.type&3))return;let c=e.data,l=c[a+1],p=mS(l)?ig(c,t,n,s,ti(l),o):void 0;if(!Aa(p)){Aa(i)||pS(l)&&(i=ig(c,null,n,s,a,o));let m=Xl(cn(),n);wC(r,o,m,s,i)}}function ig(e,t,n,r,s,i){let o=t===null,a;for(;s>0;){let c=e[s],l=Array.isArray(c),p=l?c[1]:c,m=p===null,y=n[s+1];y===Lt&&(y=m?pt:void 0);let g=m?qo(y,r):p===r?y:void 0;if(l&&!Aa(g)&&(g=qo(c,r)),Aa(g)&&(a=g,o))return a;let d=e[s+1];s=o?or(d):ti(d)}if(t!==null){let c=i?t.residualClasses:t.residualStyles;c!=null&&(a=qo(c,r))}return a}function Aa(e){return e!==void 0}function TS(e,t){return e==null||e===""||(typeof t=="string"?e=e+t:typeof e=="object"&&(e=tn(kg(e)))),e}function AS(e,t){return(e.flags&(t?8:16))!==0}function W(e,t=""){let n=ge(),r=Ye(),s=e+Ze,i=r.firstCreatePass?Ua(r,s,1,t,null):r.data[s],o=xS(r,n,i,t,e);n[s]=o,na()&&wd(r,n,o,i),zr(i,!1)}var xS=(e,t,n,r,s)=>(ra(!0),K0(t[Me],r));function RS(e,t,n,r=""){return kn(e,Gr(),n)?t+Ki(n)+r:Lt}function OS(e,t,n,r,s,i=""){let o=mp(),a=Cb(e,o,n,s);return hu(2),a?t+Ki(n)+r+Ki(s)+i:Lt}function Ft(e){return Se("",e),Ft}function Se(e,t,n){let r=ge(),s=RS(r,e,t,n);return s!==Lt&&Fm(r,cn(),s),Se}function Ka(e,t,n,r,s){let i=ge(),o=OS(i,e,t,n,r,s);return o!==Lt&&Fm(i,cn(),o),Ka}function Fm(e,t,n){let r=Xl(t,e);Z0(e[Me],r,n)}function ai(e,t,n){Cu(t)&&(t=t());let r=ge(),s=Gr();if(kn(r,s,t)){let i=Ye(),o=mu();em(o,r,e,t,r[Me],n)}return ai}function bs(e,t){let n=Cu(e);return n&&e.set(t),n}function ci(e,t){let n=ge(),r=Ye(),s=Qe();return Lm(r,n,n[Me],s,e,t),ci}function NS(e,t,n){let r=Ye();if(r.firstCreatePass){let s=Wt(e);ud(n,r.data,r.blueprint,s,!0),ud(t,r.data,r.blueprint,s,!1)}}function ud(e,t,n,r,s){if(e=qe(e),Array.isArray(e))for(let i=0;i<e.length;i++)ud(e[i],t,n,r,s);else{let i=Ye(),o=ge(),a=Qe(),c=Kn(e)?e:qe(e.provide),l=Kl(e),p=a.providerIndexes&1048575,m=a.directiveStart,y=a.providerIndexes>>20;if(Kn(e)||!e.multi){let g=new ir(l,s,Ee,null),d=Nu(c,t,s?p:p+y,m);d===-1?(Pu(ga(a,o),i,c),Ou(i,e,t.length),t.push(c),a.directiveStart++,a.directiveEnd++,s&&(a.providerIndexes+=1048576),n.push(g),o.push(g)):(n[d]=g,o[d]=g)}else{let g=Nu(c,t,p+y,m),d=Nu(c,t,p,p+y),f=g>=0&&n[g],u=d>=0&&n[d];if(s&&!u||!s&&!f){Pu(ga(a,o),i,c);let h=LS(s?PS:kS,n.length,s,r,l,e);!s&&u&&(n[d].providerFactory=h),Ou(i,e,t.length,0),t.push(c),a.directiveStart++,a.directiveEnd++,s&&(a.providerIndexes+=1048576),n.push(h),o.push(h)}else{let h=Bm(n[s?d:g],l,!s&&r);Ou(i,e,g>-1?g:d,h)}!s&&r&&u&&n[d].componentProviders++}}}function Ou(e,t,n,r){let s=Kn(t),i=ep(t);if(s||i){let c=(i?qe(t.useClass):t).prototype.ngOnDestroy;if(c){let l=e.destroyHooks||(e.destroyHooks=[]);if(!s&&t.multi){let p=l.indexOf(n);p===-1?l.push(n,[r,c]):l[p+1].push(r,c)}else l.push(n,c)}}}function Bm(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function Nu(e,t,n,r){for(let s=n;s<r;s++)if(t[s]===e)return s;return-1}function kS(e,t,n,r,s){return dd(this.multi,[])}function PS(e,t,n,r,s){let i=this.multi,o;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=as(r,r[ne],this.providerFactory.index,s);o=c.slice(0,a),dd(i,o);for(let l=a;l<c.length;l++)o.push(c[l])}else o=[],dd(i,o);return o}function dd(e,t){for(let n=0;n<e.length;n++){let r=e[n];t.push(r())}return t}function LS(e,t,n,r,s,i){let o=new ir(e,n,Ee,null);return o.multi=[],o.index=t,o.componentProviders=0,Bm(o,s,r&&!n),o}function li(e,t=[]){return n=>{n.providersResolver=(r,s)=>NS(r,s?s(e):e,t)}}var xa=class{ngModuleFactory;componentFactories;constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}},Fd=(()=>{class e{compileModuleSync(n){return new wa(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),s=Wl(n),i=Pg(s.declarations).reduce((o,a)=>{let c=Mn(a);return c&&o.push(new Xr(c)),o},[]);return new xa(r,i)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||e)};static \u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var FS=(()=>{class e{zone=P(ke);changeDetectionScheduler=P(nn);applicationRef=P(gn);applicationErrorHandler=P(_t);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(n){this.applicationErrorHandler(n)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||e)};static \u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),jm=new X("",{factory:()=>!1});function Bd({ngZoneFactory:e,ignoreChangesOutsideZone:t,scheduleInRootZone:n}){return e??=()=>new ke(fe(H({},Vd()),{scheduleInRootZone:n})),[{provide:ke,useFactory:e},{provide:sn,multi:!0,useFactory:()=>{let r=P(FS,{optional:!0});return()=>r.initialize()}},{provide:sn,multi:!0,useFactory:()=>{let r=P(BS);return()=>{r.initialize()}}},t===!0?{provide:bu,useValue:!0}:[],{provide:Su,useValue:n??Wg},{provide:_t,useFactory:()=>{let r=P(ke),s=P(Ve),i;return o=>{r.runOutsideAngular(()=>{s.destroyed&&!i?setTimeout(()=>{throw o}):(i??=s.get(xt),i.handleError(o))})}}}]}function jd(e){let t=e?.ignoreChangesOutsideZone,n=e?.scheduleInRootZone,r=Bd({ngZoneFactory:()=>{let s=Vd(e);return s.scheduleInRootZone=n,s.shouldCoalesceEventChangeDetection&&dn("NgZone_CoalesceEvent"),new ke(s)},ignoreChangesOutsideZone:t,scheduleInRootZone:n});return on([{provide:jm,useValue:!0},{provide:rs,useValue:!1},r])}function Vd(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}var BS=(()=>{class e{subscription=new xe;initialized=!1;zone=P(ke);pendingTasks=P(qt);initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ke.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ke.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||e)};static \u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var Vm=(()=>{class e{applicationErrorHandler=P(_t);appRef=P(gn);taskService=P(qt);ngZone=P(ke);zonelessEnabled=P(rs);tracing=P(ar,{optional:!0});disableScheduling=P(bu,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new xe;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(va):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(P(Su,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof ya||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;let r=!1;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let s=this.useMicrotaskScheduler?Vp:zg;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>s(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>s(()=>this.tick()))}shouldScheduleTick(n){return!(this.disableScheduling&&!n||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(va+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(n),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Vp(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||e)};static \u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function jS(){return typeof $localize<"u"&&$localize.locale||_s}var Hd=new X("",{providedIn:"root",factory:()=>P(Hd,{optional:!0,skipSelf:!0})||jS()});function nt(e){return Ff(e)}function Ss(e,t){return uo(e,t?.equal)}var Hm=class{[et];constructor(t){this[et]=t}destroy(){this[et].destroy()}};var $m=Symbol("InputSignalNode#UNSET"),JS=fe(H({},ho),{transformFn:void 0,applyValueToInputSignal(e,t){wr(e,t)}});function Wm(e,t){let n=Object.create(JS);n.value=e,n.transformFn=t?.transform;function r(){if(Sr(n),n.value===$m){let s=null;throw new J(-950,s)}return n.value}return r[et]=n,r}var XS=new X("");XS.__NG_ELEMENT_ID__=e=>{let t=Qe();if(t===null)throw new J(204,!1);if(t.type&2)return t.value;if(e&8)return null;throw new J(204,!1)};function Um(e,t){return Wm(e,t)}function eE(e){return Wm($m,e)}var zm=(Um.required=eE,Um);var Ud=new X(""),tE=new X("");function Es(e){return!e.moduleRef}function nE(e){let t=Es(e)?e.r3Injector:e.moduleRef.injector,n=t.get(ke);return n.run(()=>{Es(e)?e.r3Injector.resolveInjectorInitializers():e.moduleRef.resolveInjectorInitializers();let r=t.get(_t),s;if(n.runOutsideAngular(()=>{s=n.onError.subscribe({next:r})}),Es(e)){let i=()=>t.destroy(),o=e.platformInjector.get(Ud);o.add(i),t.onDestroy(()=>{s.unsubscribe(),o.delete(i)})}else{let i=()=>e.moduleRef.destroy(),o=e.platformInjector.get(Ud);o.add(i),e.moduleRef.onDestroy(()=>{os(e.allPlatformModules,e.moduleRef),s.unsubscribe(),o.delete(i)})}return iE(r,n,()=>{let i=t.get(qt),o=i.add(),a=t.get(Pd);return a.runInitializers(),a.donePromise.then(()=>{let c=t.get(Hd,_s);if(Pm(c||_s),!t.get(tE,!0))return Es(e)?t.get(gn):(e.allPlatformModules.push(e.moduleRef),e.moduleRef);if(Es(e)){let p=t.get(gn);return e.rootComponent!==void 0&&p.bootstrap(e.rootComponent),p}else return rE?.(e.moduleRef,e.allPlatformModules),e.moduleRef}).finally(()=>void i.remove(o))})})}var rE;function iE(e,t,n){try{let r=n();return ur(r)?r.catch(s=>{throw t.runOutsideAngular(()=>e(s)),s}):r}catch(r){throw t.runOutsideAngular(()=>e(r)),r}}var Za=null;function sE(e=[],t){return bt.create({name:t,providers:[{provide:Yi,useValue:"platform"},{provide:Ud,useValue:new Set([()=>Za=null])},...e]})}function oE(e=[]){if(Za)return Za;let t=sE(e);return Za=t,Om(),aE(t),t}function aE(e){let t=e.get(Na,null);Ke(e,()=>{t?.forEach(n=>n())})}var ui=(()=>{class e{static __NG_ELEMENT_ID__=cE}return e})();function cE(e){return lE(Qe(),ge(),(e&16)===16)}function lE(e,t,n){if(Rn(e)&&!n){let r=wt(e.index,t);return new Nn(r,r)}else if(e.type&175){let r=t[gt];return new Nn(r,t)}return null}function Gm(e){let{rootComponent:t,appProviders:n,platformProviders:r,platformRef:s}=e;Ce(8);try{let i=s?.injector??oE(r),o=[Bd({}),{provide:nn,useExisting:Vm},Tp,...n||[]],a=new ds({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return nE({r3Injector:a.injector,platformInjector:i,rootComponent:t})}catch(i){return Promise.reject(i)}finally{Ce(9)}}function Wd(e){return typeof e=="boolean"?e:e!=null&&e!=="false"}var Zm=null;function Mt(){return Zm}function zd(e){Zm??=e}var Ds=class{},Gd=(()=>{class e{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||e)};static \u0275prov=Q({token:e,factory:()=>P(Ym),providedIn:"platform"})}return e})();var Ym=(()=>{class e extends Gd{_location;_history;_doc=P(Fe);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Mt().getBaseHref(this._doc)}onPopState(n){let r=Mt().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=Mt().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,s){this._history.pushState(n,r,s)}replaceState(n,r,s){this._history.replaceState(n,r,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||e)};static \u0275prov=Q({token:e,factory:()=>new e,providedIn:"platform"})}return e})();function Qm(e,t){return e?t?e.endsWith("/")?t.startsWith("/")?e+t.slice(1):e+t:t.startsWith("/")?e+t:`${e}/${t}`:e:t}function qm(e){let t=e.search(/#|\?|$/);return e[t-1]==="/"?e.slice(0,t-1)+e.slice(t):e}function Ln(e){return e&&e[0]!=="?"?`?${e}`:e}var Ya=(()=>{class e{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||e)};static \u0275prov=Q({token:e,factory:()=>P(Xm),providedIn:"root"})}return e})(),Jm=new X(""),Xm=(()=>{class e extends Ya{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??P(Fe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return Qm(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+Ln(this._platformLocation.search),s=this._platformLocation.hash;return s&&n?`${r}${s}`:r}pushState(n,r,s,i){let o=this.prepareExternalUrl(s+Ln(i));this._platformLocation.pushState(n,r,o)}replaceState(n,r,s,i){let o=this.prepareExternalUrl(s+Ln(i));this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||e)(re(Gd),re(Jm,8))};static \u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),di=(()=>{class e{_subject=new Ie;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=hE(qm(Km(r))),this._locationStrategy.onPopState(s=>{this._subject.next({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+Ln(r))}normalize(n){return e.stripTrailingSlash(dE(this._basePath,Km(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",s=null){this._locationStrategy.pushState(s,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Ln(r)),s)}replaceState(n,r="",s=null){this._locationStrategy.replaceState(s,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Ln(r)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(s=>s(n,r))}subscribe(n,r,s){return this._subject.subscribe({next:n,error:r??void 0,complete:s??void 0})}static normalizeQueryParams=Ln;static joinWithSlash=Qm;static stripTrailingSlash=qm;static \u0275fac=function(r){return new(r||e)(re(Ya))};static \u0275prov=Q({token:e,factory:()=>uE(),providedIn:"root"})}return e})();function uE(){return new di(re(Ya))}function dE(e,t){if(!e||!t.startsWith(e))return t;let n=t.substring(e.length);return n===""||["/",";","?","#"].includes(n[0])?n:t}function Km(e){return e.replace(/\/index.html$/,"")}function hE(e){if(new RegExp("^(https?:)?//").test(e)){let[,n]=e.split(/\/\/[^\/]+/);return n}return e}var hi=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=fn({type:e});static \u0275inj=Ht({})}return e})();function ws(e,t){t=encodeURIComponent(t);for(let n of e.split(";")){let r=n.indexOf("="),[s,i]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(s.trim()===t)return decodeURIComponent(i)}return null}var pr=class{};var e_="browser";var Is=class{_doc;constructor(t){this._doc=t}manager},Qa=(()=>{class e extends Is{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,s,i){return n.addEventListener(r,s,i),()=>this.removeEventListener(n,r,s,i)}removeEventListener(n,r,s,i){return n.removeEventListener(r,s,i)}static \u0275fac=function(r){return new(r||e)(re(Fe))};static \u0275prov=Q({token:e,factory:e.\u0275fac})}return e})(),Xa=new X(""),Qd=(()=>{class e{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(o=>{o.manager=this});let s=n.filter(o=>!(o instanceof Qa));this._plugins=s.slice().reverse();let i=n.find(o=>o instanceof Qa);i&&this._plugins.push(i)}addEventListener(n,r,s,i){return this._findPluginFor(r).addEventListener(n,r,s,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(i=>i.supports(n)),!r)throw new J(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||e)(re(Xa),re(ke))};static \u0275prov=Q({token:e,factory:e.\u0275fac})}return e})(),qd="ng-app-id";function t_(e){for(let t of e)t.remove()}function n_(e,t){let n=t.createElement("style");return n.textContent=e,n}function pE(e,t,n,r){let s=e.head?.querySelectorAll(`style[${qd}="${t}"],link[${qd}="${t}"]`);if(s)for(let i of s)i.removeAttribute(qd),i instanceof HTMLLinkElement?r.set(i.href.slice(i.href.lastIndexOf("/")+1),{usage:0,elements:[i]}):i.textContent&&n.set(i.textContent,{usage:0,elements:[i]})}function Zd(e,t){let n=t.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",e),n}var Jd=(()=>{class e{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(n,r,s,i={}){this.doc=n,this.appId=r,this.nonce=s,pE(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(let s of n)this.addUsage(s,this.inline,n_);r?.forEach(s=>this.addUsage(s,this.external,Zd))}removeStyles(n,r){for(let s of n)this.removeUsage(s,this.inline);r?.forEach(s=>this.removeUsage(s,this.external))}addUsage(n,r,s){let i=r.get(n);i?i.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(o=>this.addElement(o,s(n,this.doc)))})}removeUsage(n,r){let s=r.get(n);s&&(s.usage--,s.usage<=0&&(t_(s.elements),r.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])t_(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[r,{elements:s}]of this.inline)s.push(this.addElement(n,n_(r,this.doc)));for(let[r,{elements:s}]of this.external)s.push(this.addElement(n,Zd(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),n.appendChild(r)}static \u0275fac=function(r){return new(r||e)(re(Fe),re(Oa),re(ka,8),re(ii))};static \u0275prov=Q({token:e,factory:e.\u0275fac})}return e})(),Kd={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Xd=/%COMP%/g;var i_="%COMP%",gE=`_nghost-${i_}`,mE=`_ngcontent-${i_}`,_E=!0,vE=new X("",{providedIn:"root",factory:()=>_E});function yE(e){return mE.replace(Xd,e)}function CE(e){return gE.replace(Xd,e)}function s_(e,t){return t.map(n=>n.replace(Xd,e))}var eh=(()=>{class e{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(n,r,s,i,o,a,c,l=null,p=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=s,this.removeStylesOnCompDestroy=i,this.doc=o,this.platformId=a,this.ngZone=c,this.nonce=l,this.tracingService=p,this.platformIsServer=!1,this.defaultRenderer=new Ms(n,o,c,this.platformIsServer,this.tracingService)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;let s=this.getOrCreateRenderer(n,r);return s instanceof Ja?s.applyToHost(n):s instanceof Ts&&s.applyStyles(),s}getOrCreateRenderer(n,r){let s=this.rendererByCompId,i=s.get(r.id);if(!i){let o=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,p=this.removeStylesOnCompDestroy,m=this.platformIsServer,y=this.tracingService;switch(r.encapsulation){case ln.Emulated:i=new Ja(c,l,r,this.appId,p,o,a,m,y);break;case ln.ShadowDom:return new Yd(c,l,n,r,o,a,this.nonce,m,y);default:i=new Ts(c,l,r,p,o,a,m,y);break}s.set(r.id,i)}return i}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||e)(re(Qd),re(Jd),re(Oa),re(vE),re(Fe),re(ii),re(ke),re(ka),re(ar,8))};static \u0275prov=Q({token:e,factory:e.\u0275fac})}return e})(),Ms=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(t,n,r,s,i){this.eventManager=t,this.doc=n,this.ngZone=r,this.platformIsServer=s,this.tracingService=i}destroy(){}destroyNode=null;createElement(t,n){return n?this.doc.createElementNS(Kd[n]||n,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,n){(r_(t)?t.content:t).appendChild(n)}insertBefore(t,n,r){t&&(r_(t)?t.content:t).insertBefore(n,r)}removeChild(t,n){n.remove()}selectRootElement(t,n){let r=typeof t=="string"?this.doc.querySelector(t):t;if(!r)throw new J(-5104,!1);return n||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,r,s){if(s){n=s+":"+n;let i=Kd[s];i?t.setAttributeNS(i,n,r):t.setAttribute(n,r)}else t.setAttribute(n,r)}removeAttribute(t,n,r){if(r){let s=Kd[r];s?t.removeAttributeNS(s,n):t.removeAttribute(`${r}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,r,s){s&(un.DashCase|un.Important)?t.style.setProperty(n,r,s&un.Important?"important":""):t.style[n]=r}removeStyle(t,n,r){r&un.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,r){t!=null&&(t[n]=r)}setValue(t,n){t.nodeValue=n}listen(t,n,r,s){if(typeof t=="string"&&(t=Mt().getGlobalEventTarget(this.doc,t),!t))throw new J(5102,!1);let i=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(i=this.tracingService.wrapEventListener(t,n,i)),this.eventManager.addEventListener(t,n,i,s)}decoratePreventDefault(t){return n=>{if(n==="__ngUnwrap__")return t;t(n)===!1&&n.preventDefault()}}};function r_(e){return e.tagName==="TEMPLATE"&&e.content!==void 0}var Yd=class extends Ms{sharedStylesHost;hostEl;shadowRoot;constructor(t,n,r,s,i,o,a,c,l){super(t,i,o,c,l),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let p=s.styles;p=s_(s.id,p);for(let y of p){let g=document.createElement("style");a&&g.setAttribute("nonce",a),g.textContent=y,this.shadowRoot.appendChild(g)}let m=s.getExternalStyles?.();if(m)for(let y of m){let g=Zd(y,i);a&&g.setAttribute("nonce",a),this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,r){return super.insertBefore(this.nodeOrShadowRoot(t),n,r)}removeChild(t,n){return super.removeChild(null,n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Ts=class extends Ms{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(t,n,r,s,i,o,a,c,l){super(t,i,o,a,c),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=s;let p=r.styles;this.styles=l?s_(l,p):p,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&Qr.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Ja=class extends Ts{contentAttr;hostAttr;constructor(t,n,r,s,i,o,a,c,l){let p=s+"-"+r.id;super(t,n,r,i,o,a,c,l,p),this.contentAttr=yE(p),this.hostAttr=CE(p)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){let r=super.createElement(t,n);return super.setAttribute(r,this.contentAttr,""),r}};var ec=class e extends Ds{supportsDOMEvents=!0;static makeCurrent(){zd(new e)}onAndCancel(t,n,r,s){return t.addEventListener(n,r,s),()=>{t.removeEventListener(n,r,s)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.remove()}createElement(t,n){return n=n||this.getDefaultDocument(),n.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return n==="window"?window:n==="document"?t:n==="body"?t.body:null}getBaseHref(t){let n=bE();return n==null?null:SE(n)}resetBaseElement(){As=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return ws(document.cookie,t)}},As=null;function bE(){return As=As||document.head.querySelector("base"),As?As.getAttribute("href"):null}function SE(e){return new URL(e,document.baseURI).pathname}var EE=(()=>{class e{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||e)};static \u0275prov=Q({token:e,factory:e.\u0275fac})}return e})(),o_=["alt","control","meta","shift"],DE={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},wE={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey},a_=(()=>{class e extends Is{constructor(n){super(n)}supports(n){return e.parseEventName(n)!=null}addEventListener(n,r,s,i){let o=e.parseEventName(r),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Mt().onAndCancel(n,o.domEventName,a,i))}static parseEventName(n){let r=n.toLowerCase().split("."),s=r.shift();if(r.length===0||!(s==="keydown"||s==="keyup"))return null;let i=e._normalizeKey(r.pop()),o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),o_.forEach(l=>{let p=r.indexOf(l);p>-1&&(r.splice(p,1),o+=l+".")}),o+=i,r.length!=0||i.length===0)return null;let c={};return c.domEventName=s,c.fullKey=o,c}static matchEventFullKeyCode(n,r){let s=DE[n.key]||n.key,i="";return r.indexOf("code.")>-1&&(s=n.code,i="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),o_.forEach(o=>{if(o!==s){let a=wE[o];a(n)&&(i+=o+".")}}),i+=s,i===r)}static eventCallback(n,r,s){return i=>{e.matchEventFullKeyCode(i,n)&&s.runGuarded(()=>r(i))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(r){return new(r||e)(re(Fe))};static \u0275prov=Q({token:e,factory:e.\u0275fac})}return e})();function th(e,t,n){let r=H({rootComponent:e,platformRef:n?.platformRef},IE(t));return Gm(r)}function IE(e){return{appProviders:[...RE,...e?.providers??[]],platformProviders:xE}}function ME(){ec.makeCurrent()}function TE(){return new xt}function AE(){return pd(document),document}var xE=[{provide:ii,useValue:e_},{provide:Na,useValue:ME,multi:!0},{provide:Fe,useFactory:AE}];var RE=[{provide:Yi,useValue:"root"},{provide:xt,useFactory:TE},{provide:Xa,useClass:Qa,multi:!0,deps:[Fe]},{provide:Xa,useClass:a_,multi:!0,deps:[Fe]},eh,Jd,Qd,{provide:sr,useExisting:eh},{provide:pr,useClass:EE},[]];var gi=class{},xs=class{},Fn=class e{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(t){t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let s=n.slice(0,r),i=n.slice(r+1).trim();this.addHeaderEntry(s,i)}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((n,r)=>{this.addHeaderEntry(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let n=this.headers.get(t.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,n){return this.clone({name:t,value:n,op:"a"})}set(t,n){return this.clone({name:t,value:n,op:"s"})}delete(t,n){return this.clone({name:t,value:n,op:"d"})}maybeSetNormalizedName(t,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,t)}init(){this.lazyInit&&(this.lazyInit instanceof e?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(n=>{this.headers.set(n,t.headers.get(n)),this.normalizedNames.set(n,t.normalizedNames.get(n))})}clone(t){let n=new e;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof e?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([t]),n}applyUpdate(t){let n=t.name.toLowerCase();switch(t.op){case"a":case"s":let r=t.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(t.name,n);let s=(t.op==="a"?this.headers.get(n):void 0)||[];s.push(...r),this.headers.set(n,s);break;case"d":let i=t.value;if(!i)this.headers.delete(n),this.normalizedNames.delete(n);else{let o=this.headers.get(n);if(!o)return;o=o.filter(a=>i.indexOf(a)===-1),o.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,o)}break}}addHeaderEntry(t,n){let r=t.toLowerCase();this.maybeSetNormalizedName(t,r),this.headers.has(r)?this.headers.get(r).push(n):this.headers.set(r,[n])}setHeaderEntries(t,n){let r=(Array.isArray(n)?n:[n]).map(i=>i.toString()),s=t.toLowerCase();this.headers.set(s,r),this.maybeSetNormalizedName(t,s)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>t(this.normalizedNames.get(n),this.headers.get(n)))}};var nc=class{encodeKey(t){return c_(t)}encodeValue(t){return c_(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}};function OE(e,t){let n=new Map;return e.length>0&&e.replace(/^\?/,"").split("&").forEach(s=>{let i=s.indexOf("="),[o,a]=i==-1?[t.decodeKey(s),""]:[t.decodeKey(s.slice(0,i)),t.decodeValue(s.slice(i+1))],c=n.get(o)||[];c.push(a),n.set(o,c)}),n}var NE=/%(\d[a-f0-9])/gi,kE={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function c_(e){return encodeURIComponent(e).replace(NE,(t,n)=>kE[n]??t)}function tc(e){return`${e}`}var mn=class e{map;encoder;updates=null;cloneFrom=null;constructor(t={}){if(this.encoder=t.encoder||new nc,t.fromString){if(t.fromObject)throw new J(2805,!1);this.map=OE(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(n=>{let r=t.fromObject[n],s=Array.isArray(r)?r.map(tc):[tc(r)];this.map.set(n,s)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();let n=this.map.get(t);return n?n[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,n){return this.clone({param:t,value:n,op:"a"})}appendAll(t){let n=[];return Object.keys(t).forEach(r=>{let s=t[r];Array.isArray(s)?s.forEach(i=>{n.push({param:r,value:i,op:"a"})}):n.push({param:r,value:s,op:"a"})}),this.clone(n)}set(t,n){return this.clone({param:t,value:n,op:"s"})}delete(t,n){return this.clone({param:t,value:n,op:"d"})}toString(){return this.init(),this.keys().map(t=>{let n=this.encoder.encodeKey(t);return this.map.get(t).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(t=>t!=="").join("&")}clone(t){let n=new e({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(t),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":let n=(t.op==="a"?this.map.get(t.param):void 0)||[];n.push(tc(t.value)),this.map.set(t.param,n);break;case"d":if(t.value!==void 0){let r=this.map.get(t.param)||[],s=r.indexOf(tc(t.value));s!==-1&&r.splice(s,1),r.length>0?this.map.set(t.param,r):this.map.delete(t.param)}else{this.map.delete(t.param);break}}}),this.cloneFrom=this.updates=null)}};var rc=class{map=new Map;set(t,n){return this.map.set(t,n),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}};function PE(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function l_(e){return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer}function u_(e){return typeof Blob<"u"&&e instanceof Blob}function d_(e){return typeof FormData<"u"&&e instanceof FormData}function LE(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}var h_="Content-Type",f_="Accept",p_="X-Request-URL",g_="text/plain",m_="application/json",FE=`${m_}, ${g_}, */*`,fi=class e{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;credentials;keepalive=!1;cache;priority;mode;redirect;referrer;integrity;responseType="json";method;params;urlWithParams;transferCache;timeout;constructor(t,n,r,s){this.url=n,this.method=t.toUpperCase();let i;if(PE(this.method)||s?(this.body=r!==void 0?r:null,i=s):i=r,i){if(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,this.keepalive=!!i.keepalive,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.context&&(this.context=i.context),i.params&&(this.params=i.params),i.priority&&(this.priority=i.priority),i.cache&&(this.cache=i.cache),i.credentials&&(this.credentials=i.credentials),typeof i.timeout=="number"){if(i.timeout<1||!Number.isInteger(i.timeout))throw new J(2822,"");this.timeout=i.timeout}i.mode&&(this.mode=i.mode),i.redirect&&(this.redirect=i.redirect),i.integrity&&(this.integrity=i.integrity),i.referrer&&(this.referrer=i.referrer),this.transferCache=i.transferCache}if(this.headers??=new Fn,this.context??=new rc,!this.params)this.params=new mn,this.urlWithParams=n;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=n;else{let a=n.indexOf("?"),c=a===-1?"?":a<n.length-1?"&":"";this.urlWithParams=n+c+o}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||l_(this.body)||u_(this.body)||d_(this.body)||LE(this.body)?this.body:this.body instanceof mn?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||d_(this.body)?null:u_(this.body)?this.body.type||null:l_(this.body)?null:typeof this.body=="string"?g_:this.body instanceof mn?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?m_:null}clone(t={}){let n=t.method||this.method,r=t.url||this.url,s=t.responseType||this.responseType,i=t.keepalive??this.keepalive,o=t.priority||this.priority,a=t.cache||this.cache,c=t.mode||this.mode,l=t.redirect||this.redirect,p=t.credentials||this.credentials,m=t.referrer||this.referrer,y=t.integrity||this.integrity,g=t.transferCache??this.transferCache,d=t.timeout??this.timeout,f=t.body!==void 0?t.body:this.body,u=t.withCredentials??this.withCredentials,h=t.reportProgress??this.reportProgress,_=t.headers||this.headers,b=t.params||this.params,C=t.context??this.context;return t.setHeaders!==void 0&&(_=Object.keys(t.setHeaders).reduce((S,v)=>S.set(v,t.setHeaders[v]),_)),t.setParams&&(b=Object.keys(t.setParams).reduce((S,v)=>S.set(v,t.setParams[v]),b)),new e(n,r,f,{params:b,headers:_,context:C,reportProgress:h,responseType:s,withCredentials:u,transferCache:g,keepalive:i,cache:a,priority:o,timeout:d,mode:c,redirect:l,credentials:p,referrer:m,integrity:y})}},gr=(function(e){return e[e.Sent=0]="Sent",e[e.UploadProgress=1]="UploadProgress",e[e.ResponseHeader=2]="ResponseHeader",e[e.DownloadProgress=3]="DownloadProgress",e[e.Response=4]="Response",e[e.User=5]="User",e})(gr||{}),mi=class{headers;status;statusText;url;ok;type;redirected;constructor(t,n=200,r="OK"){this.headers=t.headers||new Fn,this.status=t.status!==void 0?t.status:n,this.statusText=t.statusText||r,this.url=t.url||null,this.redirected=t.redirected,this.ok=this.status>=200&&this.status<300}},ic=class e extends mi{constructor(t={}){super(t)}type=gr.ResponseHeader;clone(t={}){return new e({headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},Rs=class e extends mi{body;constructor(t={}){super(t),this.body=t.body!==void 0?t.body:null}type=gr.Response;clone(t={}){return new e({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0,redirected:t.redirected??this.redirected})}},pi=class extends mi{name="HttpErrorResponse";message;error;ok=!1;constructor(t){super(t,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${t.url||"(unknown url)"}`:this.message=`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}},BE=200,jE=204;function nh(e,t){return{body:t,headers:e.headers,context:e.context,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials,credentials:e.credentials,transferCache:e.transferCache,timeout:e.timeout,keepalive:e.keepalive,priority:e.priority,cache:e.cache,mode:e.mode,redirect:e.redirect,integrity:e.integrity,referrer:e.referrer}}var _i=(()=>{class e{handler;constructor(n){this.handler=n}request(n,r,s={}){let i;if(n instanceof fi)i=n;else{let c;s.headers instanceof Fn?c=s.headers:c=new Fn(s.headers);let l;s.params&&(s.params instanceof mn?l=s.params:l=new mn({fromObject:s.params})),i=new fi(n,r,s.body!==void 0?s.body:null,{headers:c,context:s.context,params:l,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials,transferCache:s.transferCache,keepalive:s.keepalive,priority:s.priority,cache:s.cache,mode:s.mode,redirect:s.redirect,credentials:s.credentials,referrer:s.referrer,integrity:s.integrity,timeout:s.timeout})}let o=te(i).pipe(En(c=>this.handler.handle(c)));if(n instanceof fi||s.observe==="events")return o;let a=o.pipe(at(c=>c instanceof Rs));switch(s.observe||"body"){case"body":switch(i.responseType){case"arraybuffer":return a.pipe(ue(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new J(2806,!1);return c.body}));case"blob":return a.pipe(ue(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new J(2807,!1);return c.body}));case"text":return a.pipe(ue(c=>{if(c.body!==null&&typeof c.body!="string")throw new J(2808,!1);return c.body}));case"json":default:return a.pipe(ue(c=>c.body))}case"response":return a;default:throw new J(2809,!1)}}delete(n,r={}){return this.request("DELETE",n,r)}get(n,r={}){return this.request("GET",n,r)}head(n,r={}){return this.request("HEAD",n,r)}jsonp(n,r){return this.request("JSONP",n,{params:new mn().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(n,r={}){return this.request("OPTIONS",n,r)}patch(n,r,s={}){return this.request("PATCH",n,nh(s,r))}post(n,r,s={}){return this.request("POST",n,nh(s,r))}put(n,r,s={}){return this.request("PUT",n,nh(s,r))}static \u0275fac=function(r){return new(r||e)(re(gi))};static \u0275prov=Q({token:e,factory:e.\u0275fac})}return e})();var VE=new X("");function HE(e,t){return t(e)}function UE(e,t,n){return(r,s)=>Ke(n,()=>t(r,i=>e(i,s)))}var __=new X(""),v_=new X(""),y_=new X("",{providedIn:"root",factory:()=>!0});var sc=(()=>{class e extends gi{backend;injector;chain=null;pendingTasks=P(sa);contributeToStability=P(y_);constructor(n,r){super(),this.backend=n,this.injector=r}handle(n){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(__),...this.injector.get(v_,[])]));this.chain=r.reduceRight((s,i)=>UE(s,i,this.injector),HE)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(n,s=>this.backend.handle(s)).pipe(Wn(r))}else return this.chain(n,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||e)(re(xs),re(Ve))};static \u0275prov=Q({token:e,factory:e.\u0275fac})}return e})();var $E=/^\)\]\}',?\n/,WE=RegExp(`^${p_}:`,"m");function zE(e){return"responseURL"in e&&e.responseURL?e.responseURL:WE.test(e.getAllResponseHeaders())?e.getResponseHeader(p_):null}var rh=(()=>{class e{xhrFactory;constructor(n){this.xhrFactory=n}handle(n){if(n.method==="JSONP")throw new J(-2800,!1);let r=this.xhrFactory;return te(null).pipe(je(()=>new de(i=>{let o=r.build();if(o.open(n.method,n.urlWithParams),n.withCredentials&&(o.withCredentials=!0),n.headers.forEach((u,h)=>o.setRequestHeader(u,h.join(","))),n.headers.has(f_)||o.setRequestHeader(f_,FE),!n.headers.has(h_)){let u=n.detectContentTypeHeader();u!==null&&o.setRequestHeader(h_,u)}if(n.timeout&&(o.timeout=n.timeout),n.responseType){let u=n.responseType.toLowerCase();o.responseType=u!=="json"?u:"text"}let a=n.serializeBody(),c=null,l=()=>{if(c!==null)return c;let u=o.statusText||"OK",h=new Fn(o.getAllResponseHeaders()),_=zE(o)||n.url;return c=new ic({headers:h,status:o.status,statusText:u,url:_}),c},p=()=>{let{headers:u,status:h,statusText:_,url:b}=l(),C=null;h!==jE&&(C=typeof o.response>"u"?o.responseText:o.response),h===0&&(h=C?BE:0);let S=h>=200&&h<300;if(n.responseType==="json"&&typeof C=="string"){let v=C;C=C.replace($E,"");try{C=C!==""?JSON.parse(C):null}catch(E){C=v,S&&(S=!1,C={error:E,text:C})}}S?(i.next(new Rs({body:C,headers:u,status:h,statusText:_,url:b||void 0})),i.complete()):i.error(new pi({error:C,headers:u,status:h,statusText:_,url:b||void 0}))},m=u=>{let{url:h}=l(),_=new pi({error:u,status:o.status||0,statusText:o.statusText||"Unknown Error",url:h||void 0});i.error(_)},y=m;n.timeout&&(y=u=>{let{url:h}=l(),_=new pi({error:new DOMException("Request timed out","TimeoutError"),status:o.status||0,statusText:o.statusText||"Request timeout",url:h||void 0});i.error(_)});let g=!1,d=u=>{g||(i.next(l()),g=!0);let h={type:gr.DownloadProgress,loaded:u.loaded};u.lengthComputable&&(h.total=u.total),n.responseType==="text"&&o.responseText&&(h.partialText=o.responseText),i.next(h)},f=u=>{let h={type:gr.UploadProgress,loaded:u.loaded};u.lengthComputable&&(h.total=u.total),i.next(h)};return o.addEventListener("load",p),o.addEventListener("error",m),o.addEventListener("timeout",y),o.addEventListener("abort",m),n.reportProgress&&(o.addEventListener("progress",d),a!==null&&o.upload&&o.upload.addEventListener("progress",f)),o.send(a),i.next({type:gr.Sent}),()=>{o.removeEventListener("error",m),o.removeEventListener("abort",m),o.removeEventListener("load",p),o.removeEventListener("timeout",y),n.reportProgress&&(o.removeEventListener("progress",d),a!==null&&o.upload&&o.upload.removeEventListener("progress",f)),o.readyState!==o.DONE&&o.abort()}})))}static \u0275fac=function(r){return new(r||e)(re(pr))};static \u0275prov=Q({token:e,factory:e.\u0275fac})}return e})(),C_=new X(""),GE="XSRF-TOKEN",qE=new X("",{providedIn:"root",factory:()=>GE}),KE="X-XSRF-TOKEN",ZE=new X("",{providedIn:"root",factory:()=>KE}),Os=class{},YE=(()=>{class e{doc;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(n,r){this.doc=n,this.cookieName=r}getToken(){let n=this.doc.cookie||"";return n!==this.lastCookieString&&(this.parseCount++,this.lastToken=ws(n,this.cookieName),this.lastCookieString=n),this.lastToken}static \u0275fac=function(r){return new(r||e)(re(Fe),re(qE))};static \u0275prov=Q({token:e,factory:e.\u0275fac})}return e})();function QE(e,t){let n=e.url.toLowerCase();if(!P(C_)||e.method==="GET"||e.method==="HEAD"||n.startsWith("http://")||n.startsWith("https://"))return t(e);let r=P(Os).getToken(),s=P(ZE);return r!=null&&!e.headers.has(s)&&(e=e.clone({headers:e.headers.set(s,r)})),t(e)}function ih(...e){let t=[_i,rh,sc,{provide:gi,useExisting:sc},{provide:xs,useFactory:()=>P(VE,{optional:!0})??P(rh)},{provide:__,useValue:QE,multi:!0},{provide:C_,useValue:!0},{provide:Os,useClass:YE}];for(let n of e)t.push(...n.\u0275providers);return on(t)}var b_=(()=>{class e{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(r){return new(r||e)(re(Fe))};static \u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var le="primary",zs=Symbol("RouteTitle"),lh=class{params;constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n[0]:n}return null}getAll(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Ei(e){return new lh(e)}function XE(e,t,n){let r=n.path.split("/");if(r.length>e.length||n.pathMatch==="full"&&(t.hasChildren()||r.length<e.length))return null;let s={};for(let i=0;i<r.length;i++){let o=r[i],a=e[i];if(o[0]===":")s[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:e.slice(0,r.length),posParams:s}}function eD(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!Yt(e[n],t[n]))return!1;return!0}function Yt(e,t){let n=e?uh(e):void 0,r=t?uh(t):void 0;if(!n||!r||n.length!=r.length)return!1;let s;for(let i=0;i<n.length;i++)if(s=n[i],!A_(e[s],t[s]))return!1;return!0}function uh(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}function A_(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;let n=[...e].sort(),r=[...t].sort();return n.every((s,i)=>r[i]===s)}else return e===t}function x_(e){return e.length>0?e[e.length-1]:null}function yn(e){return fl(e)?e:ur(e)?Re(Promise.resolve(e)):te(e)}var tD={exact:O_,subset:N_},R_={exact:nD,subset:rD,ignored:()=>!0};function S_(e,t,n){return tD[n.paths](e.root,t.root,n.matrixParams)&&R_[n.queryParams](e.queryParams,t.queryParams)&&!(n.fragment==="exact"&&e.fragment!==t.fragment)}function nD(e,t){return Yt(e,t)}function O_(e,t,n){if(!_r(e.segments,t.segments)||!cc(e.segments,t.segments,n)||e.numberOfChildren!==t.numberOfChildren)return!1;for(let r in t.children)if(!e.children[r]||!O_(e.children[r],t.children[r],n))return!1;return!0}function rD(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>A_(e[n],t[n]))}function N_(e,t,n){return k_(e,t,t.segments,n)}function k_(e,t,n,r){if(e.segments.length>n.length){let s=e.segments.slice(0,n.length);return!(!_r(s,n)||t.hasChildren()||!cc(s,n,r))}else if(e.segments.length===n.length){if(!_r(e.segments,n)||!cc(e.segments,n,r))return!1;for(let s in t.children)if(!e.children[s]||!N_(e.children[s],t.children[s],r))return!1;return!0}else{let s=n.slice(0,e.segments.length),i=n.slice(e.segments.length);return!_r(e.segments,s)||!cc(e.segments,s,r)||!e.children[le]?!1:k_(e.children[le],t,i,r)}}function cc(e,t,n){return t.every((r,s)=>R_[n](e[s].parameters,r.parameters))}var vn=class{root;queryParams;fragment;_queryParamMap;constructor(t=new ye([],{}),n={},r=null){this.root=t,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Ei(this.queryParams),this._queryParamMap}toString(){return oD.serialize(this)}},ye=class{segments;children;parent=null;constructor(t,n){this.segments=t,this.children=n,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return lc(this)}},mr=class{path;parameters;_parameterMap;constructor(t,n){this.path=t,this.parameters=n}get parameterMap(){return this._parameterMap??=Ei(this.parameters),this._parameterMap}toString(){return L_(this)}};function iD(e,t){return _r(e,t)&&e.every((n,r)=>Yt(n.parameters,t[r].parameters))}function _r(e,t){return e.length!==t.length?!1:e.every((n,r)=>n.path===t[r].path)}function sD(e,t){let n=[];return Object.entries(e.children).forEach(([r,s])=>{r===le&&(n=n.concat(t(s,r)))}),Object.entries(e.children).forEach(([r,s])=>{r!==le&&(n=n.concat(t(s,r)))}),n}var bc=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=Q({token:e,factory:()=>new Di,providedIn:"root"})}return e})(),Di=class{parse(t){let n=new hh(t);return new vn(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(t){let n=`/${Ns(t.root,!0)}`,r=lD(t.queryParams),s=typeof t.fragment=="string"?`#${aD(t.fragment)}`:"";return`${n}${r}${s}`}},oD=new Di;function lc(e){return e.segments.map(t=>L_(t)).join("/")}function Ns(e,t){if(!e.hasChildren())return lc(e);if(t){let n=e.children[le]?Ns(e.children[le],!1):"",r=[];return Object.entries(e.children).forEach(([s,i])=>{s!==le&&r.push(`${s}:${Ns(i,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=sD(e,(r,s)=>s===le?[Ns(e.children[le],!1)]:[`${s}:${Ns(r,!1)}`]);return Object.keys(e.children).length===1&&e.children[le]!=null?`${lc(e)}/${n[0]}`:`${lc(e)}/(${n.join("//")})`}}function P_(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function oc(e){return P_(e).replace(/%3B/gi,";")}function aD(e){return encodeURI(e)}function dh(e){return P_(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function uc(e){return decodeURIComponent(e)}function E_(e){return uc(e.replace(/\+/g,"%20"))}function L_(e){return`${dh(e.path)}${cD(e.parameters)}`}function cD(e){return Object.entries(e).map(([t,n])=>`;${dh(t)}=${dh(n)}`).join("")}function lD(e){let t=Object.entries(e).map(([n,r])=>Array.isArray(r)?r.map(s=>`${oc(n)}=${oc(s)}`).join("&"):`${oc(n)}=${oc(r)}`).filter(n=>n);return t.length?`?${t.join("&")}`:""}var uD=/^[^\/()?;#]+/;function sh(e){let t=e.match(uD);return t?t[0]:""}var dD=/^[^\/()?;=#]+/;function hD(e){let t=e.match(dD);return t?t[0]:""}var fD=/^[^=?&#]+/;function pD(e){let t=e.match(fD);return t?t[0]:""}var gD=/^[^&#]+/;function mD(e){let t=e.match(gD);return t?t[0]:""}var hh=class{url;remaining;constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ye([],{}):new ye([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(n).length>0)&&(r[le]=new ye(t,n)),r}parseSegment(){let t=sh(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new J(4009,!1);return this.capture(t),new mr(uc(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let n=hD(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=sh(this.remaining);s&&(r=s,this.capture(r))}t[uc(n)]=uc(r)}parseQueryParam(t){let n=pD(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=mD(this.remaining);o&&(r=o,this.capture(r))}let s=E_(n),i=E_(r);if(t.hasOwnProperty(s)){let o=t[s];Array.isArray(o)||(o=[o],t[s]=o),o.push(i)}else t[s]=i}parseParens(t){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=sh(this.remaining),s=this.remaining[r.length];if(s!=="/"&&s!==")"&&s!==";")throw new J(4010,!1);let i;r.indexOf(":")>-1?(i=r.slice(0,r.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=le);let o=this.parseChildren();n[i??le]=Object.keys(o).length===1&&o[le]?o[le]:new ye([],o),this.consumeOptional("//")}return n}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new J(4011,!1)}};function F_(e){return e.segments.length>0?new ye([],{[le]:e}):e}function B_(e){let t={};for(let[r,s]of Object.entries(e.children)){let i=B_(s);if(r===le&&i.segments.length===0&&i.hasChildren())for(let[o,a]of Object.entries(i.children))t[o]=a;else(i.segments.length>0||i.hasChildren())&&(t[r]=i)}let n=new ye(e.segments,t);return _D(n)}function _D(e){if(e.numberOfChildren===1&&e.children[le]){let t=e.children[le];return new ye(e.segments.concat(t.segments),t.children)}return e}function wi(e){return e instanceof vn}function vD(e,t,n=null,r=null){let s=j_(e);return V_(s,t,n,r)}function j_(e){let t;function n(i){let o={};for(let c of i.children){let l=n(c);o[c.outlet]=l}let a=new ye(i.url,o);return i===e&&(t=a),a}let r=n(e.root),s=F_(r);return t??s}function V_(e,t,n,r){let s=e;for(;s.parent;)s=s.parent;if(t.length===0)return oh(s,s,s,n,r);let i=yD(t);if(i.toRoot())return oh(s,s,new ye([],{}),n,r);let o=CD(i,s,e),a=o.processChildren?Ps(o.segmentGroup,o.index,i.commands):U_(o.segmentGroup,o.index,i.commands);return oh(s,o.segmentGroup,a,n,r)}function dc(e){return typeof e=="object"&&e!=null&&!e.outlets&&!e.segmentPath}function Bs(e){return typeof e=="object"&&e!=null&&e.outlets}function oh(e,t,n,r,s){let i={};r&&Object.entries(r).forEach(([c,l])=>{i[c]=Array.isArray(l)?l.map(p=>`${p}`):`${l}`});let o;e===t?o=n:o=H_(e,t,n);let a=F_(B_(o));return new vn(a,i,s)}function H_(e,t,n){let r={};return Object.entries(e.children).forEach(([s,i])=>{i===t?r[s]=n:r[s]=H_(i,t,n)}),new ye(e.segments,r)}var hc=class{isAbsolute;numberOfDoubleDots;commands;constructor(t,n,r){if(this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=r,t&&r.length>0&&dc(r[0]))throw new J(4003,!1);let s=r.find(Bs);if(s&&s!==x_(r))throw new J(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function yD(e){if(typeof e[0]=="string"&&e.length===1&&e[0]==="/")return new hc(!0,0,e);let t=0,n=!1,r=e.reduce((s,i,o)=>{if(typeof i=="object"&&i!=null){if(i.outlets){let a={};return Object.entries(i.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...s,{outlets:a}]}if(i.segmentPath)return[...s,i.segmentPath]}return typeof i!="string"?[...s,i]:o===0?(i.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?t++:a!=""&&s.push(a))}),s):[...s,i]},[]);return new hc(n,t,r)}var Ci=class{segmentGroup;processChildren;index;constructor(t,n,r){this.segmentGroup=t,this.processChildren=n,this.index=r}};function CD(e,t,n){if(e.isAbsolute)return new Ci(t,!0,0);if(!n)return new Ci(t,!1,NaN);if(n.parent===null)return new Ci(n,!0,0);let r=dc(e.commands[0])?0:1,s=n.segments.length-1+r;return bD(n,s,e.numberOfDoubleDots)}function bD(e,t,n){let r=e,s=t,i=n;for(;i>s;){if(i-=s,r=r.parent,!r)throw new J(4005,!1);s=r.segments.length}return new Ci(r,!1,s-i)}function SD(e){return Bs(e[0])?e[0].outlets:{[le]:e}}function U_(e,t,n){if(e??=new ye([],{}),e.segments.length===0&&e.hasChildren())return Ps(e,t,n);let r=ED(e,t,n),s=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){let i=new ye(e.segments.slice(0,r.pathIndex),{});return i.children[le]=new ye(e.segments.slice(r.pathIndex),e.children),Ps(i,0,s)}else return r.match&&s.length===0?new ye(e.segments,{}):r.match&&!e.hasChildren()?fh(e,t,n):r.match?Ps(e,0,s):fh(e,t,n)}function Ps(e,t,n){if(n.length===0)return new ye(e.segments,{});{let r=SD(n),s={};if(Object.keys(r).some(i=>i!==le)&&e.children[le]&&e.numberOfChildren===1&&e.children[le].segments.length===0){let i=Ps(e.children[le],t,n);return new ye(e.segments,i.children)}return Object.entries(r).forEach(([i,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(s[i]=U_(e.children[i],t,o))}),Object.entries(e.children).forEach(([i,o])=>{r[i]===void 0&&(s[i]=o)}),new ye(e.segments,s)}}function ED(e,t,n){let r=0,s=t,i={match:!1,pathIndex:0,commandIndex:0};for(;s<e.segments.length;){if(r>=n.length)return i;let o=e.segments[s],a=n[r];if(Bs(a))break;let c=`${a}`,l=r<n.length-1?n[r+1]:null;if(s>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!w_(c,l,o))return i;r+=2}else{if(!w_(c,{},o))return i;r++}s++}return{match:!0,pathIndex:s,commandIndex:r}}function fh(e,t,n){let r=e.segments.slice(0,t),s=0;for(;s<n.length;){let i=n[s];if(Bs(i)){let c=DD(i.outlets);return new ye(r,c)}if(s===0&&dc(n[0])){let c=e.segments[t];r.push(new mr(c.path,D_(n[0]))),s++;continue}let o=Bs(i)?i.outlets[le]:`${i}`,a=s<n.length-1?n[s+1]:null;o&&a&&dc(a)?(r.push(new mr(o,D_(a))),s+=2):(r.push(new mr(o,{})),s++)}return new ye(r,{})}function DD(e){let t={};return Object.entries(e).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(t[n]=fh(new ye([],{}),0,r))}),t}function D_(e){let t={};return Object.entries(e).forEach(([n,r])=>t[n]=`${r}`),t}function w_(e,t,n){return e==n.path&&Yt(t,n.parameters)}var Ls="imperative",Je=(function(e){return e[e.NavigationStart=0]="NavigationStart",e[e.NavigationEnd=1]="NavigationEnd",e[e.NavigationCancel=2]="NavigationCancel",e[e.NavigationError=3]="NavigationError",e[e.RoutesRecognized=4]="RoutesRecognized",e[e.ResolveStart=5]="ResolveStart",e[e.ResolveEnd=6]="ResolveEnd",e[e.GuardsCheckStart=7]="GuardsCheckStart",e[e.GuardsCheckEnd=8]="GuardsCheckEnd",e[e.RouteConfigLoadStart=9]="RouteConfigLoadStart",e[e.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",e[e.ChildActivationStart=11]="ChildActivationStart",e[e.ChildActivationEnd=12]="ChildActivationEnd",e[e.ActivationStart=13]="ActivationStart",e[e.ActivationEnd=14]="ActivationEnd",e[e.Scroll=15]="Scroll",e[e.NavigationSkipped=16]="NavigationSkipped",e})(Je||{}),Tt=class{id;url;constructor(t,n){this.id=t,this.url=n}},Ii=class extends Tt{type=Je.NavigationStart;navigationTrigger;restoredState;constructor(t,n,r="imperative",s=null){super(t,n),this.navigationTrigger=r,this.restoredState=s}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Bn=class extends Tt{urlAfterRedirects;type=Je.NavigationEnd;constructor(t,n,r){super(t,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},dt=(function(e){return e[e.Redirect=0]="Redirect",e[e.SupersededByNewNavigation=1]="SupersededByNewNavigation",e[e.NoDataFromResolver=2]="NoDataFromResolver",e[e.GuardRejected=3]="GuardRejected",e[e.Aborted=4]="Aborted",e})(dt||{}),fc=(function(e){return e[e.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",e[e.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",e})(fc||{}),_n=class extends Tt{reason;code;type=Je.NavigationCancel;constructor(t,n,r,s){super(t,n),this.reason=r,this.code=s}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},jn=class extends Tt{reason;code;type=Je.NavigationSkipped;constructor(t,n,r,s){super(t,n),this.reason=r,this.code=s}},js=class extends Tt{error;target;type=Je.NavigationError;constructor(t,n,r,s){super(t,n),this.error=r,this.target=s}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},pc=class extends Tt{urlAfterRedirects;state;type=Je.RoutesRecognized;constructor(t,n,r,s){super(t,n),this.urlAfterRedirects=r,this.state=s}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ph=class extends Tt{urlAfterRedirects;state;type=Je.GuardsCheckStart;constructor(t,n,r,s){super(t,n),this.urlAfterRedirects=r,this.state=s}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},gh=class extends Tt{urlAfterRedirects;state;shouldActivate;type=Je.GuardsCheckEnd;constructor(t,n,r,s,i){super(t,n),this.urlAfterRedirects=r,this.state=s,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},mh=class extends Tt{urlAfterRedirects;state;type=Je.ResolveStart;constructor(t,n,r,s){super(t,n),this.urlAfterRedirects=r,this.state=s}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},_h=class extends Tt{urlAfterRedirects;state;type=Je.ResolveEnd;constructor(t,n,r,s){super(t,n),this.urlAfterRedirects=r,this.state=s}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},vh=class{route;type=Je.RouteConfigLoadStart;constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},yh=class{route;type=Je.RouteConfigLoadEnd;constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Ch=class{snapshot;type=Je.ChildActivationStart;constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},bh=class{snapshot;type=Je.ChildActivationEnd;constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Sh=class{snapshot;type=Je.ActivationStart;constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Eh=class{snapshot;type=Je.ActivationEnd;constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Vs=class{},Mi=class{url;navigationBehaviorOptions;constructor(t,n){this.url=t,this.navigationBehaviorOptions=n}};function wD(e){return!(e instanceof Vs)&&!(e instanceof Mi)}function ID(e,t){return e.providers&&!e._injector&&(e._injector=gs(e.providers,t,`Route: ${e.path}`)),e._injector??t}function Bt(e){return e.outlet||le}function MD(e,t){let n=e.filter(r=>Bt(r)===t);return n.push(...e.filter(r=>Bt(r)!==t)),n}function Ai(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let t=e.parent;t;t=t.parent){let n=t.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var Dh=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Ai(this.route?.snapshot)??this.rootInjector}constructor(t){this.rootInjector=t,this.children=new Gs(this.rootInjector)}},Gs=(()=>{class e{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,r){let s=this.getOrCreateContext(n);s.outlet=r,this.contexts.set(n,s)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new Dh(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(r){return new(r||e)(re(Ve))};static \u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),gc=class{_root;constructor(t){this._root=t}get root(){return this._root.value}parent(t){let n=this.pathFromRoot(t);return n.length>1?n[n.length-2]:null}children(t){let n=wh(t,this._root);return n?n.children.map(r=>r.value):[]}firstChild(t){let n=wh(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){let n=Ih(t,this._root);return n.length<2?[]:n[n.length-2].children.map(s=>s.value).filter(s=>s!==t)}pathFromRoot(t){return Ih(t,this._root).map(n=>n.value)}};function wh(e,t){if(e===t.value)return t;for(let n of t.children){let r=wh(e,n);if(r)return r}return null}function Ih(e,t){if(e===t.value)return[t];for(let n of t.children){let r=Ih(e,n);if(r.length)return r.unshift(t),r}return[]}var vt=class{value;children;constructor(t,n){this.value=t,this.children=n}toString(){return`TreeNode(${this.value})`}};function yi(e){let t={};return e&&e.children.forEach(n=>t[n.value.outlet]=n),t}var mc=class extends gc{snapshot;constructor(t,n){super(t),this.snapshot=n,Ph(this,t)}toString(){return this.snapshot.toString()}};function $_(e){let t=TD(e),n=new Ge([new mr("",{})]),r=new Ge({}),s=new Ge({}),i=new Ge({}),o=new Ge(""),a=new vr(n,r,i,o,s,le,e,t.root);return a.snapshot=t.root,new mc(new vt(a,[]),t)}function TD(e){let t={},n={},r={},i=new bi([],t,r,"",n,le,e,null,{});return new vc("",new vt(i,[]))}var vr=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(t,n,r,s,i,o,a,c){this.urlSubject=t,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=s,this.dataSubject=i,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(ue(l=>l[zs]))??te(void 0),this.url=t,this.params=n,this.queryParams=r,this.fragment=s,this.data=i}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ue(t=>Ei(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ue(t=>Ei(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function _c(e,t,n="emptyOnly"){let r,{routeConfig:s}=e;return t!==null&&(n==="always"||s?.path===""||!t.component&&!t.routeConfig?.loadComponent)?r={params:H(H({},t.params),e.params),data:H(H({},t.data),e.data),resolve:H(H(H(H({},e.data),t.data),s?.data),e._resolvedData)}:r={params:H({},e.params),data:H({},e.data),resolve:H(H({},e.data),e._resolvedData??{})},s&&z_(s)&&(r.resolve[zs]=s.title),r}var bi=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[zs]}constructor(t,n,r,s,i,o,a,c,l){this.url=t,this.params=n,this.queryParams=r,this.fragment=s,this.data=i,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ei(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ei(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${n}')`}},vc=class extends gc{url;constructor(t,n){super(n),this.url=t,Ph(this,n)}toString(){return W_(this._root)}};function Ph(e,t){t.value._routerState=e,t.children.forEach(n=>Ph(e,n))}function W_(e){let t=e.children.length>0?` { ${e.children.map(W_).join(", ")} } `:"";return`${e.value}${t}`}function ah(e){if(e.snapshot){let t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,Yt(t.queryParams,n.queryParams)||e.queryParamsSubject.next(n.queryParams),t.fragment!==n.fragment&&e.fragmentSubject.next(n.fragment),Yt(t.params,n.params)||e.paramsSubject.next(n.params),eD(t.url,n.url)||e.urlSubject.next(n.url),Yt(t.data,n.data)||e.dataSubject.next(n.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function Mh(e,t){let n=Yt(e.params,t.params)&&iD(e.url,t.url),r=!e.parent!=!t.parent;return n&&!r&&(!e.parent||Mh(e.parent,t.parent))}function z_(e){return typeof e.title=="string"||e.title===null}var AD=new X(""),G_=(()=>{class e{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=le;activateEvents=new Ue;deactivateEvents=new Ue;attachEvents=new Ue;detachEvents=new Ue;routerOutletData=zm();parentContexts=P(Gs);location=P(lr);changeDetector=P(ui);inputBinder=P(Sc,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:s}=n.name;if(r)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new J(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new J(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new J(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new J(4013,!1);this._activatedRoute=n;let s=this.location,o=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new Th(n,a,s.injector,this.routerOutletData);this.activated=s.createComponent(o,{index:s.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||e)};static \u0275dir=ut({type:e,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[ni]})}return e})(),Th=class{route;childContexts;parent;outletData;constructor(t,n,r,s){this.route=t,this.childContexts=n,this.parent=r,this.outletData=s}get(t,n){return t===vr?this.route:t===Gs?this.childContexts:t===AD?this.outletData:this.parent.get(t,n)}},Sc=new X("");var q_=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275cmp=hn({type:e,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,s){r&1&&It(0,"router-outlet")},dependencies:[G_],encapsulation:2})}return e})();function Lh(e){let t=e.children&&e.children.map(Lh),n=t?fe(H({},e),{children:t}):H({},e);return!n.component&&!n.loadComponent&&(t||n.loadChildren)&&n.outlet&&n.outlet!==le&&(n.component=q_),n}function xD(e,t,n){let r=Hs(e,t._root,n?n._root:void 0);return new mc(r,t)}function Hs(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=t.value;let s=RD(e,t,n);return new vt(r,s)}else{if(e.shouldAttach(t.value)){let i=e.retrieve(t.value);if(i!==null){let o=i.route;return o.value._futureSnapshot=t.value,o.children=t.children.map(a=>Hs(e,a)),o}}let r=OD(t.value),s=t.children.map(i=>Hs(e,i));return new vt(r,s)}}function RD(e,t,n){return t.children.map(r=>{for(let s of n.children)if(e.shouldReuseRoute(r.value,s.value.snapshot))return Hs(e,r,s);return Hs(e,r)})}function OD(e){return new vr(new Ge(e.url),new Ge(e.params),new Ge(e.queryParams),new Ge(e.fragment),new Ge(e.data),e.outlet,e.component,e)}var Us=class{redirectTo;navigationBehaviorOptions;constructor(t,n){this.redirectTo=t,this.navigationBehaviorOptions=n}},K_="ngNavigationCancelingError";function yc(e,t){let{redirectTo:n,navigationBehaviorOptions:r}=wi(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,s=Z_(!1,dt.Redirect);return s.url=n,s.navigationBehaviorOptions=r,s}function Z_(e,t){let n=new Error(`NavigationCancelingError: ${e||""}`);return n[K_]=!0,n.cancellationCode=t,n}function ND(e){return Y_(e)&&wi(e.url)}function Y_(e){return!!e&&e[K_]}var kD=(e,t,n,r)=>ue(s=>(new Ah(t,s.targetRouterState,s.currentRouterState,n,r).activate(e),s)),Ah=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(t,n,r,s,i){this.routeReuseStrategy=t,this.futureState=n,this.currState=r,this.forwardEvent=s,this.inputBindingEnabled=i}activate(t){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,t),ah(this.futureState.root),this.activateChildRoutes(n,r,t)}deactivateChildRoutes(t,n,r){let s=yi(n);t.children.forEach(i=>{let o=i.value.outlet;this.deactivateRoutes(i,s[o],r),delete s[o]}),Object.values(s).forEach(i=>{this.deactivateRouteAndItsChildren(i,r)})}deactivateRoutes(t,n,r){let s=t.value,i=n?n.value:null;if(s===i)if(s.component){let o=r.getContext(s.outlet);o&&this.deactivateChildRoutes(t,n,o.children)}else this.deactivateChildRoutes(t,n,r);else i&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(t,n){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,n):this.deactivateRouteAndOutlet(t,n)}detachAndStoreRouteSubtree(t,n){let r=n.getContext(t.value.outlet),s=r&&t.value.component?r.children:n,i=yi(t);for(let o of Object.values(i))this.deactivateRouteAndItsChildren(o,s);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:o,route:t,contexts:a})}}deactivateRouteAndOutlet(t,n){let r=n.getContext(t.value.outlet),s=r&&t.value.component?r.children:n,i=yi(t);for(let o of Object.values(i))this.deactivateRouteAndItsChildren(o,s);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(t,n,r){let s=yi(n);t.children.forEach(i=>{this.activateRoutes(i,s[i.value.outlet],r),this.forwardEvent(new Eh(i.value.snapshot))}),t.children.length&&this.forwardEvent(new bh(t.value.snapshot))}activateRoutes(t,n,r){let s=t.value,i=n?n.value:null;if(ah(s),s===i)if(s.component){let o=r.getOrCreateContext(s.outlet);this.activateChildRoutes(t,n,o.children)}else this.activateChildRoutes(t,n,r);else if(s.component){let o=r.getOrCreateContext(s.outlet);if(this.routeReuseStrategy.shouldAttach(s.snapshot)){let a=this.routeReuseStrategy.retrieve(s.snapshot);this.routeReuseStrategy.store(s.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),ah(a.route.value),this.activateChildRoutes(t,null,o.children)}else o.attachRef=null,o.route=s,o.outlet&&o.outlet.activateWith(s,o.injector),this.activateChildRoutes(t,null,o.children)}else this.activateChildRoutes(t,null,r)}},Cc=class{path;route;constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},Si=class{component;route;constructor(t,n){this.component=t,this.route=n}};function PD(e,t,n){let r=e._root,s=t?t._root:null;return ks(r,s,n,[r.value])}function LD(e){let t=e.routeConfig?e.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:e,guards:t}}function xi(e,t){let n=Symbol(),r=t.get(e,n);return r===n?typeof e=="function"&&!Nl(e)?e:t.get(e):r}function ks(e,t,n,r,s={canDeactivateChecks:[],canActivateChecks:[]}){let i=yi(t);return e.children.forEach(o=>{FD(o,i[o.value.outlet],n,r.concat([o.value]),s),delete i[o.value.outlet]}),Object.entries(i).forEach(([o,a])=>Fs(a,n.getContext(o),s)),s}function FD(e,t,n,r,s={canDeactivateChecks:[],canActivateChecks:[]}){let i=e.value,o=t?t.value:null,a=n?n.getContext(e.value.outlet):null;if(o&&i.routeConfig===o.routeConfig){let c=BD(o,i,i.routeConfig.runGuardsAndResolvers);c?s.canActivateChecks.push(new Cc(r)):(i.data=o.data,i._resolvedData=o._resolvedData),i.component?ks(e,t,a?a.children:null,r,s):ks(e,t,n,r,s),c&&a&&a.outlet&&a.outlet.isActivated&&s.canDeactivateChecks.push(new Si(a.outlet.component,o))}else o&&Fs(t,a,s),s.canActivateChecks.push(new Cc(r)),i.component?ks(e,null,a?a.children:null,r,s):ks(e,null,n,r,s);return s}function BD(e,t,n){if(typeof n=="function")return n(e,t);switch(n){case"pathParamsChange":return!_r(e.url,t.url);case"pathParamsOrQueryParamsChange":return!_r(e.url,t.url)||!Yt(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Mh(e,t)||!Yt(e.queryParams,t.queryParams);case"paramsChange":default:return!Mh(e,t)}}function Fs(e,t,n){let r=yi(e),s=e.value;Object.entries(r).forEach(([i,o])=>{s.component?t?Fs(o,t.children.getContext(i),n):Fs(o,null,n):Fs(o,t,n)}),s.component?t&&t.outlet&&t.outlet.isActivated?n.canDeactivateChecks.push(new Si(t.outlet.component,s)):n.canDeactivateChecks.push(new Si(null,s)):n.canDeactivateChecks.push(new Si(null,s))}function qs(e){return typeof e=="function"}function jD(e){return typeof e=="boolean"}function VD(e){return e&&qs(e.canLoad)}function HD(e){return e&&qs(e.canActivate)}function UD(e){return e&&qs(e.canActivateChild)}function $D(e){return e&&qs(e.canDeactivate)}function WD(e){return e&&qs(e.canMatch)}function Q_(e){return e instanceof Qt||e?.name==="EmptyError"}var ac=Symbol("INITIAL_VALUE");function Ti(){return je(e=>Bo(e.map(t=>t.pipe(Jt(1),vl(ac)))).pipe(ue(t=>{for(let n of t)if(n!==!0){if(n===ac)return ac;if(n===!1||zD(n))return n}return!0}),at(t=>t!==ac),Jt(1)))}function zD(e){return wi(e)||e instanceof Us}function GD(e,t){return Be(n=>{let{targetSnapshot:r,currentSnapshot:s,guards:{canActivateChecks:i,canDeactivateChecks:o}}=n;return o.length===0&&i.length===0?te(fe(H({},n),{guardsResult:!0})):qD(o,r,s,e).pipe(Be(a=>a&&jD(a)?KD(r,i,e,t):te(a)),ue(a=>fe(H({},n),{guardsResult:a})))})}function qD(e,t,n,r){return Re(e).pipe(Be(s=>XD(s.component,s.route,n,t,r)),Xt(s=>s!==!0,!0))}function KD(e,t,n,r){return Re(t).pipe(En(s=>Pr(YD(s.route.parent,r),ZD(s.route,r),JD(e,s.path,n),QD(e,s.route,n))),Xt(s=>s!==!0,!0))}function ZD(e,t){return e!==null&&t&&t(new Sh(e)),te(!0)}function YD(e,t){return e!==null&&t&&t(new Ch(e)),te(!0)}function QD(e,t,n){let r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||r.length===0)return te(!0);let s=r.map(i=>$i(()=>{let o=Ai(t)??n,a=xi(i,o),c=HD(a)?a.canActivate(t,e):Ke(o,()=>a(t,e));return yn(c).pipe(Xt())}));return te(s).pipe(Ti())}function JD(e,t,n){let r=t[t.length-1],i=t.slice(0,t.length-1).reverse().map(o=>LD(o)).filter(o=>o!==null).map(o=>$i(()=>{let a=o.guards.map(c=>{let l=Ai(o.node)??n,p=xi(c,l),m=UD(p)?p.canActivateChild(r,e):Ke(l,()=>p(r,e));return yn(m).pipe(Xt())});return te(a).pipe(Ti())}));return te(i).pipe(Ti())}function XD(e,t,n,r,s){let i=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!i||i.length===0)return te(!0);let o=i.map(a=>{let c=Ai(t)??s,l=xi(a,c),p=$D(l)?l.canDeactivate(e,t,n,r):Ke(c,()=>l(e,t,n,r));return yn(p).pipe(Xt())});return te(o).pipe(Ti())}function ew(e,t,n,r){let s=t.canLoad;if(s===void 0||s.length===0)return te(!0);let i=s.map(o=>{let a=xi(o,e),c=VD(a)?a.canLoad(t,n):Ke(e,()=>a(t,n));return yn(c)});return te(i).pipe(Ti(),J_(r))}function J_(e){return al(Oe(t=>{if(typeof t!="boolean")throw yc(e,t)}),ue(t=>t===!0))}function tw(e,t,n,r){let s=t.canMatch;if(!s||s.length===0)return te(!0);let i=s.map(o=>{let a=xi(o,e),c=WD(a)?a.canMatch(t,n):Ke(e,()=>a(t,n));return yn(c)});return te(i).pipe(Ti(),J_(r))}var $s=class{segmentGroup;constructor(t){this.segmentGroup=t||null}},Ws=class extends Error{urlTree;constructor(t){super(),this.urlTree=t}};function vi(e){return kr(new $s(e))}function nw(e){return kr(new J(4e3,!1))}function rw(e){return kr(Z_(!1,dt.GuardRejected))}var xh=class{urlSerializer;urlTree;constructor(t,n){this.urlSerializer=t,this.urlTree=n}lineralizeSegments(t,n){let r=[],s=n.root;for(;;){if(r=r.concat(s.segments),s.numberOfChildren===0)return te(r);if(s.numberOfChildren>1||!s.children[le])return nw(`${t.redirectTo}`);s=s.children[le]}}applyRedirectCommands(t,n,r,s,i){return iw(n,s,i).pipe(ue(o=>{if(o instanceof vn)throw new Ws(o);let a=this.applyRedirectCreateUrlTree(o,this.urlSerializer.parse(o),t,r);if(o[0]==="/")throw new Ws(a);return a}))}applyRedirectCreateUrlTree(t,n,r,s){let i=this.createSegmentGroup(t,n.root,r,s);return new vn(i,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(t,n){let r={};return Object.entries(t).forEach(([s,i])=>{if(typeof i=="string"&&i[0]===":"){let a=i.substring(1);r[s]=n[a]}else r[s]=i}),r}createSegmentGroup(t,n,r,s){let i=this.createSegments(t,n.segments,r,s),o={};return Object.entries(n.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(t,c,r,s)}),new ye(i,o)}createSegments(t,n,r,s){return n.map(i=>i.path[0]===":"?this.findPosParam(t,i,s):this.findOrReturn(i,r))}findPosParam(t,n,r){let s=r[n.path.substring(1)];if(!s)throw new J(4001,!1);return s}findOrReturn(t,n){let r=0;for(let s of n){if(s.path===t.path)return n.splice(r),s;r++}return t}};function iw(e,t,n){if(typeof e=="string")return te(e);let r=e,{queryParams:s,fragment:i,routeConfig:o,url:a,outlet:c,params:l,data:p,title:m}=t;return yn(Ke(n,()=>r({params:l,data:p,queryParams:s,fragment:i,routeConfig:o,url:a,outlet:c,title:m})))}var Rh={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function sw(e,t,n,r,s){let i=X_(e,t,n);return i.matched?(r=ID(t,r),tw(r,t,n,s).pipe(ue(o=>o===!0?i:H({},Rh)))):te(i)}function X_(e,t,n){if(t.path==="**")return ow(n);if(t.path==="")return t.pathMatch==="full"&&(e.hasChildren()||n.length>0)?H({},Rh):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let s=(t.matcher||XE)(n,e,t);if(!s)return H({},Rh);let i={};Object.entries(s.posParams??{}).forEach(([a,c])=>{i[a]=c.path});let o=s.consumed.length>0?H(H({},i),s.consumed[s.consumed.length-1].parameters):i;return{matched:!0,consumedSegments:s.consumed,remainingSegments:n.slice(s.consumed.length),parameters:o,positionalParamSegments:s.posParams??{}}}function ow(e){return{matched:!0,parameters:e.length>0?x_(e).parameters:{},consumedSegments:e,remainingSegments:[],positionalParamSegments:{}}}function I_(e,t,n,r){return n.length>0&&lw(e,n,r)?{segmentGroup:new ye(t,cw(r,new ye(n,e.children))),slicedSegments:[]}:n.length===0&&uw(e,n,r)?{segmentGroup:new ye(e.segments,aw(e,n,r,e.children)),slicedSegments:n}:{segmentGroup:new ye(e.segments,e.children),slicedSegments:n}}function aw(e,t,n,r){let s={};for(let i of n)if(Ec(e,t,i)&&!r[Bt(i)]){let o=new ye([],{});s[Bt(i)]=o}return H(H({},r),s)}function cw(e,t){let n={};n[le]=t;for(let r of e)if(r.path===""&&Bt(r)!==le){let s=new ye([],{});n[Bt(r)]=s}return n}function lw(e,t,n){return n.some(r=>Ec(e,t,r)&&Bt(r)!==le)}function uw(e,t,n){return n.some(r=>Ec(e,t,r))}function Ec(e,t,n){return(e.hasChildren()||t.length>0)&&n.pathMatch==="full"?!1:n.path===""}function dw(e,t,n){return t.length===0&&!e.children[n]}var Oh=class{};function hw(e,t,n,r,s,i,o="emptyOnly"){return new Nh(e,t,n,r,s,o,i).recognize()}var fw=31,Nh=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(t,n,r,s,i,o,a){this.injector=t,this.configLoader=n,this.rootComponentType=r,this.config=s,this.urlTree=i,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new xh(this.urlSerializer,this.urlTree)}noMatchError(t){return new J(4002,`'${t.segmentGroup}'`)}recognize(){let t=I_(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(ue(({children:n,rootSnapshot:r})=>{let s=new vt(r,n),i=new vc("",s),o=vD(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,i.url=this.urlSerializer.serialize(o),{state:i,tree:o}}))}match(t){let n=new bi([],Object.freeze({}),Object.freeze(H({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),le,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,t,le,n).pipe(ue(r=>({children:r,rootSnapshot:n})),Ct(r=>{if(r instanceof Ws)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof $s?this.noMatchError(r):r}))}processSegmentGroup(t,n,r,s,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(t,n,r,i):this.processSegment(t,n,r,r.segments,s,!0,i).pipe(ue(o=>o instanceof vt?[o]:[]))}processChildren(t,n,r,s){let i=[];for(let o of Object.keys(r.children))o==="primary"?i.unshift(o):i.push(o);return Re(i).pipe(En(o=>{let a=r.children[o],c=MD(n,o);return this.processSegmentGroup(t,c,a,o,s)}),_l((o,a)=>(o.push(...a),o)),Dn(null),ml(),Be(o=>{if(o===null)return vi(r);let a=ev(o);return pw(a),te(a)}))}processSegment(t,n,r,s,i,o,a){return Re(n).pipe(En(c=>this.processSegmentAgainstRoute(c._injector??t,n,c,r,s,i,o,a).pipe(Ct(l=>{if(l instanceof $s)return te(null);throw l}))),Xt(c=>!!c),Ct(c=>{if(Q_(c))return dw(r,s,i)?te(new Oh):vi(r);throw c}))}processSegmentAgainstRoute(t,n,r,s,i,o,a,c){return Bt(r)!==o&&(o===le||!Ec(s,i,r))?vi(s):r.redirectTo===void 0?this.matchSegmentAgainstRoute(t,s,r,i,o,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(t,s,n,r,i,o,c):vi(s)}expandSegmentAgainstRouteUsingRedirect(t,n,r,s,i,o,a){let{matched:c,parameters:l,consumedSegments:p,positionalParamSegments:m,remainingSegments:y}=X_(n,s,i);if(!c)return vi(n);typeof s.redirectTo=="string"&&s.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>fw&&(this.allowRedirects=!1));let g=new bi(i,l,Object.freeze(H({},this.urlTree.queryParams)),this.urlTree.fragment,M_(s),Bt(s),s.component??s._loadedComponent??null,s,T_(s)),d=_c(g,a,this.paramsInheritanceStrategy);return g.params=Object.freeze(d.params),g.data=Object.freeze(d.data),this.applyRedirects.applyRedirectCommands(p,s.redirectTo,m,g,t).pipe(je(u=>this.applyRedirects.lineralizeSegments(s,u)),Be(u=>this.processSegment(t,r,n,u.concat(y),o,!1,a)))}matchSegmentAgainstRoute(t,n,r,s,i,o){let a=sw(n,r,s,t,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(je(c=>c.matched?(t=r._injector??t,this.getChildConfig(t,r,s).pipe(je(({routes:l})=>{let p=r._loadedInjector??t,{parameters:m,consumedSegments:y,remainingSegments:g}=c,d=new bi(y,m,Object.freeze(H({},this.urlTree.queryParams)),this.urlTree.fragment,M_(r),Bt(r),r.component??r._loadedComponent??null,r,T_(r)),f=_c(d,o,this.paramsInheritanceStrategy);d.params=Object.freeze(f.params),d.data=Object.freeze(f.data);let{segmentGroup:u,slicedSegments:h}=I_(n,y,g,l);if(h.length===0&&u.hasChildren())return this.processChildren(p,l,u,d).pipe(ue(b=>new vt(d,b)));if(l.length===0&&h.length===0)return te(new vt(d,[]));let _=Bt(r)===i;return this.processSegment(p,l,u,h,_?le:i,!0,d).pipe(ue(b=>new vt(d,b instanceof vt?[b]:[])))}))):vi(n)))}getChildConfig(t,n,r){return n.children?te({routes:n.children,injector:t}):n.loadChildren?n._loadedRoutes!==void 0?te({routes:n._loadedRoutes,injector:n._loadedInjector}):ew(t,n,r,this.urlSerializer).pipe(Be(s=>s?this.configLoader.loadChildren(t,n).pipe(Oe(i=>{n._loadedRoutes=i.routes,n._loadedInjector=i.injector})):rw(n))):te({routes:[],injector:t})}};function pw(e){e.sort((t,n)=>t.value.outlet===le?-1:n.value.outlet===le?1:t.value.outlet.localeCompare(n.value.outlet))}function gw(e){let t=e.value.routeConfig;return t&&t.path===""}function ev(e){let t=[],n=new Set;for(let r of e){if(!gw(r)){t.push(r);continue}let s=t.find(i=>r.value.routeConfig===i.value.routeConfig);s!==void 0?(s.children.push(...r.children),n.add(s)):t.push(r)}for(let r of n){let s=ev(r.children);t.push(new vt(r.value,s))}return t.filter(r=>!n.has(r))}function M_(e){return e.data||{}}function T_(e){return e.resolve||{}}function mw(e,t,n,r,s,i){return Be(o=>hw(e,t,n,r,o.extractedUrl,s,i).pipe(ue(({state:a,tree:c})=>fe(H({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function _w(e,t){return Be(n=>{let{targetSnapshot:r,guards:{canActivateChecks:s}}=n;if(!s.length)return te(n);let i=new Set(s.map(c=>c.route)),o=new Set;for(let c of i)if(!o.has(c))for(let l of tv(c))o.add(l);let a=0;return Re(o).pipe(En(c=>i.has(c)?vw(c,r,e,t):(c.data=_c(c,c.parent,e).resolve,te(void 0))),Oe(()=>a++),Lr(1),Be(c=>a===o.size?te(n):st))})}function tv(e){let t=e.children.map(n=>tv(n)).flat();return[e,...t]}function vw(e,t,n,r){let s=e.routeConfig,i=e._resolve;return s?.title!==void 0&&!z_(s)&&(i[zs]=s.title),$i(()=>(e.data=_c(e,e.parent,n).resolve,yw(i,e,t,r).pipe(ue(o=>(e._resolvedData=o,e.data=H(H({},e.data),o),null)))))}function yw(e,t,n,r){let s=uh(e);if(s.length===0)return te({});let i={};return Re(s).pipe(Be(o=>Cw(e[o],t,n,r).pipe(Xt(),Oe(a=>{if(a instanceof Us)throw yc(new Di,a);i[o]=a}))),Lr(1),ue(()=>i),Ct(o=>Q_(o)?st:kr(o)))}function Cw(e,t,n,r){let s=Ai(t)??r,i=xi(e,s),o=i.resolve?i.resolve(t,n):Ke(s,()=>i(t,n));return yn(o)}function ch(e){return je(t=>{let n=e(t);return n?Re(n).pipe(ue(()=>t)):te(t)})}var nv=(()=>{class e{buildTitle(n){let r,s=n.root;for(;s!==void 0;)r=this.getResolvedTitleForRoute(s)??r,s=s.children.find(i=>i.outlet===le);return r}getResolvedTitleForRoute(n){return n.data[zs]}static \u0275fac=function(r){return new(r||e)};static \u0275prov=Q({token:e,factory:()=>P(bw),providedIn:"root"})}return e})(),bw=(()=>{class e extends nv{title;constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||e)(re(b_))};static \u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Dc=new X("",{providedIn:"root",factory:()=>({})}),wc=new X(""),rv=(()=>{class e{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=P(Fd);loadComponent(n,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return te(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let s=yn(Ke(n,()=>r.loadComponent())).pipe(ue(iv),je(sv),Oe(o=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o}),Wn(()=>{this.componentLoaders.delete(r)})),i=new Or(s,()=>new Ie).pipe(Rr());return this.componentLoaders.set(r,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return te({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let i=Sw(r,this.compiler,n,this.onLoadEndListener).pipe(Wn(()=>{this.childrenLoaders.delete(r)})),o=new Or(i,()=>new Ie).pipe(Rr());return this.childrenLoaders.set(r,o),o}static \u0275fac=function(r){return new(r||e)};static \u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function Sw(e,t,n,r){return yn(Ke(n,()=>e.loadChildren())).pipe(ue(iv),je(sv),Be(s=>s instanceof Wa||Array.isArray(s)?te(s):Re(t.compileModuleAsync(s))),ue(s=>{r&&r(e);let i,o,a=!1;return Array.isArray(s)?(o=s,a=!0):(i=s.create(n).injector,o=i.get(wc,[],{optional:!0,self:!0}).flat()),{routes:o.map(Lh),injector:i}}))}function Ew(e){return e&&typeof e=="object"&&"default"in e}function iv(e){return Ew(e)?e.default:e}function sv(e){return te(e)}var Fh=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=Q({token:e,factory:()=>P(Dw),providedIn:"root"})}return e})(),Dw=(()=>{class e{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static \u0275fac=function(r){return new(r||e)};static \u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),ov=new X("");var av=new X(""),cv=(()=>{class e{currentNavigation=be(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new Ie;transitionAbortWithErrorSubject=new Ie;configLoader=P(rv);environmentInjector=P(Ve);destroyRef=P(Nt);urlSerializer=P(bc);rootContexts=P(Gs);location=P(di);inputBindingEnabled=P(Sc,{optional:!0})!==null;titleStrategy=P(nv);options=P(Dc,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=P(Fh);createViewTransition=P(ov,{optional:!0});navigationErrorHandler=P(av,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>te(void 0);rootComponentType=null;destroyed=!1;constructor(){let n=s=>this.events.next(new vh(s)),r=s=>this.events.next(new yh(s));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;nt(()=>{this.transitions?.next(fe(H({},n),{extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))})}setupNavigations(n){return this.transitions=new Ge(null),this.transitions.pipe(at(r=>r!==null),je(r=>{let s=!1;return te(r).pipe(je(i=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",dt.SupersededByNewNavigation),st;this.currentTransition=r,this.currentNavigation.set({id:i.id,initialUrl:i.rawUrl,extractedUrl:i.extractedUrl,targetBrowserUrl:typeof i.extras.browserUrl=="string"?this.urlSerializer.parse(i.extras.browserUrl):i.extras.browserUrl,trigger:i.source,extras:i.extras,previousNavigation:this.lastSuccessfulNavigation?fe(H({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>i.abortController.abort()});let o=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=i.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!o&&a!=="reload")return this.events.next(new jn(i.id,this.urlSerializer.serialize(i.rawUrl),"",fc.IgnoredSameUrlNavigation)),i.resolve(!1),st;if(this.urlHandlingStrategy.shouldProcessUrl(i.rawUrl))return te(i).pipe(je(c=>(this.events.next(new Ii(c.id,this.urlSerializer.serialize(c.extractedUrl),c.source,c.restoredState)),c.id!==this.navigationId?st:Promise.resolve(c))),mw(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),Oe(c=>{r.targetSnapshot=c.targetSnapshot,r.urlAfterRedirects=c.urlAfterRedirects,this.currentNavigation.update(p=>(p.finalUrl=c.urlAfterRedirects,p));let l=new pc(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}));if(o&&this.urlHandlingStrategy.shouldProcessUrl(i.currentRawUrl)){let{id:c,extractedUrl:l,source:p,restoredState:m,extras:y}=i,g=new Ii(c,this.urlSerializer.serialize(l),p,m);this.events.next(g);let d=$_(this.rootComponentType).snapshot;return this.currentTransition=r=fe(H({},i),{targetSnapshot:d,urlAfterRedirects:l,extras:fe(H({},y),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(f=>(f.finalUrl=l,f)),te(r)}else return this.events.next(new jn(i.id,this.urlSerializer.serialize(i.extractedUrl),"",fc.IgnoredByUrlHandlingStrategy)),i.resolve(!1),st}),Oe(i=>{let o=new ph(i.id,this.urlSerializer.serialize(i.extractedUrl),this.urlSerializer.serialize(i.urlAfterRedirects),i.targetSnapshot);this.events.next(o)}),ue(i=>(this.currentTransition=r=fe(H({},i),{guards:PD(i.targetSnapshot,i.currentSnapshot,this.rootContexts)}),r)),GD(this.environmentInjector,i=>this.events.next(i)),Oe(i=>{if(r.guardsResult=i.guardsResult,i.guardsResult&&typeof i.guardsResult!="boolean")throw yc(this.urlSerializer,i.guardsResult);let o=new gh(i.id,this.urlSerializer.serialize(i.extractedUrl),this.urlSerializer.serialize(i.urlAfterRedirects),i.targetSnapshot,!!i.guardsResult);this.events.next(o)}),at(i=>i.guardsResult?!0:(this.cancelNavigationTransition(i,"",dt.GuardRejected),!1)),ch(i=>{if(i.guards.canActivateChecks.length!==0)return te(i).pipe(Oe(o=>{let a=new mh(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(a)}),je(o=>{let a=!1;return te(o).pipe(_w(this.paramsInheritanceStrategy,this.environmentInjector),Oe({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(o,"",dt.NoDataFromResolver)}}))}),Oe(o=>{let a=new _h(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(a)}))}),ch(i=>{let o=a=>{let c=[];if(a.routeConfig?.loadComponent){let l=Ai(a)??this.environmentInjector;c.push(this.configLoader.loadComponent(l,a.routeConfig).pipe(Oe(p=>{a.component=p}),ue(()=>{})))}for(let l of a.children)c.push(...o(l));return c};return Bo(o(i.targetSnapshot.root)).pipe(Dn(null),Jt(1))}),ch(()=>this.afterPreactivation()),je(()=>{let{currentSnapshot:i,targetSnapshot:o}=r,a=this.createViewTransition?.(this.environmentInjector,i.root,o.root);return a?Re(a).pipe(ue(()=>r)):te(r)}),ue(i=>{let o=xD(n.routeReuseStrategy,i.targetSnapshot,i.currentRouterState);return this.currentTransition=r=fe(H({},i),{targetRouterState:o}),this.currentNavigation.update(a=>(a.targetRouterState=o,a)),r}),Oe(()=>{this.events.next(new Vs)}),kD(this.rootContexts,n.routeReuseStrategy,i=>this.events.next(i),this.inputBindingEnabled),Jt(1),Vo(new de(i=>{let o=r.abortController.signal,a=()=>i.next();return o.addEventListener("abort",a),()=>o.removeEventListener("abort",a)}).pipe(at(()=>!s&&!r.targetRouterState),Oe(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",dt.Aborted)}))),Oe({next:i=>{s=!0,this.lastSuccessfulNavigation=nt(this.currentNavigation),this.events.next(new Bn(i.id,this.urlSerializer.serialize(i.extractedUrl),this.urlSerializer.serialize(i.urlAfterRedirects))),this.titleStrategy?.updateTitle(i.targetRouterState.snapshot),i.resolve(!0)},complete:()=>{s=!0}}),Vo(this.transitionAbortWithErrorSubject.pipe(Oe(i=>{throw i}))),Wn(()=>{s||this.cancelNavigationTransition(r,"",dt.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),Ct(i=>{if(this.destroyed)return r.resolve(!1),st;if(s=!0,Y_(i))this.events.next(new _n(r.id,this.urlSerializer.serialize(r.extractedUrl),i.message,i.cancellationCode)),ND(i)?this.events.next(new Mi(i.url,i.navigationBehaviorOptions)):r.resolve(!1);else{let o=new js(r.id,this.urlSerializer.serialize(r.extractedUrl),i,r.targetSnapshot??void 0);try{let a=Ke(this.environmentInjector,()=>this.navigationErrorHandler?.(o));if(a instanceof Us){let{message:c,cancellationCode:l}=yc(this.urlSerializer,a);this.events.next(new _n(r.id,this.urlSerializer.serialize(r.extractedUrl),c,l)),this.events.next(new Mi(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(o),i}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return st}))}))}cancelNavigationTransition(n,r,s){let i=new _n(n.id,this.urlSerializer.serialize(n.extractedUrl),r,s);this.events.next(i),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=nt(this.currentNavigation),s=r?.targetBrowserUrl??r?.extractedUrl;return n.toString()!==s?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||e)};static \u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function ww(e){return e!==Ls}var Iw=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=Q({token:e,factory:()=>P(Mw),providedIn:"root"})}return e})(),kh=class{shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t.routeConfig===n.routeConfig}},Mw=(()=>{class e extends kh{static \u0275fac=(()=>{let n;return function(s){return(n||(n=Pn(e)))(s||e)}})();static \u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),lv=(()=>{class e{urlSerializer=P(bc);options=P(Dc,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=P(di);urlHandlingStrategy=P(Fh);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new vn;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:n,initialUrl:r,targetBrowserUrl:s}){let i=n!==void 0?this.urlHandlingStrategy.merge(n,r):r,o=s??i;return o instanceof vn?this.urlSerializer.serialize(o):o}commitTransition({targetRouterState:n,finalUrl:r,initialUrl:s}){r&&n?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,s),this.routerState=n):this.rawUrlTree=s}routerState=$_(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:n}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n??this.rawUrlTree)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=Q({token:e,factory:()=>P(Tw),providedIn:"root"})}return e})(),Tw=(()=>{class e extends lv{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{n(r.url,r.state,"popstate")})})}handleRouterEvent(n,r){n instanceof Ii?this.updateStateMemento():n instanceof jn?this.commitTransition(r):n instanceof pc?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof Vs?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof _n&&n.code!==dt.SupersededByNewNavigation&&n.code!==dt.Redirect?this.restoreHistory(r):n instanceof js?this.restoreHistory(r,!0):n instanceof Bn&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,{extras:r,id:s}){let{replaceUrl:i,state:o}=r;if(this.location.isCurrentPathEqualTo(n)||i){let a=this.browserPageId,c=H(H({},o),this.generateNgRouterState(s,a));this.location.replaceState(n,"",c)}else{let a=H(H({},o),this.generateNgRouterState(s,this.browserPageId+1));this.location.go(n,"",a)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,i=this.currentPageId-s;i!==0?this.location.historyGo(i):this.getCurrentUrlTree()===n.finalUrl&&i===0&&(this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(s){return(n||(n=Pn(e)))(s||e)}})();static \u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function uv(e,t){e.events.pipe(at(n=>n instanceof Bn||n instanceof _n||n instanceof js||n instanceof jn),ue(n=>n instanceof Bn||n instanceof jn?0:(n instanceof _n?n.code===dt.Redirect||n.code===dt.SupersededByNewNavigation:!1)?2:1),at(n=>n!==2),Jt(1)).subscribe(()=>{t()})}var Aw={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},xw={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Bh=(()=>{class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=P(Nd);stateManager=P(lv);options=P(Dc,{optional:!0})||{};pendingTasks=P(qt);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=P(cv);urlSerializer=P(bc);location=P(di);urlHandlingStrategy=P(Fh);injector=P(Ve);_events=new Ie;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=P(Iw);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=P(wc,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!P(Sc,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}eventsSubscription=new xe;subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let s=this.navigationTransitions.currentTransition,i=nt(this.navigationTransitions.currentNavigation);if(s!==null&&i!==null){if(this.stateManager.handleRouterEvent(r,i),r instanceof _n&&r.code!==dt.Redirect&&r.code!==dt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Bn)this.navigated=!0;else if(r instanceof Mi){let o=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,s.currentRawUrl),c=H({browserUrl:s.extras.browserUrl,info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:s.extras.replaceUrl||this.urlUpdateStrategy==="eager"||ww(s.source)},o);this.scheduleNavigation(a,Ls,null,c,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}wD(r)&&this._events.next(r)}catch(s){this.navigationTransitions.transitionAbortWithErrorSubject.next(s)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Ls,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r,s)=>{this.navigateToSyncWithBrowser(n,s,r)})}navigateToSyncWithBrowser(n,r,s){let i={replaceUrl:!0},o=s?.navigationId?s:null;if(s){let c=H({},s);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(i.state=c)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,o,i).catch(c=>{this.disposed||this.injector.get(_t)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return nt(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(Lh),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:s,queryParams:i,fragment:o,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:o,p=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":p=H(H({},this.currentUrlTree.queryParams),i);break;case"preserve":p=this.currentUrlTree.queryParams;break;default:p=i||null}p!==null&&(p=this.removeEmptyProps(p));let m;try{let y=s?s.snapshot:this.routerState.snapshot.root;m=j_(y)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),m=this.currentUrlTree.root}return V_(m,n,p,l??null)}navigateByUrl(n,r={skipLocationChange:!1}){let s=wi(n)?n:this.parseUrl(n),i=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(i,Ls,null,r)}navigate(n,r={skipLocationChange:!1}){return Rw(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.console.warn(Br(4018,!1)),this.urlSerializer.parse("/")}}isActive(n,r){let s;if(r===!0?s=H({},Aw):r===!1?s=H({},xw):s=r,wi(n))return S_(this.currentUrlTree,n,s);let i=this.parseUrl(n);return S_(this.currentUrlTree,i,s)}removeEmptyProps(n){return Object.entries(n).reduce((r,[s,i])=>(i!=null&&(r[s]=i),r),{})}scheduleNavigation(n,r,s,i,o){if(this.disposed)return Promise.resolve(!1);let a,c,l;o?(a=o.resolve,c=o.reject,l=o.promise):l=new Promise((m,y)=>{a=m,c=y});let p=this.pendingTasks.add();return uv(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(p))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:i,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(m=>Promise.reject(m))}static \u0275fac=function(r){return new(r||e)};static \u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function Rw(e){for(let t=0;t<e.length;t++)if(e[t]==null)throw new J(4008,!1)}var Ow=new X("");function jh(e,...t){return on([{provide:wc,multi:!0,useValue:e},[],{provide:vr,useFactory:Nw,deps:[Bh]},{provide:za,multi:!0,useFactory:kw},t.map(n=>n.\u0275providers)])}function Nw(e){return e.routerState.root}function kw(){let e=P(bt);return t=>{let n=e.get(gn);if(t!==n.components[0])return;let r=e.get(Bh),s=e.get(Pw);e.get(Lw)===1&&r.initialNavigation(),e.get(Fw,null,{optional:!0})?.setUpPreloading(),e.get(Ow,null,{optional:!0})?.init(),r.resetRootComponentType(n.componentTypes[0]),s.closed||(s.next(),s.complete(),s.unsubscribe())}}var Pw=new X("",{factory:()=>new Ie}),Lw=new X("",{providedIn:"root",factory:()=>1});var Fw=new X("");var dv=[];var hv={providers:[vu(),jd({eventCoalescing:!0}),jh(dv),ih()]};var bv=(()=>{class e{_renderer;_elementRef;onChange=n=>{};onTouched=()=>{};constructor(n,r){this._renderer=n,this._elementRef=r}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static \u0275fac=function(r){return new(r||e)(Ee(cr),Ee(Pt))};static \u0275dir=ut({type:e})}return e})(),zh=(()=>{class e extends bv{static \u0275fac=(()=>{let n;return function(s){return(n||(n=Pn(e)))(s||e)}})();static \u0275dir=ut({type:e,features:[pn]})}return e})(),xc=new X("");var jw={provide:xc,useExisting:rn(()=>Rc),multi:!0};function Vw(){let e=Mt()?Mt().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}var Hw=new X(""),Rc=(()=>{class e extends bv{_compositionMode;_composing=!1;constructor(n,r,s){super(n,r),this._compositionMode=s,this._compositionMode==null&&(this._compositionMode=!Vw())}writeValue(n){let r=n??"";this.setProperty("value",r)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static \u0275fac=function(r){return new(r||e)(Ee(cr),Ee(Pt),Ee(Hw,8))};static \u0275dir=ut({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,s){r&1&&ze("input",function(o){return s._handleInput(o.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(o){return s._compositionEnd(o.target.value)})},standalone:!1,features:[li([jw]),pn]})}return e})();var Uw=new X(""),$w=new X("");function Sv(e){return e!=null}function Ev(e){return ur(e)?Re(e):e}function Dv(e){let t={};return e.forEach(n=>{t=n!=null?H(H({},t),n):t}),Object.keys(t).length===0?null:t}function wv(e,t){return t.map(n=>n(e))}function Ww(e){return!e.validate}function Iv(e){return e.map(t=>Ww(t)?t:n=>t.validate(n))}function zw(e){if(!e)return null;let t=e.filter(Sv);return t.length==0?null:function(n){return Dv(wv(n,t))}}function Mv(e){return e!=null?zw(Iv(e)):null}function Gw(e){if(!e)return null;let t=e.filter(Sv);return t.length==0?null:function(n){let r=wv(n,t).map(Ev);return pl(r).pipe(ue(Dv))}}function Tv(e){return e!=null?Gw(Iv(e)):null}function fv(e,t){return e===null?[t]:Array.isArray(e)?[...e,t]:[e,t]}function qw(e){return e._rawValidators}function Kw(e){return e._rawAsyncValidators}function Vh(e){return e?Array.isArray(e)?e:[e]:[]}function Mc(e,t){return Array.isArray(e)?e.includes(t):e===t}function pv(e,t){let n=Vh(t);return Vh(e).forEach(s=>{Mc(n,s)||n.push(s)}),n}function gv(e,t){return Vh(t).filter(n=>!Mc(e,n))}var Tc=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=Mv(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Tv(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,n){return this.control?this.control.hasError(t,n):!1}getError(t,n){return this.control?this.control.getError(t,n):null}},Hh=class extends Tc{name;get formDirective(){return null}get path(){return null}},Js=class extends Tc{_parent=null;name=null;valueAccessor=null},Uh=class{_cd;constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},Zw={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},L5=fe(H({},Zw),{"[class.ng-submitted]":"isSubmitted"}),Av=(()=>{class e extends Uh{constructor(n){super(n)}static \u0275fac=function(r){return new(r||e)(Ee(Js,2))};static \u0275dir=ut({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,s){r&2&&tt("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},standalone:!1,features:[pn]})}return e})();var Ks="VALID",Ic="INVALID",Ri="PENDING",Zs="DISABLED",yr=class{},Ac=class extends yr{value;source;constructor(t,n){super(),this.value=t,this.source=n}},Ys=class extends yr{pristine;source;constructor(t,n){super(),this.pristine=t,this.source=n}},Qs=class extends yr{touched;source;constructor(t,n){super(),this.touched=t,this.source=n}},Oi=class extends yr{status;source;constructor(t,n){super(),this.status=t,this.source=n}};var $h=class extends yr{source;constructor(t){super(),this.source=t}};function Yw(e){return(Oc(e)?e.validators:e)||null}function Qw(e){return Array.isArray(e)?Mv(e):e||null}function Jw(e,t){return(Oc(t)?t.asyncValidators:e)||null}function Xw(e){return Array.isArray(e)?Tv(e):e||null}function Oc(e){return e!=null&&!Array.isArray(e)&&typeof e=="object"}var Wh=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(t,n){this._assignValidators(t),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return nt(this.statusReactive)}set status(t){nt(()=>this.statusReactive.set(t))}_status=Ss(()=>this.statusReactive());statusReactive=be(void 0);get valid(){return this.status===Ks}get invalid(){return this.status===Ic}get pending(){return this.status==Ri}get disabled(){return this.status===Zs}get enabled(){return this.status!==Zs}errors;get pristine(){return nt(this.pristineReactive)}set pristine(t){nt(()=>this.pristineReactive.set(t))}_pristine=Ss(()=>this.pristineReactive());pristineReactive=be(!0);get dirty(){return!this.pristine}get touched(){return nt(this.touchedReactive)}set touched(t){nt(()=>this.touchedReactive.set(t))}_touched=Ss(()=>this.touchedReactive());touchedReactive=be(!1);get untouched(){return!this.touched}_events=new Ie;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(pv(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(pv(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(gv(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(gv(t,this._rawAsyncValidators))}hasValidator(t){return Mc(this._rawValidators,t)}hasAsyncValidator(t){return Mc(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){let n=this.touched===!1;this.touched=!0;let r=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsTouched(fe(H({},t),{sourceControl:r})),n&&t.emitEvent!==!1&&this._events.next(new Qs(!0,r))}markAllAsDirty(t={}){this.markAsDirty({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsDirty(t))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(t))}markAsUntouched(t={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=t.sourceControl??this;this._forEachChild(s=>{s.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:r})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,r),n&&t.emitEvent!==!1&&this._events.next(new Qs(!1,r))}markAsDirty(t={}){let n=this.pristine===!0;this.pristine=!1;let r=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsDirty(fe(H({},t),{sourceControl:r})),n&&t.emitEvent!==!1&&this._events.next(new Ys(!1,r))}markAsPristine(t={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=t.sourceControl??this;this._forEachChild(s=>{s.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t,r),n&&t.emitEvent!==!1&&this._events.next(new Ys(!0,r))}markAsPending(t={}){this.status=Ri;let n=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Oi(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.markAsPending(fe(H({},t),{sourceControl:n}))}disable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=Zs,this.errors=null,this._forEachChild(s=>{s.disable(fe(H({},t),{onlySelf:!0}))}),this._updateValue();let r=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Ac(this.value,r)),this._events.next(new Oi(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(fe(H({},t),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(s=>s(!0))}enable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=Ks,this._forEachChild(r=>{r.enable(fe(H({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(fe(H({},t),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(t,n){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ks||this.status===Ri)&&this._runAsyncValidator(r,t.emitEvent)}let n=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Ac(this.value,n)),this._events.next(new Oi(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(fe(H({},t),{sourceControl:n}))}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Zs:Ks}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,n){if(this.asyncValidator){this.status=Ri,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1,shouldHaveEmitted:t!==!1};let r=Ev(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(s=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(s,{emitEvent:n,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let t=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,n={}){this.errors=t,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(t){let n=t;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,s)=>r&&r._find(s),this)}getError(t,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[t]:null}hasError(t,n){return!!this.getError(t,n)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,n,r){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||r)&&this._events.next(new Oi(this.status,n)),this._parent&&this._parent._updateControlsErrors(t,n,r)}_initObservables(){this.valueChanges=new Ue,this.statusChanges=new Ue}_calculateStatus(){return this._allControlsDisabled()?Zs:this.errors?Ic:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ri)?Ri:this._anyControlsHaveStatus(Ic)?Ic:Ks}_anyControlsHaveStatus(t){return this._anyControls(n=>n.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,n){let r=!this._anyControlsDirty(),s=this.pristine!==r;this.pristine=r,this._parent&&!t.onlySelf&&this._parent._updatePristine(t,n),s&&this._events.next(new Ys(this.pristine,n))}_updateTouched(t={},n){this.touched=this._anyControlsTouched(),this._events.next(new Qs(this.touched,n)),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,n)}_onDisabledChange=[];_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Oc(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let n=this._parent&&this._parent.dirty;return!t&&!!n&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=Qw(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=Xw(this._rawAsyncValidators)}};var xv=new X("",{providedIn:"root",factory:()=>Gh}),Gh="always";function eI(e,t){return[...t.path,e]}function tI(e,t,n=Gh){rI(e,t),t.valueAccessor.writeValue(e.value),(e.disabled||n==="always")&&t.valueAccessor.setDisabledState?.(e.disabled),iI(e,t),oI(e,t),sI(e,t),nI(e,t)}function mv(e,t){e.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(t)})}function nI(e,t){if(t.valueAccessor.setDisabledState){let n=r=>{t.valueAccessor.setDisabledState(r)};e.registerOnDisabledChange(n),t._registerOnDestroy(()=>{e._unregisterOnDisabledChange(n)})}}function rI(e,t){let n=qw(e);t.validator!==null?e.setValidators(fv(n,t.validator)):typeof n=="function"&&e.setValidators([n]);let r=Kw(e);t.asyncValidator!==null?e.setAsyncValidators(fv(r,t.asyncValidator)):typeof r=="function"&&e.setAsyncValidators([r]);let s=()=>e.updateValueAndValidity();mv(t._rawValidators,s),mv(t._rawAsyncValidators,s)}function iI(e,t){t.valueAccessor.registerOnChange(n=>{e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,e.updateOn==="change"&&Rv(e,t)})}function sI(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,e.updateOn==="blur"&&e._pendingChange&&Rv(e,t),e.updateOn!=="submit"&&e.markAsTouched()})}function Rv(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function oI(e,t){let n=(r,s)=>{t.valueAccessor.writeValue(r),s&&t.viewToModelUpdate(r)};e.registerOnChange(n),t._registerOnDestroy(()=>{e._unregisterOnChange(n)})}function aI(e,t){if(!e.hasOwnProperty("model"))return!1;let n=e.model;return n.isFirstChange()?!0:!Object.is(t,n.currentValue)}function cI(e){return Object.getPrototypeOf(e.constructor)===zh}function lI(e,t){if(!t)return null;Array.isArray(t);let n,r,s;return t.forEach(i=>{i.constructor===Rc?n=i:cI(i)?r=i:s=i}),s||r||n||null}function _v(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function vv(e){return typeof e=="object"&&e!==null&&Object.keys(e).length===2&&"value"in e&&"disabled"in e}var uI=class extends Wh{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(t=null,n,r){super(Yw(n),Jw(r,n)),this._applyFormState(t),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Oc(n)&&(n.nonNullable||n.initialValueIsDefault)&&(vv(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,n={}){this.value=this._pendingValue=t,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(t,n={}){this.setValue(t,n)}reset(t=this.defaultValue,n={}){this._applyFormState(t),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1,n?.emitEvent!==!1&&this._events.next(new $h(this))}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){_v(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){_v(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){vv(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var dI={provide:Js,useExisting:rn(()=>qh)},yv=Promise.resolve(),qh=(()=>{class e extends Js{_changeDetectorRef;callSetDisabledState;control=new uI;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Ue;constructor(n,r,s,i,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this._parent=n,this._setValidators(r),this._setAsyncValidators(s),this.valueAccessor=lI(this,i)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){let r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),aI(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){tI(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(n){yv.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){let r=n.isDisabled.currentValue,s=r!==0&&Wd(r);yv.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?eI(n,this._parent):[n]}static \u0275fac=function(r){return new(r||e)(Ee(Hh,9),Ee(Uw,10),Ee($w,10),Ee(xc,10),Ee(ui,8),Ee(xv,8))};static \u0275dir=ut({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[li([dI]),pn,ni]})}return e})();var hI={provide:xc,useExisting:rn(()=>Nc),multi:!0};function Ov(e,t){return e==null?`${t}`:(t&&typeof t=="object"&&(t="Object"),`${e}: ${t}`.slice(0,50))}function fI(e){return e.split(":")[0]}var Nc=(()=>{class e extends zh{value;_optionMap=new Map;_idCounter=0;set compareWith(n){this._compareWith=n}_compareWith=Object.is;appRefInjector=P(gn).injector;destroyRef=P(Nt);cdr=P(ui);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,Fa({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(n){this.cdr.markForCheck(),this.value=n;let r=this._getOptionId(n),s=Ov(r,n);this.setProperty("value",s)}registerOnChange(n){this.onChange=r=>{this.value=this._getOptionValue(r),n(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(n){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),n))return r;return null}_getOptionValue(n){let r=fI(n);return this._optionMap.has(r)?this._optionMap.get(r):n}static \u0275fac=(()=>{let n;return function(s){return(n||(n=Pn(e)))(s||e)}})();static \u0275dir=ut({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,s){r&1&&ze("change",function(o){return s.onChange(o.target.value)})("blur",function(){return s.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[li([hI]),pn]})}return e})(),Nv=(()=>{class e{_element;_renderer;_select;id;constructor(n,r,s){this._element=n,this._renderer=r,this._select=s,this._select&&(this.id=this._select._registerOption())}set ngValue(n){this._select!=null&&(this._select._optionMap.set(this.id,n),this._setElementValue(Ov(this.id,n)),this._select._writeValueAfterRender())}set value(n){this._setElementValue(n),this._select&&this._select._writeValueAfterRender()}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(r){return new(r||e)(Ee(Pt),Ee(cr),Ee(Nc,9))};static \u0275dir=ut({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return e})(),pI={provide:xc,useExisting:rn(()=>kv),multi:!0};function Cv(e,t){return e==null?`${t}`:(typeof t=="string"&&(t=`'${t}'`),t&&typeof t=="object"&&(t="Object"),`${e}: ${t}`.slice(0,50))}function gI(e){return e.split(":")[0]}var kv=(()=>{class e extends zh{value;_optionMap=new Map;_idCounter=0;set compareWith(n){this._compareWith=n}_compareWith=Object.is;writeValue(n){this.value=n;let r;if(Array.isArray(n)){let s=n.map(i=>this._getOptionId(i));r=(i,o)=>{i._setSelected(s.indexOf(o.toString())>-1)}}else r=(s,i)=>{s._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(n){this.onChange=r=>{let s=[],i=r.selectedOptions;if(i!==void 0){let o=i;for(let a=0;a<o.length;a++){let c=o[a],l=this._getOptionValue(c.value);s.push(l)}}else{let o=r.options;for(let a=0;a<o.length;a++){let c=o[a];if(c.selected){let l=this._getOptionValue(c.value);s.push(l)}}}this.value=s,n(s)}}_registerOption(n){let r=(this._idCounter++).toString();return this._optionMap.set(r,n),r}_getOptionId(n){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,n))return r;return null}_getOptionValue(n){let r=gI(n);return this._optionMap.has(r)?this._optionMap.get(r)._value:n}static \u0275fac=(()=>{let n;return function(s){return(n||(n=Pn(e)))(s||e)}})();static \u0275dir=ut({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,s){r&1&&ze("change",function(o){return s.onChange(o.target)})("blur",function(){return s.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[li([pI]),pn]})}return e})(),Pv=(()=>{class e{_element;_renderer;_select;id;_value;constructor(n,r,s){this._element=n,this._renderer=r,this._select=s,this._select&&(this.id=this._select._registerOption(this))}set ngValue(n){this._select!=null&&(this._value=n,this._setElementValue(Cv(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._select?(this._value=n,this._setElementValue(Cv(this.id,n)),this._select.writeValue(this._select.value)):this._setElementValue(n)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}_setSelected(n){this._renderer.setProperty(this._element.nativeElement,"selected",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||e)(Ee(Pt),Ee(cr),Ee(kv,9))};static \u0275dir=ut({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return e})();var mI=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=fn({type:e});static \u0275inj=Ht({})}return e})();var Lv=(()=>{class e{static withConfig(n){return{ngModule:e,providers:[{provide:xv,useValue:n.callSetDisabledState??Gh}]}}static \u0275fac=function(r){return new(r||e)};static \u0275mod=fn({type:e});static \u0275inj=Ht({imports:[mI]})}return e})();var kc=class e{http=P(_i);baseUrl="/api";getFacts(){return this.http.get(`${this.baseUrl}/facts`)}addFact(t){return this.http.post(`${this.baseUrl}/facts`,t)}deleteFact(t){return this.http.delete(`${this.baseUrl}/facts/${t}`)}getPrompt(){return this.http.get(`${this.baseUrl}/prompts`)}updatePrompt(t){return this.http.post(`${this.baseUrl}/prompts`,{prompt:t})}getTools(){return this.http.get(`${this.baseUrl}/tools`)}getProjects(){return this.http.get(`${this.baseUrl}/projects`)}openTerminal(t,n,r){return this.http.post(`${this.baseUrl}/projects/open-terminal`,{workspace_path:t,project_pid:n,project_name:r})}initBridge(t){return this.http.post(`${this.baseUrl}/projects/init-bridge`,{workspace_path:t})}getMetrics(){return this.http.get(`${this.baseUrl}/metrics`)}static \u0275fac=function(n){return new(n||e)};static \u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"})};var Pc=class e{socket;messages$=new Ie;connected$=new Ie;connect(){this.socket=new WebSocket("ws://localhost:8765/ws"),this.socket.onopen=()=>{console.log("WebSocket connected"),this.connected$.next(!0)},this.socket.onmessage=t=>{let n=JSON.parse(t.data);this.messages$.next(n)},this.socket.onerror=t=>{console.error("WebSocket error:",t),this.connected$.next(!1)},this.socket.onclose=()=>{console.log("WebSocket disconnected"),this.connected$.next(!1),setTimeout(()=>this.connect(),3e3)}}disconnect(){this.socket&&this.socket.close()}static \u0275fac=function(n){return new(n||e)};static \u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"})};var Lc=class e{http=P(_i);baseUrl="/api/claude";terminals=be([]);sessions=be([]);isLoading=be(!1);error=be(null);lastUpdate=be(null);autoRefreshInterval=3e4;getTerminals(){return this.isLoading.set(!0),this.error.set(null),this.http.get(`${this.baseUrl}/terminals`).pipe(Oe(t=>{this.terminals.set(t.terminals),this.lastUpdate.set(t.timestamp),this.isLoading.set(!1)}),Ct(t=>(this.error.set(`Error loading terminals: ${t.message}`),this.isLoading.set(!1),te({terminals:[],count:0,timestamp:new Date().toISOString()}))))}getSessions(){return this.http.get(`${this.baseUrl}/sessions`).pipe(Oe(t=>{this.sessions.set(t.sessions)}),Ct(t=>(this.error.set(`Error loading sessions: ${t.message}`),te({sessions:[],count:0,timestamp:new Date().toISOString()}))))}executeCommand(t){return this.http.post(`${this.baseUrl}/execute`,t)}getTerminalOutput(t,n=50){return this.http.get(`${this.baseUrl}/output/${t}?lines=${n}`)}startAutoRefresh(){return gl(this.autoRefreshInterval).pipe(je(()=>this.getTerminals()))}refresh(){this.getTerminals().subscribe(),this.getSessions().subscribe()}clearError(){this.error.set(null)}static \u0275fac=function(n){return new(n||e)};static \u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"})};var Fc=class e{openTerminals=be(new Map);openTerminal(t){this.openTerminals.update(n=>{let r=new Map(n);return r.set(t,!0),r})}closeTerminal(t){this.openTerminals.update(n=>{let r=new Map(n);return r.delete(t),r})}isTerminalOpen(t){return this.openTerminals().has(t)}toggleTerminal(t){this.isTerminalOpen(t)?this.closeTerminal(t):this.openTerminal(t)}static \u0275fac=function(n){return new(n||e)};static \u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"})};var vI=["canvas"],Bc=class e{canvasRef;status="offline";activityLevel=50;ctx;animationFrame=0;dataPoints=[];maxPoints=60;time=0;heartbeatCounter=0;ngAfterViewInit(){this.initCanvas(),this.startAnimation()}ngOnDestroy(){this.animationFrame&&cancelAnimationFrame(this.animationFrame)}initCanvas(){let t=this.canvasRef.nativeElement;this.ctx=t.getContext("2d"),t.width=t.offsetWidth*2,t.height=t.offsetHeight*2,this.ctx.scale(2,2),this.dataPoints=new Array(this.maxPoints).fill(50)}animationCounter=0;startAnimation(){let t=()=>{this.animationCounter++,this.animationCounter%6===0&&this.updateDataPoints(),this.draw(),this.animationFrame=requestAnimationFrame(t)};t()}updateDataPoints(){this.dataPoints.shift();let t=50;if(this.status==="working"){this.heartbeatCounter++;let r=this.heartbeatCounter%50;r<8?r===0?t=55:r===1?t=70:r===2?t=85:r===3?t=75:r===4?t=40:r===5?t=60:r===6?t=52:r===7&&(t=50):t=50+(Math.random()-.5)*3}else this.status==="ready"?t=50+(Math.random()-.5)*5:t=50;this.dataPoints.push(t)}draw(){let t=this.canvasRef.nativeElement,n=t.offsetWidth,r=t.offsetHeight;this.ctx.clearRect(0,0,n,r),this.drawGrid(n,r),this.drawWaveform(n,r)}drawGrid(t,n){this.ctx.strokeStyle="#1a1a1a",this.ctx.lineWidth=1;for(let r=0;r<=n;r+=20)this.ctx.beginPath(),this.ctx.moveTo(0,r),this.ctx.lineTo(t,r),this.ctx.stroke();for(let r=0;r<=t;r+=20)this.ctx.beginPath(),this.ctx.moveTo(r,0),this.ctx.lineTo(r,n),this.ctx.stroke()}drawWaveform(t,n){let r=t/(this.maxPoints-1),s="#ff0055",i="rgba(255, 0, 85, 0.5)";this.status==="working"?(s="#00ff00",i="rgba(0, 255, 0, 0.8)"):this.status==="ready"&&(s="#00ffff",i="rgba(0, 255, 255, 0.5)"),this.ctx.shadowBlur=10,this.ctx.shadowColor=i,this.ctx.strokeStyle=s,this.ctx.lineWidth=2,this.ctx.beginPath();for(let o=0;o<this.dataPoints.length;o++){let a=o*r,c=n-this.dataPoints[o]/100*n;o===0?this.ctx.moveTo(a,c):this.ctx.lineTo(a,c)}this.ctx.stroke(),this.ctx.shadowBlur=0}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=hn({type:e,selectors:[["activity-graph"]],viewQuery:function(n,r){if(n&1&&vs(vI,5),n&2){let s;ys(s=Cs())&&(r.canvasRef=s.first)}},inputs:{status:"status",activityLevel:"activityLevel"},decls:2,vars:0,consts:[["canvas",""]],template:function(n,r){n&1&&oi(0,"canvas",null,0)},styles:["canvas[_ngcontent-%COMP%]{width:100%;height:100%;display:block}"]})};var Vv=ef(Bv()),Hv=ef(jv());var yI=["terminalElement"],Hc=class e{projectPid;workspacePath;projectName;terminalElement;terminal;fitAddon;ws;ngOnInit(){this.initializeTerminal(),this.connectWebSocket()}ngOnDestroy(){this.ws&&this.ws.close(),this.terminal&&this.terminal.dispose()}initializeTerminal(){this.terminal=new Vv.Terminal({cursorBlink:!0,fontSize:14,fontFamily:'"Cascadia Code", "Consolas", "Courier New", monospace',theme:{background:"#0a0a0a",foreground:"#00ff00",cursor:"#00ff00",cursorAccent:"#0a0a0a",selectionBackground:"#00ff0040",black:"#000000",red:"#ff0055",green:"#00ff00",yellow:"#ffff00",blue:"#00ffff",magenta:"#ff00ff",cyan:"#00ffff",white:"#ffffff",brightBlack:"#555555",brightRed:"#ff0055",brightGreen:"#00ff00",brightYellow:"#ffff00",brightBlue:"#00ffff",brightMagenta:"#ff00ff",brightCyan:"#00ffff",brightWhite:"#ffffff"},allowProposedApi:!0}),this.fitAddon=new Hv.FitAddon,this.terminal.loadAddon(this.fitAddon),this.terminal.open(this.terminalElement.nativeElement),this.fitAddon.fit(),this.terminal.onData(t=>{this.sendCommand(t)}),this.terminal.writeln("\x1B[1;32m=== Sendell Embedded Terminal ===\x1B[0m"),this.terminal.writeln(`\x1B[1;36mProject:\x1B[0m ${this.projectName}`),this.terminal.writeln(`\x1B[1;36mPath:\x1B[0m ${this.workspacePath}`),this.terminal.writeln("\x1B[1;32m=================================\x1B[0m"),this.terminal.writeln(""),window.addEventListener("resize",()=>{this.fitAddon.fit()})}connectWebSocket(){let t=`ws://localhost:8765/ws/terminal/${this.projectPid}`;this.ws=new WebSocket(t),this.ws.onopen=()=>{console.log(`Terminal WebSocket connected for project ${this.projectPid}`),this.terminal.writeln("\x1B[1;32m[Connected to terminal]\x1B[0m")},this.ws.onmessage=n=>{let r=JSON.parse(n.data);r.type==="output"?this.terminal.write(r.data+`\r
`):r.type==="error"&&this.terminal.writeln(`\x1B[1;31m[Error: ${r.message}]\x1B[0m`)},this.ws.onerror=n=>{console.error("WebSocket error:",n),this.terminal.writeln("\x1B[1;31m[WebSocket error]\x1B[0m")},this.ws.onclose=()=>{console.log("WebSocket closed"),this.terminal.writeln("\x1B[1;33m[Disconnected from terminal]\x1B[0m")}}sendCommand(t){this.ws&&this.ws.readyState===WebSocket.OPEN&&this.ws.send(JSON.stringify({type:"input",data:t}))}closeTerminal(){this.ngOnDestroy()}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=hn({type:e,selectors:[["app-terminal"]],viewQuery:function(n,r){if(n&1&&vs(yI,7),n&2){let s;ys(s=Cs())&&(r.terminalElement=s.first)}},inputs:{projectPid:"projectPid",workspacePath:"workspacePath",projectName:"projectName"},decls:8,vars:1,consts:[["terminalElement",""],[1,"terminal-container"],[1,"terminal-header"],[1,"terminal-title"],[1,"terminal-close",3,"click"],[1,"terminal-body"]],template:function(n,r){if(n&1){let s=Zt();si(0,"div",1)(1,"div",2)(2,"span",3),W(3),fr(),si(4,"button",4),qa("click",function(){return ct(s),lt(r.closeTerminal())}),W(5,"\xD7"),fr()(),oi(6,"div",5,0),fr()}n&2&&(Y(3),Se("",r.projectName," - Terminal"))},dependencies:[hi],styles:[".terminal-container[_ngcontent-%COMP%]{background:#0a0a0a;border:2px solid #00ff00;box-shadow:0 0 20px #00ff004d;margin-top:1rem;border-radius:4px;overflow:hidden}.terminal-header[_ngcontent-%COMP%]{background:#1a1a1a;padding:.75rem 1rem;display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #00ff00}.terminal-title[_ngcontent-%COMP%]{color:#0f0;font-family:Consolas,Courier New,monospace;font-size:.9rem;font-weight:700}.terminal-close[_ngcontent-%COMP%]{background:none;border:none;color:#f05;font-size:1.5rem;cursor:pointer;padding:0;width:30px;height:30px;display:flex;align-items:center;justify-content:center;transition:all .2s}.terminal-close[_ngcontent-%COMP%]:hover{color:#fff;background:#f05;border-radius:4px}.terminal-body[_ngcontent-%COMP%]{height:400px;padding:.5rem}"]})};var Uv=(e,t)=>t.pid,CI=(e,t)=>t.session_id;function bI(e,t){if(e&1){let n=Zt();U(0,"div",16)(1,"div",18),W(2),V(),U(3,"div",19),W(4),V(),U(5,"button",20),ze("click",function(){let s=ct(n).$index,i=De(2);return lt(i.deleteFact(s))}),W(6,"ELIMINAR"),V()()}if(e&2){let n=t.$implicit;Y(2),Ft(n.category),Y(2),Ft(n.fact)}}function SI(e,t){e&1&&(U(0,"div",17),W(1,"No hay facts todav\xEDa"),V())}function EI(e,t){if(e&1){let n=Zt();U(0,"div",6)(1,"h2"),W(2,"MEMORIAS - FACTS APRENDIDOS"),V(),U(3,"div",8)(4,"input",9),ci("ngModelChange",function(s){ct(n);let i=De();return bs(i.newFactText,s)||(i.newFactText=s),lt(s)}),V(),U(5,"select",10),ci("ngModelChange",function(s){ct(n);let i=De();return bs(i.newFactCategory,s)||(i.newFactCategory=s),lt(s)}),U(6,"option",11),W(7,"General"),V(),U(8,"option",12),W(9,"Trabajo"),V(),U(10,"option",13),W(11,"Personal"),V()(),U(12,"button",14),ze("click",function(){ct(n);let s=De();return lt(s.addFact())}),W(13,"AGREGAR"),V()(),U(14,"div",15),dr(15,bI,7,2,"div",16,Ga,!1,SI,2,0,"div",17),V()()}if(e&2){let n=De();Y(4),ai("ngModel",n.newFactText),Y(),ai("ngModel",n.newFactCategory),Y(10),hr(n.facts())}}function DI(e,t){if(e&1){let n=Zt();U(0,"div",6)(1,"h2"),W(2,"SYSTEM PROMPT"),V(),U(3,"textarea",21),ci("ngModelChange",function(s){ct(n);let i=De();return bs(i.promptText,s)||(i.promptText=s),lt(s)}),V(),U(4,"button",14),ze("click",function(){ct(n);let s=De();return lt(s.savePrompt())}),W(5,"GUARDAR PROMPT"),V()()}if(e&2){let n=De();Y(3),ai("ngModel",n.promptText)}}function wI(e,t){if(e&1&&(U(0,"div",23)(1,"div",24),W(2),V(),U(3,"div",25),W(4),V()()),e&2){let n=t.$implicit;Y(2),Ft(n.name),Y(2),Ft(n.description)}}function II(e,t){e&1&&(U(0,"div",17),W(1,"Cargando herramientas..."),V())}function MI(e,t){if(e&1&&(U(0,"div",6)(1,"h2"),W(2,"HERRAMIENTAS DISPONIBLES"),V(),U(3,"div",22),dr(4,wI,5,2,"div",23,Ga,!1,II,2,0,"div",17),V()()),e&2){let n=De();Y(4),hr(n.tools())}}function TI(e,t){e&1&&(U(0,"div",34),It(1,"div",44),U(2,"div",45),W(3,"Opening terminal..."),V()())}function AI(e,t){e&1&&(U(0,"span",38),W(1,"\u{1F916} Claude"),V())}function xI(e,t){e&1&&(U(0,"div"),W(1,"\u2713 Terminal abierto"),V())}function RI(e,t){e&1&&W(0," Click para abrir terminal ")}function OI(e,t){e&1&&W(0," Click para abrir nueva terminal ")}function NI(e,t){if(e&1&&(U(0,"div",42),$e(1,RI,1,0)(2,OI,1,0),V()),e&2){let n=De().$implicit;Y(),We(n.state==="offline"?1:2)}}function kI(e,t){if(e&1&&It(0,"app-terminal",43),e&2){let n=De().$implicit;ms("projectPid",n.pid)("workspacePath",n.workspace_path)("projectName",n.name)}}function PI(e,t){if(e&1){let n=Zt();U(0,"div",33),ze("click",function(){let s=ct(n).$implicit,i=De(2);return lt(i.onProjectClick(s))}),$e(1,TI,4,0,"div",34),U(2,"div",35)(3,"div",36),W(4),V(),U(5,"div",37),W(6),$e(7,AI,2,0,"span",38),V()(),U(8,"div",39),It(9,"activity-graph",40),V(),U(10,"div",41)(11,"div"),W(12),V(),U(13,"div"),W(14),V(),$e(15,xI,2,0,"div"),$e(16,NI,3,1,"div",42),V()(),$e(17,kI,1,3,"app-terminal",43)}if(e&2){let n=t.$implicit,r=t.$index,s=De(2);tt("working",n.state==="working")("ready",n.state==="ready")("offline",n.state==="offline")("clickable",n.state==="offline"||n.state==="ready")("loading",s.loadingProjectPid()===n.pid),Y(),We(s.loadingProjectPid()===n.pid?1:-1),Y(2),tt("working-name",n.state==="working")("ready-name",n.state==="ready"),Y(),Ka(" [",r+1,"] ",n.name," "),Y(),tt("status-working",n.state==="working")("status-ready",n.state==="ready")("status-offline",n.state==="offline"),Y(),Se(" [",n.state.toUpperCase(),"] "),Y(),We(n.claude_active?7:-1),Y(2),ms("status",n.state),Y(3),Se("Path: ",n.workspace_path),Y(2),Se("PID: ",n.pid),Y(),We(n.has_terminal?15:-1),Y(),We(n.state==="offline"||n.state==="ready"?16:-1),Y(),We(s.terminalService.isTerminalOpen(n.pid)?17:-1)}}function LI(e,t){e&1&&(U(0,"div",17),W(1," No hay proyectos VS Code activos"),It(2,"br"),W(3," Abre un proyecto en VS Code para verlo aqu\xED "),V())}function FI(e,t){if(e&1&&(U(0,"div",7)(1,"div",26)(2,"h2"),W(3,"PROYECTOS ACTIVOS"),V(),U(4,"div",27),W(5),V()(),U(6,"div",28)(7,"div",29)(8,"div",30),W(9,"CPU TOTAL"),V(),U(10,"div",31),W(11),V()(),U(12,"div",29)(13,"div",30),W(14,"MEMORIA"),V(),U(15,"div",31),W(16),V()(),U(17,"div",29)(18,"div",30),W(19,"TERMINALES"),V(),U(20,"div",31),W(21),V()()(),U(22,"div",32),dr(23,PI,18,31,null,null,Uv,!1,LI,4,0,"div",17),V()()),e&2){let n=De();Y(5),Ft(n.currentTime()),Y(6),Se("",n.metrics().cpu.toFixed(1),"%"),Y(5),Se("",n.metrics().ram.toFixed(1),"%"),Y(5),Ft(n.metrics().terminals),Y(2),hr(n.projects())}}function BI(e,t){e&1&&(U(0,"div",46),It(1,"div",48),U(2,"p",49),W(3," Detecting Claude Code processes..."),It(4,"br"),W(5," This may take 16-20 seconds "),V()())}function jI(e,t){if(e&1){let n=Zt();U(0,"div",47)(1,"p"),W(2),V(),U(3,"button",14),ze("click",function(){ct(n);let s=De(2);return lt(s.claudeService.clearError())}),W(4," DISMISS "),V()()}if(e&2){let n=De(2);Y(2),Ft(n.claudeService.error())}}function VI(e,t){if(e&1&&(U(0,"p",51),W(1),V()),e&2){let n=De(3);Y(),Se(" Last update: ",n.claudeService.lastUpdate()," ")}}function HI(e,t){if(e&1&&(U(0,"div",57)(1,"div",58)(2,"span",59),W(3),V(),U(4,"span",60),W(5),V()(),U(6,"div",61)(7,"div")(8,"strong"),W(9,"Name:"),V(),W(10),V(),U(11,"div")(12,"strong"),W(13,"Working Dir:"),V(),W(14),V(),U(15,"div")(16,"strong"),W(17,"CPU:"),V(),W(18),V(),U(19,"div")(20,"strong"),W(21,"Memory:"),V(),W(22),V()(),U(23,"div",62)(24,"strong"),W(25,"Command:"),V(),U(26,"code"),W(27),V()()()),e&2){let n=t.$implicit;tt("active",n.is_active)("idle",!n.is_active),Y(2),tt("status-running",n.is_active)("status-idle",!n.is_active),Y(),Se(" [",n.status.toUpperCase(),"] "),Y(2),Se("PID: ",n.pid),Y(5),Se(" ",n.name),Y(4),Se(" ",n.cwd),Y(4),Se(" ",n.cpu_percent,"%"),Y(4),Se(" ",n.memory_mb," MB"),Y(5),Se("",n.cmdline.substring(0,100),"...")}}function UI(e,t){e&1&&(U(0,"div",17),W(1," No Claude Code terminals detected"),It(2,"br"),W(3," Open a Claude Code terminal and click REFRESH "),V())}function $I(e,t){if(e&1&&(U(0,"div")(1,"strong"),W(2,"Tokens:"),V(),W(3),V()),e&2){let n=De().$implicit;Y(3),Se(" ",n.token_usage.total)}}function WI(e,t){if(e&1&&(U(0,"div")(1,"strong"),W(2,"Last activity:"),V(),W(3),V()),e&2){let n=De().$implicit;Y(3),Se(" ",n.seconds_since_last_event,"s ago")}}function zI(e,t){if(e&1&&(U(0,"div",56)(1,"div",63)(2,"span",64),W(3),V(),U(4,"span",65),W(5),V()(),U(6,"div",66)(7,"div")(8,"strong"),W(9,"Events:"),V(),W(10),V(),$e(11,$I,4,1,"div"),$e(12,WI,4,1,"div"),V()()),e&2){let n=t.$implicit;Y(3),Ft(n.project),Y(),tt("state-idle",n.state==="idle")("state-running",n.state==="generating"||n.state==="executing_tool")("state-error",n.state==="error"),Y(),Se(" [",n.state.toUpperCase(),"] "),Y(5),Se(" ",n.event_count),Y(),We(n.token_usage?11:-1),Y(),We(n.seconds_since_last_event!==void 0?12:-1)}}function GI(e,t){e&1&&(U(0,"div",17),W(1," No active sessions found "),V())}function qI(e,t){if(e&1&&(U(0,"div",50)(1,"h3"),W(2),V(),$e(3,VI,2,1,"p",51),U(4,"div",52),dr(5,HI,28,15,"div",53,Uv,!1,UI,4,0,"div",17),V()(),U(8,"div",54)(9,"h3"),W(10),V(),U(11,"div",55),dr(12,zI,13,11,"div",56,CI,!1,GI,2,0,"div",17),V()()),e&2){let n=De(2);Y(2),Se("DETECTED TERMINALS (",n.claudeService.terminals().length,")"),Y(),We(n.claudeService.lastUpdate()?3:-1),Y(2),hr(n.claudeService.terminals()),Y(5),Se("ACTIVE SESSIONS (",n.claudeService.sessions().length,")"),Y(2),hr(n.claudeService.sessions())}}function KI(e,t){if(e&1){let n=Zt();U(0,"div",6)(1,"div",26)(2,"h2"),W(3,"CLAUDE CODE TERMINALS"),V(),U(4,"button",14),ze("click",function(){ct(n);let s=De();return lt(s.refreshClaudeTerminals())}),W(5," REFRESH "),V()(),$e(6,BI,6,0,"div",46),$e(7,jI,5,1,"div",47),$e(8,qI,15,5),V()}if(e&2){let n=De();Y(6),We(n.claudeService.isLoading()?6:-1),Y(),We(n.claudeService.error()?7:-1),Y(),We(!n.claudeService.isLoading()&&!n.claudeService.error()?8:-1)}}var Uc=class e{api=P(kc);ws=P(Pc);claudeService=P(Lc);terminalService=P(Fc);activeTab=be("proyectos");facts=be([]);newFactText="";newFactCategory="general";promptText=be("");tools=be([]);projects=be([]);metrics=be({cpu:0,ram:0,terminals:0});currentTime=be(new Date().toLocaleTimeString());loadingProjectPid=be(null);clockInterval;ngOnInit(){this.ws.connect(),this.ws.messages$.subscribe(t=>{t.type==="update"&&(this.projects.set(t.data.projects),this.metrics.set(t.data.metrics))}),this.clockInterval=setInterval(()=>{this.currentTime.set(new Date().toLocaleTimeString())},1e3),this.loadTabData()}ngOnDestroy(){this.ws.disconnect(),this.clockInterval&&clearInterval(this.clockInterval)}setActiveTab(t){this.activeTab.set(t),this.loadTabData()}loadTabData(){let t=this.activeTab();t==="memorias"?this.api.getFacts().subscribe(n=>this.facts.set(n.facts)):t==="prompts"?this.api.getPrompt().subscribe(n=>this.promptText.set(n.prompt)):t==="herramientas"?this.api.getTools().subscribe(n=>this.tools.set(n.tools)):t==="proyectos"?(this.api.getProjects().subscribe(n=>this.projects.set(n.projects)),this.api.getMetrics().subscribe(n=>this.metrics.set(n))):t==="claude-terminals"&&(this.claudeService.getTerminals().subscribe(),this.claudeService.getSessions().subscribe())}onProjectClick(t){t.state==="offline"?(this.loadingProjectPid.set(t.pid),this.api.openTerminal(t.workspace_path,t.pid,t.name).subscribe({next:n=>{console.log("Terminal created:",n),this.terminalService.openTerminal(t.pid),setTimeout(()=>{this.api.getProjects().subscribe(r=>{this.projects.set(r.projects),this.loadingProjectPid.set(null)})},1e3)},error:n=>{console.error("Error creating terminal:",n),alert("Error al crear terminal: "+n.message),this.loadingProjectPid.set(null)}})):(t.state==="ready"||t.state==="working")&&this.terminalService.toggleTerminal(t.pid)}refreshClaudeTerminals(){this.claudeService.refresh()}addFact(){if(!this.newFactText.trim())return;let t={fact:this.newFactText,category:this.newFactCategory};this.api.addFact(t).subscribe(()=>{this.api.getFacts().subscribe(n=>this.facts.set(n.facts)),this.newFactText=""})}deleteFact(t){this.api.deleteFact(t).subscribe(()=>{this.api.getFacts().subscribe(n=>this.facts.set(n.facts))})}savePrompt(){this.api.updatePrompt(this.promptText()).subscribe(()=>{alert("Prompt guardado (requiere reiniciar agente)")})}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=hn({type:e,selectors:[["app-root"]],decls:23,vars:15,consts:[[1,"sendell-container"],[1,"sendell-header"],[1,"live-indicator"],[1,"sendell-tabs"],[3,"click"],[1,"sendell-content"],[1,"tab-panel"],[1,"tab-panel","proyectos-layout"],[1,"add-fact-form"],["type","text","placeholder","Nuevo fact...",1,"cyber-input",3,"ngModelChange","ngModel"],[1,"cyber-select",3,"ngModelChange","ngModel"],["value","general"],["value","work"],["value","personal"],[1,"cyber-button",3,"click"],[1,"facts-list"],[1,"fact-card"],[1,"empty-state"],[1,"fact-category"],[1,"fact-text"],[1,"delete-button",3,"click"],["rows","20",1,"cyber-textarea",3,"ngModelChange","ngModel"],[1,"tools-list"],[1,"tool-card"],[1,"tool-name"],[1,"tool-desc"],[1,"proyectos-header"],[1,"clock"],[1,"metrics-panel"],[1,"metric-card"],[1,"metric-label"],[1,"metric-value"],[1,"projects-list"],[1,"project-card",3,"click"],[1,"loading-overlay"],[1,"project-header"],[1,"project-name"],[1,"project-status"],[1,"claude-indicator"],[1,"activity-graph-container"],[3,"status"],[1,"project-info"],[1,"click-hint"],[3,"projectPid","workspacePath","projectName"],[1,"loading-spinner-project"],[1,"loading-text-project"],[1,"loading-container"],[1,"error-panel"],[1,"loading-spinner"],[1,"loading-text"],[1,"terminals-section"],[1,"last-update"],[1,"terminals-list"],[1,"terminal-card",3,"active","idle"],[1,"sessions-section"],[1,"sessions-list"],[1,"session-card"],[1,"terminal-card"],[1,"terminal-header"],[1,"terminal-status"],[1,"terminal-pid"],[1,"terminal-info"],[1,"terminal-cmdline"],[1,"session-header"],[1,"session-project"],[1,"session-state"],[1,"session-info"]],template:function(n,r){n&1&&(U(0,"div",0)(1,"header",1)(2,"h1"),W(3,"SENDELL CEREBRO"),V(),U(4,"span",2),W(5,"\u25CF LIVE"),V()(),U(6,"nav",3)(7,"button",4),ze("click",function(){return r.setActiveTab("memorias")}),W(8," MEMORIAS "),V(),U(9,"button",4),ze("click",function(){return r.setActiveTab("prompts")}),W(10," PROMPTS "),V(),U(11,"button",4),ze("click",function(){return r.setActiveTab("herramientas")}),W(12," HERRAMIENTAS "),V(),U(13,"button",4),ze("click",function(){return r.setActiveTab("proyectos")}),W(14," PROYECTOS "),V(),U(15,"button",4),ze("click",function(){return r.setActiveTab("claude-terminals")}),W(16," CLAUDE CODE "),V()(),U(17,"main",5),$e(18,EI,18,3,"div",6),$e(19,DI,6,1,"div",6),$e(20,MI,7,1,"div",6),$e(21,FI,26,5,"div",7),$e(22,KI,9,3,"div",6),V()()),n&2&&(Y(7),tt("active",r.activeTab()==="memorias"),Y(2),tt("active",r.activeTab()==="prompts"),Y(2),tt("active",r.activeTab()==="herramientas"),Y(2),tt("active",r.activeTab()==="proyectos"),Y(2),tt("active",r.activeTab()==="claude-terminals"),Y(3),We(r.activeTab()==="memorias"?18:-1),Y(),We(r.activeTab()==="prompts"?19:-1),Y(),We(r.activeTab()==="herramientas"?20:-1),Y(),We(r.activeTab()==="proyectos"?21:-1),Y(),We(r.activeTab()==="claude-terminals"?22:-1))},dependencies:[hi,Lv,Nv,Pv,Rc,Nc,Av,qh,Bc,Hc],styles:[".sendell-container[_ngcontent-%COMP%]{background:#000;color:#fff;font-family:Courier New,monospace;min-height:100vh;overflow-x:hidden}.sendell-header[_ngcontent-%COMP%]{background:#000;padding:1rem 2rem;border-bottom:2px solid #00ff00;box-shadow:0 0 10px #00ff004d;display:flex;justify-content:space-between;align-items:center}.sendell-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#0f0;font-size:1.5rem;margin:0}.sendell-header[_ngcontent-%COMP%]   .live-indicator[_ngcontent-%COMP%]{color:#0ff;font-size:.9rem;animation:_ngcontent-%COMP%_pulse 2s infinite}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.5}}@keyframes _ngcontent-%COMP%_border-pulse-red{0%,to{box-shadow:0 0 20px #f059,0 0 40px #f056,0 0 60px #f053,inset 0 0 20px #ff00551a}50%{box-shadow:0 0 30px #f05c,0 0 60px #f059,0 0 90px #ff00554d,inset 0 0 30px #f053}}@keyframes _ngcontent-%COMP%_border-pulse-cyan{0%,to{box-shadow:0 0 20px #0ff9,0 0 40px #0ff6,0 0 60px #0ff3,inset 0 0 20px #00ffff1a}50%{box-shadow:0 0 30px #0ffc,0 0 60px #0ff9,0 0 90px #00ffff4d,inset 0 0 30px #0ff3}}.sendell-tabs[_ngcontent-%COMP%]{display:flex;gap:.5rem;padding:1rem 2rem;background:#0a0a0a;border-bottom:1px solid #2a2a2a}.sendell-tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#000;color:#0f0;border:1px solid #00ff00;padding:.75rem 1.5rem;font-family:Courier New,monospace;font-size:.9rem;cursor:pointer;transition:all .3s}.sendell-tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#00ff001a;box-shadow:0 0 5px #00ff0080}.sendell-tabs[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background:#0f03;box-shadow:0 0 10px #00ff0080;border-color:#0ff;color:#0ff}.sendell-content[_ngcontent-%COMP%]{padding:2rem}.tab-panel[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#0f0;font-size:1.3rem;margin-bottom:1.5rem;text-transform:uppercase}.cyber-input[_ngcontent-%COMP%], .cyber-select[_ngcontent-%COMP%], .cyber-textarea[_ngcontent-%COMP%]{background:#0a0a0a;border:1px solid #00ff00;color:#fff;padding:.75rem;font-family:Courier New,monospace;font-size:.9rem}.cyber-input[_ngcontent-%COMP%]:focus, .cyber-select[_ngcontent-%COMP%]:focus, .cyber-textarea[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 0 5px #00ff0080}.cyber-input[_ngcontent-%COMP%]{width:100%;max-width:400px}.cyber-select[_ngcontent-%COMP%]{width:150px;margin-left:.5rem}.cyber-textarea[_ngcontent-%COMP%]{width:100%;resize:vertical}.cyber-button[_ngcontent-%COMP%]{background:#000;color:#0f0;border:1px solid #00ff00;padding:.75rem 1.5rem;font-family:Courier New,monospace;cursor:pointer;margin-left:.5rem;transition:all .3s}.cyber-button[_ngcontent-%COMP%]:hover{background:#0f03;box-shadow:0 0 10px #00ff0080}.add-fact-form[_ngcontent-%COMP%]{display:flex;gap:.5rem;margin-bottom:2rem;align-items:center}.facts-list[_ngcontent-%COMP%]{display:grid;gap:1rem}.fact-card[_ngcontent-%COMP%]{background:#0a0a0a;border:1px solid #2a2a2a;border-left:3px solid #00ffff;padding:1rem;display:grid;grid-template-columns:100px 1fr auto;align-items:center;gap:1rem}.fact-card[_ngcontent-%COMP%]   .fact-category[_ngcontent-%COMP%]{color:#0ff;font-weight:700;text-transform:uppercase;font-size:.8rem}.fact-card[_ngcontent-%COMP%]   .fact-text[_ngcontent-%COMP%]{color:#fff}.fact-card[_ngcontent-%COMP%]   .delete-button[_ngcontent-%COMP%]{background:transparent;color:#f05;border:1px solid #ff0055;padding:.5rem 1rem;font-family:Courier New,monospace;cursor:pointer;font-size:.8rem}.fact-card[_ngcontent-%COMP%]   .delete-button[_ngcontent-%COMP%]:hover{background:#f053}.tools-list[_ngcontent-%COMP%]{display:grid;gap:1rem}.tool-card[_ngcontent-%COMP%]{background:#0a0a0a;border:1px solid #2a2a2a;border-left:3px solid #00ff00;padding:1rem}.tool-card[_ngcontent-%COMP%]   .tool-name[_ngcontent-%COMP%]{color:#0f0;font-weight:700;margin-bottom:.5rem}.tool-card[_ngcontent-%COMP%]   .tool-desc[_ngcontent-%COMP%]{color:#888;font-size:.9rem}.proyectos-layout[_ngcontent-%COMP%]   .proyectos-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem}.proyectos-layout[_ngcontent-%COMP%]   .proyectos-header[_ngcontent-%COMP%]   .clock[_ngcontent-%COMP%]{color:#0ff;font-size:1.2rem}.metrics-panel[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:1rem;margin-bottom:2rem}.metric-card[_ngcontent-%COMP%]{background:#0a0a0a;border:2px solid #2a2a2a;padding:1.5rem;text-align:center}.metric-card[_ngcontent-%COMP%]   .metric-label[_ngcontent-%COMP%]{color:#888;font-size:.9rem;margin-bottom:.5rem}.metric-card[_ngcontent-%COMP%]   .metric-value[_ngcontent-%COMP%]{color:#0ff;font-size:2rem;font-weight:700}.projects-list[_ngcontent-%COMP%]{display:grid;gap:1rem}.project-card[_ngcontent-%COMP%]{background:#0a0a0a;border:2px solid #2a2a2a;padding:1.5rem;transition:all .3s;position:relative}.project-card.working[_ngcontent-%COMP%]{border-color:#0f0;box-shadow:0 0 10px #00ff004d}.project-card.ready[_ngcontent-%COMP%]{border-color:#0ff;box-shadow:0 0 10px #00ffff4d}.project-card.offline[_ngcontent-%COMP%]{border-color:#f05;box-shadow:0 0 10px #f053}.project-card.clickable[_ngcontent-%COMP%]{cursor:pointer}.project-card.clickable.offline[_ngcontent-%COMP%]:hover{transform:translateY(-3px);border-color:#f05;box-shadow:0 0 20px #f059,0 0 40px #f056,0 0 60px #f053,inset 0 0 20px #ff00551a;animation:_ngcontent-%COMP%_border-pulse-red 1.5s ease-in-out infinite}.project-card.clickable.ready[_ngcontent-%COMP%]:hover{transform:translateY(-3px);border-color:#0ff;box-shadow:0 0 20px #0ff9,0 0 40px #0ff6,0 0 60px #0ff3,inset 0 0 20px #00ffff1a;animation:_ngcontent-%COMP%_border-pulse-cyan 1.5s ease-in-out infinite}.project-card.loading[_ngcontent-%COMP%]{pointer-events:none;opacity:.7}.project-card[_ngcontent-%COMP%]   .project-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}.project-card[_ngcontent-%COMP%]   .project-header[_ngcontent-%COMP%]   .project-name[_ngcontent-%COMP%]{color:#f05;font-size:1.1rem;font-weight:700}.project-card[_ngcontent-%COMP%]   .project-header[_ngcontent-%COMP%]   .project-name.working-name[_ngcontent-%COMP%]{color:#0f0}.project-card[_ngcontent-%COMP%]   .project-header[_ngcontent-%COMP%]   .project-name.ready-name[_ngcontent-%COMP%]{color:#0ff}.project-card[_ngcontent-%COMP%]   .project-header[_ngcontent-%COMP%]   .project-status[_ngcontent-%COMP%]{color:#f05;font-size:.9rem;display:flex;align-items:center;gap:.5rem}.project-card[_ngcontent-%COMP%]   .project-header[_ngcontent-%COMP%]   .project-status.status-working[_ngcontent-%COMP%]{color:#0f0}.project-card[_ngcontent-%COMP%]   .project-header[_ngcontent-%COMP%]   .project-status.status-ready[_ngcontent-%COMP%]{color:#0ff}.project-card[_ngcontent-%COMP%]   .project-header[_ngcontent-%COMP%]   .project-status.status-offline[_ngcontent-%COMP%]{color:#f05}.project-card[_ngcontent-%COMP%]   .project-header[_ngcontent-%COMP%]   .project-status[_ngcontent-%COMP%]   .claude-indicator[_ngcontent-%COMP%]{background:#00ff001a;color:#0f0;padding:.25rem .5rem;border-radius:3px;font-size:.75rem;border:1px solid #00ff00}.project-card[_ngcontent-%COMP%]   .activity-graph-container[_ngcontent-%COMP%]{width:100%;height:120px;margin-bottom:1rem;background:#0a0a0a;border:1px solid #1a1a1a;border-radius:4px;overflow:hidden}.project-card[_ngcontent-%COMP%]   .project-info[_ngcontent-%COMP%]{color:#888;font-size:.85rem;display:grid;gap:.25rem}.project-card[_ngcontent-%COMP%]   .project-info[_ngcontent-%COMP%]   .click-hint[_ngcontent-%COMP%]{color:#f05;font-style:italic;margin-top:.5rem;animation:_ngcontent-%COMP%_pulse 2s infinite}.empty-state[_ngcontent-%COMP%]{text-align:center;color:#888;padding:3rem;font-size:1.1rem}.loading-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#000000d9;display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:10;border-radius:4px}.loading-spinner-project[_ngcontent-%COMP%]{width:60px;height:60px;border:5px solid rgba(255,0,85,.2);border-top:5px solid #ff0055;border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite;margin-bottom:1rem}.loading-text-project[_ngcontent-%COMP%]{color:#f05;font-size:1rem;text-transform:uppercase;animation:_ngcontent-%COMP%_pulse 1.5s ease-in-out infinite}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:3rem;gap:1rem}.loading-container[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]{width:50px;height:50px;border:4px solid rgba(0,255,0,.1);border-top:4px solid #00ff00;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}.loading-container[_ngcontent-%COMP%]   .loading-text[_ngcontent-%COMP%]{color:#0ff;text-align:center;font-size:.9rem;line-height:1.6}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.error-panel[_ngcontent-%COMP%]{background:#ff00551a;border:1px solid #ff0055;border-radius:4px;padding:1rem;margin-bottom:1rem;display:flex;justify-content:space-between;align-items:center}.error-panel[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#f05}.terminals-section[_ngcontent-%COMP%], .sessions-section[_ngcontent-%COMP%]{margin-bottom:2rem}.terminals-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .sessions-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#0ff;font-size:1.2rem;margin-bottom:1rem;border-bottom:1px solid rgba(0,255,255,.3);padding-bottom:.5rem}.terminals-section[_ngcontent-%COMP%]   .last-update[_ngcontent-%COMP%], .sessions-section[_ngcontent-%COMP%]   .last-update[_ngcontent-%COMP%]{color:#888;font-size:.8rem;margin-bottom:1rem}.terminals-list[_ngcontent-%COMP%], .sessions-list[_ngcontent-%COMP%]{display:grid;gap:1rem}.terminal-card[_ngcontent-%COMP%]{background:#0a0a0a;border:1px solid #888888;border-radius:4px;padding:1rem;transition:all .3s ease}.terminal-card.active[_ngcontent-%COMP%]{border-color:#0f0;box-shadow:0 0 10px #00ff004d}.terminal-card.idle[_ngcontent-%COMP%]{border-color:#0ff;box-shadow:0 0 10px #0ff3}.terminal-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #0f06}.terminal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem;padding-bottom:.5rem;border-bottom:1px solid rgba(255,255,255,.1)}.terminal-status[_ngcontent-%COMP%]{font-weight:700;padding:.25rem .75rem;border-radius:3px;font-size:.85rem}.terminal-status.status-running[_ngcontent-%COMP%]{background:#0f03;color:#0f0;border:1px solid #00ff00}.terminal-status.status-idle[_ngcontent-%COMP%]{background:#0ff3;color:#0ff;border:1px solid #00ffff}.terminal-pid[_ngcontent-%COMP%]{color:#888;font-size:.85rem;font-family:Courier New,monospace}.terminal-info[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:.75rem;margin-bottom:1rem}.terminal-info[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{color:#fff;font-size:.85rem}.terminal-info[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#0ff;margin-right:.5rem}.terminal-cmdline[_ngcontent-%COMP%]{background:#00000080;padding:.75rem;border-radius:3px;border:1px solid rgba(255,255,255,.1)}.terminal-cmdline[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#0ff;display:block;margin-bottom:.5rem}.terminal-cmdline[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{color:#888;font-size:.75rem;word-break:break-all;font-family:Courier New,monospace}.session-card[_ngcontent-%COMP%]{background:#0a0a0a;border:1px solid #888888;border-radius:4px;padding:1rem;transition:all .3s ease}.session-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);border-color:#0ff;box-shadow:0 4px 12px #00ffff4d}.session-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem;padding-bottom:.5rem;border-bottom:1px solid rgba(255,255,255,.1)}.session-project[_ngcontent-%COMP%]{color:#0f0;font-weight:700;font-size:1rem}.session-state[_ngcontent-%COMP%]{font-weight:700;padding:.25rem .75rem;border-radius:3px;font-size:.85rem}.session-state.state-idle[_ngcontent-%COMP%]{background:#0ff3;color:#0ff;border:1px solid #00ffff}.session-state.state-running[_ngcontent-%COMP%]{background:#0f03;color:#0f0;border:1px solid #00ff00}.session-state.state-error[_ngcontent-%COMP%]{background:#f053;color:#f05;border:1px solid #ff0055}.session-info[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:.75rem}.session-info[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{color:#fff;font-size:.85rem}.session-info[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#0ff;margin-right:.5rem}"]})};th(Uc,hv).catch(e=>console.error(e));
