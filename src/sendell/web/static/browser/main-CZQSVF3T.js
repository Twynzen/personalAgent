var cy=Object.create;var nl=Object.defineProperty,ly=Object.defineProperties,uy=Object.getOwnPropertyDescriptor,dy=Object.getOwnPropertyDescriptors,hy=Object.getOwnPropertyNames,df=Object.getOwnPropertySymbols,fy=Object.getPrototypeOf,ff=Object.prototype.hasOwnProperty,py=Object.prototype.propertyIsEnumerable;var hf=(e,t,n)=>t in e?nl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,z=(e,t)=>{for(var n in t||={})ff.call(t,n)&&hf(e,n,t[n]);if(df)for(var n of df(t))py.call(t,n)&&hf(e,n,t[n]);return e},ye=(e,t)=>ly(e,dy(t));var uo=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var gy=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of hy(t))!ff.call(e,s)&&s!==n&&nl(e,s,{get:()=>t[s],enumerable:!(r=uy(t,s))||r.enumerable});return e};var ho=(e,t,n)=>(n=e!=null?cy(fy(e)):{},gy(t||!e||!e.__esModule?nl(n,"default",{value:e,enumerable:!0}):n,e));var Zv=uo((Yc,rf)=>{"use strict";(function(e,t){if(typeof Yc=="object"&&typeof rf=="object")rf.exports=t();else if(typeof define=="function"&&define.amd)define([],t);else{var n=t();for(var r in n)(typeof Yc=="object"?Yc:e)[r]=n[r]}})(globalThis,()=>(()=>{"use strict";var e={4567:function(s,i,o){var a=this&&this.__decorate||function(f,h,v,b){var C,S=arguments.length,y=S<3?h:b===null?b=Object.getOwnPropertyDescriptor(h,v):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(f,h,v,b);else for(var w=f.length-1;w>=0;w--)(C=f[w])&&(y=(S<3?C(y):S>3?C(h,v,y):C(h,v))||y);return S>3&&y&&Object.defineProperty(h,v,y),y},c=this&&this.__param||function(f,h){return function(v,b){h(v,b,f)}};Object.defineProperty(i,"__esModule",{value:!0}),i.AccessibilityManager=void 0;let l=o(9042),p=o(9924),m=o(844),_=o(4725),d=o(2585),u=o(3656),g=i.AccessibilityManager=class extends m.Disposable{constructor(f,h,v,b){super(),this._terminal=f,this._coreBrowserService=v,this._renderService=b,this._rowColumns=new WeakMap,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=this._coreBrowserService.mainDocument.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=this._coreBrowserService.mainDocument.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let C=0;C<this._terminal.rows;C++)this._rowElements[C]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[C]);if(this._topBoundaryFocusListener=C=>this._handleBoundaryFocus(C,0),this._bottomBoundaryFocusListener=C=>this._handleBoundaryFocus(C,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=this._coreBrowserService.mainDocument.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new p.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(C=>this._handleResize(C.rows))),this.register(this._terminal.onRender(C=>this._refreshRows(C.start,C.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(C=>this._handleChar(C))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(C=>this._handleTab(C))),this.register(this._terminal.onKey(C=>this._handleKey(C.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this.register((0,u.addDisposableDomListener)(document,"selectionchange",()=>this._handleSelectionChange())),this.register(this._coreBrowserService.onDprChange(()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,m.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(f){for(let h=0;h<f;h++)this._handleChar(" ")}_handleChar(f){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==f&&(this._charsToAnnounce+=f):this._charsToAnnounce+=f,f===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=l.tooMuchOutput)))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0}_handleKey(f){this._clearLiveRegion(),new RegExp("\\p{Control}","u").test(f)||this._charsToConsume.push(f)}_refreshRows(f,h){this._liveRegionDebouncer.refresh(f,h,this._terminal.rows)}_renderRows(f,h){let v=this._terminal.buffer,b=v.lines.length.toString();for(let C=f;C<=h;C++){let S=v.lines.get(v.ydisp+C),y=[],w=S?.translateToString(!0,void 0,void 0,y)||"",E=(v.ydisp+C+1).toString(),T=this._rowElements[C];T&&(w.length===0?(T.innerText="\xA0",this._rowColumns.set(T,[0,1])):(T.textContent=w,this._rowColumns.set(T,y)),T.setAttribute("aria-posinset",E),T.setAttribute("aria-setsize",b))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(f,h){let v=f.target,b=this._rowElements[h===0?1:this._rowElements.length-2];if(v.getAttribute("aria-posinset")===(h===0?"1":`${this._terminal.buffer.lines.length}`)||f.relatedTarget!==b)return;let C,S;if(h===0?(C=v,S=this._rowElements.pop(),this._rowContainer.removeChild(S)):(C=this._rowElements.shift(),S=v,this._rowContainer.removeChild(C)),C.removeEventListener("focus",this._topBoundaryFocusListener),S.removeEventListener("focus",this._bottomBoundaryFocusListener),h===0){let y=this._createAccessibilityTreeNode();this._rowElements.unshift(y),this._rowContainer.insertAdjacentElement("afterbegin",y)}else{let y=this._createAccessibilityTreeNode();this._rowElements.push(y),this._rowContainer.appendChild(y)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(h===0?-1:1),this._rowElements[h===0?1:this._rowElements.length-2].focus(),f.preventDefault(),f.stopImmediatePropagation()}_handleSelectionChange(){if(this._rowElements.length===0)return;let f=document.getSelection();if(!f)return;if(f.isCollapsed)return void(this._rowContainer.contains(f.anchorNode)&&this._terminal.clearSelection());if(!f.anchorNode||!f.focusNode)return void console.error("anchorNode and/or focusNode are null");let h={node:f.anchorNode,offset:f.anchorOffset},v={node:f.focusNode,offset:f.focusOffset};if((h.node.compareDocumentPosition(v.node)&Node.DOCUMENT_POSITION_PRECEDING||h.node===v.node&&h.offset>v.offset)&&([h,v]=[v,h]),h.node.compareDocumentPosition(this._rowElements[0])&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_FOLLOWING)&&(h={node:this._rowElements[0].childNodes[0],offset:0}),!this._rowContainer.contains(h.node))return;let b=this._rowElements.slice(-1)[0];if(v.node.compareDocumentPosition(b)&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_PRECEDING)&&(v={node:b,offset:b.textContent?.length??0}),!this._rowContainer.contains(v.node))return;let C=({node:w,offset:E})=>{let T=w instanceof Text?w.parentNode:w,I=parseInt(T?.getAttribute("aria-posinset"),10)-1;if(isNaN(I))return console.warn("row is invalid. Race condition?"),null;let M=this._rowColumns.get(T);if(!M)return console.warn("columns is null. Race condition?"),null;let R=E<M.length?M[E]:M.slice(-1)[0]+1;return R>=this._terminal.cols&&(++I,R=0),{row:I,column:R}},S=C(h),y=C(v);if(S&&y){if(S.row>y.row||S.row===y.row&&S.column>=y.column)throw new Error("invalid range");this._terminal.select(S.column,S.row,(y.row-S.row)*this._terminal.cols-S.column+y.column)}}_handleResize(f){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let h=this._rowContainer.children.length;h<this._terminal.rows;h++)this._rowElements[h]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[h]);for(;this._rowElements.length>f;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){let f=this._coreBrowserService.mainDocument.createElement("div");return f.setAttribute("role","listitem"),f.tabIndex=-1,this._refreshRowDimensions(f),f}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let f=0;f<this._terminal.rows;f++)this._refreshRowDimensions(this._rowElements[f])}}_refreshRowDimensions(f){f.style.height=`${this._renderService.dimensions.css.cell.height}px`}};i.AccessibilityManager=g=a([c(1,d.IInstantiationService),c(2,_.ICoreBrowserService),c(3,_.IRenderService)],g)},3614:(s,i)=>{function o(p){return p.replace(/\r?\n/g,"\r")}function a(p,m){return m?"\x1B[200~"+p+"\x1B[201~":p}function c(p,m,_,d){p=a(p=o(p),_.decPrivateModes.bracketedPasteMode&&d.rawOptions.ignoreBracketedPasteMode!==!0),_.triggerDataEvent(p,!0),m.value=""}function l(p,m,_){let d=_.getBoundingClientRect(),u=p.clientX-d.left-10,g=p.clientY-d.top-10;m.style.width="20px",m.style.height="20px",m.style.left=`${u}px`,m.style.top=`${g}px`,m.style.zIndex="1000",m.focus()}Object.defineProperty(i,"__esModule",{value:!0}),i.rightClickHandler=i.moveTextAreaUnderMouseCursor=i.paste=i.handlePasteEvent=i.copyHandler=i.bracketTextForPaste=i.prepareTextForTerminal=void 0,i.prepareTextForTerminal=o,i.bracketTextForPaste=a,i.copyHandler=function(p,m){p.clipboardData&&p.clipboardData.setData("text/plain",m.selectionText),p.preventDefault()},i.handlePasteEvent=function(p,m,_,d){p.stopPropagation(),p.clipboardData&&c(p.clipboardData.getData("text/plain"),m,_,d)},i.paste=c,i.moveTextAreaUnderMouseCursor=l,i.rightClickHandler=function(p,m,_,d,u){l(p,m,_),u&&d.rightClickSelect(p),m.value=d.selectionText,m.select()}},7239:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ColorContrastCache=void 0;let a=o(1505);i.ColorContrastCache=class{constructor(){this._color=new a.TwoKeyMap,this._css=new a.TwoKeyMap}setCss(c,l,p){this._css.set(c,l,p)}getCss(c,l){return this._css.get(c,l)}setColor(c,l,p){this._color.set(c,l,p)}getColor(c,l){return this._color.get(c,l)}clear(){this._color.clear(),this._css.clear()}}},3656:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.addDisposableDomListener=void 0,i.addDisposableDomListener=function(o,a,c,l){o.addEventListener(a,c,l);let p=!1;return{dispose:()=>{p||(p=!0,o.removeEventListener(a,c,l))}}}},3551:function(s,i,o){var a=this&&this.__decorate||function(g,f,h,v){var b,C=arguments.length,S=C<3?f:v===null?v=Object.getOwnPropertyDescriptor(f,h):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(g,f,h,v);else for(var y=g.length-1;y>=0;y--)(b=g[y])&&(S=(C<3?b(S):C>3?b(f,h,S):b(f,h))||S);return C>3&&S&&Object.defineProperty(f,h,S),S},c=this&&this.__param||function(g,f){return function(h,v){f(h,v,g)}};Object.defineProperty(i,"__esModule",{value:!0}),i.Linkifier=void 0;let l=o(3656),p=o(8460),m=o(844),_=o(2585),d=o(4725),u=i.Linkifier=class extends m.Disposable{get currentLink(){return this._currentLink}constructor(g,f,h,v,b){super(),this._element=g,this._mouseService=f,this._renderService=h,this._bufferService=v,this._linkProviderService=b,this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new p.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new p.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,m.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,m.toDisposable)(()=>{this._lastMouseEvent=void 0,this._activeProviderReplies?.clear()})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0})),this.register((0,l.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,l.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,l.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,l.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(g){this._lastMouseEvent=g;let f=this._positionFromMouseEvent(g,this._element,this._mouseService);if(!f)return;this._isMouseOut=!1;let h=g.composedPath();for(let v=0;v<h.length;v++){let b=h[v];if(b.classList.contains("xterm"))break;if(b.classList.contains("xterm-hover"))return}this._lastBufferCell&&f.x===this._lastBufferCell.x&&f.y===this._lastBufferCell.y||(this._handleHover(f),this._lastBufferCell=f)}_handleHover(g){if(this._activeLine!==g.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(g,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,g)||(this._clearCurrentLink(),this._askForLink(g,!0))}_askForLink(g,f){this._activeProviderReplies&&f||(this._activeProviderReplies?.forEach(v=>{v?.forEach(b=>{b.link.dispose&&b.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=g.y);let h=!1;for(let[v,b]of this._linkProviderService.linkProviders.entries())f?this._activeProviderReplies?.get(v)&&(h=this._checkLinkProviderResult(v,g,h)):b.provideLinks(g.y,C=>{if(this._isMouseOut)return;let S=C?.map(y=>({link:y}));this._activeProviderReplies?.set(v,S),h=this._checkLinkProviderResult(v,g,h),this._activeProviderReplies?.size===this._linkProviderService.linkProviders.length&&this._removeIntersectingLinks(g.y,this._activeProviderReplies)})}_removeIntersectingLinks(g,f){let h=new Set;for(let v=0;v<f.size;v++){let b=f.get(v);if(b)for(let C=0;C<b.length;C++){let S=b[C],y=S.link.range.start.y<g?0:S.link.range.start.x,w=S.link.range.end.y>g?this._bufferService.cols:S.link.range.end.x;for(let E=y;E<=w;E++){if(h.has(E)){b.splice(C--,1);break}h.add(E)}}}}_checkLinkProviderResult(g,f,h){if(!this._activeProviderReplies)return h;let v=this._activeProviderReplies.get(g),b=!1;for(let C=0;C<g;C++)this._activeProviderReplies.has(C)&&!this._activeProviderReplies.get(C)||(b=!0);if(!b&&v){let C=v.find(S=>this._linkAtPosition(S.link,f));C&&(h=!0,this._handleNewLink(C))}if(this._activeProviderReplies.size===this._linkProviderService.linkProviders.length&&!h)for(let C=0;C<this._activeProviderReplies.size;C++){let S=this._activeProviderReplies.get(C)?.find(y=>this._linkAtPosition(y.link,f));if(S){h=!0,this._handleNewLink(S);break}}return h}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(g){if(!this._currentLink)return;let f=this._positionFromMouseEvent(g,this._element,this._mouseService);f&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,f)&&this._currentLink.link.activate(g,this._currentLink.link.text)}_clearCurrentLink(g,f){this._currentLink&&this._lastMouseEvent&&(!g||!f||this._currentLink.link.range.start.y>=g&&this._currentLink.link.range.end.y<=f)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,m.disposeArray)(this._linkCacheDisposables))}_handleNewLink(g){if(!this._lastMouseEvent)return;let f=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);f&&this._linkAtPosition(g.link,f)&&(this._currentLink=g,this._currentLink.state={decorations:{underline:g.link.decorations===void 0||g.link.decorations.underline,pointerCursor:g.link.decorations===void 0||g.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,g.link,this._lastMouseEvent),g.link.decorations={},Object.defineProperties(g.link.decorations,{pointerCursor:{get:()=>this._currentLink?.state?.decorations.pointerCursor,set:h=>{this._currentLink?.state&&this._currentLink.state.decorations.pointerCursor!==h&&(this._currentLink.state.decorations.pointerCursor=h,this._currentLink.state.isHovered&&this._element.classList.toggle("xterm-cursor-pointer",h))}},underline:{get:()=>this._currentLink?.state?.decorations.underline,set:h=>{this._currentLink?.state&&this._currentLink?.state?.decorations.underline!==h&&(this._currentLink.state.decorations.underline=h,this._currentLink.state.isHovered&&this._fireUnderlineEvent(g.link,h))}}}),this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(h=>{if(!this._currentLink)return;let v=h.start===0?0:h.start+1+this._bufferService.buffer.ydisp,b=this._bufferService.buffer.ydisp+1+h.end;if(this._currentLink.link.range.start.y>=v&&this._currentLink.link.range.end.y<=b&&(this._clearCurrentLink(v,b),this._lastMouseEvent)){let C=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);C&&this._askForLink(C,!1)}})))}_linkHover(g,f,h){this._currentLink?.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(f,!0),this._currentLink.state.decorations.pointerCursor&&g.classList.add("xterm-cursor-pointer")),f.hover&&f.hover(h,f.text)}_fireUnderlineEvent(g,f){let h=g.range,v=this._bufferService.buffer.ydisp,b=this._createLinkUnderlineEvent(h.start.x-1,h.start.y-v-1,h.end.x,h.end.y-v-1,void 0);(f?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(b)}_linkLeave(g,f,h){this._currentLink?.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(f,!1),this._currentLink.state.decorations.pointerCursor&&g.classList.remove("xterm-cursor-pointer")),f.leave&&f.leave(h,f.text)}_linkAtPosition(g,f){let h=g.range.start.y*this._bufferService.cols+g.range.start.x,v=g.range.end.y*this._bufferService.cols+g.range.end.x,b=f.y*this._bufferService.cols+f.x;return h<=b&&b<=v}_positionFromMouseEvent(g,f,h){let v=h.getCoords(g,f,this._bufferService.cols,this._bufferService.rows);if(v)return{x:v[0],y:v[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(g,f,h,v,b){return{x1:g,y1:f,x2:h,y2:v,cols:this._bufferService.cols,fg:b}}};i.Linkifier=u=a([c(1,d.IMouseService),c(2,d.IRenderService),c(3,_.IBufferService),c(4,d.ILinkProviderService)],u)},9042:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.tooMuchOutput=i.promptLabel=void 0,i.promptLabel="Terminal input",i.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(s,i,o){var a=this&&this.__decorate||function(d,u,g,f){var h,v=arguments.length,b=v<3?u:f===null?f=Object.getOwnPropertyDescriptor(u,g):f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(d,u,g,f);else for(var C=d.length-1;C>=0;C--)(h=d[C])&&(b=(v<3?h(b):v>3?h(u,g,b):h(u,g))||b);return v>3&&b&&Object.defineProperty(u,g,b),b},c=this&&this.__param||function(d,u){return function(g,f){u(g,f,d)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OscLinkProvider=void 0;let l=o(511),p=o(2585),m=i.OscLinkProvider=class{constructor(d,u,g){this._bufferService=d,this._optionsService=u,this._oscLinkService=g}provideLinks(d,u){let g=this._bufferService.buffer.lines.get(d-1);if(!g)return void u(void 0);let f=[],h=this._optionsService.rawOptions.linkHandler,v=new l.CellData,b=g.getTrimmedLength(),C=-1,S=-1,y=!1;for(let w=0;w<b;w++)if(S!==-1||g.hasContent(w)){if(g.loadCell(w,v),v.hasExtendedAttrs()&&v.extended.urlId){if(S===-1){S=w,C=v.extended.urlId;continue}y=v.extended.urlId!==C}else S!==-1&&(y=!0);if(y||S!==-1&&w===b-1){let E=this._oscLinkService.getLinkData(C)?.uri;if(E){let T={start:{x:S+1,y:d},end:{x:w+(y||w!==b-1?0:1),y:d}},I=!1;if(!h?.allowNonHttpProtocols)try{let M=new URL(E);["http:","https:"].includes(M.protocol)||(I=!0)}catch{I=!0}I||f.push({text:E,range:T,activate:(M,R)=>h?h.activate(M,R,T):_(0,R),hover:(M,R)=>h?.hover?.(M,R,T),leave:(M,R)=>h?.leave?.(M,R,T)})}y=!1,v.hasExtendedAttrs()&&v.extended.urlId?(S=w,C=v.extended.urlId):(S=-1,C=-1)}}u(f)}};function _(d,u){if(confirm(`Do you want to navigate to ${u}?

WARNING: This link could potentially be dangerous`)){let g=window.open();if(g){try{g.opener=null}catch{}g.location.href=u}else console.warn("Opening link blocked as opener could not be cleared")}}i.OscLinkProvider=m=a([c(0,p.IBufferService),c(1,p.IOptionsService),c(2,p.IOscLinkService)],m)},6193:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.RenderDebouncer=void 0,i.RenderDebouncer=class{constructor(o,a){this._renderCallback=o,this._coreBrowserService=a,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(o){return this._refreshCallbacks.push(o),this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(o,a,c){this._rowCount=c,o=o!==void 0?o:0,a=a!==void 0?a:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,o):o,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,a):a,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();let o=Math.max(this._rowStart,0),a=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(o,a),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(let o of this._refreshCallbacks)o(0);this._refreshCallbacks=[]}}},3236:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Terminal=void 0;let a=o(3614),c=o(3656),l=o(3551),p=o(9042),m=o(3730),_=o(1680),d=o(3107),u=o(5744),g=o(2950),f=o(1296),h=o(428),v=o(4269),b=o(5114),C=o(8934),S=o(3230),y=o(9312),w=o(4725),E=o(6731),T=o(8055),I=o(8969),M=o(8460),R=o(844),P=o(6114),B=o(8437),F=o(2584),N=o(7399),D=o(5941),A=o(9074),O=o(2585),L=o(5435),V=o(4567),$=o(779);class J extends I.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(k={}){super(k),this.browser=P,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new R.MutableDisposable),this._onCursorMove=this.register(new M.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new M.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new M.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new M.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new M.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new M.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new M.EventEmitter),this._onBlur=this.register(new M.EventEmitter),this._onA11yCharEmitter=this.register(new M.EventEmitter),this._onA11yTabEmitter=this.register(new M.EventEmitter),this._onWillOpen=this.register(new M.EventEmitter),this._setup(),this._decorationService=this._instantiationService.createInstance(A.DecorationService),this._instantiationService.setService(O.IDecorationService,this._decorationService),this._linkProviderService=this._instantiationService.createInstance($.LinkProviderService),this._instantiationService.setService(w.ILinkProviderService,this._linkProviderService),this._linkProviderService.registerLinkProvider(this._instantiationService.createInstance(m.OscLinkProvider)),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((x,j)=>this.refresh(x,j))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(x=>this._reportWindowsOptions(x))),this.register(this._inputHandler.onColor(x=>this._handleColorEvent(x))),this.register((0,M.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,M.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,M.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,M.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(x=>this._afterResize(x.cols,x.rows))),this.register((0,R.toDisposable)(()=>{this._customKeyEventHandler=void 0,this.element?.parentNode?.removeChild(this.element)}))}_handleColorEvent(k){if(this._themeService)for(let x of k){let j,U="";switch(x.index){case 256:j="foreground",U="10";break;case 257:j="background",U="11";break;case 258:j="cursor",U="12";break;default:j="ansi",U="4;"+x.index}switch(x.type){case 0:let Y=T.color.toColorRGB(j==="ansi"?this._themeService.colors.ansi[x.index]:this._themeService.colors[j]);this.coreService.triggerDataEvent(`${F.C0.ESC}]${U};${(0,D.toRgbString)(Y)}${F.C1_ESCAPED.ST}`);break;case 1:if(j==="ansi")this._themeService.modifyColors(G=>G.ansi[x.index]=T.channels.toColor(...x.color));else{let G=j;this._themeService.modifyColors(he=>he[G]=T.channels.toColor(...x.color))}break;case 2:this._themeService.restoreColor(x.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(k){k?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(V.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(k){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(F.C0.ESC+"[I"),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){return this.textarea?.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(F.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;let k=this.buffer.ybase+this.buffer.y,x=this.buffer.lines.get(k);if(!x)return;let j=Math.min(this.buffer.x,this.cols-1),U=this._renderService.dimensions.css.cell.height,Y=x.getWidth(j),G=this._renderService.dimensions.css.cell.width*Y,he=this.buffer.y*this._renderService.dimensions.css.cell.height,ie=j*this._renderService.dimensions.css.cell.width;this.textarea.style.left=ie+"px",this.textarea.style.top=he+"px",this.textarea.style.width=G+"px",this.textarea.style.height=U+"px",this.textarea.style.lineHeight=U+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,c.addDisposableDomListener)(this.element,"copy",x=>{this.hasSelection()&&(0,a.copyHandler)(x,this._selectionService)}));let k=x=>(0,a.handlePasteEvent)(x,this.textarea,this.coreService,this.optionsService);this.register((0,c.addDisposableDomListener)(this.textarea,"paste",k)),this.register((0,c.addDisposableDomListener)(this.element,"paste",k)),P.isFirefox?this.register((0,c.addDisposableDomListener)(this.element,"mousedown",x=>{x.button===2&&(0,a.rightClickHandler)(x,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,c.addDisposableDomListener)(this.element,"contextmenu",x=>{(0,a.rightClickHandler)(x,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),P.isLinux&&this.register((0,c.addDisposableDomListener)(this.element,"auxclick",x=>{x.button===1&&(0,a.moveTextAreaUnderMouseCursor)(x,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,c.addDisposableDomListener)(this.textarea,"keyup",k=>this._keyUp(k),!0)),this.register((0,c.addDisposableDomListener)(this.textarea,"keydown",k=>this._keyDown(k),!0)),this.register((0,c.addDisposableDomListener)(this.textarea,"keypress",k=>this._keyPress(k),!0)),this.register((0,c.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,c.addDisposableDomListener)(this.textarea,"compositionupdate",k=>this._compositionHelper.compositionupdate(k))),this.register((0,c.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,c.addDisposableDomListener)(this.textarea,"input",k=>this._inputEvent(k),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(k){if(!k)throw new Error("Terminal requires a parent element.");if(k.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this.element?.ownerDocument.defaultView&&this._coreBrowserService)return void(this.element.ownerDocument.defaultView!==this._coreBrowserService.window&&(this._coreBrowserService.window=this.element.ownerDocument.defaultView));this._document=k.ownerDocument,this.options.documentOverride&&this.options.documentOverride instanceof Document&&(this._document=this.optionsService.rawOptions.documentOverride),this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),k.appendChild(this.element);let x=this._document.createDocumentFragment();this._viewportElement=this._document.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),x.appendChild(this._viewportElement),this._viewportScrollArea=this._document.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=this._document.createElement("div"),this.screenElement.classList.add("xterm-screen"),this.register((0,c.addDisposableDomListener)(this.screenElement,"mousemove",j=>this.updateCursorStyle(j))),this._helperContainer=this._document.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),x.appendChild(this.screenElement),this.textarea=this._document.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",p.promptLabel),P.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this.register(this._instantiationService.createInstance(b.CoreBrowserService,this.textarea,k.ownerDocument.defaultView??window,this._document??typeof window<"u"?window.document:null)),this._instantiationService.setService(w.ICoreBrowserService,this._coreBrowserService),this.register((0,c.addDisposableDomListener)(this.textarea,"focus",j=>this._handleTextAreaFocus(j))),this.register((0,c.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(h.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(w.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(E.ThemeService),this._instantiationService.setService(w.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(v.CharacterJoinerService),this._instantiationService.setService(w.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(S.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(w.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(j=>this._onRender.fire(j))),this.onResize(j=>this._renderService.resize(j.cols,j.rows)),this._compositionView=this._document.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(g.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this._mouseService=this._instantiationService.createInstance(C.MouseService),this._instantiationService.setService(w.IMouseService,this._mouseService),this.linkifier=this.register(this._instantiationService.createInstance(l.Linkifier,this.screenElement)),this.element.appendChild(x);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this.viewport=this._instantiationService.createInstance(_.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(j=>this.scrollLines(j.amount,j.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(y.SelectionService,this.element,this.screenElement,this.linkifier)),this._instantiationService.setService(w.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(j=>this.scrollLines(j.amount,j.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(j=>this._renderService.handleSelectionChanged(j.start,j.end,j.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(j=>{this.textarea.value=j,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(j=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,c.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.register(this._instantiationService.createInstance(d.BufferDecorationRenderer,this.screenElement)),this.register((0,c.addDisposableDomListener)(this.element,"mousedown",j=>this._selectionService.handleMouseDown(j))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(V.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",j=>this._handleScreenReaderModeOptionChange(j))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(u.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",j=>{!this._overviewRulerRenderer&&j&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(u.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(f.DomRenderer,this,this._document,this.element,this.screenElement,this._viewportElement,this._helperContainer,this.linkifier)}bindMouse(){let k=this,x=this.element;function j(G){let he=k._mouseService.getMouseReportCoords(G,k.screenElement);if(!he)return!1;let ie,De;switch(G.overrideType||G.type){case"mousemove":De=32,G.buttons===void 0?(ie=3,G.button!==void 0&&(ie=G.button<3?G.button:3)):ie=1&G.buttons?0:4&G.buttons?1:2&G.buttons?2:3;break;case"mouseup":De=0,ie=G.button<3?G.button:3;break;case"mousedown":De=1,ie=G.button<3?G.button:3;break;case"wheel":if(k._customWheelEventHandler&&k._customWheelEventHandler(G)===!1||k.viewport.getLinesScrolled(G)===0)return!1;De=G.deltaY<0?0:1,ie=4;break;default:return!1}return!(De===void 0||ie===void 0||ie>4)&&k.coreMouseService.triggerMouseEvent({col:he.col,row:he.row,x:he.x,y:he.y,button:ie,action:De,ctrl:G.ctrlKey,alt:G.altKey,shift:G.shiftKey})}let U={mouseup:null,wheel:null,mousedrag:null,mousemove:null},Y={mouseup:G=>(j(G),G.buttons||(this._document.removeEventListener("mouseup",U.mouseup),U.mousedrag&&this._document.removeEventListener("mousemove",U.mousedrag)),this.cancel(G)),wheel:G=>(j(G),this.cancel(G,!0)),mousedrag:G=>{G.buttons&&j(G)},mousemove:G=>{G.buttons||j(G)}};this.register(this.coreMouseService.onProtocolChange(G=>{G?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(G)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&G?U.mousemove||(x.addEventListener("mousemove",Y.mousemove),U.mousemove=Y.mousemove):(x.removeEventListener("mousemove",U.mousemove),U.mousemove=null),16&G?U.wheel||(x.addEventListener("wheel",Y.wheel,{passive:!1}),U.wheel=Y.wheel):(x.removeEventListener("wheel",U.wheel),U.wheel=null),2&G?U.mouseup||(U.mouseup=Y.mouseup):(this._document.removeEventListener("mouseup",U.mouseup),U.mouseup=null),4&G?U.mousedrag||(U.mousedrag=Y.mousedrag):(this._document.removeEventListener("mousemove",U.mousedrag),U.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,c.addDisposableDomListener)(x,"mousedown",G=>{if(G.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(G))return j(G),U.mouseup&&this._document.addEventListener("mouseup",U.mouseup),U.mousedrag&&this._document.addEventListener("mousemove",U.mousedrag),this.cancel(G)})),this.register((0,c.addDisposableDomListener)(x,"wheel",G=>{if(!U.wheel){if(this._customWheelEventHandler&&this._customWheelEventHandler(G)===!1)return!1;if(!this.buffer.hasScrollback){let he=this.viewport.getLinesScrolled(G);if(he===0)return;let ie=F.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(G.deltaY<0?"A":"B"),De="";for(let We=0;We<Math.abs(he);We++)De+=ie;return this.coreService.triggerDataEvent(De,!0),this.cancel(G,!0)}return this.viewport.handleWheel(G)?this.cancel(G):void 0}},{passive:!1})),this.register((0,c.addDisposableDomListener)(x,"touchstart",G=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(G),this.cancel(G)},{passive:!0})),this.register((0,c.addDisposableDomListener)(x,"touchmove",G=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(G)?void 0:this.cancel(G)},{passive:!1}))}refresh(k,x){this._renderService?.refreshRows(k,x)}updateCursorStyle(k){this._selectionService?.shouldColumnSelect(k)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(k,x,j=0){j===1?(super.scrollLines(k,x,j),this.refresh(0,this.rows-1)):this.viewport?.scrollLines(k)}paste(k){(0,a.paste)(k,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(k){this._customKeyEventHandler=k}attachCustomWheelEventHandler(k){this._customWheelEventHandler=k}registerLinkProvider(k){return this._linkProviderService.registerLinkProvider(k)}registerCharacterJoiner(k){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");let x=this._characterJoinerService.register(k);return this.refresh(0,this.rows-1),x}deregisterCharacterJoiner(k){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(k)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(k){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+k)}registerDecoration(k){return this._decorationService.registerDecoration(k)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(k,x,j){this._selectionService.setSelection(k,x,j)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){this._selectionService?.clearSelection()}selectAll(){this._selectionService?.selectAll()}selectLines(k,x){this._selectionService?.selectLines(k,x)}_keyDown(k){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(k)===!1)return!1;let x=this.browser.isMac&&this.options.macOptionIsMeta&&k.altKey;if(!x&&!this._compositionHelper.keydown(k))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;x||k.key!=="Dead"&&k.key!=="AltGraph"||(this._unprocessedDeadKey=!0);let j=(0,N.evaluateKeyboardEvent)(k,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(k),j.type===3||j.type===2){let U=this.rows-1;return this.scrollLines(j.type===2?-U:U),this.cancel(k,!0)}return j.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,k)||(j.cancel&&this.cancel(k,!0),!j.key||!!(k.key&&!k.ctrlKey&&!k.altKey&&!k.metaKey&&k.key.length===1&&k.key.charCodeAt(0)>=65&&k.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(j.key!==F.C0.ETX&&j.key!==F.C0.CR||(this.textarea.value=""),this._onKey.fire({key:j.key,domEvent:k}),this._showCursor(),this.coreService.triggerDataEvent(j.key,!0),!this.optionsService.rawOptions.screenReaderMode||k.altKey||k.ctrlKey?this.cancel(k,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(k,x){let j=k.isMac&&!this.options.macOptionIsMeta&&x.altKey&&!x.ctrlKey&&!x.metaKey||k.isWindows&&x.altKey&&x.ctrlKey&&!x.metaKey||k.isWindows&&x.getModifierState("AltGraph");return x.type==="keypress"?j:j&&(!x.keyCode||x.keyCode>47)}_keyUp(k){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(k)===!1||((function(x){return x.keyCode===16||x.keyCode===17||x.keyCode===18})(k)||this.focus(),this.updateCursorStyle(k),this._keyPressHandled=!1)}_keyPress(k){let x;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(k)===!1)return!1;if(this.cancel(k),k.charCode)x=k.charCode;else if(k.which===null||k.which===void 0)x=k.keyCode;else{if(k.which===0||k.charCode===0)return!1;x=k.which}return!(!x||(k.altKey||k.ctrlKey||k.metaKey)&&!this._isThirdLevelShift(this.browser,k)||(x=String.fromCharCode(x),this._onKey.fire({key:x,domEvent:k}),this._showCursor(),this.coreService.triggerDataEvent(x,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(k){if(k.data&&k.inputType==="insertText"&&(!k.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;let x=k.data;return this.coreService.triggerDataEvent(x,!0),this.cancel(k),!0}return!1}resize(k,x){k!==this.cols||x!==this.rows?super.resize(k,x):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(k,x){this._charSizeService?.measure(),this.viewport?.syncScrollArea(!0)}clear(){if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let k=1;k<this.rows;k++)this.buffer.lines.push(this.buffer.getBlankLine(B.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),this.viewport?.reset(),this.refresh(0,this.rows-1)}}reset(){this.options.rows=this.rows,this.options.cols=this.cols;let k=this._customKeyEventHandler;this._setup(),super.reset(),this._selectionService?.reset(),this._decorationService.reset(),this.viewport?.reset(),this._customKeyEventHandler=k,this.refresh(0,this.rows-1)}clearTextureAtlas(){this._renderService?.clearTextureAtlas()}_reportFocus(){this.element?.classList.contains("focus")?this.coreService.triggerDataEvent(F.C0.ESC+"[I"):this.coreService.triggerDataEvent(F.C0.ESC+"[O")}_reportWindowsOptions(k){if(this._renderService)switch(k){case L.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:let x=this._renderService.dimensions.css.canvas.width.toFixed(0),j=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${F.C0.ESC}[4;${j};${x}t`);break;case L.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:let U=this._renderService.dimensions.css.cell.width.toFixed(0),Y=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${F.C0.ESC}[6;${Y};${U}t`)}}cancel(k,x){if(this.options.cancelEvents||x)return k.preventDefault(),k.stopPropagation(),!1}}i.Terminal=J},9924:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TimeBasedDebouncer=void 0,i.TimeBasedDebouncer=class{constructor(o,a=1e3){this._renderCallback=o,this._debounceThresholdMS=a,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(o,a,c){this._rowCount=c,o=o!==void 0?o:0,a=a!==void 0?a:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,o):o,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,a):a;let l=Date.now();if(l-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=l,this._innerRefresh();else if(!this._additionalRefreshRequested){let p=l-this._lastRefreshMs,m=this._debounceThresholdMS-p;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},m)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;let o=Math.max(this._rowStart,0),a=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(o,a)}}},1680:function(s,i,o){var a=this&&this.__decorate||function(g,f,h,v){var b,C=arguments.length,S=C<3?f:v===null?v=Object.getOwnPropertyDescriptor(f,h):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(g,f,h,v);else for(var y=g.length-1;y>=0;y--)(b=g[y])&&(S=(C<3?b(S):C>3?b(f,h,S):b(f,h))||S);return C>3&&S&&Object.defineProperty(f,h,S),S},c=this&&this.__param||function(g,f){return function(h,v){f(h,v,g)}};Object.defineProperty(i,"__esModule",{value:!0}),i.Viewport=void 0;let l=o(3656),p=o(4725),m=o(8460),_=o(844),d=o(2585),u=i.Viewport=class extends _.Disposable{constructor(g,f,h,v,b,C,S,y){super(),this._viewportElement=g,this._scrollArea=f,this._bufferService=h,this._optionsService=v,this._charSizeService=b,this._renderService=C,this._coreBrowserService=S,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new m.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,l.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(w=>this._activeBuffer=w.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(w=>this._renderDimensions=w)),this._handleThemeChange(y.colors),this.register(y.onChangeColors(w=>this._handleThemeChange(w))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(g){this._viewportElement.style.backgroundColor=g.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(g){if(g)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderDimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderDimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;let f=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderDimensions.css.canvas.height);this._lastRecordedBufferHeight!==f&&(this._lastRecordedBufferHeight=f,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}let g=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==g&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=g),this._refreshAnimationFrame=null}syncScrollArea(g=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(g);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(g)}_handleScroll(g){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});let f=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:f,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;let g=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(g*(this._smoothScrollState.target-this._smoothScrollState.origin)),g<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(g,f){let h=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(f<0&&this._viewportElement.scrollTop!==0||f>0&&h<this._lastRecordedBufferHeight)||(g.cancelable&&g.preventDefault(),!1)}handleWheel(g){let f=this._getPixelsScrolled(g);return f!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+f:this._smoothScrollState.target+=f,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=f,this._bubbleScroll(g,f))}scrollLines(g){if(g!==0)if(this._optionsService.rawOptions.smoothScrollDuration){let f=g*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+f,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:g,suppressScrollEvent:!1})}_getPixelsScrolled(g){if(g.deltaY===0||g.shiftKey)return 0;let f=this._applyScrollModifier(g.deltaY,g);return g.deltaMode===WheelEvent.DOM_DELTA_LINE?f*=this._currentRowHeight:g.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(f*=this._currentRowHeight*this._bufferService.rows),f}getBufferElements(g,f){let h,v="",b=[],C=f??this._bufferService.buffer.lines.length,S=this._bufferService.buffer.lines;for(let y=g;y<C;y++){let w=S.get(y);if(!w)continue;let E=S.get(y+1)?.isWrapped;if(v+=w.translateToString(!E),!E||y===S.length-1){let T=document.createElement("div");T.textContent=v,b.push(T),v.length>0&&(h=T),v=""}}return{bufferElements:b,cursorElement:h}}getLinesScrolled(g){if(g.deltaY===0||g.shiftKey)return 0;let f=this._applyScrollModifier(g.deltaY,g);return g.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(f/=this._currentRowHeight+0,this._wheelPartialScroll+=f,f=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):g.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(f*=this._bufferService.rows),f}_applyScrollModifier(g,f){let h=this._optionsService.rawOptions.fastScrollModifier;return h==="alt"&&f.altKey||h==="ctrl"&&f.ctrlKey||h==="shift"&&f.shiftKey?g*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:g*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(g){this._lastTouchY=g.touches[0].pageY}handleTouchMove(g){let f=this._lastTouchY-g.touches[0].pageY;return this._lastTouchY=g.touches[0].pageY,f!==0&&(this._viewportElement.scrollTop+=f,this._bubbleScroll(g,f))}};i.Viewport=u=a([c(2,d.IBufferService),c(3,d.IOptionsService),c(4,p.ICharSizeService),c(5,p.IRenderService),c(6,p.ICoreBrowserService),c(7,p.IThemeService)],u)},3107:function(s,i,o){var a=this&&this.__decorate||function(d,u,g,f){var h,v=arguments.length,b=v<3?u:f===null?f=Object.getOwnPropertyDescriptor(u,g):f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(d,u,g,f);else for(var C=d.length-1;C>=0;C--)(h=d[C])&&(b=(v<3?h(b):v>3?h(u,g,b):h(u,g))||b);return v>3&&b&&Object.defineProperty(u,g,b),b},c=this&&this.__param||function(d,u){return function(g,f){u(g,f,d)}};Object.defineProperty(i,"__esModule",{value:!0}),i.BufferDecorationRenderer=void 0;let l=o(4725),p=o(844),m=o(2585),_=i.BufferDecorationRenderer=class extends p.Disposable{constructor(d,u,g,f,h){super(),this._screenElement=d,this._bufferService=u,this._coreBrowserService=g,this._decorationService=f,this._renderService=h,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(v=>this._removeDecoration(v))),this.register((0,p.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(let d of this._decorationService.decorations)this._renderDecoration(d);this._dimensionsChanged=!1}_renderDecoration(d){this._refreshStyle(d),this._dimensionsChanged&&this._refreshXPosition(d)}_createElement(d){let u=this._coreBrowserService.mainDocument.createElement("div");u.classList.add("xterm-decoration"),u.classList.toggle("xterm-decoration-top-layer",d?.options?.layer==="top"),u.style.width=`${Math.round((d.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,u.style.height=(d.options.height||1)*this._renderService.dimensions.css.cell.height+"px",u.style.top=(d.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",u.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;let g=d.options.x??0;return g&&g>this._bufferService.cols&&(u.style.display="none"),this._refreshXPosition(d,u),u}_refreshStyle(d){let u=d.marker.line-this._bufferService.buffers.active.ydisp;if(u<0||u>=this._bufferService.rows)d.element&&(d.element.style.display="none",d.onRenderEmitter.fire(d.element));else{let g=this._decorationElements.get(d);g||(g=this._createElement(d),d.element=g,this._decorationElements.set(d,g),this._container.appendChild(g),d.onDispose(()=>{this._decorationElements.delete(d),g.remove()})),g.style.top=u*this._renderService.dimensions.css.cell.height+"px",g.style.display=this._altBufferIsActive?"none":"block",d.onRenderEmitter.fire(g)}}_refreshXPosition(d,u=d.element){if(!u)return;let g=d.options.x??0;(d.options.anchor||"left")==="right"?u.style.right=g?g*this._renderService.dimensions.css.cell.width+"px":"":u.style.left=g?g*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(d){this._decorationElements.get(d)?.remove(),this._decorationElements.delete(d),d.dispose()}};i.BufferDecorationRenderer=_=a([c(1,m.IBufferService),c(2,l.ICoreBrowserService),c(3,m.IDecorationService),c(4,l.IRenderService)],_)},5871:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ColorZoneStore=void 0,i.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(o){if(o.options.overviewRulerOptions){for(let a of this._zones)if(a.color===o.options.overviewRulerOptions.color&&a.position===o.options.overviewRulerOptions.position){if(this._lineIntersectsZone(a,o.marker.line))return;if(this._lineAdjacentToZone(a,o.marker.line,o.options.overviewRulerOptions.position))return void this._addLineToZone(a,o.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=o.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=o.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=o.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=o.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:o.options.overviewRulerOptions.color,position:o.options.overviewRulerOptions.position,startBufferLine:o.marker.line,endBufferLine:o.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(o){this._linePadding=o}_lineIntersectsZone(o,a){return a>=o.startBufferLine&&a<=o.endBufferLine}_lineAdjacentToZone(o,a,c){return a>=o.startBufferLine-this._linePadding[c||"full"]&&a<=o.endBufferLine+this._linePadding[c||"full"]}_addLineToZone(o,a){o.startBufferLine=Math.min(o.startBufferLine,a),o.endBufferLine=Math.max(o.endBufferLine,a)}}},5744:function(s,i,o){var a=this&&this.__decorate||function(h,v,b,C){var S,y=arguments.length,w=y<3?v:C===null?C=Object.getOwnPropertyDescriptor(v,b):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(h,v,b,C);else for(var E=h.length-1;E>=0;E--)(S=h[E])&&(w=(y<3?S(w):y>3?S(v,b,w):S(v,b))||w);return y>3&&w&&Object.defineProperty(v,b,w),w},c=this&&this.__param||function(h,v){return function(b,C){v(b,C,h)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OverviewRulerRenderer=void 0;let l=o(5871),p=o(4725),m=o(844),_=o(2585),d={full:0,left:0,center:0,right:0},u={full:0,left:0,center:0,right:0},g={full:0,left:0,center:0,right:0},f=i.OverviewRulerRenderer=class extends m.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(h,v,b,C,S,y,w){super(),this._viewportElement=h,this._screenElement=v,this._bufferService=b,this._decorationService=C,this._renderService=S,this._optionsService=y,this._coreBrowserService=w,this._colorZoneStore=new l.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),this._viewportElement.parentElement?.insertBefore(this._canvas,this._viewportElement);let E=this._canvas.getContext("2d");if(!E)throw new Error("Ctx cannot be null");this._ctx=E,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,m.toDisposable)(()=>{this._canvas?.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){let h=Math.floor(this._canvas.width/3),v=Math.ceil(this._canvas.width/3);u.full=this._canvas.width,u.left=h,u.center=v,u.right=h,this._refreshDrawHeightConstants(),g.full=0,g.left=0,g.center=u.left,g.right=u.left+u.center}_refreshDrawHeightConstants(){d.full=Math.round(2*this._coreBrowserService.dpr);let h=this._canvas.height/this._bufferService.buffer.lines.length,v=Math.round(Math.max(Math.min(h,12),6)*this._coreBrowserService.dpr);d.left=v,d.center=v,d.right=v}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*d.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*d.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*d.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*d.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowserService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowserService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(let v of this._decorationService.decorations)this._colorZoneStore.addDecoration(v);this._ctx.lineWidth=1;let h=this._colorZoneStore.zones;for(let v of h)v.position!=="full"&&this._renderColorZone(v);for(let v of h)v.position==="full"&&this._renderColorZone(v);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(h){this._ctx.fillStyle=h.color,this._ctx.fillRect(g[h.position||"full"],Math.round((this._canvas.height-1)*(h.startBufferLine/this._bufferService.buffers.active.lines.length)-d[h.position||"full"]/2),u[h.position||"full"],Math.round((this._canvas.height-1)*((h.endBufferLine-h.startBufferLine)/this._bufferService.buffers.active.lines.length)+d[h.position||"full"]))}_queueRefresh(h,v){this._shouldUpdateDimensions=h||this._shouldUpdateDimensions,this._shouldUpdateAnchor=v||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};i.OverviewRulerRenderer=f=a([c(2,_.IBufferService),c(3,_.IDecorationService),c(4,p.IRenderService),c(5,_.IOptionsService),c(6,p.ICoreBrowserService)],f)},2950:function(s,i,o){var a=this&&this.__decorate||function(d,u,g,f){var h,v=arguments.length,b=v<3?u:f===null?f=Object.getOwnPropertyDescriptor(u,g):f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(d,u,g,f);else for(var C=d.length-1;C>=0;C--)(h=d[C])&&(b=(v<3?h(b):v>3?h(u,g,b):h(u,g))||b);return v>3&&b&&Object.defineProperty(u,g,b),b},c=this&&this.__param||function(d,u){return function(g,f){u(g,f,d)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CompositionHelper=void 0;let l=o(4725),p=o(2585),m=o(2584),_=i.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(d,u,g,f,h,v){this._textarea=d,this._compositionView=u,this._bufferService=g,this._optionsService=f,this._coreService=h,this._renderService=v,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(d){this._compositionView.textContent=d.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(d){if(this._isComposing||this._isSendingComposition){if(d.keyCode===229||d.keyCode===16||d.keyCode===17||d.keyCode===18)return!1;this._finalizeComposition(!1)}return d.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(d){if(this._compositionView.classList.remove("active"),this._isComposing=!1,d){let u={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let g;this._isSendingComposition=!1,u.start+=this._dataAlreadySent.length,g=this._isComposing?this._textarea.value.substring(u.start,u.end):this._textarea.value.substring(u.start),g.length>0&&this._coreService.triggerDataEvent(g,!0)}},0)}else{this._isSendingComposition=!1;let u=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(u,!0)}}_handleAnyTextareaChanges(){let d=this._textarea.value;setTimeout(()=>{if(!this._isComposing){let u=this._textarea.value,g=u.replace(d,"");this._dataAlreadySent=g,u.length>d.length?this._coreService.triggerDataEvent(g,!0):u.length<d.length?this._coreService.triggerDataEvent(`${m.C0.DEL}`,!0):u.length===d.length&&u!==d&&this._coreService.triggerDataEvent(u,!0)}},0)}updateCompositionElements(d){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){let u=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),g=this._renderService.dimensions.css.cell.height,f=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,h=u*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=h+"px",this._compositionView.style.top=f+"px",this._compositionView.style.height=g+"px",this._compositionView.style.lineHeight=g+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";let v=this._compositionView.getBoundingClientRect();this._textarea.style.left=h+"px",this._textarea.style.top=f+"px",this._textarea.style.width=Math.max(v.width,1)+"px",this._textarea.style.height=Math.max(v.height,1)+"px",this._textarea.style.lineHeight=v.height+"px"}d||setTimeout(()=>this.updateCompositionElements(!0),0)}}};i.CompositionHelper=_=a([c(2,p.IBufferService),c(3,p.IOptionsService),c(4,p.ICoreService),c(5,l.IRenderService)],_)},9806:(s,i)=>{function o(a,c,l){let p=l.getBoundingClientRect(),m=a.getComputedStyle(l),_=parseInt(m.getPropertyValue("padding-left")),d=parseInt(m.getPropertyValue("padding-top"));return[c.clientX-p.left-_,c.clientY-p.top-d]}Object.defineProperty(i,"__esModule",{value:!0}),i.getCoords=i.getCoordsRelativeToElement=void 0,i.getCoordsRelativeToElement=o,i.getCoords=function(a,c,l,p,m,_,d,u,g){if(!_)return;let f=o(a,c,l);return f?(f[0]=Math.ceil((f[0]+(g?d/2:0))/d),f[1]=Math.ceil(f[1]/u),f[0]=Math.min(Math.max(f[0],1),p+(g?1:0)),f[1]=Math.min(Math.max(f[1],1),m),f):void 0}},9504:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.moveToCellSequence=void 0;let a=o(2584);function c(u,g,f,h){let v=u-l(u,f),b=g-l(g,f),C=Math.abs(v-b)-(function(S,y,w){let E=0,T=S-l(S,w),I=y-l(y,w);for(let M=0;M<Math.abs(T-I);M++){let R=p(S,y)==="A"?-1:1;w.buffer.lines.get(T+R*M)?.isWrapped&&E++}return E})(u,g,f);return d(C,_(p(u,g),h))}function l(u,g){let f=0,h=g.buffer.lines.get(u),v=h?.isWrapped;for(;v&&u>=0&&u<g.rows;)f++,h=g.buffer.lines.get(--u),v=h?.isWrapped;return f}function p(u,g){return u>g?"A":"B"}function m(u,g,f,h,v,b){let C=u,S=g,y="";for(;C!==f||S!==h;)C+=v?1:-1,v&&C>b.cols-1?(y+=b.buffer.translateBufferLineToString(S,!1,u,C),C=0,u=0,S++):!v&&C<0&&(y+=b.buffer.translateBufferLineToString(S,!1,0,u+1),C=b.cols-1,u=C,S--);return y+b.buffer.translateBufferLineToString(S,!1,u,C)}function _(u,g){let f=g?"O":"[";return a.C0.ESC+f+u}function d(u,g){u=Math.floor(u);let f="";for(let h=0;h<u;h++)f+=g;return f}i.moveToCellSequence=function(u,g,f,h){let v=f.buffer.x,b=f.buffer.y;if(!f.buffer.hasScrollback)return(function(y,w,E,T,I,M){return c(w,T,I,M).length===0?"":d(m(y,w,y,w-l(w,I),!1,I).length,_("D",M))})(v,b,0,g,f,h)+c(b,g,f,h)+(function(y,w,E,T,I,M){let R;R=c(w,T,I,M).length>0?T-l(T,I):w;let P=T,B=(function(F,N,D,A,O,L){let V;return V=c(D,A,O,L).length>0?A-l(A,O):N,F<D&&V<=A||F>=D&&V<A?"C":"D"})(y,w,E,T,I,M);return d(m(y,R,E,P,B==="C",I).length,_(B,M))})(v,b,u,g,f,h);let C;if(b===g)return C=v>u?"D":"C",d(Math.abs(v-u),_(C,h));C=b>g?"D":"C";let S=Math.abs(b-g);return d((function(y,w){return w.cols-y})(b>g?u:v,f)+(S-1)*f.cols+1+((b>g?v:u)-1),_(C,h))}},1296:function(s,i,o){var a=this&&this.__decorate||function(M,R,P,B){var F,N=arguments.length,D=N<3?R:B===null?B=Object.getOwnPropertyDescriptor(R,P):B;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(M,R,P,B);else for(var A=M.length-1;A>=0;A--)(F=M[A])&&(D=(N<3?F(D):N>3?F(R,P,D):F(R,P))||D);return N>3&&D&&Object.defineProperty(R,P,D),D},c=this&&this.__param||function(M,R){return function(P,B){R(P,B,M)}};Object.defineProperty(i,"__esModule",{value:!0}),i.DomRenderer=void 0;let l=o(3787),p=o(2550),m=o(2223),_=o(6171),d=o(6052),u=o(4725),g=o(8055),f=o(8460),h=o(844),v=o(2585),b="xterm-dom-renderer-owner-",C="xterm-rows",S="xterm-fg-",y="xterm-bg-",w="xterm-focus",E="xterm-selection",T=1,I=i.DomRenderer=class extends h.Disposable{constructor(M,R,P,B,F,N,D,A,O,L,V,$,J){super(),this._terminal=M,this._document=R,this._element=P,this._screenElement=B,this._viewportElement=F,this._helperContainer=N,this._linkifier2=D,this._charSizeService=O,this._optionsService=L,this._bufferService=V,this._coreBrowserService=$,this._themeService=J,this._terminalClass=T++,this._rowElements=[],this._selectionRenderModel=(0,d.createSelectionRenderModel)(),this.onRequestRedraw=this.register(new f.EventEmitter).event,this._rowContainer=this._document.createElement("div"),this._rowContainer.classList.add(C),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=this._document.createElement("div"),this._selectionContainer.classList.add(E),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,_.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(X=>this._injectCss(X))),this._injectCss(this._themeService.colors),this._rowFactory=A.createInstance(l.DomRendererRowFactory,document),this._element.classList.add(b+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(X=>this._handleLinkHover(X))),this.register(this._linkifier2.onHideLinkUnderline(X=>this._handleLinkLeave(X))),this.register((0,h.toDisposable)(()=>{this._element.classList.remove(b+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new p.WidthCache(this._document,this._helperContainer),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){let M=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*M,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*M),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/M),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/M),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(let P of this._rowElements)P.style.width=`${this.dimensions.css.canvas.width}px`,P.style.height=`${this.dimensions.css.cell.height}px`,P.style.lineHeight=`${this.dimensions.css.cell.height}px`,P.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));let R=`${this._terminalSelector} .${C} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=R,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(M){this._themeStyleElement||(this._themeStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let R=`${this._terminalSelector} .${C} { color: ${M.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;R+=`${this._terminalSelector} .${C} .xterm-dim { color: ${g.color.multiplyOpacity(M.foreground,.5).css};}`,R+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`;let P=`blink_underline_${this._terminalClass}`,B=`blink_bar_${this._terminalClass}`,F=`blink_block_${this._terminalClass}`;R+=`@keyframes ${P} { 50% {  border-bottom-style: hidden; }}`,R+=`@keyframes ${B} { 50% {  box-shadow: none; }}`,R+=`@keyframes ${F} { 0% {  background-color: ${M.cursor.css};  color: ${M.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${M.cursor.css}; }}`,R+=`${this._terminalSelector} .${C}.${w} .xterm-cursor.xterm-cursor-blink.xterm-cursor-underline { animation: ${P} 1s step-end infinite;}${this._terminalSelector} .${C}.${w} .xterm-cursor.xterm-cursor-blink.xterm-cursor-bar { animation: ${B} 1s step-end infinite;}${this._terminalSelector} .${C}.${w} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: ${F} 1s step-end infinite;}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-block { background-color: ${M.cursor.css}; color: ${M.cursorAccent.css};}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-block:not(.xterm-cursor-blink) { background-color: ${M.cursor.css} !important; color: ${M.cursorAccent.css} !important;}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${M.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${M.cursor.css} inset;}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${M.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,R+=`${this._terminalSelector} .${E} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${E} div { position: absolute; background-color: ${M.selectionBackgroundOpaque.css};}${this._terminalSelector} .${E} div { position: absolute; background-color: ${M.selectionInactiveBackgroundOpaque.css};}`;for(let[N,D]of M.ansi.entries())R+=`${this._terminalSelector} .${S}${N} { color: ${D.css}; }${this._terminalSelector} .${S}${N}.xterm-dim { color: ${g.color.multiplyOpacity(D,.5).css}; }${this._terminalSelector} .${y}${N} { background-color: ${D.css}; }`;R+=`${this._terminalSelector} .${S}${m.INVERTED_DEFAULT_COLOR} { color: ${g.color.opaque(M.background).css}; }${this._terminalSelector} .${S}${m.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${g.color.multiplyOpacity(g.color.opaque(M.background),.5).css}; }${this._terminalSelector} .${y}${m.INVERTED_DEFAULT_COLOR} { background-color: ${M.foreground.css}; }`,this._themeStyleElement.textContent=R}_setDefaultSpacing(){let M=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${M}px`,this._rowFactory.defaultSpacing=M}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(M,R){for(let P=this._rowElements.length;P<=R;P++){let B=this._document.createElement("div");this._rowContainer.appendChild(B),this._rowElements.push(B)}for(;this._rowElements.length>R;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(M,R){this._refreshRowElements(M,R),this._updateDimensions(),this.handleSelectionChanged(this._selectionRenderModel.selectionStart,this._selectionRenderModel.selectionEnd,this._selectionRenderModel.columnSelectMode)}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(w),this.renderRows(0,this._bufferService.rows-1)}handleFocus(){this._rowContainer.classList.add(w),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(M,R,P){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(M,R,P),this.renderRows(0,this._bufferService.rows-1),!M||!R)return;this._selectionRenderModel.update(this._terminal,M,R,P);let B=this._selectionRenderModel.viewportStartRow,F=this._selectionRenderModel.viewportEndRow,N=this._selectionRenderModel.viewportCappedStartRow,D=this._selectionRenderModel.viewportCappedEndRow;if(N>=this._bufferService.rows||D<0)return;let A=this._document.createDocumentFragment();if(P){let O=M[0]>R[0];A.appendChild(this._createSelectionElement(N,O?R[0]:M[0],O?M[0]:R[0],D-N+1))}else{let O=B===N?M[0]:0,L=N===F?R[0]:this._bufferService.cols;A.appendChild(this._createSelectionElement(N,O,L));let V=D-N-1;if(A.appendChild(this._createSelectionElement(N+1,0,this._bufferService.cols,V)),N!==D){let $=F===D?R[0]:this._bufferService.cols;A.appendChild(this._createSelectionElement(D,0,$))}}this._selectionContainer.appendChild(A)}_createSelectionElement(M,R,P,B=1){let F=this._document.createElement("div"),N=R*this.dimensions.css.cell.width,D=this.dimensions.css.cell.width*(P-R);return N+D>this.dimensions.css.canvas.width&&(D=this.dimensions.css.canvas.width-N),F.style.height=B*this.dimensions.css.cell.height+"px",F.style.top=M*this.dimensions.css.cell.height+"px",F.style.left=`${N}px`,F.style.width=`${D}px`,F}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(let M of this._rowElements)M.replaceChildren()}renderRows(M,R){let P=this._bufferService.buffer,B=P.ybase+P.y,F=Math.min(P.x,this._bufferService.cols-1),N=this._optionsService.rawOptions.cursorBlink,D=this._optionsService.rawOptions.cursorStyle,A=this._optionsService.rawOptions.cursorInactiveStyle;for(let O=M;O<=R;O++){let L=O+P.ydisp,V=this._rowElements[O],$=P.lines.get(L);if(!V||!$)break;V.replaceChildren(...this._rowFactory.createRow($,L,L===B,D,A,F,N,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${b}${this._terminalClass}`}_handleLinkHover(M){this._setCellUnderline(M.x1,M.x2,M.y1,M.y2,M.cols,!0)}_handleLinkLeave(M){this._setCellUnderline(M.x1,M.x2,M.y1,M.y2,M.cols,!1)}_setCellUnderline(M,R,P,B,F,N){P<0&&(M=0),B<0&&(R=0);let D=this._bufferService.rows-1;P=Math.max(Math.min(P,D),0),B=Math.max(Math.min(B,D),0),F=Math.min(F,this._bufferService.cols);let A=this._bufferService.buffer,O=A.ybase+A.y,L=Math.min(A.x,F-1),V=this._optionsService.rawOptions.cursorBlink,$=this._optionsService.rawOptions.cursorStyle,J=this._optionsService.rawOptions.cursorInactiveStyle;for(let X=P;X<=B;++X){let k=X+A.ydisp,x=this._rowElements[X],j=A.lines.get(k);if(!x||!j)break;x.replaceChildren(...this._rowFactory.createRow(j,k,k===O,$,J,L,V,this.dimensions.css.cell.width,this._widthCache,N?X===P?M:0:-1,N?(X===B?R:F)-1:-1))}}};i.DomRenderer=I=a([c(7,v.IInstantiationService),c(8,u.ICharSizeService),c(9,v.IOptionsService),c(10,v.IBufferService),c(11,u.ICoreBrowserService),c(12,u.IThemeService)],I)},3787:function(s,i,o){var a=this&&this.__decorate||function(C,S,y,w){var E,T=arguments.length,I=T<3?S:w===null?w=Object.getOwnPropertyDescriptor(S,y):w;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")I=Reflect.decorate(C,S,y,w);else for(var M=C.length-1;M>=0;M--)(E=C[M])&&(I=(T<3?E(I):T>3?E(S,y,I):E(S,y))||I);return T>3&&I&&Object.defineProperty(S,y,I),I},c=this&&this.__param||function(C,S){return function(y,w){S(y,w,C)}};Object.defineProperty(i,"__esModule",{value:!0}),i.DomRendererRowFactory=void 0;let l=o(2223),p=o(643),m=o(511),_=o(2585),d=o(8055),u=o(4725),g=o(4269),f=o(6171),h=o(3734),v=i.DomRendererRowFactory=class{constructor(C,S,y,w,E,T,I){this._document=C,this._characterJoinerService=S,this._optionsService=y,this._coreBrowserService=w,this._coreService=E,this._decorationService=T,this._themeService=I,this._workCell=new m.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(C,S,y){this._selectionStart=C,this._selectionEnd=S,this._columnSelectMode=y}createRow(C,S,y,w,E,T,I,M,R,P,B){let F=[],N=this._characterJoinerService.getJoinedCharacters(S),D=this._themeService.colors,A,O=C.getNoBgTrimmedLength();y&&O<T+1&&(O=T+1);let L=0,V="",$=0,J=0,X=0,k=!1,x=0,j=!1,U=0,Y=[],G=P!==-1&&B!==-1;for(let he=0;he<O;he++){C.loadCell(he,this._workCell);let ie=this._workCell.getWidth();if(ie===0)continue;let De=!1,We=he,se=this._workCell;if(N.length>0&&he===N[0][0]){De=!0;let me=N.shift();se=new g.JoinedCellData(this._workCell,C.translateToString(!0,me[0],me[1]),me[1]-me[0]),We=me[1]-1,ie=se.getWidth()}let Zt=this._isCellInSelection(he,S),Rr=y&&he===T,Ee=G&&he>=P&&he<=B,_e=!1;this._decorationService.forEachDecorationAtCell(he,S,void 0,me=>{_e=!0});let ve=se.getChars()||p.WHITESPACE_CELL_CHAR;if(ve===" "&&(se.isUnderline()||se.isOverline())&&(ve="\xA0"),U=ie*M-R.get(ve,se.isBold(),se.isItalic()),A){if(L&&(Zt&&j||!Zt&&!j&&se.bg===$)&&(Zt&&j&&D.selectionForeground||se.fg===J)&&se.extended.ext===X&&Ee===k&&U===x&&!Rr&&!De&&!_e){se.isInvisible()?V+=p.WHITESPACE_CELL_CHAR:V+=ve,L++;continue}L&&(A.textContent=V),A=this._document.createElement("span"),L=0,V=""}else A=this._document.createElement("span");if($=se.bg,J=se.fg,X=se.extended.ext,k=Ee,x=U,j=Zt,De&&T>=he&&T<=We&&(T=he),!this._coreService.isCursorHidden&&Rr&&this._coreService.isCursorInitialized){if(Y.push("xterm-cursor"),this._coreBrowserService.isFocused)I&&Y.push("xterm-cursor-blink"),Y.push(w==="bar"?"xterm-cursor-bar":w==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(E)switch(E){case"outline":Y.push("xterm-cursor-outline");break;case"block":Y.push("xterm-cursor-block");break;case"bar":Y.push("xterm-cursor-bar");break;case"underline":Y.push("xterm-cursor-underline")}}if(se.isBold()&&Y.push("xterm-bold"),se.isItalic()&&Y.push("xterm-italic"),se.isDim()&&Y.push("xterm-dim"),V=se.isInvisible()?p.WHITESPACE_CELL_CHAR:se.getChars()||p.WHITESPACE_CELL_CHAR,se.isUnderline()&&(Y.push(`xterm-underline-${se.extended.underlineStyle}`),V===" "&&(V="\xA0"),!se.isUnderlineColorDefault()))if(se.isUnderlineColorRGB())A.style.textDecorationColor=`rgb(${h.AttributeData.toColorRGB(se.getUnderlineColor()).join(",")})`;else{let me=se.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&se.isBold()&&me<8&&(me+=8),A.style.textDecorationColor=D.ansi[me].css}se.isOverline()&&(Y.push("xterm-overline"),V===" "&&(V="\xA0")),se.isStrikethrough()&&Y.push("xterm-strikethrough"),Ee&&(A.style.textDecoration="underline");let Q=se.getFgColor(),Se=se.getFgColorMode(),Be=se.getBgColor(),Le=se.getBgColorMode(),cn=!!se.isInverse();if(cn){let me=Q;Q=Be,Be=me;let Wi=Se;Se=Le,Le=Wi}let mt,xt,ze,xe=!1;switch(this._decorationService.forEachDecorationAtCell(he,S,void 0,me=>{me.options.layer!=="top"&&xe||(me.backgroundColorRGB&&(Le=50331648,Be=me.backgroundColorRGB.rgba>>8&16777215,mt=me.backgroundColorRGB),me.foregroundColorRGB&&(Se=50331648,Q=me.foregroundColorRGB.rgba>>8&16777215,xt=me.foregroundColorRGB),xe=me.options.layer==="top")}),!xe&&Zt&&(mt=this._coreBrowserService.isFocused?D.selectionBackgroundOpaque:D.selectionInactiveBackgroundOpaque,Be=mt.rgba>>8&16777215,Le=50331648,xe=!0,D.selectionForeground&&(Se=50331648,Q=D.selectionForeground.rgba>>8&16777215,xt=D.selectionForeground)),xe&&Y.push("xterm-decoration-top"),Le){case 16777216:case 33554432:ze=D.ansi[Be],Y.push(`xterm-bg-${Be}`);break;case 50331648:ze=d.channels.toColor(Be>>16,Be>>8&255,255&Be),this._addStyle(A,`background-color:#${b((Be>>>0).toString(16),"0",6)}`);break;default:cn?(ze=D.foreground,Y.push(`xterm-bg-${l.INVERTED_DEFAULT_COLOR}`)):ze=D.background}switch(mt||se.isDim()&&(mt=d.color.multiplyOpacity(ze,.5)),Se){case 16777216:case 33554432:se.isBold()&&Q<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(Q+=8),this._applyMinimumContrast(A,ze,D.ansi[Q],se,mt,void 0)||Y.push(`xterm-fg-${Q}`);break;case 50331648:let me=d.channels.toColor(Q>>16&255,Q>>8&255,255&Q);this._applyMinimumContrast(A,ze,me,se,mt,xt)||this._addStyle(A,`color:#${b(Q.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(A,ze,D.foreground,se,mt,xt)||cn&&Y.push(`xterm-fg-${l.INVERTED_DEFAULT_COLOR}`)}Y.length&&(A.className=Y.join(" "),Y.length=0),Rr||De||_e?A.textContent=V:L++,U!==this.defaultSpacing&&(A.style.letterSpacing=`${U}px`),F.push(A),he=We}return A&&L&&(A.textContent=V),F}_applyMinimumContrast(C,S,y,w,E,T){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,f.treatGlyphAsBackgroundColor)(w.getCode()))return!1;let I=this._getContrastCache(w),M;if(E||T||(M=I.getColor(S.rgba,y.rgba)),M===void 0){let R=this._optionsService.rawOptions.minimumContrastRatio/(w.isDim()?2:1);M=d.color.ensureContrastRatio(E||S,T||y,R),I.setColor((E||S).rgba,(T||y).rgba,M??null)}return!!M&&(this._addStyle(C,`color:${M.css}`),!0)}_getContrastCache(C){return C.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(C,S){C.setAttribute("style",`${C.getAttribute("style")||""}${S};`)}_isCellInSelection(C,S){let y=this._selectionStart,w=this._selectionEnd;return!(!y||!w)&&(this._columnSelectMode?y[0]<=w[0]?C>=y[0]&&S>=y[1]&&C<w[0]&&S<=w[1]:C<y[0]&&S>=y[1]&&C>=w[0]&&S<=w[1]:S>y[1]&&S<w[1]||y[1]===w[1]&&S===y[1]&&C>=y[0]&&C<w[0]||y[1]<w[1]&&S===w[1]&&C<w[0]||y[1]<w[1]&&S===y[1]&&C>=y[0])}};function b(C,S,y){for(;C.length<y;)C=S+C;return C}i.DomRendererRowFactory=v=a([c(1,u.ICharacterJoinerService),c(2,_.IOptionsService),c(3,u.ICoreBrowserService),c(4,_.ICoreService),c(5,_.IDecorationService),c(6,u.IThemeService)],v)},2550:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WidthCache=void 0,i.WidthCache=class{constructor(o,a){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=o.createElement("div"),this._container.classList.add("xterm-width-cache-measure-container"),this._container.setAttribute("aria-hidden","true"),this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";let c=o.createElement("span");c.classList.add("xterm-char-measure-element");let l=o.createElement("span");l.classList.add("xterm-char-measure-element"),l.style.fontWeight="bold";let p=o.createElement("span");p.classList.add("xterm-char-measure-element"),p.style.fontStyle="italic";let m=o.createElement("span");m.classList.add("xterm-char-measure-element"),m.style.fontWeight="bold",m.style.fontStyle="italic",this._measureElements=[c,l,p,m],this._container.appendChild(c),this._container.appendChild(l),this._container.appendChild(p),this._container.appendChild(m),a.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(o,a,c,l){o===this._font&&a===this._fontSize&&c===this._weight&&l===this._weightBold||(this._font=o,this._fontSize=a,this._weight=c,this._weightBold=l,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${c}`,this._measureElements[1].style.fontWeight=`${l}`,this._measureElements[2].style.fontWeight=`${c}`,this._measureElements[3].style.fontWeight=`${l}`,this.clear())}get(o,a,c){let l=0;if(!a&&!c&&o.length===1&&(l=o.charCodeAt(0))<256){if(this._flat[l]!==-9999)return this._flat[l];let _=this._measure(o,0);return _>0&&(this._flat[l]=_),_}let p=o;a&&(p+="B"),c&&(p+="I");let m=this._holey.get(p);if(m===void 0){let _=0;a&&(_|=1),c&&(_|=2),m=this._measure(o,_),m>0&&this._holey.set(p,m)}return m}_measure(o,a){let c=this._measureElements[a];return c.textContent=o.repeat(32),c.offsetWidth/32}}},2223:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TEXT_BASELINE=i.DIM_OPACITY=i.INVERTED_DEFAULT_COLOR=void 0;let a=o(6114);i.INVERTED_DEFAULT_COLOR=257,i.DIM_OPACITY=.5,i.TEXT_BASELINE=a.isFirefox||a.isLegacyEdge?"bottom":"ideographic"},6171:(s,i)=>{function o(c){return 57508<=c&&c<=57558}function a(c){return c>=128512&&c<=128591||c>=127744&&c<=128511||c>=128640&&c<=128767||c>=9728&&c<=9983||c>=9984&&c<=10175||c>=65024&&c<=65039||c>=129280&&c<=129535||c>=127462&&c<=127487}Object.defineProperty(i,"__esModule",{value:!0}),i.computeNextVariantOffset=i.createRenderDimensions=i.treatGlyphAsBackgroundColor=i.allowRescaling=i.isEmoji=i.isRestrictedPowerlineGlyph=i.isPowerlineGlyph=i.throwIfFalsy=void 0,i.throwIfFalsy=function(c){if(!c)throw new Error("value must not be falsy");return c},i.isPowerlineGlyph=o,i.isRestrictedPowerlineGlyph=function(c){return 57520<=c&&c<=57527},i.isEmoji=a,i.allowRescaling=function(c,l,p,m){return l===1&&p>Math.ceil(1.5*m)&&c!==void 0&&c>255&&!a(c)&&!o(c)&&!(function(_){return 57344<=_&&_<=63743})(c)},i.treatGlyphAsBackgroundColor=function(c){return o(c)||(function(l){return 9472<=l&&l<=9631})(c)},i.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}},i.computeNextVariantOffset=function(c,l,p=0){return(c-(2*Math.round(l)-p))%(2*Math.round(l))}},6052:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createSelectionRenderModel=void 0;class o{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(c,l,p,m=!1){if(this.selectionStart=l,this.selectionEnd=p,!l||!p||l[0]===p[0]&&l[1]===p[1])return void this.clear();let _=c.buffers.active.ydisp,d=l[1]-_,u=p[1]-_,g=Math.max(d,0),f=Math.min(u,c.rows-1);g>=c.rows||f<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=m,this.viewportStartRow=d,this.viewportEndRow=u,this.viewportCappedStartRow=g,this.viewportCappedEndRow=f,this.startCol=l[0],this.endCol=p[0])}isCellSelected(c,l,p){return!!this.hasSelection&&(p-=c.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?l>=this.startCol&&p>=this.viewportCappedStartRow&&l<this.endCol&&p<=this.viewportCappedEndRow:l<this.startCol&&p>=this.viewportCappedStartRow&&l>=this.endCol&&p<=this.viewportCappedEndRow:p>this.viewportStartRow&&p<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&p===this.viewportStartRow&&l>=this.startCol&&l<this.endCol||this.viewportStartRow<this.viewportEndRow&&p===this.viewportEndRow&&l<this.endCol||this.viewportStartRow<this.viewportEndRow&&p===this.viewportStartRow&&l>=this.startCol)}}i.createSelectionRenderModel=function(){return new o}},456:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SelectionModel=void 0,i.SelectionModel=class{constructor(o){this._bufferService=o,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){let o=this.selectionStart[0]+this.selectionStartLength;return o>this._bufferService.cols?o%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(o/this._bufferService.cols)-1]:[o%this._bufferService.cols,this.selectionStart[1]+Math.floor(o/this._bufferService.cols)]:[o,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){let o=this.selectionStart[0]+this.selectionStartLength;return o>this._bufferService.cols?[o%this._bufferService.cols,this.selectionStart[1]+Math.floor(o/this._bufferService.cols)]:[Math.max(o,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){let o=this.selectionStart,a=this.selectionEnd;return!(!o||!a)&&(o[1]>a[1]||o[1]===a[1]&&o[0]>a[0])}handleTrim(o){return this.selectionStart&&(this.selectionStart[1]-=o),this.selectionEnd&&(this.selectionEnd[1]-=o),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(s,i,o){var a=this&&this.__decorate||function(f,h,v,b){var C,S=arguments.length,y=S<3?h:b===null?b=Object.getOwnPropertyDescriptor(h,v):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(f,h,v,b);else for(var w=f.length-1;w>=0;w--)(C=f[w])&&(y=(S<3?C(y):S>3?C(h,v,y):C(h,v))||y);return S>3&&y&&Object.defineProperty(h,v,y),y},c=this&&this.__param||function(f,h){return function(v,b){h(v,b,f)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CharSizeService=void 0;let l=o(2585),p=o(8460),m=o(844),_=i.CharSizeService=class extends m.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(f,h,v){super(),this._optionsService=v,this.width=0,this.height=0,this._onCharSizeChange=this.register(new p.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event;try{this._measureStrategy=this.register(new g(this._optionsService))}catch{this._measureStrategy=this.register(new u(f,h,this._optionsService))}this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){let f=this._measureStrategy.measure();f.width===this.width&&f.height===this.height||(this.width=f.width,this.height=f.height,this._onCharSizeChange.fire())}};i.CharSizeService=_=a([c(2,l.IOptionsService)],_);class d extends m.Disposable{constructor(){super(...arguments),this._result={width:0,height:0}}_validateAndSet(h,v){h!==void 0&&h>0&&v!==void 0&&v>0&&(this._result.width=h,this._result.height=v)}}class u extends d{constructor(h,v,b){super(),this._document=h,this._parentElement=v,this._optionsService=b,this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){return this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`,this._validateAndSet(Number(this._measureElement.offsetWidth)/32,Number(this._measureElement.offsetHeight)),this._result}}class g extends d{constructor(h){super(),this._optionsService=h,this._canvas=new OffscreenCanvas(100,100),this._ctx=this._canvas.getContext("2d");let v=this._ctx.measureText("W");if(!("width"in v&&"fontBoundingBoxAscent"in v&&"fontBoundingBoxDescent"in v))throw new Error("Required font metrics not supported")}measure(){this._ctx.font=`${this._optionsService.rawOptions.fontSize}px ${this._optionsService.rawOptions.fontFamily}`;let h=this._ctx.measureText("W");return this._validateAndSet(h.width,h.fontBoundingBoxAscent+h.fontBoundingBoxDescent),this._result}}},4269:function(s,i,o){var a=this&&this.__decorate||function(g,f,h,v){var b,C=arguments.length,S=C<3?f:v===null?v=Object.getOwnPropertyDescriptor(f,h):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(g,f,h,v);else for(var y=g.length-1;y>=0;y--)(b=g[y])&&(S=(C<3?b(S):C>3?b(f,h,S):b(f,h))||S);return C>3&&S&&Object.defineProperty(f,h,S),S},c=this&&this.__param||function(g,f){return function(h,v){f(h,v,g)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CharacterJoinerService=i.JoinedCellData=void 0;let l=o(3734),p=o(643),m=o(511),_=o(2585);class d extends l.AttributeData{constructor(f,h,v){super(),this.content=0,this.combinedData="",this.fg=f.fg,this.bg=f.bg,this.combinedData=h,this._width=v}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(f){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.JoinedCellData=d;let u=i.CharacterJoinerService=class Yv{constructor(f){this._bufferService=f,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new m.CellData}register(f){let h={id:this._nextCharacterJoinerId++,handler:f};return this._characterJoiners.push(h),h.id}deregister(f){for(let h=0;h<this._characterJoiners.length;h++)if(this._characterJoiners[h].id===f)return this._characterJoiners.splice(h,1),!0;return!1}getJoinedCharacters(f){if(this._characterJoiners.length===0)return[];let h=this._bufferService.buffer.lines.get(f);if(!h||h.length===0)return[];let v=[],b=h.translateToString(!0),C=0,S=0,y=0,w=h.getFg(0),E=h.getBg(0);for(let T=0;T<h.getTrimmedLength();T++)if(h.loadCell(T,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==w||this._workCell.bg!==E){if(T-C>1){let I=this._getJoinedRanges(b,y,S,h,C);for(let M=0;M<I.length;M++)v.push(I[M])}C=T,y=S,w=this._workCell.fg,E=this._workCell.bg}S+=this._workCell.getChars().length||p.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-C>1){let T=this._getJoinedRanges(b,y,S,h,C);for(let I=0;I<T.length;I++)v.push(T[I])}return v}_getJoinedRanges(f,h,v,b,C){let S=f.substring(h,v),y=[];try{y=this._characterJoiners[0].handler(S)}catch(w){console.error(w)}for(let w=1;w<this._characterJoiners.length;w++)try{let E=this._characterJoiners[w].handler(S);for(let T=0;T<E.length;T++)Yv._mergeRanges(y,E[T])}catch(E){console.error(E)}return this._stringRangesToCellRanges(y,b,C),y}_stringRangesToCellRanges(f,h,v){let b=0,C=!1,S=0,y=f[b];if(y){for(let w=v;w<this._bufferService.cols;w++){let E=h.getWidth(w),T=h.getString(w).length||p.WHITESPACE_CELL_CHAR.length;if(E!==0){if(!C&&y[0]<=S&&(y[0]=w,C=!0),y[1]<=S){if(y[1]=w,y=f[++b],!y)break;y[0]<=S?(y[0]=w,C=!0):C=!1}S+=T}}y&&(y[1]=this._bufferService.cols)}}static _mergeRanges(f,h){let v=!1;for(let b=0;b<f.length;b++){let C=f[b];if(v){if(h[1]<=C[0])return f[b-1][1]=h[1],f;if(h[1]<=C[1])return f[b-1][1]=Math.max(h[1],C[1]),f.splice(b,1),f;f.splice(b,1),b--}else{if(h[1]<=C[0])return f.splice(b,0,h),f;if(h[1]<=C[1])return C[0]=Math.min(h[0],C[0]),f;h[0]<C[1]&&(C[0]=Math.min(h[0],C[0]),v=!0)}}return v?f[f.length-1][1]=h[1]:f.push(h),f}};i.CharacterJoinerService=u=a([c(0,_.IBufferService)],u)},5114:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CoreBrowserService=void 0;let a=o(844),c=o(8460),l=o(3656);class p extends a.Disposable{constructor(d,u,g){super(),this._textarea=d,this._window=u,this.mainDocument=g,this._isFocused=!1,this._cachedIsFocused=void 0,this._screenDprMonitor=new m(this._window),this._onDprChange=this.register(new c.EventEmitter),this.onDprChange=this._onDprChange.event,this._onWindowChange=this.register(new c.EventEmitter),this.onWindowChange=this._onWindowChange.event,this.register(this.onWindowChange(f=>this._screenDprMonitor.setWindow(f))),this.register((0,c.forwardEvent)(this._screenDprMonitor.onDprChange,this._onDprChange)),this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get window(){return this._window}set window(d){this._window!==d&&(this._window=d,this._onWindowChange.fire(this._window))}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}i.CoreBrowserService=p;class m extends a.Disposable{constructor(d){super(),this._parentWindow=d,this._windowResizeListener=this.register(new a.MutableDisposable),this._onDprChange=this.register(new c.EventEmitter),this.onDprChange=this._onDprChange.event,this._outerListener=()=>this._setDprAndFireIfDiffers(),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._updateDpr(),this._setWindowResizeListener(),this.register((0,a.toDisposable)(()=>this.clearListener()))}setWindow(d){this._parentWindow=d,this._setWindowResizeListener(),this._setDprAndFireIfDiffers()}_setWindowResizeListener(){this._windowResizeListener.value=(0,l.addDisposableDomListener)(this._parentWindow,"resize",()=>this._setDprAndFireIfDiffers())}_setDprAndFireIfDiffers(){this._parentWindow.devicePixelRatio!==this._currentDevicePixelRatio&&this._onDprChange.fire(this._parentWindow.devicePixelRatio),this._updateDpr()}_updateDpr(){this._outerListener&&(this._resolutionMediaMatchList?.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._outerListener=void 0)}}},779:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.LinkProviderService=void 0;let a=o(844);class c extends a.Disposable{constructor(){super(),this.linkProviders=[],this.register((0,a.toDisposable)(()=>this.linkProviders.length=0))}registerLinkProvider(p){return this.linkProviders.push(p),{dispose:()=>{let m=this.linkProviders.indexOf(p);m!==-1&&this.linkProviders.splice(m,1)}}}}i.LinkProviderService=c},8934:function(s,i,o){var a=this&&this.__decorate||function(_,d,u,g){var f,h=arguments.length,v=h<3?d:g===null?g=Object.getOwnPropertyDescriptor(d,u):g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(_,d,u,g);else for(var b=_.length-1;b>=0;b--)(f=_[b])&&(v=(h<3?f(v):h>3?f(d,u,v):f(d,u))||v);return h>3&&v&&Object.defineProperty(d,u,v),v},c=this&&this.__param||function(_,d){return function(u,g){d(u,g,_)}};Object.defineProperty(i,"__esModule",{value:!0}),i.MouseService=void 0;let l=o(4725),p=o(9806),m=i.MouseService=class{constructor(_,d){this._renderService=_,this._charSizeService=d}getCoords(_,d,u,g,f){return(0,p.getCoords)(window,_,d,u,g,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,f)}getMouseReportCoords(_,d){let u=(0,p.getCoordsRelativeToElement)(window,_,d);if(this._charSizeService.hasValidSize)return u[0]=Math.min(Math.max(u[0],0),this._renderService.dimensions.css.canvas.width-1),u[1]=Math.min(Math.max(u[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(u[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(u[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(u[0]),y:Math.floor(u[1])}}};i.MouseService=m=a([c(0,l.IRenderService),c(1,l.ICharSizeService)],m)},3230:function(s,i,o){var a=this&&this.__decorate||function(f,h,v,b){var C,S=arguments.length,y=S<3?h:b===null?b=Object.getOwnPropertyDescriptor(h,v):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(f,h,v,b);else for(var w=f.length-1;w>=0;w--)(C=f[w])&&(y=(S<3?C(y):S>3?C(h,v,y):C(h,v))||y);return S>3&&y&&Object.defineProperty(h,v,y),y},c=this&&this.__param||function(f,h){return function(v,b){h(v,b,f)}};Object.defineProperty(i,"__esModule",{value:!0}),i.RenderService=void 0;let l=o(6193),p=o(4725),m=o(8460),_=o(844),d=o(7226),u=o(2585),g=i.RenderService=class extends _.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(f,h,v,b,C,S,y,w){super(),this._rowCount=f,this._charSizeService=b,this._renderer=this.register(new _.MutableDisposable),this._pausedResizeTask=new d.DebouncedIdleTask,this._observerDisposable=this.register(new _.MutableDisposable),this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new m.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new m.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new m.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new m.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new l.RenderDebouncer((E,T)=>this._renderRows(E,T),y),this.register(this._renderDebouncer),this.register(y.onDprChange(()=>this.handleDevicePixelRatioChange())),this.register(S.onResize(()=>this._fullRefresh())),this.register(S.buffers.onBufferActivate(()=>this._renderer.value?.clear())),this.register(v.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(C.onDecorationRegistered(()=>this._fullRefresh())),this.register(C.onDecorationRemoved(()=>this._fullRefresh())),this.register(v.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio","rescaleOverlappingGlyphs"],()=>{this.clear(),this.handleResize(S.cols,S.rows),this._fullRefresh()})),this.register(v.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(S.buffer.y,S.buffer.y,!0))),this.register(w.onChangeColors(()=>this._fullRefresh())),this._registerIntersectionObserver(y.window,h),this.register(y.onWindowChange(E=>this._registerIntersectionObserver(E,h)))}_registerIntersectionObserver(f,h){if("IntersectionObserver"in f){let v=new f.IntersectionObserver(b=>this._handleIntersectionChange(b[b.length-1]),{threshold:0});v.observe(h),this._observerDisposable.value=(0,_.toDisposable)(()=>v.disconnect())}}_handleIntersectionChange(f){this._isPaused=f.isIntersecting===void 0?f.intersectionRatio===0:!f.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(f,h,v=!1){this._isPaused?this._needsFullRefresh=!0:(v||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(f,h,this._rowCount))}_renderRows(f,h){this._renderer.value&&(f=Math.min(f,this._rowCount-1),h=Math.min(h,this._rowCount-1),this._renderer.value.renderRows(f,h),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:f,end:h}),this._onRender.fire({start:f,end:h}),this._isNextRenderRedrawOnly=!0)}resize(f,h){this._rowCount=h,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(f){this._renderer.value=f,this._renderer.value&&(this._renderer.value.onRequestRedraw(h=>this.refreshRows(h.start,h.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh())}addRefreshCallback(f){return this._renderDebouncer.addRefreshCallback(f)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){this._renderer.value&&(this._renderer.value.clearTextureAtlas?.(),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(f,h){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.value?.handleResize(f,h)):this._renderer.value.handleResize(f,h),this._fullRefresh())}handleCharSizeChanged(){this._renderer.value?.handleCharSizeChanged()}handleBlur(){this._renderer.value?.handleBlur()}handleFocus(){this._renderer.value?.handleFocus()}handleSelectionChanged(f,h,v){this._selectionState.start=f,this._selectionState.end=h,this._selectionState.columnSelectMode=v,this._renderer.value?.handleSelectionChanged(f,h,v)}handleCursorMove(){this._renderer.value?.handleCursorMove()}clear(){this._renderer.value?.clear()}};i.RenderService=g=a([c(2,u.IOptionsService),c(3,p.ICharSizeService),c(4,u.IDecorationService),c(5,u.IBufferService),c(6,p.ICoreBrowserService),c(7,p.IThemeService)],g)},9312:function(s,i,o){var a=this&&this.__decorate||function(y,w,E,T){var I,M=arguments.length,R=M<3?w:T===null?T=Object.getOwnPropertyDescriptor(w,E):T;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(y,w,E,T);else for(var P=y.length-1;P>=0;P--)(I=y[P])&&(R=(M<3?I(R):M>3?I(w,E,R):I(w,E))||R);return M>3&&R&&Object.defineProperty(w,E,R),R},c=this&&this.__param||function(y,w){return function(E,T){w(E,T,y)}};Object.defineProperty(i,"__esModule",{value:!0}),i.SelectionService=void 0;let l=o(9806),p=o(9504),m=o(456),_=o(4725),d=o(8460),u=o(844),g=o(6114),f=o(4841),h=o(511),v=o(2585),b="\xA0",C=new RegExp(b,"g"),S=i.SelectionService=class extends u.Disposable{constructor(y,w,E,T,I,M,R,P,B){super(),this._element=y,this._screenElement=w,this._linkifier=E,this._bufferService=T,this._coreService=I,this._mouseService=M,this._optionsService=R,this._renderService=P,this._coreBrowserService=B,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new h.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new d.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new d.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new d.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new d.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=F=>this._handleMouseMove(F),this._mouseUpListener=F=>this._handleMouseUp(F),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(F=>this._handleTrim(F)),this.register(this._bufferService.buffers.onBufferActivate(F=>this._handleBufferActivate(F))),this.enable(),this._model=new m.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,u.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){let y=this._model.finalSelectionStart,w=this._model.finalSelectionEnd;return!(!y||!w||y[0]===w[0]&&y[1]===w[1])}get selectionText(){let y=this._model.finalSelectionStart,w=this._model.finalSelectionEnd;if(!y||!w)return"";let E=this._bufferService.buffer,T=[];if(this._activeSelectionMode===3){if(y[0]===w[0])return"";let I=y[0]<w[0]?y[0]:w[0],M=y[0]<w[0]?w[0]:y[0];for(let R=y[1];R<=w[1];R++){let P=E.translateBufferLineToString(R,!0,I,M);T.push(P)}}else{let I=y[1]===w[1]?w[0]:void 0;T.push(E.translateBufferLineToString(y[1],!0,y[0],I));for(let M=y[1]+1;M<=w[1]-1;M++){let R=E.lines.get(M),P=E.translateBufferLineToString(M,!0);R?.isWrapped?T[T.length-1]+=P:T.push(P)}if(y[1]!==w[1]){let M=E.lines.get(w[1]),R=E.translateBufferLineToString(w[1],!0,0,w[0]);M&&M.isWrapped?T[T.length-1]+=R:T.push(R)}}return T.map(I=>I.replace(C," ")).join(g.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(y){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),g.isLinux&&y&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(y){let w=this._getMouseBufferCoords(y),E=this._model.finalSelectionStart,T=this._model.finalSelectionEnd;return!!(E&&T&&w)&&this._areCoordsInSelection(w,E,T)}isCellInSelection(y,w){let E=this._model.finalSelectionStart,T=this._model.finalSelectionEnd;return!(!E||!T)&&this._areCoordsInSelection([y,w],E,T)}_areCoordsInSelection(y,w,E){return y[1]>w[1]&&y[1]<E[1]||w[1]===E[1]&&y[1]===w[1]&&y[0]>=w[0]&&y[0]<E[0]||w[1]<E[1]&&y[1]===E[1]&&y[0]<E[0]||w[1]<E[1]&&y[1]===w[1]&&y[0]>=w[0]}_selectWordAtCursor(y,w){let E=this._linkifier.currentLink?.link?.range;if(E)return this._model.selectionStart=[E.start.x-1,E.start.y-1],this._model.selectionStartLength=(0,f.getRangeLength)(E,this._bufferService.cols),this._model.selectionEnd=void 0,!0;let T=this._getMouseBufferCoords(y);return!!T&&(this._selectWordAt(T,w),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(y,w){this._model.clearSelection(),y=Math.max(y,0),w=Math.min(w,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,y],this._model.selectionEnd=[this._bufferService.cols,w],this.refresh(),this._onSelectionChange.fire()}_handleTrim(y){this._model.handleTrim(y)&&this.refresh()}_getMouseBufferCoords(y){let w=this._mouseService.getCoords(y,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(w)return w[0]--,w[1]--,w[1]+=this._bufferService.buffer.ydisp,w}_getMouseEventScrollAmount(y){let w=(0,l.getCoordsRelativeToElement)(this._coreBrowserService.window,y,this._screenElement)[1],E=this._renderService.dimensions.css.canvas.height;return w>=0&&w<=E?0:(w>E&&(w-=E),w=Math.min(Math.max(w,-50),50),w/=50,w/Math.abs(w)+Math.round(14*w))}shouldForceSelection(y){return g.isMac?y.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:y.shiftKey}handleMouseDown(y){if(this._mouseDownTimeStamp=y.timeStamp,(y.button!==2||!this.hasSelection)&&y.button===0){if(!this._enabled){if(!this.shouldForceSelection(y))return;y.stopPropagation()}y.preventDefault(),this._dragScrollAmount=0,this._enabled&&y.shiftKey?this._handleIncrementalClick(y):y.detail===1?this._handleSingleClick(y):y.detail===2?this._handleDoubleClick(y):y.detail===3&&this._handleTripleClick(y),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(y){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(y))}_handleSingleClick(y){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(y)?3:0,this._model.selectionStart=this._getMouseBufferCoords(y),!this._model.selectionStart)return;this._model.selectionEnd=void 0;let w=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);w&&w.length!==this._model.selectionStart[0]&&w.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(y){this._selectWordAtCursor(y,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(y){let w=this._getMouseBufferCoords(y);w&&(this._activeSelectionMode=2,this._selectLineAt(w[1]))}shouldColumnSelect(y){return y.altKey&&!(g.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(y){if(y.stopImmediatePropagation(),!this._model.selectionStart)return;let w=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(y),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(y),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));let E=this._bufferService.buffer;if(this._model.selectionEnd[1]<E.lines.length){let T=E.lines.get(this._model.selectionEnd[1]);T&&T.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]<this._bufferService.cols&&this._model.selectionEnd[0]++}w&&w[0]===this._model.selectionEnd[0]&&w[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});let y=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(y.ydisp+this._bufferService.rows,y.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=y.ydisp),this.refresh()}}_handleMouseUp(y){let w=y.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&w<500&&y.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){let E=this._mouseService.getCoords(y,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(E&&E[0]!==void 0&&E[1]!==void 0){let T=(0,p.moveToCellSequence)(E[0]-1,E[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(T,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){let y=this._model.finalSelectionStart,w=this._model.finalSelectionEnd,E=!(!y||!w||y[0]===w[0]&&y[1]===w[1]);E?y&&w&&(this._oldSelectionStart&&this._oldSelectionEnd&&y[0]===this._oldSelectionStart[0]&&y[1]===this._oldSelectionStart[1]&&w[0]===this._oldSelectionEnd[0]&&w[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(y,w,E)):this._oldHasSelection&&this._fireOnSelectionChange(y,w,E)}_fireOnSelectionChange(y,w,E){this._oldSelectionStart=y,this._oldSelectionEnd=w,this._oldHasSelection=E,this._onSelectionChange.fire()}_handleBufferActivate(y){this.clearSelection(),this._trimListener.dispose(),this._trimListener=y.activeBuffer.lines.onTrim(w=>this._handleTrim(w))}_convertViewportColToCharacterIndex(y,w){let E=w;for(let T=0;w>=T;T++){let I=y.loadCell(T,this._workCell).getChars().length;this._workCell.getWidth()===0?E--:I>1&&w!==T&&(E+=I-1)}return E}setSelection(y,w,E){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[y,w],this._model.selectionStartLength=E,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(y){this._isClickInSelection(y)||(this._selectWordAtCursor(y,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(y,w,E=!0,T=!0){if(y[0]>=this._bufferService.cols)return;let I=this._bufferService.buffer,M=I.lines.get(y[1]);if(!M)return;let R=I.translateBufferLineToString(y[1],!1),P=this._convertViewportColToCharacterIndex(M,y[0]),B=P,F=y[0]-P,N=0,D=0,A=0,O=0;if(R.charAt(P)===" "){for(;P>0&&R.charAt(P-1)===" ";)P--;for(;B<R.length&&R.charAt(B+1)===" ";)B++}else{let $=y[0],J=y[0];M.getWidth($)===0&&(N++,$--),M.getWidth(J)===2&&(D++,J++);let X=M.getString(J).length;for(X>1&&(O+=X-1,B+=X-1);$>0&&P>0&&!this._isCharWordSeparator(M.loadCell($-1,this._workCell));){M.loadCell($-1,this._workCell);let k=this._workCell.getChars().length;this._workCell.getWidth()===0?(N++,$--):k>1&&(A+=k-1,P-=k-1),P--,$--}for(;J<M.length&&B+1<R.length&&!this._isCharWordSeparator(M.loadCell(J+1,this._workCell));){M.loadCell(J+1,this._workCell);let k=this._workCell.getChars().length;this._workCell.getWidth()===2?(D++,J++):k>1&&(O+=k-1,B+=k-1),B++,J++}}B++;let L=P+F-N+A,V=Math.min(this._bufferService.cols,B-P+N+D-A-O);if(w||R.slice(P,B).trim()!==""){if(E&&L===0&&M.getCodePoint(0)!==32){let $=I.lines.get(y[1]-1);if($&&M.isWrapped&&$.getCodePoint(this._bufferService.cols-1)!==32){let J=this._getWordAt([this._bufferService.cols-1,y[1]-1],!1,!0,!1);if(J){let X=this._bufferService.cols-J.start;L-=X,V+=X}}}if(T&&L+V===this._bufferService.cols&&M.getCodePoint(this._bufferService.cols-1)!==32){let $=I.lines.get(y[1]+1);if($?.isWrapped&&$.getCodePoint(0)!==32){let J=this._getWordAt([0,y[1]+1],!1,!1,!0);J&&(V+=J.length)}}return{start:L,length:V}}}_selectWordAt(y,w){let E=this._getWordAt(y,w);if(E){for(;E.start<0;)E.start+=this._bufferService.cols,y[1]--;this._model.selectionStart=[E.start,y[1]],this._model.selectionStartLength=E.length}}_selectToWordAt(y){let w=this._getWordAt(y,!0);if(w){let E=y[1];for(;w.start<0;)w.start+=this._bufferService.cols,E--;if(!this._model.areSelectionValuesReversed())for(;w.start+w.length>this._bufferService.cols;)w.length-=this._bufferService.cols,E++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?w.start:w.start+w.length,E]}}_isCharWordSeparator(y){return y.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(y.getChars())>=0}_selectLineAt(y){let w=this._bufferService.buffer.getWrappedRangeForLine(y),E={start:{x:0,y:w.first},end:{x:this._bufferService.cols-1,y:w.last}};this._model.selectionStart=[0,w.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,f.getRangeLength)(E,this._bufferService.cols)}};i.SelectionService=S=a([c(3,v.IBufferService),c(4,v.ICoreService),c(5,_.IMouseService),c(6,v.IOptionsService),c(7,_.IRenderService),c(8,_.ICoreBrowserService)],S)},4725:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ILinkProviderService=i.IThemeService=i.ICharacterJoinerService=i.ISelectionService=i.IRenderService=i.IMouseService=i.ICoreBrowserService=i.ICharSizeService=void 0;let a=o(8343);i.ICharSizeService=(0,a.createDecorator)("CharSizeService"),i.ICoreBrowserService=(0,a.createDecorator)("CoreBrowserService"),i.IMouseService=(0,a.createDecorator)("MouseService"),i.IRenderService=(0,a.createDecorator)("RenderService"),i.ISelectionService=(0,a.createDecorator)("SelectionService"),i.ICharacterJoinerService=(0,a.createDecorator)("CharacterJoinerService"),i.IThemeService=(0,a.createDecorator)("ThemeService"),i.ILinkProviderService=(0,a.createDecorator)("LinkProviderService")},6731:function(s,i,o){var a=this&&this.__decorate||function(S,y,w,E){var T,I=arguments.length,M=I<3?y:E===null?E=Object.getOwnPropertyDescriptor(y,w):E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(S,y,w,E);else for(var R=S.length-1;R>=0;R--)(T=S[R])&&(M=(I<3?T(M):I>3?T(y,w,M):T(y,w))||M);return I>3&&M&&Object.defineProperty(y,w,M),M},c=this&&this.__param||function(S,y){return function(w,E){y(w,E,S)}};Object.defineProperty(i,"__esModule",{value:!0}),i.ThemeService=i.DEFAULT_ANSI_COLORS=void 0;let l=o(7239),p=o(8055),m=o(8460),_=o(844),d=o(2585),u=p.css.toColor("#ffffff"),g=p.css.toColor("#000000"),f=p.css.toColor("#ffffff"),h=p.css.toColor("#000000"),v={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};i.DEFAULT_ANSI_COLORS=Object.freeze((()=>{let S=[p.css.toColor("#2e3436"),p.css.toColor("#cc0000"),p.css.toColor("#4e9a06"),p.css.toColor("#c4a000"),p.css.toColor("#3465a4"),p.css.toColor("#75507b"),p.css.toColor("#06989a"),p.css.toColor("#d3d7cf"),p.css.toColor("#555753"),p.css.toColor("#ef2929"),p.css.toColor("#8ae234"),p.css.toColor("#fce94f"),p.css.toColor("#729fcf"),p.css.toColor("#ad7fa8"),p.css.toColor("#34e2e2"),p.css.toColor("#eeeeec")],y=[0,95,135,175,215,255];for(let w=0;w<216;w++){let E=y[w/36%6|0],T=y[w/6%6|0],I=y[w%6];S.push({css:p.channels.toCss(E,T,I),rgba:p.channels.toRgba(E,T,I)})}for(let w=0;w<24;w++){let E=8+10*w;S.push({css:p.channels.toCss(E,E,E),rgba:p.channels.toRgba(E,E,E)})}return S})());let b=i.ThemeService=class extends _.Disposable{get colors(){return this._colors}constructor(S){super(),this._optionsService=S,this._contrastCache=new l.ColorContrastCache,this._halfContrastCache=new l.ColorContrastCache,this._onChangeColors=this.register(new m.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:u,background:g,cursor:f,cursorAccent:h,selectionForeground:void 0,selectionBackgroundTransparent:v,selectionBackgroundOpaque:p.color.blend(g,v),selectionInactiveBackgroundTransparent:v,selectionInactiveBackgroundOpaque:p.color.blend(g,v),ansi:i.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(S={}){let y=this._colors;if(y.foreground=C(S.foreground,u),y.background=C(S.background,g),y.cursor=C(S.cursor,f),y.cursorAccent=C(S.cursorAccent,h),y.selectionBackgroundTransparent=C(S.selectionBackground,v),y.selectionBackgroundOpaque=p.color.blend(y.background,y.selectionBackgroundTransparent),y.selectionInactiveBackgroundTransparent=C(S.selectionInactiveBackground,y.selectionBackgroundTransparent),y.selectionInactiveBackgroundOpaque=p.color.blend(y.background,y.selectionInactiveBackgroundTransparent),y.selectionForeground=S.selectionForeground?C(S.selectionForeground,p.NULL_COLOR):void 0,y.selectionForeground===p.NULL_COLOR&&(y.selectionForeground=void 0),p.color.isOpaque(y.selectionBackgroundTransparent)&&(y.selectionBackgroundTransparent=p.color.opacity(y.selectionBackgroundTransparent,.3)),p.color.isOpaque(y.selectionInactiveBackgroundTransparent)&&(y.selectionInactiveBackgroundTransparent=p.color.opacity(y.selectionInactiveBackgroundTransparent,.3)),y.ansi=i.DEFAULT_ANSI_COLORS.slice(),y.ansi[0]=C(S.black,i.DEFAULT_ANSI_COLORS[0]),y.ansi[1]=C(S.red,i.DEFAULT_ANSI_COLORS[1]),y.ansi[2]=C(S.green,i.DEFAULT_ANSI_COLORS[2]),y.ansi[3]=C(S.yellow,i.DEFAULT_ANSI_COLORS[3]),y.ansi[4]=C(S.blue,i.DEFAULT_ANSI_COLORS[4]),y.ansi[5]=C(S.magenta,i.DEFAULT_ANSI_COLORS[5]),y.ansi[6]=C(S.cyan,i.DEFAULT_ANSI_COLORS[6]),y.ansi[7]=C(S.white,i.DEFAULT_ANSI_COLORS[7]),y.ansi[8]=C(S.brightBlack,i.DEFAULT_ANSI_COLORS[8]),y.ansi[9]=C(S.brightRed,i.DEFAULT_ANSI_COLORS[9]),y.ansi[10]=C(S.brightGreen,i.DEFAULT_ANSI_COLORS[10]),y.ansi[11]=C(S.brightYellow,i.DEFAULT_ANSI_COLORS[11]),y.ansi[12]=C(S.brightBlue,i.DEFAULT_ANSI_COLORS[12]),y.ansi[13]=C(S.brightMagenta,i.DEFAULT_ANSI_COLORS[13]),y.ansi[14]=C(S.brightCyan,i.DEFAULT_ANSI_COLORS[14]),y.ansi[15]=C(S.brightWhite,i.DEFAULT_ANSI_COLORS[15]),S.extendedAnsi){let w=Math.min(y.ansi.length-16,S.extendedAnsi.length);for(let E=0;E<w;E++)y.ansi[E+16]=C(S.extendedAnsi[E],i.DEFAULT_ANSI_COLORS[E+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(S){this._restoreColor(S),this._onChangeColors.fire(this.colors)}_restoreColor(S){if(S!==void 0)switch(S){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[S]=this._restoreColors.ansi[S]}else for(let y=0;y<this._restoreColors.ansi.length;++y)this._colors.ansi[y]=this._restoreColors.ansi[y]}modifyColors(S){S(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function C(S,y){if(S!==void 0)try{return p.css.toColor(S)}catch{}return y}i.ThemeService=b=a([c(0,d.IOptionsService)],b)},6349:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CircularList=void 0;let a=o(8460),c=o(844);class l extends c.Disposable{constructor(m){super(),this._maxLength=m,this.onDeleteEmitter=this.register(new a.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new a.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new a.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(m){if(this._maxLength===m)return;let _=new Array(m);for(let d=0;d<Math.min(m,this.length);d++)_[d]=this._array[this._getCyclicIndex(d)];this._array=_,this._maxLength=m,this._startIndex=0}get length(){return this._length}set length(m){if(m>this._length)for(let _=this._length;_<m;_++)this._array[_]=void 0;this._length=m}get(m){return this._array[this._getCyclicIndex(m)]}set(m,_){this._array[this._getCyclicIndex(m)]=_}push(m){this._array[this._getCyclicIndex(this._length)]=m,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(m,_,...d){if(_){for(let u=m;u<this._length-_;u++)this._array[this._getCyclicIndex(u)]=this._array[this._getCyclicIndex(u+_)];this._length-=_,this.onDeleteEmitter.fire({index:m,amount:_})}for(let u=this._length-1;u>=m;u--)this._array[this._getCyclicIndex(u+d.length)]=this._array[this._getCyclicIndex(u)];for(let u=0;u<d.length;u++)this._array[this._getCyclicIndex(m+u)]=d[u];if(d.length&&this.onInsertEmitter.fire({index:m,amount:d.length}),this._length+d.length>this._maxLength){let u=this._length+d.length-this._maxLength;this._startIndex+=u,this._length=this._maxLength,this.onTrimEmitter.fire(u)}else this._length+=d.length}trimStart(m){m>this._length&&(m=this._length),this._startIndex+=m,this._length-=m,this.onTrimEmitter.fire(m)}shiftElements(m,_,d){if(!(_<=0)){if(m<0||m>=this._length)throw new Error("start argument out of range");if(m+d<0)throw new Error("Cannot shift elements in list beyond index 0");if(d>0){for(let g=_-1;g>=0;g--)this.set(m+g+d,this.get(m+g));let u=m+_+d-this._length;if(u>0)for(this._length+=u;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let u=0;u<_;u++)this.set(m+u+d,this.get(m+u))}}_getCyclicIndex(m){return(this._startIndex+m)%this._maxLength}}i.CircularList=l},1439:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.clone=void 0,i.clone=function o(a,c=5){if(typeof a!="object")return a;let l=Array.isArray(a)?[]:{};for(let p in a)l[p]=c<=1?a[p]:a[p]&&o(a[p],c-1);return l}},8055:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.contrastRatio=i.toPaddedHex=i.rgba=i.rgb=i.css=i.color=i.channels=i.NULL_COLOR=void 0;let o=0,a=0,c=0,l=0;var p,m,_,d,u;function g(h){let v=h.toString(16);return v.length<2?"0"+v:v}function f(h,v){return h<v?(v+.05)/(h+.05):(h+.05)/(v+.05)}i.NULL_COLOR={css:"#00000000",rgba:0},(function(h){h.toCss=function(v,b,C,S){return S!==void 0?`#${g(v)}${g(b)}${g(C)}${g(S)}`:`#${g(v)}${g(b)}${g(C)}`},h.toRgba=function(v,b,C,S=255){return(v<<24|b<<16|C<<8|S)>>>0},h.toColor=function(v,b,C,S){return{css:h.toCss(v,b,C,S),rgba:h.toRgba(v,b,C,S)}}})(p||(i.channels=p={})),(function(h){function v(b,C){return l=Math.round(255*C),[o,a,c]=u.toChannels(b.rgba),{css:p.toCss(o,a,c,l),rgba:p.toRgba(o,a,c,l)}}h.blend=function(b,C){if(l=(255&C.rgba)/255,l===1)return{css:C.css,rgba:C.rgba};let S=C.rgba>>24&255,y=C.rgba>>16&255,w=C.rgba>>8&255,E=b.rgba>>24&255,T=b.rgba>>16&255,I=b.rgba>>8&255;return o=E+Math.round((S-E)*l),a=T+Math.round((y-T)*l),c=I+Math.round((w-I)*l),{css:p.toCss(o,a,c),rgba:p.toRgba(o,a,c)}},h.isOpaque=function(b){return(255&b.rgba)==255},h.ensureContrastRatio=function(b,C,S){let y=u.ensureContrastRatio(b.rgba,C.rgba,S);if(y)return p.toColor(y>>24&255,y>>16&255,y>>8&255)},h.opaque=function(b){let C=(255|b.rgba)>>>0;return[o,a,c]=u.toChannels(C),{css:p.toCss(o,a,c),rgba:C}},h.opacity=v,h.multiplyOpacity=function(b,C){return l=255&b.rgba,v(b,l*C/255)},h.toColorRGB=function(b){return[b.rgba>>24&255,b.rgba>>16&255,b.rgba>>8&255]}})(m||(i.color=m={})),(function(h){let v,b;try{let C=document.createElement("canvas");C.width=1,C.height=1;let S=C.getContext("2d",{willReadFrequently:!0});S&&(v=S,v.globalCompositeOperation="copy",b=v.createLinearGradient(0,0,1,1))}catch{}h.toColor=function(C){if(C.match(/#[\da-f]{3,8}/i))switch(C.length){case 4:return o=parseInt(C.slice(1,2).repeat(2),16),a=parseInt(C.slice(2,3).repeat(2),16),c=parseInt(C.slice(3,4).repeat(2),16),p.toColor(o,a,c);case 5:return o=parseInt(C.slice(1,2).repeat(2),16),a=parseInt(C.slice(2,3).repeat(2),16),c=parseInt(C.slice(3,4).repeat(2),16),l=parseInt(C.slice(4,5).repeat(2),16),p.toColor(o,a,c,l);case 7:return{css:C,rgba:(parseInt(C.slice(1),16)<<8|255)>>>0};case 9:return{css:C,rgba:parseInt(C.slice(1),16)>>>0}}let S=C.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(S)return o=parseInt(S[1]),a=parseInt(S[2]),c=parseInt(S[3]),l=Math.round(255*(S[5]===void 0?1:parseFloat(S[5]))),p.toColor(o,a,c,l);if(!v||!b)throw new Error("css.toColor: Unsupported css format");if(v.fillStyle=b,v.fillStyle=C,typeof v.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(v.fillRect(0,0,1,1),[o,a,c,l]=v.getImageData(0,0,1,1).data,l!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:p.toRgba(o,a,c,l),css:C}}})(_||(i.css=_={})),(function(h){function v(b,C,S){let y=b/255,w=C/255,E=S/255;return .2126*(y<=.03928?y/12.92:Math.pow((y+.055)/1.055,2.4))+.7152*(w<=.03928?w/12.92:Math.pow((w+.055)/1.055,2.4))+.0722*(E<=.03928?E/12.92:Math.pow((E+.055)/1.055,2.4))}h.relativeLuminance=function(b){return v(b>>16&255,b>>8&255,255&b)},h.relativeLuminance2=v})(d||(i.rgb=d={})),(function(h){function v(C,S,y){let w=C>>24&255,E=C>>16&255,T=C>>8&255,I=S>>24&255,M=S>>16&255,R=S>>8&255,P=f(d.relativeLuminance2(I,M,R),d.relativeLuminance2(w,E,T));for(;P<y&&(I>0||M>0||R>0);)I-=Math.max(0,Math.ceil(.1*I)),M-=Math.max(0,Math.ceil(.1*M)),R-=Math.max(0,Math.ceil(.1*R)),P=f(d.relativeLuminance2(I,M,R),d.relativeLuminance2(w,E,T));return(I<<24|M<<16|R<<8|255)>>>0}function b(C,S,y){let w=C>>24&255,E=C>>16&255,T=C>>8&255,I=S>>24&255,M=S>>16&255,R=S>>8&255,P=f(d.relativeLuminance2(I,M,R),d.relativeLuminance2(w,E,T));for(;P<y&&(I<255||M<255||R<255);)I=Math.min(255,I+Math.ceil(.1*(255-I))),M=Math.min(255,M+Math.ceil(.1*(255-M))),R=Math.min(255,R+Math.ceil(.1*(255-R))),P=f(d.relativeLuminance2(I,M,R),d.relativeLuminance2(w,E,T));return(I<<24|M<<16|R<<8|255)>>>0}h.blend=function(C,S){if(l=(255&S)/255,l===1)return S;let y=S>>24&255,w=S>>16&255,E=S>>8&255,T=C>>24&255,I=C>>16&255,M=C>>8&255;return o=T+Math.round((y-T)*l),a=I+Math.round((w-I)*l),c=M+Math.round((E-M)*l),p.toRgba(o,a,c)},h.ensureContrastRatio=function(C,S,y){let w=d.relativeLuminance(C>>8),E=d.relativeLuminance(S>>8);if(f(w,E)<y){if(E<w){let M=v(C,S,y),R=f(w,d.relativeLuminance(M>>8));if(R<y){let P=b(C,S,y);return R>f(w,d.relativeLuminance(P>>8))?M:P}return M}let T=b(C,S,y),I=f(w,d.relativeLuminance(T>>8));if(I<y){let M=v(C,S,y);return I>f(w,d.relativeLuminance(M>>8))?T:M}return T}},h.reduceLuminance=v,h.increaseLuminance=b,h.toChannels=function(C){return[C>>24&255,C>>16&255,C>>8&255,255&C]}})(u||(i.rgba=u={})),i.toPaddedHex=g,i.contrastRatio=f},8969:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CoreTerminal=void 0;let a=o(844),c=o(2585),l=o(4348),p=o(7866),m=o(744),_=o(7302),d=o(6975),u=o(8460),g=o(1753),f=o(1480),h=o(7994),v=o(9282),b=o(5435),C=o(5981),S=o(2660),y=!1;class w extends a.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new u.EventEmitter),this._onScroll.event(T=>{this._onScrollApi?.fire(T.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(T){for(let I in T)this.optionsService.options[I]=T[I]}constructor(T){super(),this._windowsWrappingHeuristics=this.register(new a.MutableDisposable),this._onBinary=this.register(new u.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new u.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new u.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new u.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new u.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new u.EventEmitter),this._instantiationService=new l.InstantiationService,this.optionsService=this.register(new _.OptionsService(T)),this._instantiationService.setService(c.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(m.BufferService)),this._instantiationService.setService(c.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(p.LogService)),this._instantiationService.setService(c.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(d.CoreService)),this._instantiationService.setService(c.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(g.CoreMouseService)),this._instantiationService.setService(c.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(f.UnicodeService)),this._instantiationService.setService(c.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(h.CharsetService),this._instantiationService.setService(c.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(S.OscLinkService),this._instantiationService.setService(c.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new b.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,u.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,u.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,u.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,u.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(I=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(I=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new C.WriteBuffer((I,M)=>this._inputHandler.parse(I,M))),this.register((0,u.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(T,I){this._writeBuffer.write(T,I)}writeSync(T,I){this._logService.logLevel<=c.LogLevelEnum.WARN&&!y&&(this._logService.warn("writeSync is unreliable and will be removed soon."),y=!0),this._writeBuffer.writeSync(T,I)}input(T,I=!0){this.coreService.triggerDataEvent(T,I)}resize(T,I){isNaN(T)||isNaN(I)||(T=Math.max(T,m.MINIMUM_COLS),I=Math.max(I,m.MINIMUM_ROWS),this._bufferService.resize(T,I))}scroll(T,I=!1){this._bufferService.scroll(T,I)}scrollLines(T,I,M){this._bufferService.scrollLines(T,I,M)}scrollPages(T){this.scrollLines(T*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(T){let I=T-this._bufferService.buffer.ydisp;I!==0&&this.scrollLines(I)}registerEscHandler(T,I){return this._inputHandler.registerEscHandler(T,I)}registerDcsHandler(T,I){return this._inputHandler.registerDcsHandler(T,I)}registerCsiHandler(T,I){return this._inputHandler.registerCsiHandler(T,I)}registerOscHandler(T,I){return this._inputHandler.registerOscHandler(T,I)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let T=!1,I=this.optionsService.rawOptions.windowsPty;I&&I.buildNumber!==void 0&&I.buildNumber!==void 0?T=I.backend==="conpty"&&I.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(T=!0),T?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){let T=[];T.push(this.onLineFeed(v.updateWindowsModeWrappedState.bind(null,this._bufferService))),T.push(this.registerCsiHandler({final:"H"},()=>((0,v.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,a.toDisposable)(()=>{for(let I of T)I.dispose()})}}}i.CoreTerminal=w},8460:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.runAndSubscribe=i.forwardEvent=i.EventEmitter=void 0,i.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=o=>(this._listeners.push(o),{dispose:()=>{if(!this._disposed){for(let a=0;a<this._listeners.length;a++)if(this._listeners[a]===o)return void this._listeners.splice(a,1)}}})),this._event}fire(o,a){let c=[];for(let l=0;l<this._listeners.length;l++)c.push(this._listeners[l]);for(let l=0;l<c.length;l++)c[l].call(void 0,o,a)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},i.forwardEvent=function(o,a){return o(c=>a.fire(c))},i.runAndSubscribe=function(o,a){return a(void 0),o(c=>a(c))}},5435:function(s,i,o){var a=this&&this.__decorate||function(N,D,A,O){var L,V=arguments.length,$=V<3?D:O===null?O=Object.getOwnPropertyDescriptor(D,A):O;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")$=Reflect.decorate(N,D,A,O);else for(var J=N.length-1;J>=0;J--)(L=N[J])&&($=(V<3?L($):V>3?L(D,A,$):L(D,A))||$);return V>3&&$&&Object.defineProperty(D,A,$),$},c=this&&this.__param||function(N,D){return function(A,O){D(A,O,N)}};Object.defineProperty(i,"__esModule",{value:!0}),i.InputHandler=i.WindowsOptionsReportType=void 0;let l=o(2584),p=o(7116),m=o(2015),_=o(844),d=o(482),u=o(8437),g=o(8460),f=o(643),h=o(511),v=o(3734),b=o(2585),C=o(1480),S=o(6242),y=o(6351),w=o(5941),E={"(":0,")":1,"*":2,"+":3,"-":1,".":2},T=131072;function I(N,D){if(N>24)return D.setWinLines||!1;switch(N){case 1:return!!D.restoreWin;case 2:return!!D.minimizeWin;case 3:return!!D.setWinPosition;case 4:return!!D.setWinSizePixels;case 5:return!!D.raiseWin;case 6:return!!D.lowerWin;case 7:return!!D.refreshWin;case 8:return!!D.setWinSizeChars;case 9:return!!D.maximizeWin;case 10:return!!D.fullscreenWin;case 11:return!!D.getWinState;case 13:return!!D.getWinPosition;case 14:return!!D.getWinSizePixels;case 15:return!!D.getScreenSizePixels;case 16:return!!D.getCellSizePixels;case 18:return!!D.getWinSizeChars;case 19:return!!D.getScreenSizeChars;case 20:return!!D.getIconTitle;case 21:return!!D.getWinTitle;case 22:return!!D.pushTitle;case 23:return!!D.popTitle;case 24:return!!D.setWinLines}return!1}var M;(function(N){N[N.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",N[N.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(M||(i.WindowsOptionsReportType=M={}));let R=0;class P extends _.Disposable{getAttrData(){return this._curAttrData}constructor(D,A,O,L,V,$,J,X,k=new m.EscapeSequenceParser){super(),this._bufferService=D,this._charsetService=A,this._coreService=O,this._logService=L,this._optionsService=V,this._oscLinkService=$,this._coreMouseService=J,this._unicodeService=X,this._parser=k,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new d.StringToUtf32,this._utf8Decoder=new d.Utf8ToUtf32,this._workCell=new h.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=u.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=u.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new g.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new g.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new g.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new g.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new g.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new g.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new g.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new g.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new g.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new g.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new g.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new g.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new g.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new B(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(x=>this._activeBuffer=x.activeBuffer)),this._parser.setCsiHandlerFallback((x,j)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(x),params:j.toArray()})}),this._parser.setEscHandlerFallback(x=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(x)})}),this._parser.setExecuteHandlerFallback(x=>{this._logService.debug("Unknown EXECUTE code: ",{code:x})}),this._parser.setOscHandlerFallback((x,j,U)=>{this._logService.debug("Unknown OSC code: ",{identifier:x,action:j,data:U})}),this._parser.setDcsHandlerFallback((x,j,U)=>{j==="HOOK"&&(U=U.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(x),action:j,payload:U})}),this._parser.setPrintHandler((x,j,U)=>this.print(x,j,U)),this._parser.registerCsiHandler({final:"@"},x=>this.insertChars(x)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},x=>this.scrollLeft(x)),this._parser.registerCsiHandler({final:"A"},x=>this.cursorUp(x)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},x=>this.scrollRight(x)),this._parser.registerCsiHandler({final:"B"},x=>this.cursorDown(x)),this._parser.registerCsiHandler({final:"C"},x=>this.cursorForward(x)),this._parser.registerCsiHandler({final:"D"},x=>this.cursorBackward(x)),this._parser.registerCsiHandler({final:"E"},x=>this.cursorNextLine(x)),this._parser.registerCsiHandler({final:"F"},x=>this.cursorPrecedingLine(x)),this._parser.registerCsiHandler({final:"G"},x=>this.cursorCharAbsolute(x)),this._parser.registerCsiHandler({final:"H"},x=>this.cursorPosition(x)),this._parser.registerCsiHandler({final:"I"},x=>this.cursorForwardTab(x)),this._parser.registerCsiHandler({final:"J"},x=>this.eraseInDisplay(x,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},x=>this.eraseInDisplay(x,!0)),this._parser.registerCsiHandler({final:"K"},x=>this.eraseInLine(x,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},x=>this.eraseInLine(x,!0)),this._parser.registerCsiHandler({final:"L"},x=>this.insertLines(x)),this._parser.registerCsiHandler({final:"M"},x=>this.deleteLines(x)),this._parser.registerCsiHandler({final:"P"},x=>this.deleteChars(x)),this._parser.registerCsiHandler({final:"S"},x=>this.scrollUp(x)),this._parser.registerCsiHandler({final:"T"},x=>this.scrollDown(x)),this._parser.registerCsiHandler({final:"X"},x=>this.eraseChars(x)),this._parser.registerCsiHandler({final:"Z"},x=>this.cursorBackwardTab(x)),this._parser.registerCsiHandler({final:"`"},x=>this.charPosAbsolute(x)),this._parser.registerCsiHandler({final:"a"},x=>this.hPositionRelative(x)),this._parser.registerCsiHandler({final:"b"},x=>this.repeatPrecedingCharacter(x)),this._parser.registerCsiHandler({final:"c"},x=>this.sendDeviceAttributesPrimary(x)),this._parser.registerCsiHandler({prefix:">",final:"c"},x=>this.sendDeviceAttributesSecondary(x)),this._parser.registerCsiHandler({final:"d"},x=>this.linePosAbsolute(x)),this._parser.registerCsiHandler({final:"e"},x=>this.vPositionRelative(x)),this._parser.registerCsiHandler({final:"f"},x=>this.hVPosition(x)),this._parser.registerCsiHandler({final:"g"},x=>this.tabClear(x)),this._parser.registerCsiHandler({final:"h"},x=>this.setMode(x)),this._parser.registerCsiHandler({prefix:"?",final:"h"},x=>this.setModePrivate(x)),this._parser.registerCsiHandler({final:"l"},x=>this.resetMode(x)),this._parser.registerCsiHandler({prefix:"?",final:"l"},x=>this.resetModePrivate(x)),this._parser.registerCsiHandler({final:"m"},x=>this.charAttributes(x)),this._parser.registerCsiHandler({final:"n"},x=>this.deviceStatus(x)),this._parser.registerCsiHandler({prefix:"?",final:"n"},x=>this.deviceStatusPrivate(x)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},x=>this.softReset(x)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},x=>this.setCursorStyle(x)),this._parser.registerCsiHandler({final:"r"},x=>this.setScrollRegion(x)),this._parser.registerCsiHandler({final:"s"},x=>this.saveCursor(x)),this._parser.registerCsiHandler({final:"t"},x=>this.windowOptions(x)),this._parser.registerCsiHandler({final:"u"},x=>this.restoreCursor(x)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},x=>this.insertColumns(x)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},x=>this.deleteColumns(x)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},x=>this.selectProtected(x)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},x=>this.requestMode(x,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},x=>this.requestMode(x,!1)),this._parser.setExecuteHandler(l.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(l.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(l.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(l.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(l.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(l.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(l.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(l.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(l.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(l.C1.IND,()=>this.index()),this._parser.setExecuteHandler(l.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(l.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new S.OscHandler(x=>(this.setTitle(x),this.setIconName(x),!0))),this._parser.registerOscHandler(1,new S.OscHandler(x=>this.setIconName(x))),this._parser.registerOscHandler(2,new S.OscHandler(x=>this.setTitle(x))),this._parser.registerOscHandler(4,new S.OscHandler(x=>this.setOrReportIndexedColor(x))),this._parser.registerOscHandler(8,new S.OscHandler(x=>this.setHyperlink(x))),this._parser.registerOscHandler(10,new S.OscHandler(x=>this.setOrReportFgColor(x))),this._parser.registerOscHandler(11,new S.OscHandler(x=>this.setOrReportBgColor(x))),this._parser.registerOscHandler(12,new S.OscHandler(x=>this.setOrReportCursorColor(x))),this._parser.registerOscHandler(104,new S.OscHandler(x=>this.restoreIndexedColor(x))),this._parser.registerOscHandler(110,new S.OscHandler(x=>this.restoreFgColor(x))),this._parser.registerOscHandler(111,new S.OscHandler(x=>this.restoreBgColor(x))),this._parser.registerOscHandler(112,new S.OscHandler(x=>this.restoreCursorColor(x))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(let x in p.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:x},()=>this.selectCharset("("+x)),this._parser.registerEscHandler({intermediates:")",final:x},()=>this.selectCharset(")"+x)),this._parser.registerEscHandler({intermediates:"*",final:x},()=>this.selectCharset("*"+x)),this._parser.registerEscHandler({intermediates:"+",final:x},()=>this.selectCharset("+"+x)),this._parser.registerEscHandler({intermediates:"-",final:x},()=>this.selectCharset("-"+x)),this._parser.registerEscHandler({intermediates:".",final:x},()=>this.selectCharset("."+x)),this._parser.registerEscHandler({intermediates:"/",final:x},()=>this.selectCharset("/"+x));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(x=>(this._logService.error("Parsing error: ",x),x)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new y.DcsHandler((x,j)=>this.requestStatusString(x,j)))}_preserveStack(D,A,O,L){this._parseStack.paused=!0,this._parseStack.cursorStartX=D,this._parseStack.cursorStartY=A,this._parseStack.decodedLength=O,this._parseStack.position=L}_logSlowResolvingAsync(D){this._logService.logLevel<=b.LogLevelEnum.WARN&&Promise.race([D,new Promise((A,O)=>setTimeout(()=>O("#SLOW_TIMEOUT"),5e3))]).catch(A=>{if(A!=="#SLOW_TIMEOUT")throw A;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(D,A){let O,L=this._activeBuffer.x,V=this._activeBuffer.y,$=0,J=this._parseStack.paused;if(J){if(O=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,A))return this._logSlowResolvingAsync(O),O;L=this._parseStack.cursorStartX,V=this._parseStack.cursorStartY,this._parseStack.paused=!1,D.length>T&&($=this._parseStack.position+T)}if(this._logService.logLevel<=b.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof D=="string"?` "${D}"`:` "${Array.prototype.map.call(D,x=>String.fromCharCode(x)).join("")}"`),typeof D=="string"?D.split("").map(x=>x.charCodeAt(0)):D),this._parseBuffer.length<D.length&&this._parseBuffer.length<T&&(this._parseBuffer=new Uint32Array(Math.min(D.length,T))),J||this._dirtyRowTracker.clearRange(),D.length>T)for(let x=$;x<D.length;x+=T){let j=x+T<D.length?x+T:D.length,U=typeof D=="string"?this._stringDecoder.decode(D.substring(x,j),this._parseBuffer):this._utf8Decoder.decode(D.subarray(x,j),this._parseBuffer);if(O=this._parser.parse(this._parseBuffer,U))return this._preserveStack(L,V,U,x),this._logSlowResolvingAsync(O),O}else if(!J){let x=typeof D=="string"?this._stringDecoder.decode(D,this._parseBuffer):this._utf8Decoder.decode(D,this._parseBuffer);if(O=this._parser.parse(this._parseBuffer,x))return this._preserveStack(L,V,x,0),this._logSlowResolvingAsync(O),O}this._activeBuffer.x===L&&this._activeBuffer.y===V||this._onCursorMove.fire();let X=this._dirtyRowTracker.end+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp),k=this._dirtyRowTracker.start+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp);k<this._bufferService.rows&&this._onRequestRefreshRows.fire(Math.min(k,this._bufferService.rows-1),Math.min(X,this._bufferService.rows-1))}print(D,A,O){let L,V,$=this._charsetService.charset,J=this._optionsService.rawOptions.screenReaderMode,X=this._bufferService.cols,k=this._coreService.decPrivateModes.wraparound,x=this._coreService.modes.insertMode,j=this._curAttrData,U=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&O-A>0&&U.getWidth(this._activeBuffer.x-1)===2&&U.setCellFromCodepoint(this._activeBuffer.x-1,0,1,j);let Y=this._parser.precedingJoinState;for(let G=A;G<O;++G){if(L=D[G],L<127&&$){let We=$[String.fromCharCode(L)];We&&(L=We.charCodeAt(0))}let he=this._unicodeService.charProperties(L,Y);V=C.UnicodeService.extractWidth(he);let ie=C.UnicodeService.extractShouldJoin(he),De=ie?C.UnicodeService.extractWidth(Y):0;if(Y=he,J&&this._onA11yChar.fire((0,d.stringFromCodePoint)(L)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),this._activeBuffer.x+V-De>X){if(k){let We=U,se=this._activeBuffer.x-De;for(this._activeBuffer.x=De,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),U=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y),De>0&&U instanceof u.BufferLine&&U.copyCellsFrom(We,se,0,De,!1);se<X;)We.setCellFromCodepoint(se++,0,1,j)}else if(this._activeBuffer.x=X-1,V===2)continue}if(ie&&this._activeBuffer.x){let We=U.getWidth(this._activeBuffer.x-1)?1:2;U.addCodepointToCell(this._activeBuffer.x-We,L,V);for(let se=V-De;--se>=0;)U.setCellFromCodepoint(this._activeBuffer.x++,0,0,j)}else if(x&&(U.insertCells(this._activeBuffer.x,V-De,this._activeBuffer.getNullCell(j)),U.getWidth(X-1)===2&&U.setCellFromCodepoint(X-1,f.NULL_CELL_CODE,f.NULL_CELL_WIDTH,j)),U.setCellFromCodepoint(this._activeBuffer.x++,L,V,j),V>0)for(;--V;)U.setCellFromCodepoint(this._activeBuffer.x++,0,0,j)}this._parser.precedingJoinState=Y,this._activeBuffer.x<X&&O-A>0&&U.getWidth(this._activeBuffer.x)===0&&!U.hasContent(this._activeBuffer.x)&&U.setCellFromCodepoint(this._activeBuffer.x,0,1,j),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(D,A){return D.final!=="t"||D.prefix||D.intermediates?this._parser.registerCsiHandler(D,A):this._parser.registerCsiHandler(D,O=>!I(O.params[0],this._optionsService.rawOptions.windowOptions)||A(O))}registerDcsHandler(D,A){return this._parser.registerDcsHandler(D,new y.DcsHandler(A))}registerEscHandler(D,A){return this._parser.registerEscHandler(D,A)}registerOscHandler(D,A){return this._parser.registerOscHandler(D,new S.OscHandler(A))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)?.isWrapped){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;let D=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);D.hasWidth(this._activeBuffer.x)&&!D.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let D=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-D),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(D=this._bufferService.cols-1){this._activeBuffer.x=Math.min(D,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(D,A){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=D,this._activeBuffer.y=this._activeBuffer.scrollTop+A):(this._activeBuffer.x=D,this._activeBuffer.y=A),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(D,A){this._restrictCursor(),this._setCursor(this._activeBuffer.x+D,this._activeBuffer.y+A)}cursorUp(D){let A=this._activeBuffer.y-this._activeBuffer.scrollTop;return A>=0?this._moveCursor(0,-Math.min(A,D.params[0]||1)):this._moveCursor(0,-(D.params[0]||1)),!0}cursorDown(D){let A=this._activeBuffer.scrollBottom-this._activeBuffer.y;return A>=0?this._moveCursor(0,Math.min(A,D.params[0]||1)):this._moveCursor(0,D.params[0]||1),!0}cursorForward(D){return this._moveCursor(D.params[0]||1,0),!0}cursorBackward(D){return this._moveCursor(-(D.params[0]||1),0),!0}cursorNextLine(D){return this.cursorDown(D),this._activeBuffer.x=0,!0}cursorPrecedingLine(D){return this.cursorUp(D),this._activeBuffer.x=0,!0}cursorCharAbsolute(D){return this._setCursor((D.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(D){return this._setCursor(D.length>=2?(D.params[1]||1)-1:0,(D.params[0]||1)-1),!0}charPosAbsolute(D){return this._setCursor((D.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(D){return this._moveCursor(D.params[0]||1,0),!0}linePosAbsolute(D){return this._setCursor(this._activeBuffer.x,(D.params[0]||1)-1),!0}vPositionRelative(D){return this._moveCursor(0,D.params[0]||1),!0}hVPosition(D){return this.cursorPosition(D),!0}tabClear(D){let A=D.params[0];return A===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:A===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(D){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let A=D.params[0]||1;for(;A--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(D){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let A=D.params[0]||1;for(;A--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(D){let A=D.params[0];return A===1&&(this._curAttrData.bg|=536870912),A!==2&&A!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(D,A,O,L=!1,V=!1){let $=this._activeBuffer.lines.get(this._activeBuffer.ybase+D);$.replaceCells(A,O,this._activeBuffer.getNullCell(this._eraseAttrData()),V),L&&($.isWrapped=!1)}_resetBufferLine(D,A=!1){let O=this._activeBuffer.lines.get(this._activeBuffer.ybase+D);O&&(O.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),A),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+D),O.isWrapped=!1)}eraseInDisplay(D,A=!1){let O;switch(this._restrictCursor(this._bufferService.cols),D.params[0]){case 0:for(O=this._activeBuffer.y,this._dirtyRowTracker.markDirty(O),this._eraseInBufferLine(O++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,A);O<this._bufferService.rows;O++)this._resetBufferLine(O,A);this._dirtyRowTracker.markDirty(O);break;case 1:for(O=this._activeBuffer.y,this._dirtyRowTracker.markDirty(O),this._eraseInBufferLine(O,0,this._activeBuffer.x+1,!0,A),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(O+1).isWrapped=!1);O--;)this._resetBufferLine(O,A);this._dirtyRowTracker.markDirty(0);break;case 2:for(O=this._bufferService.rows,this._dirtyRowTracker.markDirty(O-1);O--;)this._resetBufferLine(O,A);this._dirtyRowTracker.markDirty(0);break;case 3:let L=this._activeBuffer.lines.length-this._bufferService.rows;L>0&&(this._activeBuffer.lines.trimStart(L),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-L,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-L,0),this._onScroll.fire(0))}return!0}eraseInLine(D,A=!1){switch(this._restrictCursor(this._bufferService.cols),D.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,A);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,A);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,A)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(D){this._restrictCursor();let A=D.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let O=this._activeBuffer.ybase+this._activeBuffer.y,L=this._bufferService.rows-1-this._activeBuffer.scrollBottom,V=this._bufferService.rows-1+this._activeBuffer.ybase-L+1;for(;A--;)this._activeBuffer.lines.splice(V-1,1),this._activeBuffer.lines.splice(O,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(D){this._restrictCursor();let A=D.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let O=this._activeBuffer.ybase+this._activeBuffer.y,L;for(L=this._bufferService.rows-1-this._activeBuffer.scrollBottom,L=this._bufferService.rows-1+this._activeBuffer.ybase-L;A--;)this._activeBuffer.lines.splice(O,1),this._activeBuffer.lines.splice(L,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(D){this._restrictCursor();let A=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return A&&(A.insertCells(this._activeBuffer.x,D.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(D){this._restrictCursor();let A=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return A&&(A.deleteCells(this._activeBuffer.x,D.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(D){let A=D.params[0]||1;for(;A--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(D){let A=D.params[0]||1;for(;A--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(u.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(D){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let A=D.params[0]||1;for(let O=this._activeBuffer.scrollTop;O<=this._activeBuffer.scrollBottom;++O){let L=this._activeBuffer.lines.get(this._activeBuffer.ybase+O);L.deleteCells(0,A,this._activeBuffer.getNullCell(this._eraseAttrData())),L.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(D){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let A=D.params[0]||1;for(let O=this._activeBuffer.scrollTop;O<=this._activeBuffer.scrollBottom;++O){let L=this._activeBuffer.lines.get(this._activeBuffer.ybase+O);L.insertCells(0,A,this._activeBuffer.getNullCell(this._eraseAttrData())),L.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(D){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let A=D.params[0]||1;for(let O=this._activeBuffer.scrollTop;O<=this._activeBuffer.scrollBottom;++O){let L=this._activeBuffer.lines.get(this._activeBuffer.ybase+O);L.insertCells(this._activeBuffer.x,A,this._activeBuffer.getNullCell(this._eraseAttrData())),L.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(D){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let A=D.params[0]||1;for(let O=this._activeBuffer.scrollTop;O<=this._activeBuffer.scrollBottom;++O){let L=this._activeBuffer.lines.get(this._activeBuffer.ybase+O);L.deleteCells(this._activeBuffer.x,A,this._activeBuffer.getNullCell(this._eraseAttrData())),L.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(D){this._restrictCursor();let A=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return A&&(A.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(D.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(D){let A=this._parser.precedingJoinState;if(!A)return!0;let O=D.params[0]||1,L=C.UnicodeService.extractWidth(A),V=this._activeBuffer.x-L,$=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).getString(V),J=new Uint32Array($.length*O),X=0;for(let x=0;x<$.length;){let j=$.codePointAt(x)||0;J[X++]=j,x+=j>65535?2:1}let k=X;for(let x=1;x<O;++x)J.copyWithin(k,0,X),k+=X;return this.print(J,0,k),!0}sendDeviceAttributesPrimary(D){return D.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(l.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(l.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(D){return D.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(l.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(l.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(D.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(l.C0.ESC+"[>83;40003;0c")),!0}_is(D){return(this._optionsService.rawOptions.termName+"").indexOf(D)===0}setMode(D){for(let A=0;A<D.length;A++)switch(D.params[A]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(D){for(let A=0;A<D.length;A++)switch(D.params[A]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,p.DEFAULT_CHARSET),this._charsetService.setgCharset(1,p.DEFAULT_CHARSET),this._charsetService.setgCharset(2,p.DEFAULT_CHARSET),this._charsetService.setgCharset(3,p.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(D){for(let A=0;A<D.length;A++)switch(D.params[A]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(D){for(let A=0;A<D.length;A++)switch(D.params[A]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),D.params[A]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(D,A){let O=this._coreService.decPrivateModes,{activeProtocol:L,activeEncoding:V}=this._coreMouseService,$=this._coreService,{buffers:J,cols:X}=this._bufferService,{active:k,alt:x}=J,j=this._optionsService.rawOptions,U=ie=>ie?1:2,Y=D.params[0];return G=Y,he=A?Y===2?4:Y===4?U($.modes.insertMode):Y===12?3:Y===20?U(j.convertEol):0:Y===1?U(O.applicationCursorKeys):Y===3?j.windowOptions.setWinLines?X===80?2:X===132?1:0:0:Y===6?U(O.origin):Y===7?U(O.wraparound):Y===8?3:Y===9?U(L==="X10"):Y===12?U(j.cursorBlink):Y===25?U(!$.isCursorHidden):Y===45?U(O.reverseWraparound):Y===66?U(O.applicationKeypad):Y===67?4:Y===1e3?U(L==="VT200"):Y===1002?U(L==="DRAG"):Y===1003?U(L==="ANY"):Y===1004?U(O.sendFocus):Y===1005?4:Y===1006?U(V==="SGR"):Y===1015?4:Y===1016?U(V==="SGR_PIXELS"):Y===1048?1:Y===47||Y===1047||Y===1049?U(k===x):Y===2004?U(O.bracketedPasteMode):0,$.triggerDataEvent(`${l.C0.ESC}[${A?"":"?"}${G};${he}$y`),!0;var G,he}_updateAttrColor(D,A,O,L,V){return A===2?(D|=50331648,D&=-16777216,D|=v.AttributeData.fromColorRGB([O,L,V])):A===5&&(D&=-50331904,D|=33554432|255&O),D}_extractColor(D,A,O){let L=[0,0,-1,0,0,0],V=0,$=0;do{if(L[$+V]=D.params[A+$],D.hasSubParams(A+$)){let J=D.getSubParams(A+$),X=0;do L[1]===5&&(V=1),L[$+X+1+V]=J[X];while(++X<J.length&&X+$+1+V<L.length);break}if(L[1]===5&&$+V>=2||L[1]===2&&$+V>=5)break;L[1]&&(V=1)}while(++$+A<D.length&&$+V<L.length);for(let J=2;J<L.length;++J)L[J]===-1&&(L[J]=0);switch(L[0]){case 38:O.fg=this._updateAttrColor(O.fg,L[1],L[3],L[4],L[5]);break;case 48:O.bg=this._updateAttrColor(O.bg,L[1],L[3],L[4],L[5]);break;case 58:O.extended=O.extended.clone(),O.extended.underlineColor=this._updateAttrColor(O.extended.underlineColor,L[1],L[3],L[4],L[5])}return $}_processUnderline(D,A){A.extended=A.extended.clone(),(!~D||D>5)&&(D=1),A.extended.underlineStyle=D,A.fg|=268435456,D===0&&(A.fg&=-268435457),A.updateExtended()}_processSGR0(D){D.fg=u.DEFAULT_ATTR_DATA.fg,D.bg=u.DEFAULT_ATTR_DATA.bg,D.extended=D.extended.clone(),D.extended.underlineStyle=0,D.extended.underlineColor&=-67108864,D.updateExtended()}charAttributes(D){if(D.length===1&&D.params[0]===0)return this._processSGR0(this._curAttrData),!0;let A=D.length,O,L=this._curAttrData;for(let V=0;V<A;V++)O=D.params[V],O>=30&&O<=37?(L.fg&=-50331904,L.fg|=16777216|O-30):O>=40&&O<=47?(L.bg&=-50331904,L.bg|=16777216|O-40):O>=90&&O<=97?(L.fg&=-50331904,L.fg|=16777224|O-90):O>=100&&O<=107?(L.bg&=-50331904,L.bg|=16777224|O-100):O===0?this._processSGR0(L):O===1?L.fg|=134217728:O===3?L.bg|=67108864:O===4?(L.fg|=268435456,this._processUnderline(D.hasSubParams(V)?D.getSubParams(V)[0]:1,L)):O===5?L.fg|=536870912:O===7?L.fg|=67108864:O===8?L.fg|=1073741824:O===9?L.fg|=2147483648:O===2?L.bg|=134217728:O===21?this._processUnderline(2,L):O===22?(L.fg&=-134217729,L.bg&=-134217729):O===23?L.bg&=-67108865:O===24?(L.fg&=-268435457,this._processUnderline(0,L)):O===25?L.fg&=-536870913:O===27?L.fg&=-67108865:O===28?L.fg&=-1073741825:O===29?L.fg&=2147483647:O===39?(L.fg&=-67108864,L.fg|=16777215&u.DEFAULT_ATTR_DATA.fg):O===49?(L.bg&=-67108864,L.bg|=16777215&u.DEFAULT_ATTR_DATA.bg):O===38||O===48||O===58?V+=this._extractColor(D,V,L):O===53?L.bg|=1073741824:O===55?L.bg&=-1073741825:O===59?(L.extended=L.extended.clone(),L.extended.underlineColor=-1,L.updateExtended()):O===100?(L.fg&=-67108864,L.fg|=16777215&u.DEFAULT_ATTR_DATA.fg,L.bg&=-67108864,L.bg|=16777215&u.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",O);return!0}deviceStatus(D){switch(D.params[0]){case 5:this._coreService.triggerDataEvent(`${l.C0.ESC}[0n`);break;case 6:let A=this._activeBuffer.y+1,O=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${l.C0.ESC}[${A};${O}R`)}return!0}deviceStatusPrivate(D){if(D.params[0]===6){let A=this._activeBuffer.y+1,O=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${l.C0.ESC}[?${A};${O}R`)}return!0}softReset(D){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=u.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(D){let A=D.params[0]||1;switch(A){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}let O=A%2==1;return this._optionsService.options.cursorBlink=O,!0}setScrollRegion(D){let A=D.params[0]||1,O;return(D.length<2||(O=D.params[1])>this._bufferService.rows||O===0)&&(O=this._bufferService.rows),O>A&&(this._activeBuffer.scrollTop=A-1,this._activeBuffer.scrollBottom=O-1,this._setCursor(0,0)),!0}windowOptions(D){if(!I(D.params[0],this._optionsService.rawOptions.windowOptions))return!0;let A=D.length>1?D.params[1]:0;switch(D.params[0]){case 14:A!==2&&this._onRequestWindowsOptionsReport.fire(M.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(M.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${l.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:A!==0&&A!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),A!==0&&A!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:A!==0&&A!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),A!==0&&A!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(D){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(D){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(D){return this._windowTitle=D,this._onTitleChange.fire(D),!0}setIconName(D){return this._iconName=D,!0}setOrReportIndexedColor(D){let A=[],O=D.split(";");for(;O.length>1;){let L=O.shift(),V=O.shift();if(/^\d+$/.exec(L)){let $=parseInt(L);if(F($))if(V==="?")A.push({type:0,index:$});else{let J=(0,w.parseColor)(V);J&&A.push({type:1,index:$,color:J})}}}return A.length&&this._onColor.fire(A),!0}setHyperlink(D){let A=D.split(";");return!(A.length<2)&&(A[1]?this._createHyperlink(A[0],A[1]):!A[0]&&this._finishHyperlink())}_createHyperlink(D,A){this._getCurrentLinkId()&&this._finishHyperlink();let O=D.split(":"),L,V=O.findIndex($=>$.startsWith("id="));return V!==-1&&(L=O[V].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:L,uri:A}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(D,A){let O=D.split(";");for(let L=0;L<O.length&&!(A>=this._specialColors.length);++L,++A)if(O[L]==="?")this._onColor.fire([{type:0,index:this._specialColors[A]}]);else{let V=(0,w.parseColor)(O[L]);V&&this._onColor.fire([{type:1,index:this._specialColors[A],color:V}])}return!0}setOrReportFgColor(D){return this._setOrReportSpecialColor(D,0)}setOrReportBgColor(D){return this._setOrReportSpecialColor(D,1)}setOrReportCursorColor(D){return this._setOrReportSpecialColor(D,2)}restoreIndexedColor(D){if(!D)return this._onColor.fire([{type:2}]),!0;let A=[],O=D.split(";");for(let L=0;L<O.length;++L)if(/^\d+$/.exec(O[L])){let V=parseInt(O[L]);F(V)&&A.push({type:2,index:V})}return A.length&&this._onColor.fire(A),!0}restoreFgColor(D){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(D){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(D){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,p.DEFAULT_CHARSET),!0}selectCharset(D){return D.length!==2?(this.selectDefaultCharset(),!0):(D[0]==="/"||this._charsetService.setgCharset(E[D[0]],p.CHARSETS[D[1]]||p.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){let D=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,D,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=u.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=u.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(D){return this._charsetService.setgLevel(D),!0}screenAlignmentPattern(){let D=new h.CellData;D.content=4194373,D.fg=this._curAttrData.fg,D.bg=this._curAttrData.bg,this._setCursor(0,0);for(let A=0;A<this._bufferService.rows;++A){let O=this._activeBuffer.ybase+this._activeBuffer.y+A,L=this._activeBuffer.lines.get(O);L&&(L.fill(D),L.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(D,A){let O=this._bufferService.buffer,L=this._optionsService.rawOptions;return(V=>(this._coreService.triggerDataEvent(`${l.C0.ESC}${V}${l.C0.ESC}\\`),!0))(D==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:D==='"p'?'P1$r61;1"p':D==="r"?`P1$r${O.scrollTop+1};${O.scrollBottom+1}r`:D==="m"?"P1$r0m":D===" q"?`P1$r${{block:2,underline:4,bar:6}[L.cursorStyle]-(L.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(D,A){this._dirtyRowTracker.markRangeDirty(D,A)}}i.InputHandler=P;let B=class{constructor(N){this._bufferService=N,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(N){N<this.start?this.start=N:N>this.end&&(this.end=N)}markRangeDirty(N,D){N>D&&(R=N,N=D,D=R),N<this.start&&(this.start=N),D>this.end&&(this.end=D)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function F(N){return 0<=N&&N<256}B=a([c(0,b.IBufferService)],B)},844:(s,i)=>{function o(a){for(let c of a)c.dispose();a.length=0}Object.defineProperty(i,"__esModule",{value:!0}),i.getDisposeArrayDisposable=i.disposeArray=i.toDisposable=i.MutableDisposable=i.Disposable=void 0,i.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(let a of this._disposables)a.dispose();this._disposables.length=0}register(a){return this._disposables.push(a),a}unregister(a){let c=this._disposables.indexOf(a);c!==-1&&this._disposables.splice(c,1)}},i.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(a){this._isDisposed||a===this._value||(this._value?.dispose(),this._value=a)}clear(){this.value=void 0}dispose(){this._isDisposed=!0,this._value?.dispose(),this._value=void 0}},i.toDisposable=function(a){return{dispose:a}},i.disposeArray=o,i.getDisposeArrayDisposable=function(a){return{dispose:()=>o(a)}}},1505:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.FourKeyMap=i.TwoKeyMap=void 0;class o{constructor(){this._data={}}set(c,l,p){this._data[c]||(this._data[c]={}),this._data[c][l]=p}get(c,l){return this._data[c]?this._data[c][l]:void 0}clear(){this._data={}}}i.TwoKeyMap=o,i.FourKeyMap=class{constructor(){this._data=new o}set(a,c,l,p,m){this._data.get(a,c)||this._data.set(a,c,new o),this._data.get(a,c).set(l,p,m)}get(a,c,l,p){return this._data.get(a,c)?.get(l,p)}clear(){this._data.clear()}}},6114:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.isChromeOS=i.isLinux=i.isWindows=i.isIphone=i.isIpad=i.isMac=i.getSafariVersion=i.isSafari=i.isLegacyEdge=i.isFirefox=i.isNode=void 0,i.isNode=typeof process<"u"&&"title"in process;let o=i.isNode?"node":navigator.userAgent,a=i.isNode?"node":navigator.platform;i.isFirefox=o.includes("Firefox"),i.isLegacyEdge=o.includes("Edge"),i.isSafari=/^((?!chrome|android).)*safari/i.test(o),i.getSafariVersion=function(){if(!i.isSafari)return 0;let c=o.match(/Version\/(\d+)/);return c===null||c.length<2?0:parseInt(c[1])},i.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(a),i.isIpad=a==="iPad",i.isIphone=a==="iPhone",i.isWindows=["Windows","Win16","Win32","WinCE"].includes(a),i.isLinux=a.indexOf("Linux")>=0,i.isChromeOS=/\bCrOS\b/.test(o)},6106:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SortedList=void 0;let o=0;i.SortedList=class{constructor(a){this._getKey=a,this._array=[]}clear(){this._array.length=0}insert(a){this._array.length!==0?(o=this._search(this._getKey(a)),this._array.splice(o,0,a)):this._array.push(a)}delete(a){if(this._array.length===0)return!1;let c=this._getKey(a);if(c===void 0||(o=this._search(c),o===-1)||this._getKey(this._array[o])!==c)return!1;do if(this._array[o]===a)return this._array.splice(o,1),!0;while(++o<this._array.length&&this._getKey(this._array[o])===c);return!1}*getKeyIterator(a){if(this._array.length!==0&&(o=this._search(a),!(o<0||o>=this._array.length)&&this._getKey(this._array[o])===a))do yield this._array[o];while(++o<this._array.length&&this._getKey(this._array[o])===a)}forEachByKey(a,c){if(this._array.length!==0&&(o=this._search(a),!(o<0||o>=this._array.length)&&this._getKey(this._array[o])===a))do c(this._array[o]);while(++o<this._array.length&&this._getKey(this._array[o])===a)}values(){return[...this._array].values()}_search(a){let c=0,l=this._array.length-1;for(;l>=c;){let p=c+l>>1,m=this._getKey(this._array[p]);if(m>a)l=p-1;else{if(!(m<a)){for(;p>0&&this._getKey(this._array[p-1])===a;)p--;return p}c=p+1}}return c}}},7226:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DebouncedIdleTask=i.IdleTaskQueue=i.PriorityTaskQueue=void 0;let a=o(6114);class c{constructor(){this._tasks=[],this._i=0}enqueue(m){this._tasks.push(m),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(m){this._idleCallback=void 0;let _=0,d=0,u=m.timeRemaining(),g=0;for(;this._i<this._tasks.length;){if(_=Date.now(),this._tasks[this._i]()||this._i++,_=Math.max(1,Date.now()-_),d=Math.max(_,d),g=m.timeRemaining(),1.5*d>g)return u-_<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(u-_))}ms`),void this._start();u=g}this.clear()}}class l extends c{_requestCallback(m){return setTimeout(()=>m(this._createDeadline(16)))}_cancelCallback(m){clearTimeout(m)}_createDeadline(m){let _=Date.now()+m;return{timeRemaining:()=>Math.max(0,_-Date.now())}}}i.PriorityTaskQueue=l,i.IdleTaskQueue=!a.isNode&&"requestIdleCallback"in window?class extends c{_requestCallback(p){return requestIdleCallback(p)}_cancelCallback(p){cancelIdleCallback(p)}}:l,i.DebouncedIdleTask=class{constructor(){this._queue=new i.IdleTaskQueue}set(p){this._queue.clear(),this._queue.enqueue(p)}flush(){this._queue.flush()}}},9282:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.updateWindowsModeWrappedState=void 0;let a=o(643);i.updateWindowsModeWrappedState=function(c){let l=c.buffer.lines.get(c.buffer.ybase+c.buffer.y-1),p=l?.get(c.cols-1),m=c.buffer.lines.get(c.buffer.ybase+c.buffer.y);m&&p&&(m.isWrapped=p[a.CHAR_DATA_CODE_INDEX]!==a.NULL_CELL_CODE&&p[a.CHAR_DATA_CODE_INDEX]!==a.WHITESPACE_CELL_CODE)}},3734:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ExtendedAttrs=i.AttributeData=void 0;class o{constructor(){this.fg=0,this.bg=0,this.extended=new a}static toColorRGB(l){return[l>>>16&255,l>>>8&255,255&l]}static fromColorRGB(l){return(255&l[0])<<16|(255&l[1])<<8|255&l[2]}clone(){let l=new o;return l.fg=this.fg,l.bg=this.bg,l.extended=this.extended.clone(),l}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}}i.AttributeData=o;class a{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(l){this._ext=l}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(l){this._ext&=-469762049,this._ext|=l<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(l){this._ext&=-67108864,this._ext|=67108863&l}get urlId(){return this._urlId}set urlId(l){this._urlId=l}get underlineVariantOffset(){let l=(3758096384&this._ext)>>29;return l<0?4294967288^l:l}set underlineVariantOffset(l){this._ext&=536870911,this._ext|=l<<29&3758096384}constructor(l=0,p=0){this._ext=0,this._urlId=0,this._ext=l,this._urlId=p}clone(){return new a(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}i.ExtendedAttrs=a},9092:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Buffer=i.MAX_BUFFER_SIZE=void 0;let a=o(6349),c=o(7226),l=o(3734),p=o(8437),m=o(4634),_=o(511),d=o(643),u=o(4863),g=o(7116);i.MAX_BUFFER_SIZE=4294967295,i.Buffer=class{constructor(f,h,v){this._hasScrollback=f,this._optionsService=h,this._bufferService=v,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=p.DEFAULT_ATTR_DATA.clone(),this.savedCharset=g.DEFAULT_CHARSET,this.markers=[],this._nullCell=_.CellData.fromCharData([0,d.NULL_CELL_CHAR,d.NULL_CELL_WIDTH,d.NULL_CELL_CODE]),this._whitespaceCell=_.CellData.fromCharData([0,d.WHITESPACE_CELL_CHAR,d.WHITESPACE_CELL_WIDTH,d.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new c.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new a.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(f){return f?(this._nullCell.fg=f.fg,this._nullCell.bg=f.bg,this._nullCell.extended=f.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new l.ExtendedAttrs),this._nullCell}getWhitespaceCell(f){return f?(this._whitespaceCell.fg=f.fg,this._whitespaceCell.bg=f.bg,this._whitespaceCell.extended=f.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new l.ExtendedAttrs),this._whitespaceCell}getBlankLine(f,h){return new p.BufferLine(this._bufferService.cols,this.getNullCell(f),h)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){let f=this.ybase+this.y-this.ydisp;return f>=0&&f<this._rows}_getCorrectBufferLength(f){if(!this._hasScrollback)return f;let h=f+this._optionsService.rawOptions.scrollback;return h>i.MAX_BUFFER_SIZE?i.MAX_BUFFER_SIZE:h}fillViewportRows(f){if(this.lines.length===0){f===void 0&&(f=p.DEFAULT_ATTR_DATA);let h=this._rows;for(;h--;)this.lines.push(this.getBlankLine(f))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new a.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(f,h){let v=this.getNullCell(p.DEFAULT_ATTR_DATA),b=0,C=this._getCorrectBufferLength(h);if(C>this.lines.maxLength&&(this.lines.maxLength=C),this.lines.length>0){if(this._cols<f)for(let y=0;y<this.lines.length;y++)b+=+this.lines.get(y).resize(f,v);let S=0;if(this._rows<h)for(let y=this._rows;y<h;y++)this.lines.length<h+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new p.BufferLine(f,v)):this.ybase>0&&this.lines.length<=this.ybase+this.y+S+1?(this.ybase--,S++,this.ydisp>0&&this.ydisp--):this.lines.push(new p.BufferLine(f,v)));else for(let y=this._rows;y>h;y--)this.lines.length>h+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(C<this.lines.maxLength){let y=this.lines.length-C;y>0&&(this.lines.trimStart(y),this.ybase=Math.max(this.ybase-y,0),this.ydisp=Math.max(this.ydisp-y,0),this.savedY=Math.max(this.savedY-y,0)),this.lines.maxLength=C}this.x=Math.min(this.x,f-1),this.y=Math.min(this.y,h-1),S&&(this.y+=S),this.savedX=Math.min(this.savedX,f-1),this.scrollTop=0}if(this.scrollBottom=h-1,this._isReflowEnabled&&(this._reflow(f,h),this._cols>f))for(let S=0;S<this.lines.length;S++)b+=+this.lines.get(S).resize(f,v);this._cols=f,this._rows=h,this._memoryCleanupQueue.clear(),b>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let f=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,f=!1);let h=0;for(;this._memoryCleanupPosition<this.lines.length;)if(h+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),h>100)return!0;return f}get _isReflowEnabled(){let f=this._optionsService.rawOptions.windowsPty;return f&&f.buildNumber?this._hasScrollback&&f.backend==="conpty"&&f.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(f,h){this._cols!==f&&(f>this._cols?this._reflowLarger(f,h):this._reflowSmaller(f,h))}_reflowLarger(f,h){let v=(0,m.reflowLargerGetLinesToRemove)(this.lines,this._cols,f,this.ybase+this.y,this.getNullCell(p.DEFAULT_ATTR_DATA));if(v.length>0){let b=(0,m.reflowLargerCreateNewLayout)(this.lines,v);(0,m.reflowLargerApplyNewLayout)(this.lines,b.layout),this._reflowLargerAdjustViewport(f,h,b.countRemoved)}}_reflowLargerAdjustViewport(f,h,v){let b=this.getNullCell(p.DEFAULT_ATTR_DATA),C=v;for(;C-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<h&&this.lines.push(new p.BufferLine(f,b))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-v,0)}_reflowSmaller(f,h){let v=this.getNullCell(p.DEFAULT_ATTR_DATA),b=[],C=0;for(let S=this.lines.length-1;S>=0;S--){let y=this.lines.get(S);if(!y||!y.isWrapped&&y.getTrimmedLength()<=f)continue;let w=[y];for(;y.isWrapped&&S>0;)y=this.lines.get(--S),w.unshift(y);let E=this.ybase+this.y;if(E>=S&&E<S+w.length)continue;let T=w[w.length-1].getTrimmedLength(),I=(0,m.reflowSmallerGetNewLineLengths)(w,this._cols,f),M=I.length-w.length,R;R=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+M):Math.max(0,this.lines.length-this.lines.maxLength+M);let P=[];for(let O=0;O<M;O++){let L=this.getBlankLine(p.DEFAULT_ATTR_DATA,!0);P.push(L)}P.length>0&&(b.push({start:S+w.length+C,newLines:P}),C+=P.length),w.push(...P);let B=I.length-1,F=I[B];F===0&&(B--,F=I[B]);let N=w.length-M-1,D=T;for(;N>=0;){let O=Math.min(D,F);if(w[B]===void 0)break;if(w[B].copyCellsFrom(w[N],D-O,F-O,O,!0),F-=O,F===0&&(B--,F=I[B]),D-=O,D===0){N--;let L=Math.max(N,0);D=(0,m.getWrappedLineTrimmedLength)(w,L,this._cols)}}for(let O=0;O<w.length;O++)I[O]<f&&w[O].setCell(I[O],v);let A=M-R;for(;A-- >0;)this.ybase===0?this.y<h-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+C)-h&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+M,this.ybase+h-1)}if(b.length>0){let S=[],y=[];for(let B=0;B<this.lines.length;B++)y.push(this.lines.get(B));let w=this.lines.length,E=w-1,T=0,I=b[T];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+C);let M=0;for(let B=Math.min(this.lines.maxLength-1,w+C-1);B>=0;B--)if(I&&I.start>E+M){for(let F=I.newLines.length-1;F>=0;F--)this.lines.set(B--,I.newLines[F]);B++,S.push({index:E+1,amount:I.newLines.length}),M+=I.newLines.length,I=b[++T]}else this.lines.set(B,y[E--]);let R=0;for(let B=S.length-1;B>=0;B--)S[B].index+=R,this.lines.onInsertEmitter.fire(S[B]),R+=S[B].amount;let P=Math.max(0,w+C-this.lines.maxLength);P>0&&this.lines.onTrimEmitter.fire(P)}}translateBufferLineToString(f,h,v=0,b){let C=this.lines.get(f);return C?C.translateToString(h,v,b):""}getWrappedRangeForLine(f){let h=f,v=f;for(;h>0&&this.lines.get(h).isWrapped;)h--;for(;v+1<this.lines.length&&this.lines.get(v+1).isWrapped;)v++;return{first:h,last:v}}setupTabStops(f){for(f!=null?this.tabs[f]||(f=this.prevStop(f)):(this.tabs={},f=0);f<this._cols;f+=this._optionsService.rawOptions.tabStopWidth)this.tabs[f]=!0}prevStop(f){for(f==null&&(f=this.x);!this.tabs[--f]&&f>0;);return f>=this._cols?this._cols-1:f<0?0:f}nextStop(f){for(f==null&&(f=this.x);!this.tabs[++f]&&f<this._cols;);return f>=this._cols?this._cols-1:f<0?0:f}clearMarkers(f){this._isClearing=!0;for(let h=0;h<this.markers.length;h++)this.markers[h].line===f&&(this.markers[h].dispose(),this.markers.splice(h--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let f=0;f<this.markers.length;f++)this.markers[f].dispose(),this.markers.splice(f--,1);this._isClearing=!1}addMarker(f){let h=new u.Marker(f);return this.markers.push(h),h.register(this.lines.onTrim(v=>{h.line-=v,h.line<0&&h.dispose()})),h.register(this.lines.onInsert(v=>{h.line>=v.index&&(h.line+=v.amount)})),h.register(this.lines.onDelete(v=>{h.line>=v.index&&h.line<v.index+v.amount&&h.dispose(),h.line>v.index&&(h.line-=v.amount)})),h.register(h.onDispose(()=>this._removeMarker(h))),h}_removeMarker(f){this._isClearing||this.markers.splice(this.markers.indexOf(f),1)}}},8437:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferLine=i.DEFAULT_ATTR_DATA=void 0;let a=o(3734),c=o(511),l=o(643),p=o(482);i.DEFAULT_ATTR_DATA=Object.freeze(new a.AttributeData);let m=0;class _{constructor(u,g,f=!1){this.isWrapped=f,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*u);let h=g||c.CellData.fromCharData([0,l.NULL_CELL_CHAR,l.NULL_CELL_WIDTH,l.NULL_CELL_CODE]);for(let v=0;v<u;++v)this.setCell(v,h);this.length=u}get(u){let g=this._data[3*u+0],f=2097151&g;return[this._data[3*u+1],2097152&g?this._combined[u]:f?(0,p.stringFromCodePoint)(f):"",g>>22,2097152&g?this._combined[u].charCodeAt(this._combined[u].length-1):f]}set(u,g){this._data[3*u+1]=g[l.CHAR_DATA_ATTR_INDEX],g[l.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[u]=g[1],this._data[3*u+0]=2097152|u|g[l.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*u+0]=g[l.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|g[l.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(u){return this._data[3*u+0]>>22}hasWidth(u){return 12582912&this._data[3*u+0]}getFg(u){return this._data[3*u+1]}getBg(u){return this._data[3*u+2]}hasContent(u){return 4194303&this._data[3*u+0]}getCodePoint(u){let g=this._data[3*u+0];return 2097152&g?this._combined[u].charCodeAt(this._combined[u].length-1):2097151&g}isCombined(u){return 2097152&this._data[3*u+0]}getString(u){let g=this._data[3*u+0];return 2097152&g?this._combined[u]:2097151&g?(0,p.stringFromCodePoint)(2097151&g):""}isProtected(u){return 536870912&this._data[3*u+2]}loadCell(u,g){return m=3*u,g.content=this._data[m+0],g.fg=this._data[m+1],g.bg=this._data[m+2],2097152&g.content&&(g.combinedData=this._combined[u]),268435456&g.bg&&(g.extended=this._extendedAttrs[u]),g}setCell(u,g){2097152&g.content&&(this._combined[u]=g.combinedData),268435456&g.bg&&(this._extendedAttrs[u]=g.extended),this._data[3*u+0]=g.content,this._data[3*u+1]=g.fg,this._data[3*u+2]=g.bg}setCellFromCodepoint(u,g,f,h){268435456&h.bg&&(this._extendedAttrs[u]=h.extended),this._data[3*u+0]=g|f<<22,this._data[3*u+1]=h.fg,this._data[3*u+2]=h.bg}addCodepointToCell(u,g,f){let h=this._data[3*u+0];2097152&h?this._combined[u]+=(0,p.stringFromCodePoint)(g):2097151&h?(this._combined[u]=(0,p.stringFromCodePoint)(2097151&h)+(0,p.stringFromCodePoint)(g),h&=-2097152,h|=2097152):h=g|4194304,f&&(h&=-12582913,h|=f<<22),this._data[3*u+0]=h}insertCells(u,g,f){if((u%=this.length)&&this.getWidth(u-1)===2&&this.setCellFromCodepoint(u-1,0,1,f),g<this.length-u){let h=new c.CellData;for(let v=this.length-u-g-1;v>=0;--v)this.setCell(u+g+v,this.loadCell(u+v,h));for(let v=0;v<g;++v)this.setCell(u+v,f)}else for(let h=u;h<this.length;++h)this.setCell(h,f);this.getWidth(this.length-1)===2&&this.setCellFromCodepoint(this.length-1,0,1,f)}deleteCells(u,g,f){if(u%=this.length,g<this.length-u){let h=new c.CellData;for(let v=0;v<this.length-u-g;++v)this.setCell(u+v,this.loadCell(u+g+v,h));for(let v=this.length-g;v<this.length;++v)this.setCell(v,f)}else for(let h=u;h<this.length;++h)this.setCell(h,f);u&&this.getWidth(u-1)===2&&this.setCellFromCodepoint(u-1,0,1,f),this.getWidth(u)!==0||this.hasContent(u)||this.setCellFromCodepoint(u,0,1,f)}replaceCells(u,g,f,h=!1){if(h)for(u&&this.getWidth(u-1)===2&&!this.isProtected(u-1)&&this.setCellFromCodepoint(u-1,0,1,f),g<this.length&&this.getWidth(g-1)===2&&!this.isProtected(g)&&this.setCellFromCodepoint(g,0,1,f);u<g&&u<this.length;)this.isProtected(u)||this.setCell(u,f),u++;else for(u&&this.getWidth(u-1)===2&&this.setCellFromCodepoint(u-1,0,1,f),g<this.length&&this.getWidth(g-1)===2&&this.setCellFromCodepoint(g,0,1,f);u<g&&u<this.length;)this.setCell(u++,f)}resize(u,g){if(u===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;let f=3*u;if(u>this.length){if(this._data.buffer.byteLength>=4*f)this._data=new Uint32Array(this._data.buffer,0,f);else{let h=new Uint32Array(f);h.set(this._data),this._data=h}for(let h=this.length;h<u;++h)this.setCell(h,g)}else{this._data=this._data.subarray(0,f);let h=Object.keys(this._combined);for(let b=0;b<h.length;b++){let C=parseInt(h[b],10);C>=u&&delete this._combined[C]}let v=Object.keys(this._extendedAttrs);for(let b=0;b<v.length;b++){let C=parseInt(v[b],10);C>=u&&delete this._extendedAttrs[C]}}return this.length=u,4*f*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){let u=new Uint32Array(this._data.length);return u.set(this._data),this._data=u,1}return 0}fill(u,g=!1){if(g)for(let f=0;f<this.length;++f)this.isProtected(f)||this.setCell(f,u);else{this._combined={},this._extendedAttrs={};for(let f=0;f<this.length;++f)this.setCell(f,u)}}copyFrom(u){this.length!==u.length?this._data=new Uint32Array(u._data):this._data.set(u._data),this.length=u.length,this._combined={};for(let g in u._combined)this._combined[g]=u._combined[g];this._extendedAttrs={};for(let g in u._extendedAttrs)this._extendedAttrs[g]=u._extendedAttrs[g];this.isWrapped=u.isWrapped}clone(){let u=new _(0);u._data=new Uint32Array(this._data),u.length=this.length;for(let g in this._combined)u._combined[g]=this._combined[g];for(let g in this._extendedAttrs)u._extendedAttrs[g]=this._extendedAttrs[g];return u.isWrapped=this.isWrapped,u}getTrimmedLength(){for(let u=this.length-1;u>=0;--u)if(4194303&this._data[3*u+0])return u+(this._data[3*u+0]>>22);return 0}getNoBgTrimmedLength(){for(let u=this.length-1;u>=0;--u)if(4194303&this._data[3*u+0]||50331648&this._data[3*u+2])return u+(this._data[3*u+0]>>22);return 0}copyCellsFrom(u,g,f,h,v){let b=u._data;if(v)for(let S=h-1;S>=0;S--){for(let y=0;y<3;y++)this._data[3*(f+S)+y]=b[3*(g+S)+y];268435456&b[3*(g+S)+2]&&(this._extendedAttrs[f+S]=u._extendedAttrs[g+S])}else for(let S=0;S<h;S++){for(let y=0;y<3;y++)this._data[3*(f+S)+y]=b[3*(g+S)+y];268435456&b[3*(g+S)+2]&&(this._extendedAttrs[f+S]=u._extendedAttrs[g+S])}let C=Object.keys(u._combined);for(let S=0;S<C.length;S++){let y=parseInt(C[S],10);y>=g&&(this._combined[y-g+f]=u._combined[y])}}translateToString(u,g,f,h){g=g??0,f=f??this.length,u&&(f=Math.min(f,this.getTrimmedLength())),h&&(h.length=0);let v="";for(;g<f;){let b=this._data[3*g+0],C=2097151&b,S=2097152&b?this._combined[g]:C?(0,p.stringFromCodePoint)(C):l.WHITESPACE_CELL_CHAR;if(v+=S,h)for(let y=0;y<S.length;++y)h.push(g);g+=b>>22||1}return h&&h.push(g),v}}i.BufferLine=_},4841:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.getRangeLength=void 0,i.getRangeLength=function(o,a){if(o.start.y>o.end.y)throw new Error(`Buffer range end (${o.end.x}, ${o.end.y}) cannot be before start (${o.start.x}, ${o.start.y})`);return a*(o.end.y-o.start.y)+(o.end.x-o.start.x+1)}},4634:(s,i)=>{function o(a,c,l){if(c===a.length-1)return a[c].getTrimmedLength();let p=!a[c].hasContent(l-1)&&a[c].getWidth(l-1)===1,m=a[c+1].getWidth(0)===2;return p&&m?l-1:l}Object.defineProperty(i,"__esModule",{value:!0}),i.getWrappedLineTrimmedLength=i.reflowSmallerGetNewLineLengths=i.reflowLargerApplyNewLayout=i.reflowLargerCreateNewLayout=i.reflowLargerGetLinesToRemove=void 0,i.reflowLargerGetLinesToRemove=function(a,c,l,p,m){let _=[];for(let d=0;d<a.length-1;d++){let u=d,g=a.get(++u);if(!g.isWrapped)continue;let f=[a.get(d)];for(;u<a.length&&g.isWrapped;)f.push(g),g=a.get(++u);if(p>=d&&p<u){d+=f.length-1;continue}let h=0,v=o(f,h,c),b=1,C=0;for(;b<f.length;){let y=o(f,b,c),w=y-C,E=l-v,T=Math.min(w,E);f[h].copyCellsFrom(f[b],C,v,T,!1),v+=T,v===l&&(h++,v=0),C+=T,C===y&&(b++,C=0),v===0&&h!==0&&f[h-1].getWidth(l-1)===2&&(f[h].copyCellsFrom(f[h-1],l-1,v++,1,!1),f[h-1].setCell(l-1,m))}f[h].replaceCells(v,l,m);let S=0;for(let y=f.length-1;y>0&&(y>h||f[y].getTrimmedLength()===0);y--)S++;S>0&&(_.push(d+f.length-S),_.push(S)),d+=f.length-1}return _},i.reflowLargerCreateNewLayout=function(a,c){let l=[],p=0,m=c[p],_=0;for(let d=0;d<a.length;d++)if(m===d){let u=c[++p];a.onDeleteEmitter.fire({index:d-_,amount:u}),d+=u-1,_+=u,m=c[++p]}else l.push(d);return{layout:l,countRemoved:_}},i.reflowLargerApplyNewLayout=function(a,c){let l=[];for(let p=0;p<c.length;p++)l.push(a.get(c[p]));for(let p=0;p<l.length;p++)a.set(p,l[p]);a.length=c.length},i.reflowSmallerGetNewLineLengths=function(a,c,l){let p=[],m=a.map((g,f)=>o(a,f,c)).reduce((g,f)=>g+f),_=0,d=0,u=0;for(;u<m;){if(m-u<l){p.push(m-u);break}_+=l;let g=o(a,d,c);_>g&&(_-=g,d++);let f=a[d].getWidth(_-1)===2;f&&_--;let h=f?l-1:l;p.push(h),u+=h}return p},i.getWrappedLineTrimmedLength=o},5295:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferSet=void 0;let a=o(8460),c=o(844),l=o(9092);class p extends c.Disposable{constructor(_,d){super(),this._optionsService=_,this._bufferService=d,this._onBufferActivate=this.register(new a.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new l.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new l.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(_){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(_),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(_,d){this._normal.resize(_,d),this._alt.resize(_,d),this.setupTabStops(_)}setupTabStops(_){this._normal.setupTabStops(_),this._alt.setupTabStops(_)}}i.BufferSet=p},511:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CellData=void 0;let a=o(482),c=o(643),l=o(3734);class p extends l.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new l.ExtendedAttrs,this.combinedData=""}static fromCharData(_){let d=new p;return d.setFromCharData(_),d}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,a.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(_){this.fg=_[c.CHAR_DATA_ATTR_INDEX],this.bg=0;let d=!1;if(_[c.CHAR_DATA_CHAR_INDEX].length>2)d=!0;else if(_[c.CHAR_DATA_CHAR_INDEX].length===2){let u=_[c.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=u&&u<=56319){let g=_[c.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=g&&g<=57343?this.content=1024*(u-55296)+g-56320+65536|_[c.CHAR_DATA_WIDTH_INDEX]<<22:d=!0}else d=!0}else this.content=_[c.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|_[c.CHAR_DATA_WIDTH_INDEX]<<22;d&&(this.combinedData=_[c.CHAR_DATA_CHAR_INDEX],this.content=2097152|_[c.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.CellData=p},643:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WHITESPACE_CELL_CODE=i.WHITESPACE_CELL_WIDTH=i.WHITESPACE_CELL_CHAR=i.NULL_CELL_CODE=i.NULL_CELL_WIDTH=i.NULL_CELL_CHAR=i.CHAR_DATA_CODE_INDEX=i.CHAR_DATA_WIDTH_INDEX=i.CHAR_DATA_CHAR_INDEX=i.CHAR_DATA_ATTR_INDEX=i.DEFAULT_EXT=i.DEFAULT_ATTR=i.DEFAULT_COLOR=void 0,i.DEFAULT_COLOR=0,i.DEFAULT_ATTR=256|i.DEFAULT_COLOR<<9,i.DEFAULT_EXT=0,i.CHAR_DATA_ATTR_INDEX=0,i.CHAR_DATA_CHAR_INDEX=1,i.CHAR_DATA_WIDTH_INDEX=2,i.CHAR_DATA_CODE_INDEX=3,i.NULL_CELL_CHAR="",i.NULL_CELL_WIDTH=1,i.NULL_CELL_CODE=0,i.WHITESPACE_CELL_CHAR=" ",i.WHITESPACE_CELL_WIDTH=1,i.WHITESPACE_CELL_CODE=32},4863:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Marker=void 0;let a=o(8460),c=o(844);class l{get id(){return this._id}constructor(m){this.line=m,this.isDisposed=!1,this._disposables=[],this._id=l._nextId++,this._onDispose=this.register(new a.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,c.disposeArray)(this._disposables),this._disposables.length=0)}register(m){return this._disposables.push(m),m}}i.Marker=l,l._nextId=1},7116:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DEFAULT_CHARSET=i.CHARSETS=void 0,i.CHARSETS={},i.DEFAULT_CHARSET=i.CHARSETS.B,i.CHARSETS[0]={"`":"\u25C6",a:"\u2592",b:"\u2409",c:"\u240C",d:"\u240D",e:"\u240A",f:"\xB0",g:"\xB1",h:"\u2424",i:"\u240B",j:"\u2518",k:"\u2510",l:"\u250C",m:"\u2514",n:"\u253C",o:"\u23BA",p:"\u23BB",q:"\u2500",r:"\u23BC",s:"\u23BD",t:"\u251C",u:"\u2524",v:"\u2534",w:"\u252C",x:"\u2502",y:"\u2264",z:"\u2265","{":"\u03C0","|":"\u2260","}":"\xA3","~":"\xB7"},i.CHARSETS.A={"#":"\xA3"},i.CHARSETS.B=void 0,i.CHARSETS[4]={"#":"\xA3","@":"\xBE","[":"ij","\\":"\xBD","]":"|","{":"\xA8","|":"f","}":"\xBC","~":"\xB4"},i.CHARSETS.C=i.CHARSETS[5]={"[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},i.CHARSETS.R={"#":"\xA3","@":"\xE0","[":"\xB0","\\":"\xE7","]":"\xA7","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xA8"},i.CHARSETS.Q={"@":"\xE0","[":"\xE2","\\":"\xE7","]":"\xEA","^":"\xEE","`":"\xF4","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xFB"},i.CHARSETS.K={"@":"\xA7","[":"\xC4","\\":"\xD6","]":"\xDC","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xDF"},i.CHARSETS.Y={"#":"\xA3","@":"\xA7","[":"\xB0","\\":"\xE7","]":"\xE9","`":"\xF9","{":"\xE0","|":"\xF2","}":"\xE8","~":"\xEC"},i.CHARSETS.E=i.CHARSETS[6]={"@":"\xC4","[":"\xC6","\\":"\xD8","]":"\xC5","^":"\xDC","`":"\xE4","{":"\xE6","|":"\xF8","}":"\xE5","~":"\xFC"},i.CHARSETS.Z={"#":"\xA3","@":"\xA7","[":"\xA1","\\":"\xD1","]":"\xBF","{":"\xB0","|":"\xF1","}":"\xE7"},i.CHARSETS.H=i.CHARSETS[7]={"@":"\xC9","[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},i.CHARSETS["="]={"#":"\xF9","@":"\xE0","[":"\xE9","\\":"\xE7","]":"\xEA","^":"\xEE",_:"\xE8","`":"\xF4","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xFB"}},2584:(s,i)=>{var o,a,c;Object.defineProperty(i,"__esModule",{value:!0}),i.C1_ESCAPED=i.C1=i.C0=void 0,(function(l){l.NUL="\0",l.SOH="",l.STX="",l.ETX="",l.EOT="",l.ENQ="",l.ACK="",l.BEL="\x07",l.BS="\b",l.HT="	",l.LF=`
`,l.VT="\v",l.FF="\f",l.CR="\r",l.SO="",l.SI="",l.DLE="",l.DC1="",l.DC2="",l.DC3="",l.DC4="",l.NAK="",l.SYN="",l.ETB="",l.CAN="",l.EM="",l.SUB="",l.ESC="\x1B",l.FS="",l.GS="",l.RS="",l.US="",l.SP=" ",l.DEL="\x7F"})(o||(i.C0=o={})),(function(l){l.PAD="\x80",l.HOP="\x81",l.BPH="\x82",l.NBH="\x83",l.IND="\x84",l.NEL="\x85",l.SSA="\x86",l.ESA="\x87",l.HTS="\x88",l.HTJ="\x89",l.VTS="\x8A",l.PLD="\x8B",l.PLU="\x8C",l.RI="\x8D",l.SS2="\x8E",l.SS3="\x8F",l.DCS="\x90",l.PU1="\x91",l.PU2="\x92",l.STS="\x93",l.CCH="\x94",l.MW="\x95",l.SPA="\x96",l.EPA="\x97",l.SOS="\x98",l.SGCI="\x99",l.SCI="\x9A",l.CSI="\x9B",l.ST="\x9C",l.OSC="\x9D",l.PM="\x9E",l.APC="\x9F"})(a||(i.C1=a={})),(function(l){l.ST=`${o.ESC}\\`})(c||(i.C1_ESCAPED=c={}))},7399:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.evaluateKeyboardEvent=void 0;let a=o(2584),c={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};i.evaluateKeyboardEvent=function(l,p,m,_){let d={type:0,cancel:!1,key:void 0},u=(l.shiftKey?1:0)|(l.altKey?2:0)|(l.ctrlKey?4:0)|(l.metaKey?8:0);switch(l.keyCode){case 0:l.key==="UIKeyInputUpArrow"?d.key=p?a.C0.ESC+"OA":a.C0.ESC+"[A":l.key==="UIKeyInputLeftArrow"?d.key=p?a.C0.ESC+"OD":a.C0.ESC+"[D":l.key==="UIKeyInputRightArrow"?d.key=p?a.C0.ESC+"OC":a.C0.ESC+"[C":l.key==="UIKeyInputDownArrow"&&(d.key=p?a.C0.ESC+"OB":a.C0.ESC+"[B");break;case 8:d.key=l.ctrlKey?"\b":a.C0.DEL,l.altKey&&(d.key=a.C0.ESC+d.key);break;case 9:if(l.shiftKey){d.key=a.C0.ESC+"[Z";break}d.key=a.C0.HT,d.cancel=!0;break;case 13:d.key=l.altKey?a.C0.ESC+a.C0.CR:a.C0.CR,d.cancel=!0;break;case 27:d.key=a.C0.ESC,l.altKey&&(d.key=a.C0.ESC+a.C0.ESC),d.cancel=!0;break;case 37:if(l.metaKey)break;u?(d.key=a.C0.ESC+"[1;"+(u+1)+"D",d.key===a.C0.ESC+"[1;3D"&&(d.key=a.C0.ESC+(m?"b":"[1;5D"))):d.key=p?a.C0.ESC+"OD":a.C0.ESC+"[D";break;case 39:if(l.metaKey)break;u?(d.key=a.C0.ESC+"[1;"+(u+1)+"C",d.key===a.C0.ESC+"[1;3C"&&(d.key=a.C0.ESC+(m?"f":"[1;5C"))):d.key=p?a.C0.ESC+"OC":a.C0.ESC+"[C";break;case 38:if(l.metaKey)break;u?(d.key=a.C0.ESC+"[1;"+(u+1)+"A",m||d.key!==a.C0.ESC+"[1;3A"||(d.key=a.C0.ESC+"[1;5A")):d.key=p?a.C0.ESC+"OA":a.C0.ESC+"[A";break;case 40:if(l.metaKey)break;u?(d.key=a.C0.ESC+"[1;"+(u+1)+"B",m||d.key!==a.C0.ESC+"[1;3B"||(d.key=a.C0.ESC+"[1;5B")):d.key=p?a.C0.ESC+"OB":a.C0.ESC+"[B";break;case 45:l.shiftKey||l.ctrlKey||(d.key=a.C0.ESC+"[2~");break;case 46:d.key=u?a.C0.ESC+"[3;"+(u+1)+"~":a.C0.ESC+"[3~";break;case 36:d.key=u?a.C0.ESC+"[1;"+(u+1)+"H":p?a.C0.ESC+"OH":a.C0.ESC+"[H";break;case 35:d.key=u?a.C0.ESC+"[1;"+(u+1)+"F":p?a.C0.ESC+"OF":a.C0.ESC+"[F";break;case 33:l.shiftKey?d.type=2:l.ctrlKey?d.key=a.C0.ESC+"[5;"+(u+1)+"~":d.key=a.C0.ESC+"[5~";break;case 34:l.shiftKey?d.type=3:l.ctrlKey?d.key=a.C0.ESC+"[6;"+(u+1)+"~":d.key=a.C0.ESC+"[6~";break;case 112:d.key=u?a.C0.ESC+"[1;"+(u+1)+"P":a.C0.ESC+"OP";break;case 113:d.key=u?a.C0.ESC+"[1;"+(u+1)+"Q":a.C0.ESC+"OQ";break;case 114:d.key=u?a.C0.ESC+"[1;"+(u+1)+"R":a.C0.ESC+"OR";break;case 115:d.key=u?a.C0.ESC+"[1;"+(u+1)+"S":a.C0.ESC+"OS";break;case 116:d.key=u?a.C0.ESC+"[15;"+(u+1)+"~":a.C0.ESC+"[15~";break;case 117:d.key=u?a.C0.ESC+"[17;"+(u+1)+"~":a.C0.ESC+"[17~";break;case 118:d.key=u?a.C0.ESC+"[18;"+(u+1)+"~":a.C0.ESC+"[18~";break;case 119:d.key=u?a.C0.ESC+"[19;"+(u+1)+"~":a.C0.ESC+"[19~";break;case 120:d.key=u?a.C0.ESC+"[20;"+(u+1)+"~":a.C0.ESC+"[20~";break;case 121:d.key=u?a.C0.ESC+"[21;"+(u+1)+"~":a.C0.ESC+"[21~";break;case 122:d.key=u?a.C0.ESC+"[23;"+(u+1)+"~":a.C0.ESC+"[23~";break;case 123:d.key=u?a.C0.ESC+"[24;"+(u+1)+"~":a.C0.ESC+"[24~";break;default:if(!l.ctrlKey||l.shiftKey||l.altKey||l.metaKey)if(m&&!_||!l.altKey||l.metaKey)!m||l.altKey||l.ctrlKey||l.shiftKey||!l.metaKey?l.key&&!l.ctrlKey&&!l.altKey&&!l.metaKey&&l.keyCode>=48&&l.key.length===1?d.key=l.key:l.key&&l.ctrlKey&&(l.key==="_"&&(d.key=a.C0.US),l.key==="@"&&(d.key=a.C0.NUL)):l.keyCode===65&&(d.type=1);else{let g=c[l.keyCode],f=g?.[l.shiftKey?1:0];if(f)d.key=a.C0.ESC+f;else if(l.keyCode>=65&&l.keyCode<=90){let h=l.ctrlKey?l.keyCode-64:l.keyCode+32,v=String.fromCharCode(h);l.shiftKey&&(v=v.toUpperCase()),d.key=a.C0.ESC+v}else if(l.keyCode===32)d.key=a.C0.ESC+(l.ctrlKey?a.C0.NUL:" ");else if(l.key==="Dead"&&l.code.startsWith("Key")){let h=l.code.slice(3,4);l.shiftKey||(h=h.toLowerCase()),d.key=a.C0.ESC+h,d.cancel=!0}}else l.keyCode>=65&&l.keyCode<=90?d.key=String.fromCharCode(l.keyCode-64):l.keyCode===32?d.key=a.C0.NUL:l.keyCode>=51&&l.keyCode<=55?d.key=String.fromCharCode(l.keyCode-51+27):l.keyCode===56?d.key=a.C0.DEL:l.keyCode===219?d.key=a.C0.ESC:l.keyCode===220?d.key=a.C0.FS:l.keyCode===221&&(d.key=a.C0.GS)}return d}},482:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Utf8ToUtf32=i.StringToUtf32=i.utf32ToString=i.stringFromCodePoint=void 0,i.stringFromCodePoint=function(o){return o>65535?(o-=65536,String.fromCharCode(55296+(o>>10))+String.fromCharCode(o%1024+56320)):String.fromCharCode(o)},i.utf32ToString=function(o,a=0,c=o.length){let l="";for(let p=a;p<c;++p){let m=o[p];m>65535?(m-=65536,l+=String.fromCharCode(55296+(m>>10))+String.fromCharCode(m%1024+56320)):l+=String.fromCharCode(m)}return l},i.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(o,a){let c=o.length;if(!c)return 0;let l=0,p=0;if(this._interim){let m=o.charCodeAt(p++);56320<=m&&m<=57343?a[l++]=1024*(this._interim-55296)+m-56320+65536:(a[l++]=this._interim,a[l++]=m),this._interim=0}for(let m=p;m<c;++m){let _=o.charCodeAt(m);if(55296<=_&&_<=56319){if(++m>=c)return this._interim=_,l;let d=o.charCodeAt(m);56320<=d&&d<=57343?a[l++]=1024*(_-55296)+d-56320+65536:(a[l++]=_,a[l++]=d)}else _!==65279&&(a[l++]=_)}return l}},i.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(o,a){let c=o.length;if(!c)return 0;let l,p,m,_,d=0,u=0,g=0;if(this.interim[0]){let v=!1,b=this.interim[0];b&=(224&b)==192?31:(240&b)==224?15:7;let C,S=0;for(;(C=63&this.interim[++S])&&S<4;)b<<=6,b|=C;let y=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,w=y-S;for(;g<w;){if(g>=c)return 0;if(C=o[g++],(192&C)!=128){g--,v=!0;break}this.interim[S++]=C,b<<=6,b|=63&C}v||(y===2?b<128?g--:a[d++]=b:y===3?b<2048||b>=55296&&b<=57343||b===65279||(a[d++]=b):b<65536||b>1114111||(a[d++]=b)),this.interim.fill(0)}let f=c-4,h=g;for(;h<c;){for(;!(!(h<f)||128&(l=o[h])||128&(p=o[h+1])||128&(m=o[h+2])||128&(_=o[h+3]));)a[d++]=l,a[d++]=p,a[d++]=m,a[d++]=_,h+=4;if(l=o[h++],l<128)a[d++]=l;else if((224&l)==192){if(h>=c)return this.interim[0]=l,d;if(p=o[h++],(192&p)!=128){h--;continue}if(u=(31&l)<<6|63&p,u<128){h--;continue}a[d++]=u}else if((240&l)==224){if(h>=c)return this.interim[0]=l,d;if(p=o[h++],(192&p)!=128){h--;continue}if(h>=c)return this.interim[0]=l,this.interim[1]=p,d;if(m=o[h++],(192&m)!=128){h--;continue}if(u=(15&l)<<12|(63&p)<<6|63&m,u<2048||u>=55296&&u<=57343||u===65279)continue;a[d++]=u}else if((248&l)==240){if(h>=c)return this.interim[0]=l,d;if(p=o[h++],(192&p)!=128){h--;continue}if(h>=c)return this.interim[0]=l,this.interim[1]=p,d;if(m=o[h++],(192&m)!=128){h--;continue}if(h>=c)return this.interim[0]=l,this.interim[1]=p,this.interim[2]=m,d;if(_=o[h++],(192&_)!=128){h--;continue}if(u=(7&l)<<18|(63&p)<<12|(63&m)<<6|63&_,u<65536||u>1114111)continue;a[d++]=u}}return d}}},225:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeV6=void 0;let a=o(1480),c=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],l=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],p;i.UnicodeV6=class{constructor(){if(this.version="6",!p){p=new Uint8Array(65536),p.fill(1),p[0]=0,p.fill(0,1,32),p.fill(0,127,160),p.fill(2,4352,4448),p[9001]=2,p[9002]=2,p.fill(2,11904,42192),p[12351]=1,p.fill(2,44032,55204),p.fill(2,63744,64256),p.fill(2,65040,65050),p.fill(2,65072,65136),p.fill(2,65280,65377),p.fill(2,65504,65511);for(let m=0;m<c.length;++m)p.fill(0,c[m][0],c[m][1]+1)}}wcwidth(m){return m<32?0:m<127?1:m<65536?p[m]:(function(_,d){let u,g=0,f=d.length-1;if(_<d[0][0]||_>d[f][1])return!1;for(;f>=g;)if(u=g+f>>1,_>d[u][1])g=u+1;else{if(!(_<d[u][0]))return!0;f=u-1}return!1})(m,l)?0:m>=131072&&m<=196605||m>=196608&&m<=262141?2:1}charProperties(m,_){let d=this.wcwidth(m),u=d===0&&_!==0;if(u){let g=a.UnicodeService.extractWidth(_);g===0?u=!1:g>d&&(d=g)}return a.UnicodeService.createPropertyValue(0,d,u)}}},5981:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WriteBuffer=void 0;let a=o(8460),c=o(844);class l extends c.Disposable{constructor(m){super(),this._action=m,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new a.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(m,_){if(_!==void 0&&this._syncCalls>_)return void(this._syncCalls=0);if(this._pendingData+=m.length,this._writeBuffer.push(m),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let d;for(this._isSyncWriting=!0;d=this._writeBuffer.shift();){this._action(d);let u=this._callbacks.shift();u&&u()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(m,_){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=m.length,this._writeBuffer.push(m),this._callbacks.push(_),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=m.length,this._writeBuffer.push(m),this._callbacks.push(_)}_innerWrite(m=0,_=!0){let d=m||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){let u=this._writeBuffer[this._bufferOffset],g=this._action(u,_);if(g){let h=v=>Date.now()-d>=12?setTimeout(()=>this._innerWrite(0,v)):this._innerWrite(d,v);return void g.catch(v=>(queueMicrotask(()=>{throw v}),Promise.resolve(!1))).then(h)}let f=this._callbacks[this._bufferOffset];if(f&&f(),this._bufferOffset++,this._pendingData-=u.length,Date.now()-d>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}i.WriteBuffer=l},5941:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.toRgbString=i.parseColor=void 0;let o=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,a=/^[\da-f]+$/;function c(l,p){let m=l.toString(16),_=m.length<2?"0"+m:m;switch(p){case 4:return m[0];case 8:return _;case 12:return(_+_).slice(0,3);default:return _+_}}i.parseColor=function(l){if(!l)return;let p=l.toLowerCase();if(p.indexOf("rgb:")===0){p=p.slice(4);let m=o.exec(p);if(m){let _=m[1]?15:m[4]?255:m[7]?4095:65535;return[Math.round(parseInt(m[1]||m[4]||m[7]||m[10],16)/_*255),Math.round(parseInt(m[2]||m[5]||m[8]||m[11],16)/_*255),Math.round(parseInt(m[3]||m[6]||m[9]||m[12],16)/_*255)]}}else if(p.indexOf("#")===0&&(p=p.slice(1),a.exec(p)&&[3,6,9,12].includes(p.length))){let m=p.length/3,_=[0,0,0];for(let d=0;d<3;++d){let u=parseInt(p.slice(m*d,m*d+m),16);_[d]=m===1?u<<4:m===2?u:m===3?u>>4:u>>8}return _}},i.toRgbString=function(l,p=16){let[m,_,d]=l;return`rgb:${c(m,p)}/${c(_,p)}/${c(d,p)}`}},5770:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.PAYLOAD_LIMIT=void 0,i.PAYLOAD_LIMIT=1e7},6351:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DcsHandler=i.DcsParser=void 0;let a=o(482),c=o(8742),l=o(5770),p=[];i.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=p,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=p}registerHandler(_,d){this._handlers[_]===void 0&&(this._handlers[_]=[]);let u=this._handlers[_];return u.push(d),{dispose:()=>{let g=u.indexOf(d);g!==-1&&u.splice(g,1)}}}clearHandler(_){this._handlers[_]&&delete this._handlers[_]}setHandlerFallback(_){this._handlerFb=_}reset(){if(this._active.length)for(let _=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;_>=0;--_)this._active[_].unhook(!1);this._stack.paused=!1,this._active=p,this._ident=0}hook(_,d){if(this.reset(),this._ident=_,this._active=this._handlers[_]||p,this._active.length)for(let u=this._active.length-1;u>=0;u--)this._active[u].hook(d);else this._handlerFb(this._ident,"HOOK",d)}put(_,d,u){if(this._active.length)for(let g=this._active.length-1;g>=0;g--)this._active[g].put(_,d,u);else this._handlerFb(this._ident,"PUT",(0,a.utf32ToString)(_,d,u))}unhook(_,d=!0){if(this._active.length){let u=!1,g=this._active.length-1,f=!1;if(this._stack.paused&&(g=this._stack.loopPosition-1,u=d,f=this._stack.fallThrough,this._stack.paused=!1),!f&&u===!1){for(;g>=0&&(u=this._active[g].unhook(_),u!==!0);g--)if(u instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=g,this._stack.fallThrough=!1,u;g--}for(;g>=0;g--)if(u=this._active[g].unhook(!1),u instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=g,this._stack.fallThrough=!0,u}else this._handlerFb(this._ident,"UNHOOK",_);this._active=p,this._ident=0}};let m=new c.Params;m.addParam(0),i.DcsHandler=class{constructor(_){this._handler=_,this._data="",this._params=m,this._hitLimit=!1}hook(_){this._params=_.length>1||_.params[0]?_.clone():m,this._data="",this._hitLimit=!1}put(_,d,u){this._hitLimit||(this._data+=(0,a.utf32ToString)(_,d,u),this._data.length>l.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(_){let d=!1;if(this._hitLimit)d=!1;else if(_&&(d=this._handler(this._data,this._params),d instanceof Promise))return d.then(u=>(this._params=m,this._data="",this._hitLimit=!1,u));return this._params=m,this._data="",this._hitLimit=!1,d}}},2015:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.EscapeSequenceParser=i.VT500_TRANSITION_TABLE=i.TransitionTable=void 0;let a=o(844),c=o(8742),l=o(6242),p=o(6351);class m{constructor(g){this.table=new Uint8Array(g)}setDefault(g,f){this.table.fill(g<<4|f)}add(g,f,h,v){this.table[f<<8|g]=h<<4|v}addMany(g,f,h,v){for(let b=0;b<g.length;b++)this.table[f<<8|g[b]]=h<<4|v}}i.TransitionTable=m;let _=160;i.VT500_TRANSITION_TABLE=(function(){let u=new m(4095),g=Array.apply(null,Array(256)).map((S,y)=>y),f=(S,y)=>g.slice(S,y),h=f(32,127),v=f(0,24);v.push(25),v.push.apply(v,f(28,32));let b=f(0,14),C;for(C in u.setDefault(1,0),u.addMany(h,0,2,0),b)u.addMany([24,26,153,154],C,3,0),u.addMany(f(128,144),C,3,0),u.addMany(f(144,152),C,3,0),u.add(156,C,0,0),u.add(27,C,11,1),u.add(157,C,4,8),u.addMany([152,158,159],C,0,7),u.add(155,C,11,3),u.add(144,C,11,9);return u.addMany(v,0,3,0),u.addMany(v,1,3,1),u.add(127,1,0,1),u.addMany(v,8,0,8),u.addMany(v,3,3,3),u.add(127,3,0,3),u.addMany(v,4,3,4),u.add(127,4,0,4),u.addMany(v,6,3,6),u.addMany(v,5,3,5),u.add(127,5,0,5),u.addMany(v,2,3,2),u.add(127,2,0,2),u.add(93,1,4,8),u.addMany(h,8,5,8),u.add(127,8,5,8),u.addMany([156,27,24,26,7],8,6,0),u.addMany(f(28,32),8,0,8),u.addMany([88,94,95],1,0,7),u.addMany(h,7,0,7),u.addMany(v,7,0,7),u.add(156,7,0,0),u.add(127,7,0,7),u.add(91,1,11,3),u.addMany(f(64,127),3,7,0),u.addMany(f(48,60),3,8,4),u.addMany([60,61,62,63],3,9,4),u.addMany(f(48,60),4,8,4),u.addMany(f(64,127),4,7,0),u.addMany([60,61,62,63],4,0,6),u.addMany(f(32,64),6,0,6),u.add(127,6,0,6),u.addMany(f(64,127),6,0,0),u.addMany(f(32,48),3,9,5),u.addMany(f(32,48),5,9,5),u.addMany(f(48,64),5,0,6),u.addMany(f(64,127),5,7,0),u.addMany(f(32,48),4,9,5),u.addMany(f(32,48),1,9,2),u.addMany(f(32,48),2,9,2),u.addMany(f(48,127),2,10,0),u.addMany(f(48,80),1,10,0),u.addMany(f(81,88),1,10,0),u.addMany([89,90,92],1,10,0),u.addMany(f(96,127),1,10,0),u.add(80,1,11,9),u.addMany(v,9,0,9),u.add(127,9,0,9),u.addMany(f(28,32),9,0,9),u.addMany(f(32,48),9,9,12),u.addMany(f(48,60),9,8,10),u.addMany([60,61,62,63],9,9,10),u.addMany(v,11,0,11),u.addMany(f(32,128),11,0,11),u.addMany(f(28,32),11,0,11),u.addMany(v,10,0,10),u.add(127,10,0,10),u.addMany(f(28,32),10,0,10),u.addMany(f(48,60),10,8,10),u.addMany([60,61,62,63],10,0,11),u.addMany(f(32,48),10,9,12),u.addMany(v,12,0,12),u.add(127,12,0,12),u.addMany(f(28,32),12,0,12),u.addMany(f(32,48),12,9,12),u.addMany(f(48,64),12,0,11),u.addMany(f(64,127),12,12,13),u.addMany(f(64,127),10,12,13),u.addMany(f(64,127),9,12,13),u.addMany(v,13,13,13),u.addMany(h,13,13,13),u.add(127,13,0,13),u.addMany([27,156,24,26],13,14,0),u.add(_,0,2,0),u.add(_,8,5,8),u.add(_,6,0,6),u.add(_,11,0,11),u.add(_,13,13,13),u})();class d extends a.Disposable{constructor(g=i.VT500_TRANSITION_TABLE){super(),this._transitions=g,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new c.Params,this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._printHandlerFb=(f,h,v)=>{},this._executeHandlerFb=f=>{},this._csiHandlerFb=(f,h)=>{},this._escHandlerFb=f=>{},this._errorHandlerFb=f=>f,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,a.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new l.OscParser),this._dcsParser=this.register(new p.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(g,f=[64,126]){let h=0;if(g.prefix){if(g.prefix.length>1)throw new Error("only one byte as prefix supported");if(h=g.prefix.charCodeAt(0),h&&60>h||h>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(g.intermediates){if(g.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let b=0;b<g.intermediates.length;++b){let C=g.intermediates.charCodeAt(b);if(32>C||C>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");h<<=8,h|=C}}if(g.final.length!==1)throw new Error("final must be a single byte");let v=g.final.charCodeAt(0);if(f[0]>v||v>f[1])throw new Error(`final must be in range ${f[0]} .. ${f[1]}`);return h<<=8,h|=v,h}identToString(g){let f=[];for(;g;)f.push(String.fromCharCode(255&g)),g>>=8;return f.reverse().join("")}setPrintHandler(g){this._printHandler=g}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(g,f){let h=this._identifier(g,[48,126]);this._escHandlers[h]===void 0&&(this._escHandlers[h]=[]);let v=this._escHandlers[h];return v.push(f),{dispose:()=>{let b=v.indexOf(f);b!==-1&&v.splice(b,1)}}}clearEscHandler(g){this._escHandlers[this._identifier(g,[48,126])]&&delete this._escHandlers[this._identifier(g,[48,126])]}setEscHandlerFallback(g){this._escHandlerFb=g}setExecuteHandler(g,f){this._executeHandlers[g.charCodeAt(0)]=f}clearExecuteHandler(g){this._executeHandlers[g.charCodeAt(0)]&&delete this._executeHandlers[g.charCodeAt(0)]}setExecuteHandlerFallback(g){this._executeHandlerFb=g}registerCsiHandler(g,f){let h=this._identifier(g);this._csiHandlers[h]===void 0&&(this._csiHandlers[h]=[]);let v=this._csiHandlers[h];return v.push(f),{dispose:()=>{let b=v.indexOf(f);b!==-1&&v.splice(b,1)}}}clearCsiHandler(g){this._csiHandlers[this._identifier(g)]&&delete this._csiHandlers[this._identifier(g)]}setCsiHandlerFallback(g){this._csiHandlerFb=g}registerDcsHandler(g,f){return this._dcsParser.registerHandler(this._identifier(g),f)}clearDcsHandler(g){this._dcsParser.clearHandler(this._identifier(g))}setDcsHandlerFallback(g){this._dcsParser.setHandlerFallback(g)}registerOscHandler(g,f){return this._oscParser.registerHandler(g,f)}clearOscHandler(g){this._oscParser.clearHandler(g)}setOscHandlerFallback(g){this._oscParser.setHandlerFallback(g)}setErrorHandler(g){this._errorHandler=g}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(g,f,h,v,b){this._parseStack.state=g,this._parseStack.handlers=f,this._parseStack.handlerPos=h,this._parseStack.transition=v,this._parseStack.chunkPos=b}parse(g,f,h){let v,b=0,C=0,S=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,S=this._parseStack.chunkPos+1;else{if(h===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");let y=this._parseStack.handlers,w=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(h===!1&&w>-1){for(;w>=0&&(v=y[w](this._params),v!==!0);w--)if(v instanceof Promise)return this._parseStack.handlerPos=w,v}this._parseStack.handlers=[];break;case 4:if(h===!1&&w>-1){for(;w>=0&&(v=y[w](),v!==!0);w--)if(v instanceof Promise)return this._parseStack.handlerPos=w,v}this._parseStack.handlers=[];break;case 6:if(b=g[this._parseStack.chunkPos],v=this._dcsParser.unhook(b!==24&&b!==26,h),v)return v;b===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(b=g[this._parseStack.chunkPos],v=this._oscParser.end(b!==24&&b!==26,h),v)return v;b===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,S=this._parseStack.chunkPos+1,this.precedingJoinState=0,this.currentState=15&this._parseStack.transition}for(let y=S;y<f;++y){switch(b=g[y],C=this._transitions.table[this.currentState<<8|(b<160?b:_)],C>>4){case 2:for(let M=y+1;;++M){if(M>=f||(b=g[M])<32||b>126&&b<_){this._printHandler(g,y,M),y=M-1;break}if(++M>=f||(b=g[M])<32||b>126&&b<_){this._printHandler(g,y,M),y=M-1;break}if(++M>=f||(b=g[M])<32||b>126&&b<_){this._printHandler(g,y,M),y=M-1;break}if(++M>=f||(b=g[M])<32||b>126&&b<_){this._printHandler(g,y,M),y=M-1;break}}break;case 3:this._executeHandlers[b]?this._executeHandlers[b]():this._executeHandlerFb(b),this.precedingJoinState=0;break;case 0:break;case 1:if(this._errorHandler({position:y,code:b,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:let w=this._csiHandlers[this._collect<<8|b],E=w?w.length-1:-1;for(;E>=0&&(v=w[E](this._params),v!==!0);E--)if(v instanceof Promise)return this._preserveStack(3,w,E,C,y),v;E<0&&this._csiHandlerFb(this._collect<<8|b,this._params),this.precedingJoinState=0;break;case 8:do switch(b){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(b-48)}while(++y<f&&(b=g[y])>47&&b<60);y--;break;case 9:this._collect<<=8,this._collect|=b;break;case 10:let T=this._escHandlers[this._collect<<8|b],I=T?T.length-1:-1;for(;I>=0&&(v=T[I](),v!==!0);I--)if(v instanceof Promise)return this._preserveStack(4,T,I,C,y),v;I<0&&this._escHandlerFb(this._collect<<8|b),this.precedingJoinState=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|b,this._params);break;case 13:for(let M=y+1;;++M)if(M>=f||(b=g[M])===24||b===26||b===27||b>127&&b<_){this._dcsParser.put(g,y,M),y=M-1;break}break;case 14:if(v=this._dcsParser.unhook(b!==24&&b!==26),v)return this._preserveStack(6,[],0,C,y),v;b===27&&(C|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break;case 4:this._oscParser.start();break;case 5:for(let M=y+1;;M++)if(M>=f||(b=g[M])<32||b>127&&b<_){this._oscParser.put(g,y,M),y=M-1;break}break;case 6:if(v=this._oscParser.end(b!==24&&b!==26),v)return this._preserveStack(5,[],0,C,y),v;b===27&&(C|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0}this.currentState=15&C}}}i.EscapeSequenceParser=d},6242:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.OscHandler=i.OscParser=void 0;let a=o(5770),c=o(482),l=[];i.OscParser=class{constructor(){this._state=0,this._active=l,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(p,m){this._handlers[p]===void 0&&(this._handlers[p]=[]);let _=this._handlers[p];return _.push(m),{dispose:()=>{let d=_.indexOf(m);d!==-1&&_.splice(d,1)}}}clearHandler(p){this._handlers[p]&&delete this._handlers[p]}setHandlerFallback(p){this._handlerFb=p}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=l}reset(){if(this._state===2)for(let p=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;p>=0;--p)this._active[p].end(!1);this._stack.paused=!1,this._active=l,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||l,this._active.length)for(let p=this._active.length-1;p>=0;p--)this._active[p].start();else this._handlerFb(this._id,"START")}_put(p,m,_){if(this._active.length)for(let d=this._active.length-1;d>=0;d--)this._active[d].put(p,m,_);else this._handlerFb(this._id,"PUT",(0,c.utf32ToString)(p,m,_))}start(){this.reset(),this._state=1}put(p,m,_){if(this._state!==3){if(this._state===1)for(;m<_;){let d=p[m++];if(d===59){this._state=2,this._start();break}if(d<48||57<d)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+d-48}this._state===2&&_-m>0&&this._put(p,m,_)}}end(p,m=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let _=!1,d=this._active.length-1,u=!1;if(this._stack.paused&&(d=this._stack.loopPosition-1,_=m,u=this._stack.fallThrough,this._stack.paused=!1),!u&&_===!1){for(;d>=0&&(_=this._active[d].end(p),_!==!0);d--)if(_ instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=d,this._stack.fallThrough=!1,_;d--}for(;d>=0;d--)if(_=this._active[d].end(!1),_ instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=d,this._stack.fallThrough=!0,_}else this._handlerFb(this._id,"END",p);this._active=l,this._id=-1,this._state=0}}},i.OscHandler=class{constructor(p){this._handler=p,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(p,m,_){this._hitLimit||(this._data+=(0,c.utf32ToString)(p,m,_),this._data.length>a.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(p){let m=!1;if(this._hitLimit)m=!1;else if(p&&(m=this._handler(this._data),m instanceof Promise))return m.then(_=>(this._data="",this._hitLimit=!1,_));return this._data="",this._hitLimit=!1,m}}},8742:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Params=void 0;let o=2147483647;class a{static fromArray(l){let p=new a;if(!l.length)return p;for(let m=Array.isArray(l[0])?1:0;m<l.length;++m){let _=l[m];if(Array.isArray(_))for(let d=0;d<_.length;++d)p.addSubParam(_[d]);else p.addParam(_)}return p}constructor(l=32,p=32){if(this.maxLength=l,this.maxSubParamsLength=p,p>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(l),this.length=0,this._subParams=new Int32Array(p),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(l),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){let l=new a(this.maxLength,this.maxSubParamsLength);return l.params.set(this.params),l.length=this.length,l._subParams.set(this._subParams),l._subParamsLength=this._subParamsLength,l._subParamsIdx.set(this._subParamsIdx),l._rejectDigits=this._rejectDigits,l._rejectSubDigits=this._rejectSubDigits,l._digitIsSub=this._digitIsSub,l}toArray(){let l=[];for(let p=0;p<this.length;++p){l.push(this.params[p]);let m=this._subParamsIdx[p]>>8,_=255&this._subParamsIdx[p];_-m>0&&l.push(Array.prototype.slice.call(this._subParams,m,_))}return l}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(l){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(l<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=l>o?o:l}}addSubParam(l){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(l<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=l>o?o:l,this._subParamsIdx[this.length-1]++}}hasSubParams(l){return(255&this._subParamsIdx[l])-(this._subParamsIdx[l]>>8)>0}getSubParams(l){let p=this._subParamsIdx[l]>>8,m=255&this._subParamsIdx[l];return m-p>0?this._subParams.subarray(p,m):null}getSubParamsAll(){let l={};for(let p=0;p<this.length;++p){let m=this._subParamsIdx[p]>>8,_=255&this._subParamsIdx[p];_-m>0&&(l[p]=this._subParams.slice(m,_))}return l}addDigit(l){let p;if(this._rejectDigits||!(p=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;let m=this._digitIsSub?this._subParams:this.params,_=m[p-1];m[p-1]=~_?Math.min(10*_+l,o):l}}i.Params=a},5741:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.AddonManager=void 0,i.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let o=this._addons.length-1;o>=0;o--)this._addons[o].instance.dispose()}loadAddon(o,a){let c={instance:a,dispose:a.dispose,isDisposed:!1};this._addons.push(c),a.dispose=()=>this._wrappedAddonDispose(c),a.activate(o)}_wrappedAddonDispose(o){if(o.isDisposed)return;let a=-1;for(let c=0;c<this._addons.length;c++)if(this._addons[c]===o){a=c;break}if(a===-1)throw new Error("Could not dispose an addon that has not been loaded");o.isDisposed=!0,o.dispose.apply(o.instance),this._addons.splice(a,1)}}},8771:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferApiView=void 0;let a=o(3785),c=o(511);i.BufferApiView=class{constructor(l,p){this._buffer=l,this.type=p}init(l){return this._buffer=l,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(l){let p=this._buffer.lines.get(l);if(p)return new a.BufferLineApiView(p)}getNullCell(){return new c.CellData}}},3785:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferLineApiView=void 0;let a=o(511);i.BufferLineApiView=class{constructor(c){this._line=c}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(c,l){if(!(c<0||c>=this._line.length))return l?(this._line.loadCell(c,l),l):this._line.loadCell(c,new a.CellData)}translateToString(c,l,p){return this._line.translateToString(c,l,p)}}},8285:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferNamespaceApi=void 0;let a=o(8771),c=o(8460),l=o(844);class p extends l.Disposable{constructor(_){super(),this._core=_,this._onBufferChange=this.register(new c.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new a.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new a.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}i.BufferNamespaceApi=p},7975:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ParserApi=void 0,i.ParserApi=class{constructor(o){this._core=o}registerCsiHandler(o,a){return this._core.registerCsiHandler(o,c=>a(c.toArray()))}addCsiHandler(o,a){return this.registerCsiHandler(o,a)}registerDcsHandler(o,a){return this._core.registerDcsHandler(o,(c,l)=>a(c,l.toArray()))}addDcsHandler(o,a){return this.registerDcsHandler(o,a)}registerEscHandler(o,a){return this._core.registerEscHandler(o,a)}addEscHandler(o,a){return this.registerEscHandler(o,a)}registerOscHandler(o,a){return this._core.registerOscHandler(o,a)}addOscHandler(o,a){return this.registerOscHandler(o,a)}}},7090:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeApi=void 0,i.UnicodeApi=class{constructor(o){this._core=o}register(o){this._core.unicodeService.register(o)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(o){this._core.unicodeService.activeVersion=o}}},744:function(s,i,o){var a=this&&this.__decorate||function(u,g,f,h){var v,b=arguments.length,C=b<3?g:h===null?h=Object.getOwnPropertyDescriptor(g,f):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(u,g,f,h);else for(var S=u.length-1;S>=0;S--)(v=u[S])&&(C=(b<3?v(C):b>3?v(g,f,C):v(g,f))||C);return b>3&&C&&Object.defineProperty(g,f,C),C},c=this&&this.__param||function(u,g){return function(f,h){g(f,h,u)}};Object.defineProperty(i,"__esModule",{value:!0}),i.BufferService=i.MINIMUM_ROWS=i.MINIMUM_COLS=void 0;let l=o(8460),p=o(844),m=o(5295),_=o(2585);i.MINIMUM_COLS=2,i.MINIMUM_ROWS=1;let d=i.BufferService=class extends p.Disposable{get buffer(){return this.buffers.active}constructor(u){super(),this.isUserScrolling=!1,this._onResize=this.register(new l.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new l.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(u.rawOptions.cols||0,i.MINIMUM_COLS),this.rows=Math.max(u.rawOptions.rows||0,i.MINIMUM_ROWS),this.buffers=this.register(new m.BufferSet(u,this))}resize(u,g){this.cols=u,this.rows=g,this.buffers.resize(u,g),this._onResize.fire({cols:u,rows:g})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(u,g=!1){let f=this.buffer,h;h=this._cachedBlankLine,h&&h.length===this.cols&&h.getFg(0)===u.fg&&h.getBg(0)===u.bg||(h=f.getBlankLine(u,g),this._cachedBlankLine=h),h.isWrapped=g;let v=f.ybase+f.scrollTop,b=f.ybase+f.scrollBottom;if(f.scrollTop===0){let C=f.lines.isFull;b===f.lines.length-1?C?f.lines.recycle().copyFrom(h):f.lines.push(h.clone()):f.lines.splice(b+1,0,h.clone()),C?this.isUserScrolling&&(f.ydisp=Math.max(f.ydisp-1,0)):(f.ybase++,this.isUserScrolling||f.ydisp++)}else{let C=b-v+1;f.lines.shiftElements(v+1,C-1,-1),f.lines.set(b,h.clone())}this.isUserScrolling||(f.ydisp=f.ybase),this._onScroll.fire(f.ydisp)}scrollLines(u,g,f){let h=this.buffer;if(u<0){if(h.ydisp===0)return;this.isUserScrolling=!0}else u+h.ydisp>=h.ybase&&(this.isUserScrolling=!1);let v=h.ydisp;h.ydisp=Math.max(Math.min(h.ydisp+u,h.ybase),0),v!==h.ydisp&&(g||this._onScroll.fire(h.ydisp))}};i.BufferService=d=a([c(0,_.IOptionsService)],d)},7994:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CharsetService=void 0,i.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(o){this.glevel=o,this.charset=this._charsets[o]}setgCharset(o,a){this._charsets[o]=a,this.glevel===o&&(this.charset=a)}}},1753:function(s,i,o){var a=this&&this.__decorate||function(h,v,b,C){var S,y=arguments.length,w=y<3?v:C===null?C=Object.getOwnPropertyDescriptor(v,b):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(h,v,b,C);else for(var E=h.length-1;E>=0;E--)(S=h[E])&&(w=(y<3?S(w):y>3?S(v,b,w):S(v,b))||w);return y>3&&w&&Object.defineProperty(v,b,w),w},c=this&&this.__param||function(h,v){return function(b,C){v(b,C,h)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CoreMouseService=void 0;let l=o(2585),p=o(8460),m=o(844),_={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:h=>h.button!==4&&h.action===1&&(h.ctrl=!1,h.alt=!1,h.shift=!1,!0)},VT200:{events:19,restrict:h=>h.action!==32},DRAG:{events:23,restrict:h=>h.action!==32||h.button!==3},ANY:{events:31,restrict:h=>!0}};function d(h,v){let b=(h.ctrl?16:0)|(h.shift?4:0)|(h.alt?8:0);return h.button===4?(b|=64,b|=h.action):(b|=3&h.button,4&h.button&&(b|=64),8&h.button&&(b|=128),h.action===32?b|=32:h.action!==0||v||(b|=3)),b}let u=String.fromCharCode,g={DEFAULT:h=>{let v=[d(h,!1)+32,h.col+32,h.row+32];return v[0]>255||v[1]>255||v[2]>255?"":`\x1B[M${u(v[0])}${u(v[1])}${u(v[2])}`},SGR:h=>{let v=h.action===0&&h.button!==4?"m":"M";return`\x1B[<${d(h,!0)};${h.col};${h.row}${v}`},SGR_PIXELS:h=>{let v=h.action===0&&h.button!==4?"m":"M";return`\x1B[<${d(h,!0)};${h.x};${h.y}${v}`}},f=i.CoreMouseService=class extends m.Disposable{constructor(h,v){super(),this._bufferService=h,this._coreService=v,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new p.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(let b of Object.keys(_))this.addProtocol(b,_[b]);for(let b of Object.keys(g))this.addEncoding(b,g[b]);this.reset()}addProtocol(h,v){this._protocols[h]=v}addEncoding(h,v){this._encodings[h]=v}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(h){if(!this._protocols[h])throw new Error(`unknown protocol "${h}"`);this._activeProtocol=h,this._onProtocolChange.fire(this._protocols[h].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(h){if(!this._encodings[h])throw new Error(`unknown encoding "${h}"`);this._activeEncoding=h}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(h){if(h.col<0||h.col>=this._bufferService.cols||h.row<0||h.row>=this._bufferService.rows||h.button===4&&h.action===32||h.button===3&&h.action!==32||h.button!==4&&(h.action===2||h.action===3)||(h.col++,h.row++,h.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,h,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(h))return!1;let v=this._encodings[this._activeEncoding](h);return v&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(v):this._coreService.triggerDataEvent(v,!0)),this._lastEvent=h,!0}explainEvents(h){return{down:!!(1&h),up:!!(2&h),drag:!!(4&h),move:!!(8&h),wheel:!!(16&h)}}_equalEvents(h,v,b){if(b){if(h.x!==v.x||h.y!==v.y)return!1}else if(h.col!==v.col||h.row!==v.row)return!1;return h.button===v.button&&h.action===v.action&&h.ctrl===v.ctrl&&h.alt===v.alt&&h.shift===v.shift}};i.CoreMouseService=f=a([c(0,l.IBufferService),c(1,l.ICoreService)],f)},6975:function(s,i,o){var a=this&&this.__decorate||function(f,h,v,b){var C,S=arguments.length,y=S<3?h:b===null?b=Object.getOwnPropertyDescriptor(h,v):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(f,h,v,b);else for(var w=f.length-1;w>=0;w--)(C=f[w])&&(y=(S<3?C(y):S>3?C(h,v,y):C(h,v))||y);return S>3&&y&&Object.defineProperty(h,v,y),y},c=this&&this.__param||function(f,h){return function(v,b){h(v,b,f)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CoreService=void 0;let l=o(1439),p=o(8460),m=o(844),_=o(2585),d=Object.freeze({insertMode:!1}),u=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0}),g=i.CoreService=class extends m.Disposable{constructor(f,h,v){super(),this._bufferService=f,this._logService=h,this._optionsService=v,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new p.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new p.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new p.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new p.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,l.clone)(d),this.decPrivateModes=(0,l.clone)(u)}reset(){this.modes=(0,l.clone)(d),this.decPrivateModes=(0,l.clone)(u)}triggerDataEvent(f,h=!1){if(this._optionsService.rawOptions.disableStdin)return;let v=this._bufferService.buffer;h&&this._optionsService.rawOptions.scrollOnUserInput&&v.ybase!==v.ydisp&&this._onRequestScrollToBottom.fire(),h&&this._onUserInput.fire(),this._logService.debug(`sending data "${f}"`,()=>f.split("").map(b=>b.charCodeAt(0))),this._onData.fire(f)}triggerBinaryEvent(f){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${f}"`,()=>f.split("").map(h=>h.charCodeAt(0))),this._onBinary.fire(f))}};i.CoreService=g=a([c(0,_.IBufferService),c(1,_.ILogService),c(2,_.IOptionsService)],g)},9074:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DecorationService=void 0;let a=o(8055),c=o(8460),l=o(844),p=o(6106),m=0,_=0;class d extends l.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new p.SortedList(f=>f?.marker.line),this._onDecorationRegistered=this.register(new c.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new c.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,l.toDisposable)(()=>this.reset()))}registerDecoration(f){if(f.marker.isDisposed)return;let h=new u(f);if(h){let v=h.marker.onDispose(()=>h.dispose());h.onDispose(()=>{h&&(this._decorations.delete(h)&&this._onDecorationRemoved.fire(h),v.dispose())}),this._decorations.insert(h),this._onDecorationRegistered.fire(h)}return h}reset(){for(let f of this._decorations.values())f.dispose();this._decorations.clear()}*getDecorationsAtCell(f,h,v){let b=0,C=0;for(let S of this._decorations.getKeyIterator(h))b=S.options.x??0,C=b+(S.options.width??1),f>=b&&f<C&&(!v||(S.options.layer??"bottom")===v)&&(yield S)}forEachDecorationAtCell(f,h,v,b){this._decorations.forEachByKey(h,C=>{m=C.options.x??0,_=m+(C.options.width??1),f>=m&&f<_&&(!v||(C.options.layer??"bottom")===v)&&b(C)})}}i.DecorationService=d;class u extends l.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=a.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=a.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(f){super(),this.options=f,this.onRenderEmitter=this.register(new c.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new c.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=f.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.InstantiationService=i.ServiceCollection=void 0;let a=o(2585),c=o(8343);class l{constructor(...m){this._entries=new Map;for(let[_,d]of m)this.set(_,d)}set(m,_){let d=this._entries.get(m);return this._entries.set(m,_),d}forEach(m){for(let[_,d]of this._entries.entries())m(_,d)}has(m){return this._entries.has(m)}get(m){return this._entries.get(m)}}i.ServiceCollection=l,i.InstantiationService=class{constructor(){this._services=new l,this._services.set(a.IInstantiationService,this)}setService(p,m){this._services.set(p,m)}getService(p){return this._services.get(p)}createInstance(p,...m){let _=(0,c.getServiceDependencies)(p).sort((g,f)=>g.index-f.index),d=[];for(let g of _){let f=this._services.get(g.id);if(!f)throw new Error(`[createInstance] ${p.name} depends on UNKNOWN service ${g.id}.`);d.push(f)}let u=_.length>0?_[0].index:m.length;if(m.length!==u)throw new Error(`[createInstance] First service dependency of ${p.name} at position ${u+1} conflicts with ${m.length} static arguments`);return new p(...m,...d)}}},7866:function(s,i,o){var a=this&&this.__decorate||function(u,g,f,h){var v,b=arguments.length,C=b<3?g:h===null?h=Object.getOwnPropertyDescriptor(g,f):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(u,g,f,h);else for(var S=u.length-1;S>=0;S--)(v=u[S])&&(C=(b<3?v(C):b>3?v(g,f,C):v(g,f))||C);return b>3&&C&&Object.defineProperty(g,f,C),C},c=this&&this.__param||function(u,g){return function(f,h){g(f,h,u)}};Object.defineProperty(i,"__esModule",{value:!0}),i.traceCall=i.setTraceLogger=i.LogService=void 0;let l=o(844),p=o(2585),m={trace:p.LogLevelEnum.TRACE,debug:p.LogLevelEnum.DEBUG,info:p.LogLevelEnum.INFO,warn:p.LogLevelEnum.WARN,error:p.LogLevelEnum.ERROR,off:p.LogLevelEnum.OFF},_,d=i.LogService=class extends l.Disposable{get logLevel(){return this._logLevel}constructor(u){super(),this._optionsService=u,this._logLevel=p.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),_=this}_updateLogLevel(){this._logLevel=m[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(u){for(let g=0;g<u.length;g++)typeof u[g]=="function"&&(u[g]=u[g]())}_log(u,g,f){this._evalLazyOptionalParams(f),u.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+g,...f)}trace(u,...g){this._logLevel<=p.LogLevelEnum.TRACE&&this._log(this._optionsService.options.logger?.trace.bind(this._optionsService.options.logger)??console.log,u,g)}debug(u,...g){this._logLevel<=p.LogLevelEnum.DEBUG&&this._log(this._optionsService.options.logger?.debug.bind(this._optionsService.options.logger)??console.log,u,g)}info(u,...g){this._logLevel<=p.LogLevelEnum.INFO&&this._log(this._optionsService.options.logger?.info.bind(this._optionsService.options.logger)??console.info,u,g)}warn(u,...g){this._logLevel<=p.LogLevelEnum.WARN&&this._log(this._optionsService.options.logger?.warn.bind(this._optionsService.options.logger)??console.warn,u,g)}error(u,...g){this._logLevel<=p.LogLevelEnum.ERROR&&this._log(this._optionsService.options.logger?.error.bind(this._optionsService.options.logger)??console.error,u,g)}};i.LogService=d=a([c(0,p.IOptionsService)],d),i.setTraceLogger=function(u){_=u},i.traceCall=function(u,g,f){if(typeof f.value!="function")throw new Error("not supported");let h=f.value;f.value=function(...v){if(_.logLevel!==p.LogLevelEnum.TRACE)return h.apply(this,v);_.trace(`GlyphRenderer#${h.name}(${v.map(C=>JSON.stringify(C)).join(", ")})`);let b=h.apply(this,v);return _.trace(`GlyphRenderer#${h.name} return`,b),b}}},7302:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.OptionsService=i.DEFAULT_OPTIONS=void 0;let a=o(8460),c=o(844),l=o(6114);i.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,documentOverride:null,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rescaleOverlappingGlyphs:!1,rightClickSelectsWord:l.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};let p=["normal","bold","100","200","300","400","500","600","700","800","900"];class m extends c.Disposable{constructor(d){super(),this._onOptionChange=this.register(new a.EventEmitter),this.onOptionChange=this._onOptionChange.event;let u=z({},i.DEFAULT_OPTIONS);for(let g in d)if(g in u)try{let f=d[g];u[g]=this._sanitizeAndValidateOption(g,f)}catch(f){console.error(f)}this.rawOptions=u,this.options=z({},u),this._setupOptions(),this.register((0,c.toDisposable)(()=>{this.rawOptions.linkHandler=null,this.rawOptions.documentOverride=null}))}onSpecificOptionChange(d,u){return this.onOptionChange(g=>{g===d&&u(this.rawOptions[d])})}onMultipleOptionChange(d,u){return this.onOptionChange(g=>{d.indexOf(g)!==-1&&u()})}_setupOptions(){let d=g=>{if(!(g in i.DEFAULT_OPTIONS))throw new Error(`No option with key "${g}"`);return this.rawOptions[g]},u=(g,f)=>{if(!(g in i.DEFAULT_OPTIONS))throw new Error(`No option with key "${g}"`);f=this._sanitizeAndValidateOption(g,f),this.rawOptions[g]!==f&&(this.rawOptions[g]=f,this._onOptionChange.fire(g))};for(let g in this.rawOptions){let f={get:d.bind(this,g),set:u.bind(this,g)};Object.defineProperty(this.options,g,f)}}_sanitizeAndValidateOption(d,u){switch(d){case"cursorStyle":if(u||(u=i.DEFAULT_OPTIONS[d]),!(function(g){return g==="block"||g==="underline"||g==="bar"})(u))throw new Error(`"${u}" is not a valid value for ${d}`);break;case"wordSeparator":u||(u=i.DEFAULT_OPTIONS[d]);break;case"fontWeight":case"fontWeightBold":if(typeof u=="number"&&1<=u&&u<=1e3)break;u=p.includes(u)?u:i.DEFAULT_OPTIONS[d];break;case"cursorWidth":u=Math.floor(u);case"lineHeight":case"tabStopWidth":if(u<1)throw new Error(`${d} cannot be less than 1, value: ${u}`);break;case"minimumContrastRatio":u=Math.max(1,Math.min(21,Math.round(10*u)/10));break;case"scrollback":if((u=Math.min(u,4294967295))<0)throw new Error(`${d} cannot be less than 0, value: ${u}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(u<=0)throw new Error(`${d} cannot be less than or equal to 0, value: ${u}`);break;case"rows":case"cols":if(!u&&u!==0)throw new Error(`${d} must be numeric, value: ${u}`);break;case"windowsPty":u=u??{}}return u}}i.OptionsService=m},2660:function(s,i,o){var a=this&&this.__decorate||function(m,_,d,u){var g,f=arguments.length,h=f<3?_:u===null?u=Object.getOwnPropertyDescriptor(_,d):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(m,_,d,u);else for(var v=m.length-1;v>=0;v--)(g=m[v])&&(h=(f<3?g(h):f>3?g(_,d,h):g(_,d))||h);return f>3&&h&&Object.defineProperty(_,d,h),h},c=this&&this.__param||function(m,_){return function(d,u){_(d,u,m)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OscLinkService=void 0;let l=o(2585),p=i.OscLinkService=class{constructor(m){this._bufferService=m,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(m){let _=this._bufferService.buffer;if(m.id===void 0){let v=_.addMarker(_.ybase+_.y),b={data:m,id:this._nextId++,lines:[v]};return v.onDispose(()=>this._removeMarkerFromLink(b,v)),this._dataByLinkId.set(b.id,b),b.id}let d=m,u=this._getEntryIdKey(d),g=this._entriesWithId.get(u);if(g)return this.addLineToLink(g.id,_.ybase+_.y),g.id;let f=_.addMarker(_.ybase+_.y),h={id:this._nextId++,key:this._getEntryIdKey(d),data:d,lines:[f]};return f.onDispose(()=>this._removeMarkerFromLink(h,f)),this._entriesWithId.set(h.key,h),this._dataByLinkId.set(h.id,h),h.id}addLineToLink(m,_){let d=this._dataByLinkId.get(m);if(d&&d.lines.every(u=>u.line!==_)){let u=this._bufferService.buffer.addMarker(_);d.lines.push(u),u.onDispose(()=>this._removeMarkerFromLink(d,u))}}getLinkData(m){return this._dataByLinkId.get(m)?.data}_getEntryIdKey(m){return`${m.id};;${m.uri}`}_removeMarkerFromLink(m,_){let d=m.lines.indexOf(_);d!==-1&&(m.lines.splice(d,1),m.lines.length===0&&(m.data.id!==void 0&&this._entriesWithId.delete(m.key),this._dataByLinkId.delete(m.id)))}};i.OscLinkService=p=a([c(0,l.IBufferService)],p)},8343:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createDecorator=i.getServiceDependencies=i.serviceRegistry=void 0;let o="di$target",a="di$dependencies";i.serviceRegistry=new Map,i.getServiceDependencies=function(c){return c[a]||[]},i.createDecorator=function(c){if(i.serviceRegistry.has(c))return i.serviceRegistry.get(c);let l=function(p,m,_){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(d,u,g){u[o]===u?u[a].push({id:d,index:g}):(u[a]=[{id:d,index:g}],u[o]=u)})(l,p,_)};return l.toString=()=>c,i.serviceRegistry.set(c,l),l}},2585:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.IDecorationService=i.IUnicodeService=i.IOscLinkService=i.IOptionsService=i.ILogService=i.LogLevelEnum=i.IInstantiationService=i.ICharsetService=i.ICoreService=i.ICoreMouseService=i.IBufferService=void 0;let a=o(8343);var c;i.IBufferService=(0,a.createDecorator)("BufferService"),i.ICoreMouseService=(0,a.createDecorator)("CoreMouseService"),i.ICoreService=(0,a.createDecorator)("CoreService"),i.ICharsetService=(0,a.createDecorator)("CharsetService"),i.IInstantiationService=(0,a.createDecorator)("InstantiationService"),(function(l){l[l.TRACE=0]="TRACE",l[l.DEBUG=1]="DEBUG",l[l.INFO=2]="INFO",l[l.WARN=3]="WARN",l[l.ERROR=4]="ERROR",l[l.OFF=5]="OFF"})(c||(i.LogLevelEnum=c={})),i.ILogService=(0,a.createDecorator)("LogService"),i.IOptionsService=(0,a.createDecorator)("OptionsService"),i.IOscLinkService=(0,a.createDecorator)("OscLinkService"),i.IUnicodeService=(0,a.createDecorator)("UnicodeService"),i.IDecorationService=(0,a.createDecorator)("DecorationService")},1480:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeService=void 0;let a=o(8460),c=o(225);class l{static extractShouldJoin(m){return(1&m)!=0}static extractWidth(m){return m>>1&3}static extractCharKind(m){return m>>3}static createPropertyValue(m,_,d=!1){return(16777215&m)<<3|(3&_)<<1|(d?1:0)}constructor(){this._providers=Object.create(null),this._active="",this._onChange=new a.EventEmitter,this.onChange=this._onChange.event;let m=new c.UnicodeV6;this.register(m),this._active=m.version,this._activeProvider=m}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(m){if(!this._providers[m])throw new Error(`unknown Unicode version "${m}"`);this._active=m,this._activeProvider=this._providers[m],this._onChange.fire(m)}register(m){this._providers[m.version]=m}wcwidth(m){return this._activeProvider.wcwidth(m)}getStringCellWidth(m){let _=0,d=0,u=m.length;for(let g=0;g<u;++g){let f=m.charCodeAt(g);if(55296<=f&&f<=56319){if(++g>=u)return _+this.wcwidth(f);let b=m.charCodeAt(g);56320<=b&&b<=57343?f=1024*(f-55296)+b-56320+65536:_+=this.wcwidth(b)}let h=this.charProperties(f,d),v=l.extractWidth(h);l.extractShouldJoin(h)&&(v-=l.extractWidth(d)),_+=v,d=h}return _}charProperties(m,_){return this._activeProvider.charProperties(m,_)}}i.UnicodeService=l}},t={};function n(s){var i=t[s];if(i!==void 0)return i.exports;var o=t[s]={exports:{}};return e[s].call(o.exports,o,o.exports,n),o.exports}var r={};return(()=>{var s=r;Object.defineProperty(s,"__esModule",{value:!0}),s.Terminal=void 0;let i=n(9042),o=n(3236),a=n(844),c=n(5741),l=n(8285),p=n(7975),m=n(7090),_=["cols","rows"];class d extends a.Disposable{constructor(g){super(),this._core=this.register(new o.Terminal(g)),this._addonManager=this.register(new c.AddonManager),this._publicOptions=z({},this._core.options);let f=v=>this._core.options[v],h=(v,b)=>{this._checkReadonlyOptions(v),this._core.options[v]=b};for(let v in this._core.options){let b={get:f.bind(this,v),set:h.bind(this,v)};Object.defineProperty(this._publicOptions,v,b)}}_checkReadonlyOptions(g){if(_.includes(g))throw new Error(`Option "${g}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new p.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new m.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new l.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){let g=this._core.coreService.decPrivateModes,f="none";switch(this._core.coreMouseService.activeProtocol){case"X10":f="x10";break;case"VT200":f="vt200";break;case"DRAG":f="drag";break;case"ANY":f="any"}return{applicationCursorKeysMode:g.applicationCursorKeys,applicationKeypadMode:g.applicationKeypad,bracketedPasteMode:g.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:f,originMode:g.origin,reverseWraparoundMode:g.reverseWraparound,sendFocusMode:g.sendFocus,wraparoundMode:g.wraparound}}get options(){return this._publicOptions}set options(g){for(let f in g)this._publicOptions[f]=g[f]}blur(){this._core.blur()}focus(){this._core.focus()}input(g,f=!0){this._core.input(g,f)}resize(g,f){this._verifyIntegers(g,f),this._core.resize(g,f)}open(g){this._core.open(g)}attachCustomKeyEventHandler(g){this._core.attachCustomKeyEventHandler(g)}attachCustomWheelEventHandler(g){this._core.attachCustomWheelEventHandler(g)}registerLinkProvider(g){return this._core.registerLinkProvider(g)}registerCharacterJoiner(g){return this._checkProposedApi(),this._core.registerCharacterJoiner(g)}deregisterCharacterJoiner(g){this._checkProposedApi(),this._core.deregisterCharacterJoiner(g)}registerMarker(g=0){return this._verifyIntegers(g),this._core.registerMarker(g)}registerDecoration(g){return this._checkProposedApi(),this._verifyPositiveIntegers(g.x??0,g.width??0,g.height??0),this._core.registerDecoration(g)}hasSelection(){return this._core.hasSelection()}select(g,f,h){this._verifyIntegers(g,f,h),this._core.select(g,f,h)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(g,f){this._verifyIntegers(g,f),this._core.selectLines(g,f)}dispose(){super.dispose()}scrollLines(g){this._verifyIntegers(g),this._core.scrollLines(g)}scrollPages(g){this._verifyIntegers(g),this._core.scrollPages(g)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(g){this._verifyIntegers(g),this._core.scrollToLine(g)}clear(){this._core.clear()}write(g,f){this._core.write(g,f)}writeln(g,f){this._core.write(g),this._core.write(`\r
`,f)}paste(g){this._core.paste(g)}refresh(g,f){this._verifyIntegers(g,f),this._core.refresh(g,f)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(g){this._addonManager.loadAddon(this,g)}static get strings(){return i}_verifyIntegers(...g){for(let f of g)if(f===1/0||isNaN(f)||f%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...g){for(let f of g)if(f&&(f===1/0||isNaN(f)||f%1!=0||f<0))throw new Error("This API only accepts positive integers")}}s.Terminal=d})(),r})())});var Xv=uo((Zc,sf)=>{"use strict";(function(e,t){typeof Zc=="object"&&typeof sf=="object"?sf.exports=t():typeof define=="function"&&define.amd?define([],t):typeof Zc=="object"?Zc.FitAddon=t():e.FitAddon=t()})(self,()=>(()=>{"use strict";var e={};return(()=>{var t=e;Object.defineProperty(t,"__esModule",{value:!0}),t.FitAddon=void 0,t.FitAddon=class{activate(n){this._terminal=n}dispose(){}fit(){let n=this.proposeDimensions();if(!n||!this._terminal||isNaN(n.cols)||isNaN(n.rows))return;let r=this._terminal._core;this._terminal.rows===n.rows&&this._terminal.cols===n.cols||(r._renderService.clear(),this._terminal.resize(n.cols,n.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;let n=this._terminal._core,r=n._renderService.dimensions;if(r.css.cell.width===0||r.css.cell.height===0)return;let s=this._terminal.options.scrollback===0?0:n.viewport.scrollBarWidth,i=window.getComputedStyle(this._terminal.element.parentElement),o=parseInt(i.getPropertyValue("height")),a=Math.max(0,parseInt(i.getPropertyValue("width"))),c=window.getComputedStyle(this._terminal.element),l=o-(parseInt(c.getPropertyValue("padding-top"))+parseInt(c.getPropertyValue("padding-bottom"))),p=a-(parseInt(c.getPropertyValue("padding-right"))+parseInt(c.getPropertyValue("padding-left")))-s;return{cols:Math.max(2,Math.floor(p/r.css.cell.width)),rows:Math.max(1,Math.floor(l/r.css.cell.height))}}}})(),e})())});var Qv=uo((Xc,of)=>{"use strict";(function(e,t){typeof Xc=="object"&&typeof of=="object"?of.exports=t():typeof define=="function"&&define.amd?define([],t):typeof Xc=="object"?Xc.WebLinksAddon=t():e.WebLinksAddon=t()})(self,()=>(()=>{"use strict";var e={6:(s,i)=>{function o(c){try{let l=new URL(c),p=l.password&&l.username?`${l.protocol}//${l.username}:${l.password}@${l.host}`:l.username?`${l.protocol}//${l.username}@${l.host}`:`${l.protocol}//${l.host}`;return c.toLocaleLowerCase().startsWith(p.toLocaleLowerCase())}catch{return!1}}Object.defineProperty(i,"__esModule",{value:!0}),i.LinkComputer=i.WebLinkProvider=void 0,i.WebLinkProvider=class{constructor(c,l,p,m={}){this._terminal=c,this._regex=l,this._handler=p,this._options=m}provideLinks(c,l){let p=a.computeLink(c,this._regex,this._terminal,this._handler);l(this._addCallbacks(p))}_addCallbacks(c){return c.map(l=>(l.leave=this._options.leave,l.hover=(p,m)=>{if(this._options.hover){let{range:_}=l;this._options.hover(p,m,_)}},l))}};class a{static computeLink(l,p,m,_){let d=new RegExp(p.source,(p.flags||"")+"g"),[u,g]=a._getWindowedLineStrings(l-1,m),f=u.join(""),h,v=[];for(;h=d.exec(f);){let b=h[0];if(!o(b))continue;let[C,S]=a._mapStrIdx(m,g,0,h.index),[y,w]=a._mapStrIdx(m,C,S,b.length);if(C===-1||S===-1||y===-1||w===-1)continue;let E={start:{x:S+1,y:C+1},end:{x:w,y:y+1}};v.push({range:E,text:b,activate:_})}return v}static _getWindowedLineStrings(l,p){let m,_=l,d=l,u=0,g="",f=[];if(m=p.buffer.active.getLine(l)){let h=m.translateToString(!0);if(m.isWrapped&&h[0]!==" "){for(u=0;(m=p.buffer.active.getLine(--_))&&u<2048&&(g=m.translateToString(!0),u+=g.length,f.push(g),m.isWrapped&&g.indexOf(" ")===-1););f.reverse()}for(f.push(h),u=0;(m=p.buffer.active.getLine(++d))&&m.isWrapped&&u<2048&&(g=m.translateToString(!0),u+=g.length,f.push(g),g.indexOf(" ")===-1););}return[f,_]}static _mapStrIdx(l,p,m,_){let d=l.buffer.active,u=d.getNullCell(),g=m;for(;_;){let f=d.getLine(p);if(!f)return[-1,-1];for(let h=g;h<f.length;++h){f.getCell(h,u);let v=u.getChars();if(u.getWidth()&&(_-=v.length||1,h===f.length-1&&v==="")){let b=d.getLine(p+1);b&&b.isWrapped&&(b.getCell(0,u),u.getWidth()===2&&(_+=1))}if(_<0)return[p,h]}p++,g=0}return[p,g]}}i.LinkComputer=a}},t={};function n(s){var i=t[s];if(i!==void 0)return i.exports;var o=t[s]={exports:{}};return e[s](o,o.exports,n),o.exports}var r={};return(()=>{var s=r;Object.defineProperty(s,"__esModule",{value:!0}),s.WebLinksAddon=void 0;let i=n(6),o=/(https?|HTTPS?):[/]{2}[^\s"'!*(){}|\\\^<>`]*[^\s"':,.!?{}|\\\^~\[\]`()<>]/;function a(c,l){let p=window.open();if(p){try{p.opener=null}catch{}p.location.href=l}else console.warn("Opening link blocked as opener could not be cleared")}s.WebLinksAddon=class{constructor(c=a,l={}){this._handler=c,this._options=l}activate(c){this._terminal=c;let l=this._options,p=l.urlRegex||o;this._linkProvider=this._terminal.registerLinkProvider(new i.WebLinkProvider(this._terminal,p,this._handler,l))}dispose(){this._linkProvider?.dispose()}}})(),r})())});var Jv=uo((Qc,af)=>{"use strict";(function(e,t){typeof Qc=="object"&&typeof af=="object"?af.exports=t():typeof define=="function"&&define.amd?define([],t):typeof Qc=="object"?Qc.WebglAddon=t():e.WebglAddon=t()})(self,()=>(()=>{"use strict";var e={965:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.GlyphRenderer=void 0;let a=o(374),c=o(509),l=o(855),p=o(859),m=o(381),_=11,d=_*Float32Array.BYTES_PER_ELEMENT,u,g=0,f=0,h=0;class v extends p.Disposable{constructor(C,S,y,w){super(),this._terminal=C,this._gl=S,this._dimensions=y,this._optionsService=w,this._activeBuffer=0,this._vertices={count:0,attributes:new Float32Array(0),attributesBuffers:[new Float32Array(0),new Float32Array(0)]};let E=this._gl;c.TextureAtlas.maxAtlasPages===void 0&&(c.TextureAtlas.maxAtlasPages=Math.min(32,(0,a.throwIfFalsy)(E.getParameter(E.MAX_TEXTURE_IMAGE_UNITS))),c.TextureAtlas.maxTextureSize=(0,a.throwIfFalsy)(E.getParameter(E.MAX_TEXTURE_SIZE))),this._program=(0,a.throwIfFalsy)((0,m.createProgram)(E,`#version 300 es
layout (location = 0) in vec2 a_unitquad;
layout (location = 1) in vec2 a_cellpos;
layout (location = 2) in vec2 a_offset;
layout (location = 3) in vec2 a_size;
layout (location = 4) in float a_texpage;
layout (location = 5) in vec2 a_texcoord;
layout (location = 6) in vec2 a_texsize;

uniform mat4 u_projection;
uniform vec2 u_resolution;

out vec2 v_texcoord;
flat out int v_texpage;

void main() {
  vec2 zeroToOne = (a_offset / u_resolution) + a_cellpos + (a_unitquad * a_size);
  gl_Position = u_projection * vec4(zeroToOne, 0.0, 1.0);
  v_texpage = int(a_texpage);
  v_texcoord = a_texcoord + a_unitquad * a_texsize;
}`,(function(B){let F="";for(let N=1;N<B;N++)F+=` else if (v_texpage == ${N}) { outColor = texture(u_texture[${N}], v_texcoord); }`;return`#version 300 es
precision lowp float;

in vec2 v_texcoord;
flat in int v_texpage;

uniform sampler2D u_texture[${B}];

out vec4 outColor;

void main() {
  if (v_texpage == 0) {
    outColor = texture(u_texture[0], v_texcoord);
  } ${F}
}`})(c.TextureAtlas.maxAtlasPages))),this.register((0,p.toDisposable)(()=>E.deleteProgram(this._program))),this._projectionLocation=(0,a.throwIfFalsy)(E.getUniformLocation(this._program,"u_projection")),this._resolutionLocation=(0,a.throwIfFalsy)(E.getUniformLocation(this._program,"u_resolution")),this._textureLocation=(0,a.throwIfFalsy)(E.getUniformLocation(this._program,"u_texture")),this._vertexArrayObject=E.createVertexArray(),E.bindVertexArray(this._vertexArrayObject);let T=new Float32Array([0,0,1,0,0,1,1,1]),I=E.createBuffer();this.register((0,p.toDisposable)(()=>E.deleteBuffer(I))),E.bindBuffer(E.ARRAY_BUFFER,I),E.bufferData(E.ARRAY_BUFFER,T,E.STATIC_DRAW),E.enableVertexAttribArray(0),E.vertexAttribPointer(0,2,this._gl.FLOAT,!1,0,0);let M=new Uint8Array([0,1,2,3]),R=E.createBuffer();this.register((0,p.toDisposable)(()=>E.deleteBuffer(R))),E.bindBuffer(E.ELEMENT_ARRAY_BUFFER,R),E.bufferData(E.ELEMENT_ARRAY_BUFFER,M,E.STATIC_DRAW),this._attributesBuffer=(0,a.throwIfFalsy)(E.createBuffer()),this.register((0,p.toDisposable)(()=>E.deleteBuffer(this._attributesBuffer))),E.bindBuffer(E.ARRAY_BUFFER,this._attributesBuffer),E.enableVertexAttribArray(2),E.vertexAttribPointer(2,2,E.FLOAT,!1,d,0),E.vertexAttribDivisor(2,1),E.enableVertexAttribArray(3),E.vertexAttribPointer(3,2,E.FLOAT,!1,d,2*Float32Array.BYTES_PER_ELEMENT),E.vertexAttribDivisor(3,1),E.enableVertexAttribArray(4),E.vertexAttribPointer(4,1,E.FLOAT,!1,d,4*Float32Array.BYTES_PER_ELEMENT),E.vertexAttribDivisor(4,1),E.enableVertexAttribArray(5),E.vertexAttribPointer(5,2,E.FLOAT,!1,d,5*Float32Array.BYTES_PER_ELEMENT),E.vertexAttribDivisor(5,1),E.enableVertexAttribArray(6),E.vertexAttribPointer(6,2,E.FLOAT,!1,d,7*Float32Array.BYTES_PER_ELEMENT),E.vertexAttribDivisor(6,1),E.enableVertexAttribArray(1),E.vertexAttribPointer(1,2,E.FLOAT,!1,d,9*Float32Array.BYTES_PER_ELEMENT),E.vertexAttribDivisor(1,1),E.useProgram(this._program);let P=new Int32Array(c.TextureAtlas.maxAtlasPages);for(let B=0;B<c.TextureAtlas.maxAtlasPages;B++)P[B]=B;E.uniform1iv(this._textureLocation,P),E.uniformMatrix4fv(this._projectionLocation,!1,m.PROJECTION_MATRIX),this._atlasTextures=[];for(let B=0;B<c.TextureAtlas.maxAtlasPages;B++){let F=new m.GLTexture((0,a.throwIfFalsy)(E.createTexture()));this.register((0,p.toDisposable)(()=>E.deleteTexture(F.texture))),E.activeTexture(E.TEXTURE0+B),E.bindTexture(E.TEXTURE_2D,F.texture),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_S,E.CLAMP_TO_EDGE),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_T,E.CLAMP_TO_EDGE),E.texImage2D(E.TEXTURE_2D,0,E.RGBA,1,1,0,E.RGBA,E.UNSIGNED_BYTE,new Uint8Array([255,0,0,255])),this._atlasTextures[B]=F}E.enable(E.BLEND),E.blendFunc(E.SRC_ALPHA,E.ONE_MINUS_SRC_ALPHA),this.handleResize()}beginFrame(){return!this._atlas||this._atlas.beginFrame()}updateCell(C,S,y,w,E,T,I,M,R){this._updateCell(this._vertices.attributes,C,S,y,w,E,T,I,M,R)}_updateCell(C,S,y,w,E,T,I,M,R,P){g=(y*this._terminal.cols+S)*_,w!==l.NULL_CELL_CODE&&w!==void 0?this._atlas&&(u=M&&M.length>1?this._atlas.getRasterizedGlyphCombinedChar(M,E,T,I,!1):this._atlas.getRasterizedGlyph(w,E,T,I,!1),f=Math.floor((this._dimensions.device.cell.width-this._dimensions.device.char.width)/2),E!==P&&u.offset.x>f?(h=u.offset.x-f,C[g]=-(u.offset.x-h)+this._dimensions.device.char.left,C[g+1]=-u.offset.y+this._dimensions.device.char.top,C[g+2]=(u.size.x-h)/this._dimensions.device.canvas.width,C[g+3]=u.size.y/this._dimensions.device.canvas.height,C[g+4]=u.texturePage,C[g+5]=u.texturePositionClipSpace.x+h/this._atlas.pages[u.texturePage].canvas.width,C[g+6]=u.texturePositionClipSpace.y,C[g+7]=u.sizeClipSpace.x-h/this._atlas.pages[u.texturePage].canvas.width,C[g+8]=u.sizeClipSpace.y):(C[g]=-u.offset.x+this._dimensions.device.char.left,C[g+1]=-u.offset.y+this._dimensions.device.char.top,C[g+2]=u.size.x/this._dimensions.device.canvas.width,C[g+3]=u.size.y/this._dimensions.device.canvas.height,C[g+4]=u.texturePage,C[g+5]=u.texturePositionClipSpace.x,C[g+6]=u.texturePositionClipSpace.y,C[g+7]=u.sizeClipSpace.x,C[g+8]=u.sizeClipSpace.y),this._optionsService.rawOptions.rescaleOverlappingGlyphs&&(0,a.allowRescaling)(w,R,u.size.x,this._dimensions.device.cell.width)&&(C[g+2]=(this._dimensions.device.cell.width-1)/this._dimensions.device.canvas.width)):C.fill(0,g,g+_-1-2)}clear(){let C=this._terminal,S=C.cols*C.rows*_;this._vertices.count!==S?this._vertices.attributes=new Float32Array(S):this._vertices.attributes.fill(0);let y=0;for(;y<this._vertices.attributesBuffers.length;y++)this._vertices.count!==S?this._vertices.attributesBuffers[y]=new Float32Array(S):this._vertices.attributesBuffers[y].fill(0);this._vertices.count=S,y=0;for(let w=0;w<C.rows;w++)for(let E=0;E<C.cols;E++)this._vertices.attributes[y+9]=E/C.cols,this._vertices.attributes[y+10]=w/C.rows,y+=_}handleResize(){let C=this._gl;C.useProgram(this._program),C.viewport(0,0,C.canvas.width,C.canvas.height),C.uniform2f(this._resolutionLocation,C.canvas.width,C.canvas.height),this.clear()}render(C){if(!this._atlas)return;let S=this._gl;S.useProgram(this._program),S.bindVertexArray(this._vertexArrayObject),this._activeBuffer=(this._activeBuffer+1)%2;let y=this._vertices.attributesBuffers[this._activeBuffer],w=0;for(let E=0;E<C.lineLengths.length;E++){let T=E*this._terminal.cols*_,I=this._vertices.attributes.subarray(T,T+C.lineLengths[E]*_);y.set(I,w),w+=I.length}S.bindBuffer(S.ARRAY_BUFFER,this._attributesBuffer),S.bufferData(S.ARRAY_BUFFER,y.subarray(0,w),S.STREAM_DRAW);for(let E=0;E<this._atlas.pages.length;E++)this._atlas.pages[E].version!==this._atlasTextures[E].version&&this._bindAtlasPageTexture(S,this._atlas,E);S.drawElementsInstanced(S.TRIANGLE_STRIP,4,S.UNSIGNED_BYTE,0,w/_)}setAtlas(C){this._atlas=C;for(let S of this._atlasTextures)S.version=-1}_bindAtlasPageTexture(C,S,y){C.activeTexture(C.TEXTURE0+y),C.bindTexture(C.TEXTURE_2D,this._atlasTextures[y].texture),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_S,C.CLAMP_TO_EDGE),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_T,C.CLAMP_TO_EDGE),C.texImage2D(C.TEXTURE_2D,0,C.RGBA,C.RGBA,C.UNSIGNED_BYTE,S.pages[y].canvas),C.generateMipmap(C.TEXTURE_2D),this._atlasTextures[y].version=S.pages[y].version}setDimensions(C){this._dimensions=C}}i.GlyphRenderer=v},742:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.RectangleRenderer=void 0;let a=o(374),c=o(859),l=o(310),p=o(381),m=8*Float32Array.BYTES_PER_ELEMENT;class _{constructor(){this.attributes=new Float32Array(160),this.count=0}}let d=0,u=0,g=0,f=0,h=0,v=0,b=0;class C extends c.Disposable{constructor(y,w,E,T){super(),this._terminal=y,this._gl=w,this._dimensions=E,this._themeService=T,this._vertices=new _,this._verticesCursor=new _;let I=this._gl;this._program=(0,a.throwIfFalsy)((0,p.createProgram)(I,`#version 300 es
layout (location = 0) in vec2 a_position;
layout (location = 1) in vec2 a_size;
layout (location = 2) in vec4 a_color;
layout (location = 3) in vec2 a_unitquad;

uniform mat4 u_projection;

out vec4 v_color;

void main() {
  vec2 zeroToOne = a_position + (a_unitquad * a_size);
  gl_Position = u_projection * vec4(zeroToOne, 0.0, 1.0);
  v_color = a_color;
}`,`#version 300 es
precision lowp float;

in vec4 v_color;

out vec4 outColor;

void main() {
  outColor = v_color;
}`)),this.register((0,c.toDisposable)(()=>I.deleteProgram(this._program))),this._projectionLocation=(0,a.throwIfFalsy)(I.getUniformLocation(this._program,"u_projection")),this._vertexArrayObject=I.createVertexArray(),I.bindVertexArray(this._vertexArrayObject);let M=new Float32Array([0,0,1,0,0,1,1,1]),R=I.createBuffer();this.register((0,c.toDisposable)(()=>I.deleteBuffer(R))),I.bindBuffer(I.ARRAY_BUFFER,R),I.bufferData(I.ARRAY_BUFFER,M,I.STATIC_DRAW),I.enableVertexAttribArray(3),I.vertexAttribPointer(3,2,this._gl.FLOAT,!1,0,0);let P=new Uint8Array([0,1,2,3]),B=I.createBuffer();this.register((0,c.toDisposable)(()=>I.deleteBuffer(B))),I.bindBuffer(I.ELEMENT_ARRAY_BUFFER,B),I.bufferData(I.ELEMENT_ARRAY_BUFFER,P,I.STATIC_DRAW),this._attributesBuffer=(0,a.throwIfFalsy)(I.createBuffer()),this.register((0,c.toDisposable)(()=>I.deleteBuffer(this._attributesBuffer))),I.bindBuffer(I.ARRAY_BUFFER,this._attributesBuffer),I.enableVertexAttribArray(0),I.vertexAttribPointer(0,2,I.FLOAT,!1,m,0),I.vertexAttribDivisor(0,1),I.enableVertexAttribArray(1),I.vertexAttribPointer(1,2,I.FLOAT,!1,m,2*Float32Array.BYTES_PER_ELEMENT),I.vertexAttribDivisor(1,1),I.enableVertexAttribArray(2),I.vertexAttribPointer(2,4,I.FLOAT,!1,m,4*Float32Array.BYTES_PER_ELEMENT),I.vertexAttribDivisor(2,1),this._updateCachedColors(T.colors),this.register(this._themeService.onChangeColors(F=>{this._updateCachedColors(F),this._updateViewportRectangle()}))}renderBackgrounds(){this._renderVertices(this._vertices)}renderCursor(){this._renderVertices(this._verticesCursor)}_renderVertices(y){let w=this._gl;w.useProgram(this._program),w.bindVertexArray(this._vertexArrayObject),w.uniformMatrix4fv(this._projectionLocation,!1,p.PROJECTION_MATRIX),w.bindBuffer(w.ARRAY_BUFFER,this._attributesBuffer),w.bufferData(w.ARRAY_BUFFER,y.attributes,w.DYNAMIC_DRAW),w.drawElementsInstanced(this._gl.TRIANGLE_STRIP,4,w.UNSIGNED_BYTE,0,y.count)}handleResize(){this._updateViewportRectangle()}setDimensions(y){this._dimensions=y}_updateCachedColors(y){this._bgFloat=this._colorToFloat32Array(y.background),this._cursorFloat=this._colorToFloat32Array(y.cursor)}_updateViewportRectangle(){this._addRectangleFloat(this._vertices.attributes,0,0,0,this._terminal.cols*this._dimensions.device.cell.width,this._terminal.rows*this._dimensions.device.cell.height,this._bgFloat)}updateBackgrounds(y){let w=this._terminal,E=this._vertices,T,I,M,R,P,B,F,N,D,A,O,L=1;for(T=0;T<w.rows;T++){for(M=-1,R=0,P=0,B=!1,I=0;I<w.cols;I++)F=(T*w.cols+I)*l.RENDER_MODEL_INDICIES_PER_CELL,N=y.cells[F+l.RENDER_MODEL_BG_OFFSET],D=y.cells[F+l.RENDER_MODEL_FG_OFFSET],A=!!(67108864&D),(N!==R||D!==P&&(B||A))&&((R!==0||B&&P!==0)&&(O=8*L++,this._updateRectangle(E,O,P,R,M,I,T)),M=I,R=N,P=D,B=A);(R!==0||B&&P!==0)&&(O=8*L++,this._updateRectangle(E,O,P,R,M,w.cols,T))}E.count=L}updateCursor(y){let w=this._verticesCursor,E=y.cursor;if(!E||E.style==="block")return void(w.count=0);let T,I=0;E.style!=="bar"&&E.style!=="outline"||(T=8*I++,this._addRectangleFloat(w.attributes,T,E.x*this._dimensions.device.cell.width,E.y*this._dimensions.device.cell.height,E.style==="bar"?E.dpr*E.cursorWidth:E.dpr,this._dimensions.device.cell.height,this._cursorFloat)),E.style!=="underline"&&E.style!=="outline"||(T=8*I++,this._addRectangleFloat(w.attributes,T,E.x*this._dimensions.device.cell.width,(E.y+1)*this._dimensions.device.cell.height-E.dpr,E.width*this._dimensions.device.cell.width,E.dpr,this._cursorFloat)),E.style==="outline"&&(T=8*I++,this._addRectangleFloat(w.attributes,T,E.x*this._dimensions.device.cell.width,E.y*this._dimensions.device.cell.height,E.width*this._dimensions.device.cell.width,E.dpr,this._cursorFloat),T=8*I++,this._addRectangleFloat(w.attributes,T,(E.x+E.width)*this._dimensions.device.cell.width-E.dpr,E.y*this._dimensions.device.cell.height,E.dpr,this._dimensions.device.cell.height,this._cursorFloat)),w.count=I}_updateRectangle(y,w,E,T,I,M,R){if(67108864&E)switch(50331648&E){case 16777216:case 33554432:d=this._themeService.colors.ansi[255&E].rgba;break;case 50331648:d=(16777215&E)<<8;break;default:d=this._themeService.colors.foreground.rgba}else switch(50331648&T){case 16777216:case 33554432:d=this._themeService.colors.ansi[255&T].rgba;break;case 50331648:d=(16777215&T)<<8;break;default:d=this._themeService.colors.background.rgba}y.attributes.length<w+4&&(y.attributes=(0,p.expandFloat32Array)(y.attributes,this._terminal.rows*this._terminal.cols*8)),u=I*this._dimensions.device.cell.width,g=R*this._dimensions.device.cell.height,f=(d>>24&255)/255,h=(d>>16&255)/255,v=(d>>8&255)/255,b=1,this._addRectangle(y.attributes,w,u,g,(M-I)*this._dimensions.device.cell.width,this._dimensions.device.cell.height,f,h,v,b)}_addRectangle(y,w,E,T,I,M,R,P,B,F){y[w]=E/this._dimensions.device.canvas.width,y[w+1]=T/this._dimensions.device.canvas.height,y[w+2]=I/this._dimensions.device.canvas.width,y[w+3]=M/this._dimensions.device.canvas.height,y[w+4]=R,y[w+5]=P,y[w+6]=B,y[w+7]=F}_addRectangleFloat(y,w,E,T,I,M,R){y[w]=E/this._dimensions.device.canvas.width,y[w+1]=T/this._dimensions.device.canvas.height,y[w+2]=I/this._dimensions.device.canvas.width,y[w+3]=M/this._dimensions.device.canvas.height,y[w+4]=R[0],y[w+5]=R[1],y[w+6]=R[2],y[w+7]=R[3]}_colorToFloat32Array(y){return new Float32Array([(y.rgba>>24&255)/255,(y.rgba>>16&255)/255,(y.rgba>>8&255)/255,(255&y.rgba)/255])}}i.RectangleRenderer=C},310:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.RenderModel=i.COMBINED_CHAR_BIT_MASK=i.RENDER_MODEL_EXT_OFFSET=i.RENDER_MODEL_FG_OFFSET=i.RENDER_MODEL_BG_OFFSET=i.RENDER_MODEL_INDICIES_PER_CELL=void 0;let a=o(296);i.RENDER_MODEL_INDICIES_PER_CELL=4,i.RENDER_MODEL_BG_OFFSET=1,i.RENDER_MODEL_FG_OFFSET=2,i.RENDER_MODEL_EXT_OFFSET=3,i.COMBINED_CHAR_BIT_MASK=2147483648,i.RenderModel=class{constructor(){this.cells=new Uint32Array(0),this.lineLengths=new Uint32Array(0),this.selection=(0,a.createSelectionRenderModel)()}resize(c,l){let p=c*l*i.RENDER_MODEL_INDICIES_PER_CELL;p!==this.cells.length&&(this.cells=new Uint32Array(p),this.lineLengths=new Uint32Array(l))}clear(){this.cells.fill(0,0),this.lineLengths.fill(0,0)}}},666:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.JoinedCellData=i.WebglRenderer=void 0;let a=o(820),c=o(274),l=o(627),p=o(457),m=o(56),_=o(374),d=o(345),u=o(859),g=o(147),f=o(782),h=o(855),v=o(965),b=o(742),C=o(310),S=o(733);class y extends u.Disposable{constructor(I,M,R,P,B,F,N,D,A){super(),this._terminal=I,this._characterJoinerService=M,this._charSizeService=R,this._coreBrowserService=P,this._coreService=B,this._decorationService=F,this._optionsService=N,this._themeService=D,this._cursorBlinkStateManager=new u.MutableDisposable,this._charAtlasDisposable=this.register(new u.MutableDisposable),this._observerDisposable=this.register(new u.MutableDisposable),this._model=new C.RenderModel,this._workCell=new f.CellData,this._workCell2=new f.CellData,this._rectangleRenderer=this.register(new u.MutableDisposable),this._glyphRenderer=this.register(new u.MutableDisposable),this._onChangeTextureAtlas=this.register(new d.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new d.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=this.register(new d.EventEmitter),this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._onRequestRedraw=this.register(new d.EventEmitter),this.onRequestRedraw=this._onRequestRedraw.event,this._onContextLoss=this.register(new d.EventEmitter),this.onContextLoss=this._onContextLoss.event,this.register(this._themeService.onChangeColors(()=>this._handleColorChange())),this._cellColorResolver=new c.CellColorResolver(this._terminal,this._optionsService,this._model.selection,this._decorationService,this._coreBrowserService,this._themeService),this._core=this._terminal._core,this._renderLayers=[new S.LinkRenderLayer(this._core.screenElement,2,this._terminal,this._core.linkifier,this._coreBrowserService,N,this._themeService)],this.dimensions=(0,_.createRenderDimensions)(),this._devicePixelRatio=this._coreBrowserService.dpr,this._updateDimensions(),this._updateCursorBlink(),this.register(N.onOptionChange(()=>this._handleOptionsChanged())),this._canvas=this._coreBrowserService.mainDocument.createElement("canvas");let O={antialias:!1,depth:!1,preserveDrawingBuffer:A};if(this._gl=this._canvas.getContext("webgl2",O),!this._gl)throw new Error("WebGL2 not supported "+this._gl);this.register((0,a.addDisposableDomListener)(this._canvas,"webglcontextlost",L=>{console.log("webglcontextlost event received"),L.preventDefault(),this._contextRestorationTimeout=setTimeout(()=>{this._contextRestorationTimeout=void 0,console.warn("webgl context not restored; firing onContextLoss"),this._onContextLoss.fire(L)},3e3)})),this.register((0,a.addDisposableDomListener)(this._canvas,"webglcontextrestored",L=>{console.warn("webglcontextrestored event received"),clearTimeout(this._contextRestorationTimeout),this._contextRestorationTimeout=void 0,(0,l.removeTerminalFromCache)(this._terminal),this._initializeWebGLState(),this._requestRedrawViewport()})),this._observerDisposable.value=(0,m.observeDevicePixelDimensions)(this._canvas,this._coreBrowserService.window,(L,V)=>this._setCanvasDevicePixelDimensions(L,V)),this.register(this._coreBrowserService.onWindowChange(L=>{this._observerDisposable.value=(0,m.observeDevicePixelDimensions)(this._canvas,L,(V,$)=>this._setCanvasDevicePixelDimensions(V,$))})),this._core.screenElement.appendChild(this._canvas),[this._rectangleRenderer.value,this._glyphRenderer.value]=this._initializeWebGLState(),this._isAttached=this._coreBrowserService.window.document.body.contains(this._core.screenElement),this.register((0,u.toDisposable)(()=>{for(let L of this._renderLayers)L.dispose();this._canvas.parentElement?.removeChild(this._canvas),(0,l.removeTerminalFromCache)(this._terminal)}))}get textureAtlas(){return this._charAtlas?.pages[0].canvas}_handleColorChange(){this._refreshCharAtlas(),this._clearModel(!0)}handleDevicePixelRatioChange(){this._devicePixelRatio!==this._coreBrowserService.dpr&&(this._devicePixelRatio=this._coreBrowserService.dpr,this.handleResize(this._terminal.cols,this._terminal.rows))}handleResize(I,M){this._updateDimensions(),this._model.resize(this._terminal.cols,this._terminal.rows);for(let R of this._renderLayers)R.resize(this._terminal,this.dimensions);this._canvas.width=this.dimensions.device.canvas.width,this._canvas.height=this.dimensions.device.canvas.height,this._canvas.style.width=`${this.dimensions.css.canvas.width}px`,this._canvas.style.height=`${this.dimensions.css.canvas.height}px`,this._core.screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._core.screenElement.style.height=`${this.dimensions.css.canvas.height}px`,this._rectangleRenderer.value?.setDimensions(this.dimensions),this._rectangleRenderer.value?.handleResize(),this._glyphRenderer.value?.setDimensions(this.dimensions),this._glyphRenderer.value?.handleResize(),this._refreshCharAtlas(),this._clearModel(!1)}handleCharSizeChanged(){this.handleResize(this._terminal.cols,this._terminal.rows)}handleBlur(){for(let I of this._renderLayers)I.handleBlur(this._terminal);this._cursorBlinkStateManager.value?.pause(),this._requestRedrawViewport()}handleFocus(){for(let I of this._renderLayers)I.handleFocus(this._terminal);this._cursorBlinkStateManager.value?.resume(),this._requestRedrawViewport()}handleSelectionChanged(I,M,R){for(let P of this._renderLayers)P.handleSelectionChanged(this._terminal,I,M,R);this._model.selection.update(this._core,I,M,R),this._requestRedrawViewport()}handleCursorMove(){for(let I of this._renderLayers)I.handleCursorMove(this._terminal);this._cursorBlinkStateManager.value?.restartBlinkAnimation()}_handleOptionsChanged(){this._updateDimensions(),this._refreshCharAtlas(),this._updateCursorBlink()}_initializeWebGLState(){return this._rectangleRenderer.value=new b.RectangleRenderer(this._terminal,this._gl,this.dimensions,this._themeService),this._glyphRenderer.value=new v.GlyphRenderer(this._terminal,this._gl,this.dimensions,this._optionsService),this.handleCharSizeChanged(),[this._rectangleRenderer.value,this._glyphRenderer.value]}_refreshCharAtlas(){if(this.dimensions.device.char.width<=0&&this.dimensions.device.char.height<=0)return void(this._isAttached=!1);let I=(0,l.acquireTextureAtlas)(this._terminal,this._optionsService.rawOptions,this._themeService.colors,this.dimensions.device.cell.width,this.dimensions.device.cell.height,this.dimensions.device.char.width,this.dimensions.device.char.height,this._coreBrowserService.dpr);this._charAtlas!==I&&(this._onChangeTextureAtlas.fire(I.pages[0].canvas),this._charAtlasDisposable.value=(0,u.getDisposeArrayDisposable)([(0,d.forwardEvent)(I.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas),(0,d.forwardEvent)(I.onRemoveTextureAtlasCanvas,this._onRemoveTextureAtlasCanvas)])),this._charAtlas=I,this._charAtlas.warmUp(),this._glyphRenderer.value?.setAtlas(this._charAtlas)}_clearModel(I){this._model.clear(),I&&this._glyphRenderer.value?.clear()}clearTextureAtlas(){this._charAtlas?.clearTexture(),this._clearModel(!0),this._requestRedrawViewport()}clear(){this._clearModel(!0);for(let I of this._renderLayers)I.reset(this._terminal);this._cursorBlinkStateManager.value?.restartBlinkAnimation(),this._updateCursorBlink()}registerCharacterJoiner(I){return-1}deregisterCharacterJoiner(I){return!1}renderRows(I,M){if(!this._isAttached){if(!(this._coreBrowserService.window.document.body.contains(this._core.screenElement)&&this._charSizeService.width&&this._charSizeService.height))return;this._updateDimensions(),this._refreshCharAtlas(),this._isAttached=!0}for(let R of this._renderLayers)R.handleGridChanged(this._terminal,I,M);this._glyphRenderer.value&&this._rectangleRenderer.value&&(this._glyphRenderer.value.beginFrame()?(this._clearModel(!0),this._updateModel(0,this._terminal.rows-1)):this._updateModel(I,M),this._rectangleRenderer.value.renderBackgrounds(),this._glyphRenderer.value.render(this._model),this._cursorBlinkStateManager.value&&!this._cursorBlinkStateManager.value.isCursorVisible||this._rectangleRenderer.value.renderCursor())}_updateCursorBlink(){this._terminal.options.cursorBlink?this._cursorBlinkStateManager.value=new p.CursorBlinkStateManager(()=>{this._requestRedrawCursor()},this._coreBrowserService):this._cursorBlinkStateManager.clear(),this._requestRedrawCursor()}_updateModel(I,M){let R=this._core,P,B,F,N,D,A,O,L,V,$,J,X,k,x,j=this._workCell;I=E(I,R.rows-1,0),M=E(M,R.rows-1,0);let U=this._terminal.buffer.active.baseY+this._terminal.buffer.active.cursorY,Y=U-R.buffer.ydisp,G=Math.min(this._terminal.buffer.active.cursorX,R.cols-1),he=-1,ie=this._coreService.isCursorInitialized&&!this._coreService.isCursorHidden&&(!this._cursorBlinkStateManager.value||this._cursorBlinkStateManager.value.isCursorVisible);this._model.cursor=void 0;let De=!1;for(B=I;B<=M;B++)for(F=B+R.buffer.ydisp,N=R.buffer.lines.get(F),this._model.lineLengths[B]=0,D=this._characterJoinerService.getJoinedCharacters(F),k=0;k<R.cols;k++)if(P=this._cellColorResolver.result.bg,N.loadCell(k,j),k===0&&(P=this._cellColorResolver.result.bg),A=!1,O=k,D.length>0&&k===D[0][0]&&(A=!0,L=D.shift(),j=new w(j,N.translateToString(!0,L[0],L[1]),L[1]-L[0]),O=L[1]-1),V=j.getChars(),$=j.getCode(),X=(B*R.cols+k)*C.RENDER_MODEL_INDICIES_PER_CELL,this._cellColorResolver.resolve(j,k,F,this.dimensions.device.cell.width),ie&&F===U&&(k===G&&(this._model.cursor={x:G,y:Y,width:j.getWidth(),style:this._coreBrowserService.isFocused?R.options.cursorStyle||"block":R.options.cursorInactiveStyle,cursorWidth:R.options.cursorWidth,dpr:this._devicePixelRatio},he=G+j.getWidth()-1),k>=G&&k<=he&&(this._coreBrowserService.isFocused&&(R.options.cursorStyle||"block")==="block"||this._coreBrowserService.isFocused===!1&&R.options.cursorInactiveStyle==="block")&&(this._cellColorResolver.result.fg=50331648|this._themeService.colors.cursorAccent.rgba>>8&16777215,this._cellColorResolver.result.bg=50331648|this._themeService.colors.cursor.rgba>>8&16777215)),$!==h.NULL_CELL_CODE&&(this._model.lineLengths[B]=k+1),(this._model.cells[X]!==$||this._model.cells[X+C.RENDER_MODEL_BG_OFFSET]!==this._cellColorResolver.result.bg||this._model.cells[X+C.RENDER_MODEL_FG_OFFSET]!==this._cellColorResolver.result.fg||this._model.cells[X+C.RENDER_MODEL_EXT_OFFSET]!==this._cellColorResolver.result.ext)&&(De=!0,V.length>1&&($|=C.COMBINED_CHAR_BIT_MASK),this._model.cells[X]=$,this._model.cells[X+C.RENDER_MODEL_BG_OFFSET]=this._cellColorResolver.result.bg,this._model.cells[X+C.RENDER_MODEL_FG_OFFSET]=this._cellColorResolver.result.fg,this._model.cells[X+C.RENDER_MODEL_EXT_OFFSET]=this._cellColorResolver.result.ext,J=j.getWidth(),this._glyphRenderer.value.updateCell(k,B,$,this._cellColorResolver.result.bg,this._cellColorResolver.result.fg,this._cellColorResolver.result.ext,V,J,P),A))for(j=this._workCell,k++;k<O;k++)x=(B*R.cols+k)*C.RENDER_MODEL_INDICIES_PER_CELL,this._glyphRenderer.value.updateCell(k,B,h.NULL_CELL_CODE,0,0,0,h.NULL_CELL_CHAR,0,0),this._model.cells[x]=h.NULL_CELL_CODE,this._model.cells[x+C.RENDER_MODEL_BG_OFFSET]=this._cellColorResolver.result.bg,this._model.cells[x+C.RENDER_MODEL_FG_OFFSET]=this._cellColorResolver.result.fg,this._model.cells[x+C.RENDER_MODEL_EXT_OFFSET]=this._cellColorResolver.result.ext;De&&this._rectangleRenderer.value.updateBackgrounds(this._model),this._rectangleRenderer.value.updateCursor(this._model)}_updateDimensions(){this._charSizeService.width&&this._charSizeService.height&&(this.dimensions.device.char.width=Math.floor(this._charSizeService.width*this._devicePixelRatio),this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*this._devicePixelRatio),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.top=this._optionsService.rawOptions.lineHeight===1?0:Math.round((this.dimensions.device.cell.height-this.dimensions.device.char.height)/2),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.char.left=Math.floor(this._optionsService.rawOptions.letterSpacing/2),this.dimensions.device.canvas.height=this._terminal.rows*this.dimensions.device.cell.height,this.dimensions.device.canvas.width=this._terminal.cols*this.dimensions.device.cell.width,this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/this._devicePixelRatio),this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/this._devicePixelRatio),this.dimensions.css.cell.height=this.dimensions.device.cell.height/this._devicePixelRatio,this.dimensions.css.cell.width=this.dimensions.device.cell.width/this._devicePixelRatio)}_setCanvasDevicePixelDimensions(I,M){this._canvas.width===I&&this._canvas.height===M||(this._canvas.width=I,this._canvas.height=M,this._requestRedrawViewport())}_requestRedrawViewport(){this._onRequestRedraw.fire({start:0,end:this._terminal.rows-1})}_requestRedrawCursor(){let I=this._terminal.buffer.active.cursorY;this._onRequestRedraw.fire({start:I,end:I})}}i.WebglRenderer=y;class w extends g.AttributeData{constructor(I,M,R){super(),this.content=0,this.combinedData="",this.fg=I.fg,this.bg=I.bg,this.combinedData=M,this._width=R}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(I){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}function E(T,I,M=0){return Math.max(Math.min(T,I),M)}i.JoinedCellData=w},381:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.GLTexture=i.expandFloat32Array=i.createShader=i.createProgram=i.PROJECTION_MATRIX=void 0;let a=o(374);function c(l,p,m){let _=(0,a.throwIfFalsy)(l.createShader(p));if(l.shaderSource(_,m),l.compileShader(_),l.getShaderParameter(_,l.COMPILE_STATUS))return _;console.error(l.getShaderInfoLog(_)),l.deleteShader(_)}i.PROJECTION_MATRIX=new Float32Array([2,0,0,0,0,-2,0,0,0,0,1,0,-1,1,0,1]),i.createProgram=function(l,p,m){let _=(0,a.throwIfFalsy)(l.createProgram());if(l.attachShader(_,(0,a.throwIfFalsy)(c(l,l.VERTEX_SHADER,p))),l.attachShader(_,(0,a.throwIfFalsy)(c(l,l.FRAGMENT_SHADER,m))),l.linkProgram(_),l.getProgramParameter(_,l.LINK_STATUS))return _;console.error(l.getProgramInfoLog(_)),l.deleteProgram(_)},i.createShader=c,i.expandFloat32Array=function(l,p){let m=Math.min(2*l.length,p),_=new Float32Array(m);for(let d=0;d<l.length;d++)_[d]=l[d];return _},i.GLTexture=class{constructor(l){this.texture=l,this.version=-1}}},592:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BaseRenderLayer=void 0;let a=o(627),c=o(237),l=o(374),p=o(859);class m extends p.Disposable{constructor(d,u,g,f,h,v,b,C){super(),this._container=u,this._alpha=h,this._coreBrowserService=v,this._optionsService=b,this._themeService=C,this._deviceCharWidth=0,this._deviceCharHeight=0,this._deviceCellWidth=0,this._deviceCellHeight=0,this._deviceCharLeft=0,this._deviceCharTop=0,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add(`xterm-${g}-layer`),this._canvas.style.zIndex=f.toString(),this._initCanvas(),this._container.appendChild(this._canvas),this.register(this._themeService.onChangeColors(S=>{this._refreshCharAtlas(d,S),this.reset(d)})),this.register((0,p.toDisposable)(()=>{this._canvas.remove()}))}_initCanvas(){this._ctx=(0,l.throwIfFalsy)(this._canvas.getContext("2d",{alpha:this._alpha})),this._alpha||this._clearAll()}handleBlur(d){}handleFocus(d){}handleCursorMove(d){}handleGridChanged(d,u,g){}handleSelectionChanged(d,u,g,f=!1){}_setTransparency(d,u){if(u===this._alpha)return;let g=this._canvas;this._alpha=u,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,g),this._refreshCharAtlas(d,this._themeService.colors),this.handleGridChanged(d,0,d.rows-1)}_refreshCharAtlas(d,u){this._deviceCharWidth<=0&&this._deviceCharHeight<=0||(this._charAtlas=(0,a.acquireTextureAtlas)(d,this._optionsService.rawOptions,u,this._deviceCellWidth,this._deviceCellHeight,this._deviceCharWidth,this._deviceCharHeight,this._coreBrowserService.dpr),this._charAtlas.warmUp())}resize(d,u){this._deviceCellWidth=u.device.cell.width,this._deviceCellHeight=u.device.cell.height,this._deviceCharWidth=u.device.char.width,this._deviceCharHeight=u.device.char.height,this._deviceCharLeft=u.device.char.left,this._deviceCharTop=u.device.char.top,this._canvas.width=u.device.canvas.width,this._canvas.height=u.device.canvas.height,this._canvas.style.width=`${u.css.canvas.width}px`,this._canvas.style.height=`${u.css.canvas.height}px`,this._alpha||this._clearAll(),this._refreshCharAtlas(d,this._themeService.colors)}_fillBottomLineAtCells(d,u,g=1){this._ctx.fillRect(d*this._deviceCellWidth,(u+1)*this._deviceCellHeight-this._coreBrowserService.dpr-1,g*this._deviceCellWidth,this._coreBrowserService.dpr)}_clearAll(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))}_clearCells(d,u,g,f){this._alpha?this._ctx.clearRect(d*this._deviceCellWidth,u*this._deviceCellHeight,g*this._deviceCellWidth,f*this._deviceCellHeight):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(d*this._deviceCellWidth,u*this._deviceCellHeight,g*this._deviceCellWidth,f*this._deviceCellHeight))}_fillCharTrueColor(d,u,g,f){this._ctx.font=this._getFont(d,!1,!1),this._ctx.textBaseline=c.TEXT_BASELINE,this._clipCell(g,f,u.getWidth()),this._ctx.fillText(u.getChars(),g*this._deviceCellWidth+this._deviceCharLeft,f*this._deviceCellHeight+this._deviceCharTop+this._deviceCharHeight)}_clipCell(d,u,g){this._ctx.beginPath(),this._ctx.rect(d*this._deviceCellWidth,u*this._deviceCellHeight,g*this._deviceCellWidth,this._deviceCellHeight),this._ctx.clip()}_getFont(d,u,g){return`${g?"italic":""} ${u?d.options.fontWeightBold:d.options.fontWeight} ${d.options.fontSize*this._coreBrowserService.dpr}px ${d.options.fontFamily}`}}i.BaseRenderLayer=m},733:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.LinkRenderLayer=void 0;let a=o(197),c=o(237),l=o(592);class p extends l.BaseRenderLayer{constructor(_,d,u,g,f,h,v){super(u,_,"link",d,!0,f,h,v),this.register(g.onShowLinkUnderline(b=>this._handleShowLinkUnderline(b))),this.register(g.onHideLinkUnderline(b=>this._handleHideLinkUnderline(b)))}resize(_,d){super.resize(_,d),this._state=void 0}reset(_){this._clearCurrentLink()}_clearCurrentLink(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);let _=this._state.y2-this._state.y1-1;_>0&&this._clearCells(0,this._state.y1+1,this._state.cols,_),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}}_handleShowLinkUnderline(_){if(_.fg===c.INVERTED_DEFAULT_COLOR?this._ctx.fillStyle=this._themeService.colors.background.css:_.fg!==void 0&&(0,a.is256Color)(_.fg)?this._ctx.fillStyle=this._themeService.colors.ansi[_.fg].css:this._ctx.fillStyle=this._themeService.colors.foreground.css,_.y1===_.y2)this._fillBottomLineAtCells(_.x1,_.y1,_.x2-_.x1);else{this._fillBottomLineAtCells(_.x1,_.y1,_.cols-_.x1);for(let d=_.y1+1;d<_.y2;d++)this._fillBottomLineAtCells(0,d,_.cols);this._fillBottomLineAtCells(0,_.y2,_.x2)}this._state=_}_handleHideLinkUnderline(_){this._clearCurrentLink()}}i.LinkRenderLayer=p},820:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.addDisposableDomListener=void 0,i.addDisposableDomListener=function(o,a,c,l){o.addEventListener(a,c,l);let p=!1;return{dispose:()=>{p||(p=!0,o.removeEventListener(a,c,l))}}}},274:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CellColorResolver=void 0;let a=o(855),c=o(160),l=o(374),p,m=0,_=0,d=!1,u=!1,g=!1,f=0;i.CellColorResolver=class{constructor(h,v,b,C,S,y){this._terminal=h,this._optionService=v,this._selectionRenderModel=b,this._decorationService=C,this._coreBrowserService=S,this._themeService=y,this.result={fg:0,bg:0,ext:0}}resolve(h,v,b,C){if(this.result.bg=h.bg,this.result.fg=h.fg,this.result.ext=268435456&h.bg?h.extended.ext:0,_=0,m=0,u=!1,d=!1,g=!1,p=this._themeService.colors,f=0,h.getCode()!==a.NULL_CELL_CODE&&h.extended.underlineStyle===4){let S=Math.max(1,Math.floor(this._optionService.rawOptions.fontSize*this._coreBrowserService.dpr/15));f=v*C%(2*Math.round(S))}if(this._decorationService.forEachDecorationAtCell(v,b,"bottom",S=>{S.backgroundColorRGB&&(_=S.backgroundColorRGB.rgba>>8&16777215,u=!0),S.foregroundColorRGB&&(m=S.foregroundColorRGB.rgba>>8&16777215,d=!0)}),g=this._selectionRenderModel.isCellSelected(this._terminal,v,b),g){if(67108864&this.result.fg||(50331648&this.result.bg)!=0){if(67108864&this.result.fg)switch(50331648&this.result.fg){case 16777216:case 33554432:_=this._themeService.colors.ansi[255&this.result.fg].rgba;break;case 50331648:_=(16777215&this.result.fg)<<8|255;break;default:_=this._themeService.colors.foreground.rgba}else switch(50331648&this.result.bg){case 16777216:case 33554432:_=this._themeService.colors.ansi[255&this.result.bg].rgba;break;case 50331648:_=(16777215&this.result.bg)<<8|255}_=c.rgba.blend(_,4294967040&(this._coreBrowserService.isFocused?p.selectionBackgroundOpaque:p.selectionInactiveBackgroundOpaque).rgba|128)>>8&16777215}else _=(this._coreBrowserService.isFocused?p.selectionBackgroundOpaque:p.selectionInactiveBackgroundOpaque).rgba>>8&16777215;if(u=!0,p.selectionForeground&&(m=p.selectionForeground.rgba>>8&16777215,d=!0),(0,l.treatGlyphAsBackgroundColor)(h.getCode())){if(67108864&this.result.fg&&(50331648&this.result.bg)==0)m=(this._coreBrowserService.isFocused?p.selectionBackgroundOpaque:p.selectionInactiveBackgroundOpaque).rgba>>8&16777215;else{if(67108864&this.result.fg)switch(50331648&this.result.bg){case 16777216:case 33554432:m=this._themeService.colors.ansi[255&this.result.bg].rgba;break;case 50331648:m=(16777215&this.result.bg)<<8|255}else switch(50331648&this.result.fg){case 16777216:case 33554432:m=this._themeService.colors.ansi[255&this.result.fg].rgba;break;case 50331648:m=(16777215&this.result.fg)<<8|255;break;default:m=this._themeService.colors.foreground.rgba}m=c.rgba.blend(m,4294967040&(this._coreBrowserService.isFocused?p.selectionBackgroundOpaque:p.selectionInactiveBackgroundOpaque).rgba|128)>>8&16777215}d=!0}}this._decorationService.forEachDecorationAtCell(v,b,"top",S=>{S.backgroundColorRGB&&(_=S.backgroundColorRGB.rgba>>8&16777215,u=!0),S.foregroundColorRGB&&(m=S.foregroundColorRGB.rgba>>8&16777215,d=!0)}),u&&(_=g?-16777216&h.bg&-134217729|_|50331648:-16777216&h.bg|_|50331648),d&&(m=-16777216&h.fg&-67108865|m|50331648),67108864&this.result.fg&&(u&&!d&&(m=(50331648&this.result.bg)==0?-134217728&this.result.fg|16777215&p.background.rgba>>8|50331648:-134217728&this.result.fg|67108863&this.result.bg,d=!0),!u&&d&&(_=(50331648&this.result.fg)==0?-67108864&this.result.bg|16777215&p.foreground.rgba>>8|50331648:-67108864&this.result.bg|67108863&this.result.fg,u=!0)),p=void 0,this.result.bg=u?_:this.result.bg,this.result.fg=d?m:this.result.fg,this.result.ext&=536870911,this.result.ext|=f<<29&3758096384}}},627:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.removeTerminalFromCache=i.acquireTextureAtlas=void 0;let a=o(509),c=o(197),l=[];i.acquireTextureAtlas=function(p,m,_,d,u,g,f,h){let v=(0,c.generateConfig)(d,u,g,f,m,_,h);for(let S=0;S<l.length;S++){let y=l[S],w=y.ownedBy.indexOf(p);if(w>=0){if((0,c.configEquals)(y.config,v))return y.atlas;y.ownedBy.length===1?(y.atlas.dispose(),l.splice(S,1)):y.ownedBy.splice(w,1);break}}for(let S=0;S<l.length;S++){let y=l[S];if((0,c.configEquals)(y.config,v))return y.ownedBy.push(p),y.atlas}let b=p._core,C={atlas:new a.TextureAtlas(document,v,b.unicodeService),config:v,ownedBy:[p]};return l.push(C),C.atlas},i.removeTerminalFromCache=function(p){for(let m=0;m<l.length;m++){let _=l[m].ownedBy.indexOf(p);if(_!==-1){l[m].ownedBy.length===1?(l[m].atlas.dispose(),l.splice(m,1)):l[m].ownedBy.splice(_,1);break}}}},197:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.is256Color=i.configEquals=i.generateConfig=void 0;let a=o(160);i.generateConfig=function(c,l,p,m,_,d,u){let g={foreground:d.foreground,background:d.background,cursor:a.NULL_COLOR,cursorAccent:a.NULL_COLOR,selectionForeground:a.NULL_COLOR,selectionBackgroundTransparent:a.NULL_COLOR,selectionBackgroundOpaque:a.NULL_COLOR,selectionInactiveBackgroundTransparent:a.NULL_COLOR,selectionInactiveBackgroundOpaque:a.NULL_COLOR,ansi:d.ansi.slice(),contrastCache:d.contrastCache,halfContrastCache:d.halfContrastCache};return{customGlyphs:_.customGlyphs,devicePixelRatio:u,letterSpacing:_.letterSpacing,lineHeight:_.lineHeight,deviceCellWidth:c,deviceCellHeight:l,deviceCharWidth:p,deviceCharHeight:m,fontFamily:_.fontFamily,fontSize:_.fontSize,fontWeight:_.fontWeight,fontWeightBold:_.fontWeightBold,allowTransparency:_.allowTransparency,drawBoldTextInBrightColors:_.drawBoldTextInBrightColors,minimumContrastRatio:_.minimumContrastRatio,colors:g}},i.configEquals=function(c,l){for(let p=0;p<c.colors.ansi.length;p++)if(c.colors.ansi[p].rgba!==l.colors.ansi[p].rgba)return!1;return c.devicePixelRatio===l.devicePixelRatio&&c.customGlyphs===l.customGlyphs&&c.lineHeight===l.lineHeight&&c.letterSpacing===l.letterSpacing&&c.fontFamily===l.fontFamily&&c.fontSize===l.fontSize&&c.fontWeight===l.fontWeight&&c.fontWeightBold===l.fontWeightBold&&c.allowTransparency===l.allowTransparency&&c.deviceCharWidth===l.deviceCharWidth&&c.deviceCharHeight===l.deviceCharHeight&&c.drawBoldTextInBrightColors===l.drawBoldTextInBrightColors&&c.minimumContrastRatio===l.minimumContrastRatio&&c.colors.foreground.rgba===l.colors.foreground.rgba&&c.colors.background.rgba===l.colors.background.rgba},i.is256Color=function(c){return(50331648&c)==16777216||(50331648&c)==33554432}},237:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TEXT_BASELINE=i.DIM_OPACITY=i.INVERTED_DEFAULT_COLOR=void 0;let a=o(399);i.INVERTED_DEFAULT_COLOR=257,i.DIM_OPACITY=.5,i.TEXT_BASELINE=a.isFirefox||a.isLegacyEdge?"bottom":"ideographic"},457:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CursorBlinkStateManager=void 0,i.CursorBlinkStateManager=class{constructor(o,a){this._renderCallback=o,this._coreBrowserService=a,this.isCursorVisible=!0,this._coreBrowserService.isFocused&&this._restartInterval()}get isPaused(){return!(this._blinkStartTimeout||this._blinkInterval)}dispose(){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}restartBlinkAnimation(){this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0})))}_restartInterval(o=600){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout=this._coreBrowserService.window.setTimeout(()=>{if(this._animationTimeRestarted){let a=600-(Date.now()-this._animationTimeRestarted);if(this._animationTimeRestarted=void 0,a>0)return void this._restartInterval(a)}this.isCursorVisible=!1,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0}),this._blinkInterval=this._coreBrowserService.window.setInterval(()=>{if(this._animationTimeRestarted){let a=600-(Date.now()-this._animationTimeRestarted);return this._animationTimeRestarted=void 0,void this._restartInterval(a)}this.isCursorVisible=!this.isCursorVisible,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0})},600)},o)}pause(){this.isCursorVisible=!0,this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}resume(){this.pause(),this._animationTimeRestarted=void 0,this._restartInterval(),this.restartBlinkAnimation()}}},860:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.tryDrawCustomChar=i.powerlineDefinitions=i.boxDrawingDefinitions=i.blockElementDefinitions=void 0;let a=o(374);i.blockElementDefinitions={"\u2580":[{x:0,y:0,w:8,h:4}],"\u2581":[{x:0,y:7,w:8,h:1}],"\u2582":[{x:0,y:6,w:8,h:2}],"\u2583":[{x:0,y:5,w:8,h:3}],"\u2584":[{x:0,y:4,w:8,h:4}],"\u2585":[{x:0,y:3,w:8,h:5}],"\u2586":[{x:0,y:2,w:8,h:6}],"\u2587":[{x:0,y:1,w:8,h:7}],"\u2588":[{x:0,y:0,w:8,h:8}],"\u2589":[{x:0,y:0,w:7,h:8}],"\u258A":[{x:0,y:0,w:6,h:8}],"\u258B":[{x:0,y:0,w:5,h:8}],"\u258C":[{x:0,y:0,w:4,h:8}],"\u258D":[{x:0,y:0,w:3,h:8}],"\u258E":[{x:0,y:0,w:2,h:8}],"\u258F":[{x:0,y:0,w:1,h:8}],"\u2590":[{x:4,y:0,w:4,h:8}],"\u2594":[{x:0,y:0,w:8,h:1}],"\u2595":[{x:7,y:0,w:1,h:8}],"\u2596":[{x:0,y:4,w:4,h:4}],"\u2597":[{x:4,y:4,w:4,h:4}],"\u2598":[{x:0,y:0,w:4,h:4}],"\u2599":[{x:0,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"\u259A":[{x:0,y:0,w:4,h:4},{x:4,y:4,w:4,h:4}],"\u259B":[{x:0,y:0,w:4,h:8},{x:4,y:0,w:4,h:4}],"\u259C":[{x:0,y:0,w:8,h:4},{x:4,y:0,w:4,h:8}],"\u259D":[{x:4,y:0,w:4,h:4}],"\u259E":[{x:4,y:0,w:4,h:4},{x:0,y:4,w:4,h:4}],"\u259F":[{x:4,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"\u{1FB70}":[{x:1,y:0,w:1,h:8}],"\u{1FB71}":[{x:2,y:0,w:1,h:8}],"\u{1FB72}":[{x:3,y:0,w:1,h:8}],"\u{1FB73}":[{x:4,y:0,w:1,h:8}],"\u{1FB74}":[{x:5,y:0,w:1,h:8}],"\u{1FB75}":[{x:6,y:0,w:1,h:8}],"\u{1FB76}":[{x:0,y:1,w:8,h:1}],"\u{1FB77}":[{x:0,y:2,w:8,h:1}],"\u{1FB78}":[{x:0,y:3,w:8,h:1}],"\u{1FB79}":[{x:0,y:4,w:8,h:1}],"\u{1FB7A}":[{x:0,y:5,w:8,h:1}],"\u{1FB7B}":[{x:0,y:6,w:8,h:1}],"\u{1FB7C}":[{x:0,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"\u{1FB7D}":[{x:0,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"\u{1FB7E}":[{x:7,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"\u{1FB7F}":[{x:7,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"\u{1FB80}":[{x:0,y:0,w:8,h:1},{x:0,y:7,w:8,h:1}],"\u{1FB81}":[{x:0,y:0,w:8,h:1},{x:0,y:2,w:8,h:1},{x:0,y:4,w:8,h:1},{x:0,y:7,w:8,h:1}],"\u{1FB82}":[{x:0,y:0,w:8,h:2}],"\u{1FB83}":[{x:0,y:0,w:8,h:3}],"\u{1FB84}":[{x:0,y:0,w:8,h:5}],"\u{1FB85}":[{x:0,y:0,w:8,h:6}],"\u{1FB86}":[{x:0,y:0,w:8,h:7}],"\u{1FB87}":[{x:6,y:0,w:2,h:8}],"\u{1FB88}":[{x:5,y:0,w:3,h:8}],"\u{1FB89}":[{x:3,y:0,w:5,h:8}],"\u{1FB8A}":[{x:2,y:0,w:6,h:8}],"\u{1FB8B}":[{x:1,y:0,w:7,h:8}],"\u{1FB95}":[{x:0,y:0,w:2,h:2},{x:4,y:0,w:2,h:2},{x:2,y:2,w:2,h:2},{x:6,y:2,w:2,h:2},{x:0,y:4,w:2,h:2},{x:4,y:4,w:2,h:2},{x:2,y:6,w:2,h:2},{x:6,y:6,w:2,h:2}],"\u{1FB96}":[{x:2,y:0,w:2,h:2},{x:6,y:0,w:2,h:2},{x:0,y:2,w:2,h:2},{x:4,y:2,w:2,h:2},{x:2,y:4,w:2,h:2},{x:6,y:4,w:2,h:2},{x:0,y:6,w:2,h:2},{x:4,y:6,w:2,h:2}],"\u{1FB97}":[{x:0,y:2,w:8,h:2},{x:0,y:6,w:8,h:2}]};let c={"\u2591":[[1,0,0,0],[0,0,0,0],[0,0,1,0],[0,0,0,0]],"\u2592":[[1,0],[0,0],[0,1],[0,0]],"\u2593":[[0,1],[1,1],[1,0],[1,1]]};i.boxDrawingDefinitions={"\u2500":{1:"M0,.5 L1,.5"},"\u2501":{3:"M0,.5 L1,.5"},"\u2502":{1:"M.5,0 L.5,1"},"\u2503":{3:"M.5,0 L.5,1"},"\u250C":{1:"M0.5,1 L.5,.5 L1,.5"},"\u250F":{3:"M0.5,1 L.5,.5 L1,.5"},"\u2510":{1:"M0,.5 L.5,.5 L.5,1"},"\u2513":{3:"M0,.5 L.5,.5 L.5,1"},"\u2514":{1:"M.5,0 L.5,.5 L1,.5"},"\u2517":{3:"M.5,0 L.5,.5 L1,.5"},"\u2518":{1:"M.5,0 L.5,.5 L0,.5"},"\u251B":{3:"M.5,0 L.5,.5 L0,.5"},"\u251C":{1:"M.5,0 L.5,1 M.5,.5 L1,.5"},"\u2523":{3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"\u2524":{1:"M.5,0 L.5,1 M.5,.5 L0,.5"},"\u252B":{3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"\u252C":{1:"M0,.5 L1,.5 M.5,.5 L.5,1"},"\u2533":{3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"\u2534":{1:"M0,.5 L1,.5 M.5,.5 L.5,0"},"\u253B":{3:"M0,.5 L1,.5 M.5,.5 L.5,0"},"\u253C":{1:"M0,.5 L1,.5 M.5,0 L.5,1"},"\u254B":{3:"M0,.5 L1,.5 M.5,0 L.5,1"},"\u2574":{1:"M.5,.5 L0,.5"},"\u2578":{3:"M.5,.5 L0,.5"},"\u2575":{1:"M.5,.5 L.5,0"},"\u2579":{3:"M.5,.5 L.5,0"},"\u2576":{1:"M.5,.5 L1,.5"},"\u257A":{3:"M.5,.5 L1,.5"},"\u2577":{1:"M.5,.5 L.5,1"},"\u257B":{3:"M.5,.5 L.5,1"},"\u2550":{1:(d,u)=>`M0,${.5-u} L1,${.5-u} M0,${.5+u} L1,${.5+u}`},"\u2551":{1:(d,u)=>`M${.5-d},0 L${.5-d},1 M${.5+d},0 L${.5+d},1`},"\u2552":{1:(d,u)=>`M.5,1 L.5,${.5-u} L1,${.5-u} M.5,${.5+u} L1,${.5+u}`},"\u2553":{1:(d,u)=>`M${.5-d},1 L${.5-d},.5 L1,.5 M${.5+d},.5 L${.5+d},1`},"\u2554":{1:(d,u)=>`M1,${.5-u} L${.5-d},${.5-u} L${.5-d},1 M1,${.5+u} L${.5+d},${.5+u} L${.5+d},1`},"\u2555":{1:(d,u)=>`M0,${.5-u} L.5,${.5-u} L.5,1 M0,${.5+u} L.5,${.5+u}`},"\u2556":{1:(d,u)=>`M${.5+d},1 L${.5+d},.5 L0,.5 M${.5-d},.5 L${.5-d},1`},"\u2557":{1:(d,u)=>`M0,${.5+u} L${.5-d},${.5+u} L${.5-d},1 M0,${.5-u} L${.5+d},${.5-u} L${.5+d},1`},"\u2558":{1:(d,u)=>`M.5,0 L.5,${.5+u} L1,${.5+u} M.5,${.5-u} L1,${.5-u}`},"\u2559":{1:(d,u)=>`M1,.5 L${.5-d},.5 L${.5-d},0 M${.5+d},.5 L${.5+d},0`},"\u255A":{1:(d,u)=>`M1,${.5-u} L${.5+d},${.5-u} L${.5+d},0 M1,${.5+u} L${.5-d},${.5+u} L${.5-d},0`},"\u255B":{1:(d,u)=>`M0,${.5+u} L.5,${.5+u} L.5,0 M0,${.5-u} L.5,${.5-u}`},"\u255C":{1:(d,u)=>`M0,.5 L${.5+d},.5 L${.5+d},0 M${.5-d},.5 L${.5-d},0`},"\u255D":{1:(d,u)=>`M0,${.5-u} L${.5-d},${.5-u} L${.5-d},0 M0,${.5+u} L${.5+d},${.5+u} L${.5+d},0`},"\u255E":{1:(d,u)=>`M.5,0 L.5,1 M.5,${.5-u} L1,${.5-u} M.5,${.5+u} L1,${.5+u}`},"\u255F":{1:(d,u)=>`M${.5-d},0 L${.5-d},1 M${.5+d},0 L${.5+d},1 M${.5+d},.5 L1,.5`},"\u2560":{1:(d,u)=>`M${.5-d},0 L${.5-d},1 M1,${.5+u} L${.5+d},${.5+u} L${.5+d},1 M1,${.5-u} L${.5+d},${.5-u} L${.5+d},0`},"\u2561":{1:(d,u)=>`M.5,0 L.5,1 M0,${.5-u} L.5,${.5-u} M0,${.5+u} L.5,${.5+u}`},"\u2562":{1:(d,u)=>`M0,.5 L${.5-d},.5 M${.5-d},0 L${.5-d},1 M${.5+d},0 L${.5+d},1`},"\u2563":{1:(d,u)=>`M${.5+d},0 L${.5+d},1 M0,${.5+u} L${.5-d},${.5+u} L${.5-d},1 M0,${.5-u} L${.5-d},${.5-u} L${.5-d},0`},"\u2564":{1:(d,u)=>`M0,${.5-u} L1,${.5-u} M0,${.5+u} L1,${.5+u} M.5,${.5+u} L.5,1`},"\u2565":{1:(d,u)=>`M0,.5 L1,.5 M${.5-d},.5 L${.5-d},1 M${.5+d},.5 L${.5+d},1`},"\u2566":{1:(d,u)=>`M0,${.5-u} L1,${.5-u} M0,${.5+u} L${.5-d},${.5+u} L${.5-d},1 M1,${.5+u} L${.5+d},${.5+u} L${.5+d},1`},"\u2567":{1:(d,u)=>`M.5,0 L.5,${.5-u} M0,${.5-u} L1,${.5-u} M0,${.5+u} L1,${.5+u}`},"\u2568":{1:(d,u)=>`M0,.5 L1,.5 M${.5-d},.5 L${.5-d},0 M${.5+d},.5 L${.5+d},0`},"\u2569":{1:(d,u)=>`M0,${.5+u} L1,${.5+u} M0,${.5-u} L${.5-d},${.5-u} L${.5-d},0 M1,${.5-u} L${.5+d},${.5-u} L${.5+d},0`},"\u256A":{1:(d,u)=>`M.5,0 L.5,1 M0,${.5-u} L1,${.5-u} M0,${.5+u} L1,${.5+u}`},"\u256B":{1:(d,u)=>`M0,.5 L1,.5 M${.5-d},0 L${.5-d},1 M${.5+d},0 L${.5+d},1`},"\u256C":{1:(d,u)=>`M0,${.5+u} L${.5-d},${.5+u} L${.5-d},1 M1,${.5+u} L${.5+d},${.5+u} L${.5+d},1 M0,${.5-u} L${.5-d},${.5-u} L${.5-d},0 M1,${.5-u} L${.5+d},${.5-u} L${.5+d},0`},"\u2571":{1:"M1,0 L0,1"},"\u2572":{1:"M0,0 L1,1"},"\u2573":{1:"M1,0 L0,1 M0,0 L1,1"},"\u257C":{1:"M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"\u257D":{1:"M.5,.5 L.5,0",3:"M.5,.5 L.5,1"},"\u257E":{1:"M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"\u257F":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"\u250D":{1:"M.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"\u250E":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"\u2511":{1:"M.5,.5 L.5,1",3:"M.5,.5 L0,.5"},"\u2512":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"\u2515":{1:"M.5,.5 L.5,0",3:"M.5,.5 L1,.5"},"\u2516":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"\u2519":{1:"M.5,.5 L.5,0",3:"M.5,.5 L0,.5"},"\u251A":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,0"},"\u251D":{1:"M.5,0 L.5,1",3:"M.5,.5 L1,.5"},"\u251E":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"\u251F":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"\u2520":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1"},"\u2521":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"\u2522":{1:"M.5,.5 L.5,0",3:"M0.5,1 L.5,.5 L1,.5"},"\u2525":{1:"M.5,0 L.5,1",3:"M.5,.5 L0,.5"},"\u2526":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"\u2527":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"\u2528":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1"},"\u2529":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L0,.5"},"\u252A":{1:"M.5,.5 L.5,0",3:"M0,.5 L.5,.5 L.5,1"},"\u252D":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"\u252E":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"\u252F":{1:"M.5,.5 L.5,1",3:"M0,.5 L1,.5"},"\u2530":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"\u2531":{1:"M.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"\u2532":{1:"M.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"\u2535":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"\u2536":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"\u2537":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5"},"\u2538":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,0"},"\u2539":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"\u253A":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,.5 L1,.5"},"\u253D":{1:"M.5,0 L.5,1 M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"\u253E":{1:"M.5,0 L.5,1 M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"\u253F":{1:"M.5,0 L.5,1",3:"M0,.5 L1,.5"},"\u2540":{1:"M0,.5 L1,.5 M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"\u2541":{1:"M.5,.5 L.5,0 M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"\u2542":{1:"M0,.5 L1,.5",3:"M.5,0 L.5,1"},"\u2543":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"\u2544":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"\u2545":{1:"M.5,0 L.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"\u2546":{1:"M.5,0 L.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"\u2547":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0 M0,.5 L1,.5"},"\u2548":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"\u2549":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"\u254A":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"\u254C":{1:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"\u254D":{3:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"\u2504":{1:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"\u2505":{3:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"\u2508":{1:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"\u2509":{3:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"\u254E":{1:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"\u254F":{3:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"\u2506":{1:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"\u2507":{3:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"\u250A":{1:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"\u250B":{3:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"\u256D":{1:(d,u)=>`M.5,1 L.5,${.5+u/.15*.5} C.5,${.5+u/.15*.5},.5,.5,1,.5`},"\u256E":{1:(d,u)=>`M.5,1 L.5,${.5+u/.15*.5} C.5,${.5+u/.15*.5},.5,.5,0,.5`},"\u256F":{1:(d,u)=>`M.5,0 L.5,${.5-u/.15*.5} C.5,${.5-u/.15*.5},.5,.5,0,.5`},"\u2570":{1:(d,u)=>`M.5,0 L.5,${.5-u/.15*.5} C.5,${.5-u/.15*.5},.5,.5,1,.5`}},i.powerlineDefinitions={"\uE0B0":{d:"M0,0 L1,.5 L0,1",type:0,rightPadding:2},"\uE0B1":{d:"M-1,-.5 L1,.5 L-1,1.5",type:1,leftPadding:1,rightPadding:1},"\uE0B2":{d:"M1,0 L0,.5 L1,1",type:0,leftPadding:2},"\uE0B3":{d:"M2,-.5 L0,.5 L2,1.5",type:1,leftPadding:1,rightPadding:1},"\uE0B4":{d:"M0,0 L0,1 C0.552,1,1,0.776,1,.5 C1,0.224,0.552,0,0,0",type:0,rightPadding:1},"\uE0B5":{d:"M.2,1 C.422,1,.8,.826,.78,.5 C.8,.174,0.422,0,.2,0",type:1,rightPadding:1},"\uE0B6":{d:"M1,0 L1,1 C0.448,1,0,0.776,0,.5 C0,0.224,0.448,0,1,0",type:0,leftPadding:1},"\uE0B7":{d:"M.8,1 C0.578,1,0.2,.826,.22,.5 C0.2,0.174,0.578,0,0.8,0",type:1,leftPadding:1},"\uE0B8":{d:"M-.5,-.5 L1.5,1.5 L-.5,1.5",type:0},"\uE0B9":{d:"M-.5,-.5 L1.5,1.5",type:1,leftPadding:1,rightPadding:1},"\uE0BA":{d:"M1.5,-.5 L-.5,1.5 L1.5,1.5",type:0},"\uE0BC":{d:"M1.5,-.5 L-.5,1.5 L-.5,-.5",type:0},"\uE0BD":{d:"M1.5,-.5 L-.5,1.5",type:1,leftPadding:1,rightPadding:1},"\uE0BE":{d:"M-.5,-.5 L1.5,1.5 L1.5,-.5",type:0}},i.powerlineDefinitions["\uE0BB"]=i.powerlineDefinitions["\uE0BD"],i.powerlineDefinitions["\uE0BF"]=i.powerlineDefinitions["\uE0B9"],i.tryDrawCustomChar=function(d,u,g,f,h,v,b,C){let S=i.blockElementDefinitions[u];if(S)return(function(T,I,M,R,P,B){for(let F=0;F<I.length;F++){let N=I[F],D=P/8,A=B/8;T.fillRect(M+N.x*D,R+N.y*A,N.w*D,N.h*A)}})(d,S,g,f,h,v),!0;let y=c[u];if(y)return(function(T,I,M,R,P,B){let F=l.get(I);F||(F=new Map,l.set(I,F));let N=T.fillStyle;if(typeof N!="string")throw new Error(`Unexpected fillStyle type "${N}"`);let D=F.get(N);if(!D){let A=I[0].length,O=I.length,L=T.canvas.ownerDocument.createElement("canvas");L.width=A,L.height=O;let V=(0,a.throwIfFalsy)(L.getContext("2d")),$=new ImageData(A,O),J,X,k,x;if(N.startsWith("#"))J=parseInt(N.slice(1,3),16),X=parseInt(N.slice(3,5),16),k=parseInt(N.slice(5,7),16),x=N.length>7&&parseInt(N.slice(7,9),16)||1;else{if(!N.startsWith("rgba"))throw new Error(`Unexpected fillStyle color format "${N}" when drawing pattern glyph`);[J,X,k,x]=N.substring(5,N.length-1).split(",").map(j=>parseFloat(j))}for(let j=0;j<O;j++)for(let U=0;U<A;U++)$.data[4*(j*A+U)]=J,$.data[4*(j*A+U)+1]=X,$.data[4*(j*A+U)+2]=k,$.data[4*(j*A+U)+3]=I[j][U]*(255*x);V.putImageData($,0,0),D=(0,a.throwIfFalsy)(T.createPattern(L,null)),F.set(N,D)}T.fillStyle=D,T.fillRect(M,R,P,B)})(d,y,g,f,h,v),!0;let w=i.boxDrawingDefinitions[u];if(w)return(function(T,I,M,R,P,B,F){T.strokeStyle=T.fillStyle;for(let[N,D]of Object.entries(I)){let A;T.beginPath(),T.lineWidth=F*Number.parseInt(N),A=typeof D=="function"?D(.15,.15/B*P):D;for(let O of A.split(" ")){let L=O[0],V=m[L];if(!V){console.error(`Could not find drawing instructions for "${L}"`);continue}let $=O.substring(1).split(",");$[0]&&$[1]&&V(T,_($,P,B,M,R,!0,F))}T.stroke(),T.closePath()}})(d,w,g,f,h,v,C),!0;let E=i.powerlineDefinitions[u];return!!E&&((function(T,I,M,R,P,B,F,N){let D=new Path2D;D.rect(M,R,P,B),T.clip(D),T.beginPath();let A=F/12;T.lineWidth=N*A;for(let O of I.d.split(" ")){let L=O[0],V=m[L];if(!V){console.error(`Could not find drawing instructions for "${L}"`);continue}let $=O.substring(1).split(",");$[0]&&$[1]&&V(T,_($,P,B,M,R,!1,N,(I.leftPadding??0)*(A/2),(I.rightPadding??0)*(A/2)))}I.type===1?(T.strokeStyle=T.fillStyle,T.stroke()):T.fill(),T.closePath()})(d,E,g,f,h,v,b,C),!0)};let l=new Map;function p(d,u,g=0){return Math.max(Math.min(d,u),g)}let m={C:(d,u)=>d.bezierCurveTo(u[0],u[1],u[2],u[3],u[4],u[5]),L:(d,u)=>d.lineTo(u[0],u[1]),M:(d,u)=>d.moveTo(u[0],u[1])};function _(d,u,g,f,h,v,b,C=0,S=0){let y=d.map(w=>parseFloat(w)||parseInt(w));if(y.length<2)throw new Error("Too few arguments for instruction");for(let w=0;w<y.length;w+=2)y[w]*=u-C*b-S*b,v&&y[w]!==0&&(y[w]=p(Math.round(y[w]+.5)-.5,u,0)),y[w]+=f+C*b;for(let w=1;w<y.length;w+=2)y[w]*=g,v&&y[w]!==0&&(y[w]=p(Math.round(y[w]+.5)-.5,g,0)),y[w]+=h;return y}},56:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.observeDevicePixelDimensions=void 0;let a=o(859);i.observeDevicePixelDimensions=function(c,l,p){let m=new l.ResizeObserver(_=>{let d=_.find(f=>f.target===c);if(!d)return;if(!("devicePixelContentBoxSize"in d))return m?.disconnect(),void(m=void 0);let u=d.devicePixelContentBoxSize[0].inlineSize,g=d.devicePixelContentBoxSize[0].blockSize;u>0&&g>0&&p(u,g)});try{m.observe(c,{box:["device-pixel-content-box"]})}catch{m.disconnect(),m=void 0}return(0,a.toDisposable)(()=>m?.disconnect())}},374:(s,i)=>{function o(c){return 57508<=c&&c<=57558}function a(c){return c>=128512&&c<=128591||c>=127744&&c<=128511||c>=128640&&c<=128767||c>=9728&&c<=9983||c>=9984&&c<=10175||c>=65024&&c<=65039||c>=129280&&c<=129535||c>=127462&&c<=127487}Object.defineProperty(i,"__esModule",{value:!0}),i.computeNextVariantOffset=i.createRenderDimensions=i.treatGlyphAsBackgroundColor=i.allowRescaling=i.isEmoji=i.isRestrictedPowerlineGlyph=i.isPowerlineGlyph=i.throwIfFalsy=void 0,i.throwIfFalsy=function(c){if(!c)throw new Error("value must not be falsy");return c},i.isPowerlineGlyph=o,i.isRestrictedPowerlineGlyph=function(c){return 57520<=c&&c<=57527},i.isEmoji=a,i.allowRescaling=function(c,l,p,m){return l===1&&p>Math.ceil(1.5*m)&&c!==void 0&&c>255&&!a(c)&&!o(c)&&!(function(_){return 57344<=_&&_<=63743})(c)},i.treatGlyphAsBackgroundColor=function(c){return o(c)||(function(l){return 9472<=l&&l<=9631})(c)},i.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}},i.computeNextVariantOffset=function(c,l,p=0){return(c-(2*Math.round(l)-p))%(2*Math.round(l))}},296:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createSelectionRenderModel=void 0;class o{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(c,l,p,m=!1){if(this.selectionStart=l,this.selectionEnd=p,!l||!p||l[0]===p[0]&&l[1]===p[1])return void this.clear();let _=c.buffers.active.ydisp,d=l[1]-_,u=p[1]-_,g=Math.max(d,0),f=Math.min(u,c.rows-1);g>=c.rows||f<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=m,this.viewportStartRow=d,this.viewportEndRow=u,this.viewportCappedStartRow=g,this.viewportCappedEndRow=f,this.startCol=l[0],this.endCol=p[0])}isCellSelected(c,l,p){return!!this.hasSelection&&(p-=c.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?l>=this.startCol&&p>=this.viewportCappedStartRow&&l<this.endCol&&p<=this.viewportCappedEndRow:l<this.startCol&&p>=this.viewportCappedStartRow&&l>=this.endCol&&p<=this.viewportCappedEndRow:p>this.viewportStartRow&&p<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&p===this.viewportStartRow&&l>=this.startCol&&l<this.endCol||this.viewportStartRow<this.viewportEndRow&&p===this.viewportEndRow&&l<this.endCol||this.viewportStartRow<this.viewportEndRow&&p===this.viewportStartRow&&l>=this.startCol)}}i.createSelectionRenderModel=function(){return new o}},509:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TextureAtlas=void 0;let a=o(237),c=o(860),l=o(374),p=o(160),m=o(345),_=o(485),d=o(385),u=o(147),g=o(855),f={texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},offset:{x:0,y:0},size:{x:0,y:0},sizeClipSpace:{x:0,y:0}},h;class v{get pages(){return this._pages}constructor(w,E,T){this._document=w,this._config=E,this._unicodeService=T,this._didWarmUp=!1,this._cacheMap=new _.FourKeyMap,this._cacheMapCombined=new _.FourKeyMap,this._pages=[],this._activePages=[],this._workBoundingBox={top:0,left:0,bottom:0,right:0},this._workAttributeData=new u.AttributeData,this._textureSize=512,this._onAddTextureAtlasCanvas=new m.EventEmitter,this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=new m.EventEmitter,this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._requestClearModel=!1,this._createNewPage(),this._tmpCanvas=S(w,4*this._config.deviceCellWidth+4,this._config.deviceCellHeight+4),this._tmpCtx=(0,l.throwIfFalsy)(this._tmpCanvas.getContext("2d",{alpha:this._config.allowTransparency,willReadFrequently:!0}))}dispose(){for(let w of this.pages)w.canvas.remove();this._onAddTextureAtlasCanvas.dispose()}warmUp(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)}_doWarmUp(){let w=new d.IdleTaskQueue;for(let E=33;E<126;E++)w.enqueue(()=>{if(!this._cacheMap.get(E,g.DEFAULT_COLOR,g.DEFAULT_COLOR,g.DEFAULT_EXT)){let T=this._drawToCache(E,g.DEFAULT_COLOR,g.DEFAULT_COLOR,g.DEFAULT_EXT);this._cacheMap.set(E,g.DEFAULT_COLOR,g.DEFAULT_COLOR,g.DEFAULT_EXT,T)}})}beginFrame(){return this._requestClearModel}clearTexture(){if(this._pages[0].currentRow.x!==0||this._pages[0].currentRow.y!==0){for(let w of this._pages)w.clear();this._cacheMap.clear(),this._cacheMapCombined.clear(),this._didWarmUp=!1}}_createNewPage(){if(v.maxAtlasPages&&this._pages.length>=Math.max(4,v.maxAtlasPages)){let E=this._pages.filter(F=>2*F.canvas.width<=(v.maxTextureSize||4096)).sort((F,N)=>N.canvas.width!==F.canvas.width?N.canvas.width-F.canvas.width:N.percentageUsed-F.percentageUsed),T=-1,I=0;for(let F=0;F<E.length;F++)if(E[F].canvas.width!==I)T=F,I=E[F].canvas.width;else if(F-T==3)break;let M=E.slice(T,T+4),R=M.map(F=>F.glyphs[0].texturePage).sort((F,N)=>F>N?1:-1),P=this.pages.length-M.length,B=this._mergePages(M,P);B.version++;for(let F=R.length-1;F>=0;F--)this._deletePage(R[F]);this.pages.push(B),this._requestClearModel=!0,this._onAddTextureAtlasCanvas.fire(B.canvas)}let w=new b(this._document,this._textureSize);return this._pages.push(w),this._activePages.push(w),this._onAddTextureAtlasCanvas.fire(w.canvas),w}_mergePages(w,E){let T=2*w[0].canvas.width,I=new b(this._document,T,w);for(let[M,R]of w.entries()){let P=M*R.canvas.width%T,B=Math.floor(M/2)*R.canvas.height;I.ctx.drawImage(R.canvas,P,B);for(let N of R.glyphs)N.texturePage=E,N.sizeClipSpace.x=N.size.x/T,N.sizeClipSpace.y=N.size.y/T,N.texturePosition.x+=P,N.texturePosition.y+=B,N.texturePositionClipSpace.x=N.texturePosition.x/T,N.texturePositionClipSpace.y=N.texturePosition.y/T;this._onRemoveTextureAtlasCanvas.fire(R.canvas);let F=this._activePages.indexOf(R);F!==-1&&this._activePages.splice(F,1)}return I}_deletePage(w){this._pages.splice(w,1);for(let E=w;E<this._pages.length;E++){let T=this._pages[E];for(let I of T.glyphs)I.texturePage--;T.version++}}getRasterizedGlyphCombinedChar(w,E,T,I,M){return this._getFromCacheMap(this._cacheMapCombined,w,E,T,I,M)}getRasterizedGlyph(w,E,T,I,M){return this._getFromCacheMap(this._cacheMap,w,E,T,I,M)}_getFromCacheMap(w,E,T,I,M,R=!1){return h=w.get(E,T,I,M),h||(h=this._drawToCache(E,T,I,M,R),w.set(E,T,I,M,h)),h}_getColorFromAnsiIndex(w){if(w>=this._config.colors.ansi.length)throw new Error("No color found for idx "+w);return this._config.colors.ansi[w]}_getBackgroundColor(w,E,T,I){if(this._config.allowTransparency)return p.NULL_COLOR;let M;switch(w){case 16777216:case 33554432:M=this._getColorFromAnsiIndex(E);break;case 50331648:let R=u.AttributeData.toColorRGB(E);M=p.channels.toColor(R[0],R[1],R[2]);break;default:M=T?p.color.opaque(this._config.colors.foreground):this._config.colors.background}return M}_getForegroundColor(w,E,T,I,M,R,P,B,F,N){let D=this._getMinimumContrastColor(w,E,T,I,M,R,P,F,B,N);if(D)return D;let A;switch(M){case 16777216:case 33554432:this._config.drawBoldTextInBrightColors&&F&&R<8&&(R+=8),A=this._getColorFromAnsiIndex(R);break;case 50331648:let O=u.AttributeData.toColorRGB(R);A=p.channels.toColor(O[0],O[1],O[2]);break;default:A=P?this._config.colors.background:this._config.colors.foreground}return this._config.allowTransparency&&(A=p.color.opaque(A)),B&&(A=p.color.multiplyOpacity(A,a.DIM_OPACITY)),A}_resolveBackgroundRgba(w,E,T){switch(w){case 16777216:case 33554432:return this._getColorFromAnsiIndex(E).rgba;case 50331648:return E<<8;default:return T?this._config.colors.foreground.rgba:this._config.colors.background.rgba}}_resolveForegroundRgba(w,E,T,I){switch(w){case 16777216:case 33554432:return this._config.drawBoldTextInBrightColors&&I&&E<8&&(E+=8),this._getColorFromAnsiIndex(E).rgba;case 50331648:return E<<8;default:return T?this._config.colors.background.rgba:this._config.colors.foreground.rgba}}_getMinimumContrastColor(w,E,T,I,M,R,P,B,F,N){if(this._config.minimumContrastRatio===1||N)return;let D=this._getContrastCache(F),A=D.getColor(w,I);if(A!==void 0)return A||void 0;let O=this._resolveBackgroundRgba(E,T,P),L=this._resolveForegroundRgba(M,R,P,B),V=p.rgba.ensureContrastRatio(O,L,this._config.minimumContrastRatio/(F?2:1));if(!V)return void D.setColor(w,I,null);let $=p.channels.toColor(V>>24&255,V>>16&255,V>>8&255);return D.setColor(w,I,$),$}_getContrastCache(w){return w?this._config.colors.halfContrastCache:this._config.colors.contrastCache}_drawToCache(w,E,T,I,M=!1){let R=typeof w=="number"?String.fromCharCode(w):w,P=Math.min(this._config.deviceCellWidth*Math.max(R.length,2)+4,this._textureSize);this._tmpCanvas.width<P&&(this._tmpCanvas.width=P);let B=Math.min(this._config.deviceCellHeight+8,this._textureSize);if(this._tmpCanvas.height<B&&(this._tmpCanvas.height=B),this._tmpCtx.save(),this._workAttributeData.fg=T,this._workAttributeData.bg=E,this._workAttributeData.extended.ext=I,this._workAttributeData.isInvisible())return f;let F=!!this._workAttributeData.isBold(),N=!!this._workAttributeData.isInverse(),D=!!this._workAttributeData.isDim(),A=!!this._workAttributeData.isItalic(),O=!!this._workAttributeData.isUnderline(),L=!!this._workAttributeData.isStrikethrough(),V=!!this._workAttributeData.isOverline(),$=this._workAttributeData.getFgColor(),J=this._workAttributeData.getFgColorMode(),X=this._workAttributeData.getBgColor(),k=this._workAttributeData.getBgColorMode();if(N){let Q=$;$=X,X=Q;let Se=J;J=k,k=Se}let x=this._getBackgroundColor(k,X,N,D);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=x.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.globalCompositeOperation="source-over";let j=F?this._config.fontWeightBold:this._config.fontWeight,U=A?"italic":"";this._tmpCtx.font=`${U} ${j} ${this._config.fontSize*this._config.devicePixelRatio}px ${this._config.fontFamily}`,this._tmpCtx.textBaseline=a.TEXT_BASELINE;let Y=R.length===1&&(0,l.isPowerlineGlyph)(R.charCodeAt(0)),G=R.length===1&&(0,l.isRestrictedPowerlineGlyph)(R.charCodeAt(0)),he=this._getForegroundColor(E,k,X,T,J,$,N,D,F,(0,l.treatGlyphAsBackgroundColor)(R.charCodeAt(0)));this._tmpCtx.fillStyle=he.css;let ie=G?0:4,De=!1;this._config.customGlyphs!==!1&&(De=(0,c.tryDrawCustomChar)(this._tmpCtx,R,ie,ie,this._config.deviceCellWidth,this._config.deviceCellHeight,this._config.fontSize,this._config.devicePixelRatio));let We,se=!Y;if(We=typeof w=="number"?this._unicodeService.wcwidth(w):this._unicodeService.getStringCellWidth(w),O){this._tmpCtx.save();let Q=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/15)),Se=Q%2==1?.5:0;if(this._tmpCtx.lineWidth=Q,this._workAttributeData.isUnderlineColorDefault())this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle;else if(this._workAttributeData.isUnderlineColorRGB())se=!1,this._tmpCtx.strokeStyle=`rgb(${u.AttributeData.toColorRGB(this._workAttributeData.getUnderlineColor()).join(",")})`;else{se=!1;let ze=this._workAttributeData.getUnderlineColor();this._config.drawBoldTextInBrightColors&&this._workAttributeData.isBold()&&ze<8&&(ze+=8),this._tmpCtx.strokeStyle=this._getColorFromAnsiIndex(ze).css}this._tmpCtx.beginPath();let Be=ie,Le=Math.ceil(ie+this._config.deviceCharHeight)-Se-(M?2*Q:0),cn=Le+Q,mt=Le+2*Q,xt=this._workAttributeData.getUnderlineVariantOffset();for(let ze=0;ze<We;ze++){this._tmpCtx.save();let xe=Be+ze*this._config.deviceCellWidth,me=Be+(ze+1)*this._config.deviceCellWidth,Wi=xe+this._config.deviceCellWidth/2;switch(this._workAttributeData.extended.underlineStyle){case 2:this._tmpCtx.moveTo(xe,Le),this._tmpCtx.lineTo(me,Le),this._tmpCtx.moveTo(xe,mt),this._tmpCtx.lineTo(me,mt);break;case 3:let ao=Q<=1?mt:Math.ceil(ie+this._config.deviceCharHeight-Q/2)-Se,co=Q<=1?Le:Math.ceil(ie+this._config.deviceCharHeight+Q/2)-Se,cf=new Path2D;cf.rect(xe,Le,this._config.deviceCellWidth,mt-Le),this._tmpCtx.clip(cf),this._tmpCtx.moveTo(xe-this._config.deviceCellWidth/2,cn),this._tmpCtx.bezierCurveTo(xe-this._config.deviceCellWidth/2,co,xe,co,xe,cn),this._tmpCtx.bezierCurveTo(xe,ao,Wi,ao,Wi,cn),this._tmpCtx.bezierCurveTo(Wi,co,me,co,me,cn),this._tmpCtx.bezierCurveTo(me,ao,me+this._config.deviceCellWidth/2,ao,me+this._config.deviceCellWidth/2,cn);break;case 4:let lo=xt===0?0:xt>=Q?2*Q-xt:Q-xt;xt>=Q||lo===0?(this._tmpCtx.setLineDash([Math.round(Q),Math.round(Q)]),this._tmpCtx.moveTo(xe+lo,Le),this._tmpCtx.lineTo(me,Le)):(this._tmpCtx.setLineDash([Math.round(Q),Math.round(Q)]),this._tmpCtx.moveTo(xe,Le),this._tmpCtx.lineTo(xe+lo,Le),this._tmpCtx.moveTo(xe+lo+Q,Le),this._tmpCtx.lineTo(me,Le)),xt=(0,l.computeNextVariantOffset)(me-xe,Q,xt);break;case 5:let sy=.6,oy=.3,tl=me-xe,lf=Math.floor(sy*tl),uf=Math.floor(oy*tl),ay=tl-lf-uf;this._tmpCtx.setLineDash([lf,uf,ay]),this._tmpCtx.moveTo(xe,Le),this._tmpCtx.lineTo(me,Le);break;default:this._tmpCtx.moveTo(xe,Le),this._tmpCtx.lineTo(me,Le)}this._tmpCtx.stroke(),this._tmpCtx.restore()}if(this._tmpCtx.restore(),!De&&this._config.fontSize>=12&&!this._config.allowTransparency&&R!==" "){this._tmpCtx.save(),this._tmpCtx.textBaseline="alphabetic";let ze=this._tmpCtx.measureText(R);if(this._tmpCtx.restore(),"actualBoundingBoxDescent"in ze&&ze.actualBoundingBoxDescent>0){this._tmpCtx.save();let xe=new Path2D;xe.rect(Be,Le-Math.ceil(Q/2),this._config.deviceCellWidth*We,mt-Le+Math.ceil(Q/2)),this._tmpCtx.clip(xe),this._tmpCtx.lineWidth=3*this._config.devicePixelRatio,this._tmpCtx.strokeStyle=x.css,this._tmpCtx.strokeText(R,ie,ie+this._config.deviceCharHeight),this._tmpCtx.restore()}}}if(V){let Q=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/15)),Se=Q%2==1?.5:0;this._tmpCtx.lineWidth=Q,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),this._tmpCtx.moveTo(ie,ie+Se),this._tmpCtx.lineTo(ie+this._config.deviceCharWidth*We,ie+Se),this._tmpCtx.stroke()}if(De||this._tmpCtx.fillText(R,ie,ie+this._config.deviceCharHeight),R==="_"&&!this._config.allowTransparency){let Q=C(this._tmpCtx.getImageData(ie,ie,this._config.deviceCellWidth,this._config.deviceCellHeight),x,he,se);if(Q)for(let Se=1;Se<=5&&(this._tmpCtx.save(),this._tmpCtx.fillStyle=x.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.restore(),this._tmpCtx.fillText(R,ie,ie+this._config.deviceCharHeight-Se),Q=C(this._tmpCtx.getImageData(ie,ie,this._config.deviceCellWidth,this._config.deviceCellHeight),x,he,se),Q);Se++);}if(L){let Q=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/10)),Se=this._tmpCtx.lineWidth%2==1?.5:0;this._tmpCtx.lineWidth=Q,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),this._tmpCtx.moveTo(ie,ie+Math.floor(this._config.deviceCharHeight/2)-Se),this._tmpCtx.lineTo(ie+this._config.deviceCharWidth*We,ie+Math.floor(this._config.deviceCharHeight/2)-Se),this._tmpCtx.stroke()}this._tmpCtx.restore();let Zt=this._tmpCtx.getImageData(0,0,this._tmpCanvas.width,this._tmpCanvas.height),Rr;if(Rr=this._config.allowTransparency?(function(Q){for(let Se=0;Se<Q.data.length;Se+=4)if(Q.data[Se+3]>0)return!1;return!0})(Zt):C(Zt,x,he,se),Rr)return f;let Ee=this._findGlyphBoundingBox(Zt,this._workBoundingBox,P,G,De,ie),_e,ve;for(;;){if(this._activePages.length===0){let Q=this._createNewPage();_e=Q,ve=Q.currentRow,ve.height=Ee.size.y;break}_e=this._activePages[this._activePages.length-1],ve=_e.currentRow;for(let Q of this._activePages)Ee.size.y<=Q.currentRow.height&&(_e=Q,ve=Q.currentRow);for(let Q=this._activePages.length-1;Q>=0;Q--)for(let Se of this._activePages[Q].fixedRows)Se.height<=ve.height&&Ee.size.y<=Se.height&&(_e=this._activePages[Q],ve=Se);if(ve.y+Ee.size.y>=_e.canvas.height||ve.height>Ee.size.y+2){let Q=!1;if(_e.currentRow.y+_e.currentRow.height+Ee.size.y>=_e.canvas.height){let Se;for(let Be of this._activePages)if(Be.currentRow.y+Be.currentRow.height+Ee.size.y<Be.canvas.height){Se=Be;break}if(Se)_e=Se;else if(v.maxAtlasPages&&this._pages.length>=v.maxAtlasPages&&ve.y+Ee.size.y<=_e.canvas.height&&ve.height>=Ee.size.y&&ve.x+Ee.size.x<=_e.canvas.width)Q=!0;else{let Be=this._createNewPage();_e=Be,ve=Be.currentRow,ve.height=Ee.size.y,Q=!0}}Q||(_e.currentRow.height>0&&_e.fixedRows.push(_e.currentRow),ve={x:0,y:_e.currentRow.y+_e.currentRow.height,height:Ee.size.y},_e.fixedRows.push(ve),_e.currentRow={x:0,y:ve.y+ve.height,height:0})}if(ve.x+Ee.size.x<=_e.canvas.width)break;ve===_e.currentRow?(ve.x=0,ve.y+=ve.height,ve.height=0):_e.fixedRows.splice(_e.fixedRows.indexOf(ve),1)}return Ee.texturePage=this._pages.indexOf(_e),Ee.texturePosition.x=ve.x,Ee.texturePosition.y=ve.y,Ee.texturePositionClipSpace.x=ve.x/_e.canvas.width,Ee.texturePositionClipSpace.y=ve.y/_e.canvas.height,Ee.sizeClipSpace.x/=_e.canvas.width,Ee.sizeClipSpace.y/=_e.canvas.height,ve.height=Math.max(ve.height,Ee.size.y),ve.x+=Ee.size.x,_e.ctx.putImageData(Zt,Ee.texturePosition.x-this._workBoundingBox.left,Ee.texturePosition.y-this._workBoundingBox.top,this._workBoundingBox.left,this._workBoundingBox.top,Ee.size.x,Ee.size.y),_e.addGlyph(Ee),_e.version++,Ee}_findGlyphBoundingBox(w,E,T,I,M,R){E.top=0;let P=I?this._config.deviceCellHeight:this._tmpCanvas.height,B=I?this._config.deviceCellWidth:T,F=!1;for(let N=0;N<P;N++){for(let D=0;D<B;D++){let A=N*this._tmpCanvas.width*4+4*D+3;if(w.data[A]!==0){E.top=N,F=!0;break}}if(F)break}E.left=0,F=!1;for(let N=0;N<R+B;N++){for(let D=0;D<P;D++){let A=D*this._tmpCanvas.width*4+4*N+3;if(w.data[A]!==0){E.left=N,F=!0;break}}if(F)break}E.right=B,F=!1;for(let N=R+B-1;N>=R;N--){for(let D=0;D<P;D++){let A=D*this._tmpCanvas.width*4+4*N+3;if(w.data[A]!==0){E.right=N,F=!0;break}}if(F)break}E.bottom=P,F=!1;for(let N=P-1;N>=0;N--){for(let D=0;D<B;D++){let A=N*this._tmpCanvas.width*4+4*D+3;if(w.data[A]!==0){E.bottom=N,F=!0;break}}if(F)break}return{texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},size:{x:E.right-E.left+1,y:E.bottom-E.top+1},sizeClipSpace:{x:E.right-E.left+1,y:E.bottom-E.top+1},offset:{x:-E.left+R+(I||M?Math.floor((this._config.deviceCellWidth-this._config.deviceCharWidth)/2):0),y:-E.top+R+(I||M?this._config.lineHeight===1?0:Math.round((this._config.deviceCellHeight-this._config.deviceCharHeight)/2):0)}}}}i.TextureAtlas=v;class b{get percentageUsed(){return this._usedPixels/(this.canvas.width*this.canvas.height)}get glyphs(){return this._glyphs}addGlyph(w){this._glyphs.push(w),this._usedPixels+=w.size.x*w.size.y}constructor(w,E,T){if(this._usedPixels=0,this._glyphs=[],this.version=0,this.currentRow={x:0,y:0,height:0},this.fixedRows=[],T)for(let I of T)this._glyphs.push(...I.glyphs),this._usedPixels+=I._usedPixels;this.canvas=S(w,E,E),this.ctx=(0,l.throwIfFalsy)(this.canvas.getContext("2d",{alpha:!0}))}clear(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.currentRow.x=0,this.currentRow.y=0,this.currentRow.height=0,this.fixedRows.length=0,this.version++}}function C(y,w,E,T){let I=w.rgba>>>24,M=w.rgba>>>16&255,R=w.rgba>>>8&255,P=E.rgba>>>24,B=E.rgba>>>16&255,F=E.rgba>>>8&255,N=Math.floor((Math.abs(I-P)+Math.abs(M-B)+Math.abs(R-F))/12),D=!0;for(let A=0;A<y.data.length;A+=4)y.data[A]===I&&y.data[A+1]===M&&y.data[A+2]===R||T&&Math.abs(y.data[A]-I)+Math.abs(y.data[A+1]-M)+Math.abs(y.data[A+2]-R)<N?y.data[A+3]=0:D=!1;return D}function S(y,w,E){let T=y.createElement("canvas");return T.width=w,T.height=E,T}},160:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.contrastRatio=i.toPaddedHex=i.rgba=i.rgb=i.css=i.color=i.channels=i.NULL_COLOR=void 0;let o=0,a=0,c=0,l=0;var p,m,_,d,u;function g(h){let v=h.toString(16);return v.length<2?"0"+v:v}function f(h,v){return h<v?(v+.05)/(h+.05):(h+.05)/(v+.05)}i.NULL_COLOR={css:"#00000000",rgba:0},(function(h){h.toCss=function(v,b,C,S){return S!==void 0?`#${g(v)}${g(b)}${g(C)}${g(S)}`:`#${g(v)}${g(b)}${g(C)}`},h.toRgba=function(v,b,C,S=255){return(v<<24|b<<16|C<<8|S)>>>0},h.toColor=function(v,b,C,S){return{css:h.toCss(v,b,C,S),rgba:h.toRgba(v,b,C,S)}}})(p||(i.channels=p={})),(function(h){function v(b,C){return l=Math.round(255*C),[o,a,c]=u.toChannels(b.rgba),{css:p.toCss(o,a,c,l),rgba:p.toRgba(o,a,c,l)}}h.blend=function(b,C){if(l=(255&C.rgba)/255,l===1)return{css:C.css,rgba:C.rgba};let S=C.rgba>>24&255,y=C.rgba>>16&255,w=C.rgba>>8&255,E=b.rgba>>24&255,T=b.rgba>>16&255,I=b.rgba>>8&255;return o=E+Math.round((S-E)*l),a=T+Math.round((y-T)*l),c=I+Math.round((w-I)*l),{css:p.toCss(o,a,c),rgba:p.toRgba(o,a,c)}},h.isOpaque=function(b){return(255&b.rgba)==255},h.ensureContrastRatio=function(b,C,S){let y=u.ensureContrastRatio(b.rgba,C.rgba,S);if(y)return p.toColor(y>>24&255,y>>16&255,y>>8&255)},h.opaque=function(b){let C=(255|b.rgba)>>>0;return[o,a,c]=u.toChannels(C),{css:p.toCss(o,a,c),rgba:C}},h.opacity=v,h.multiplyOpacity=function(b,C){return l=255&b.rgba,v(b,l*C/255)},h.toColorRGB=function(b){return[b.rgba>>24&255,b.rgba>>16&255,b.rgba>>8&255]}})(m||(i.color=m={})),(function(h){let v,b;try{let C=document.createElement("canvas");C.width=1,C.height=1;let S=C.getContext("2d",{willReadFrequently:!0});S&&(v=S,v.globalCompositeOperation="copy",b=v.createLinearGradient(0,0,1,1))}catch{}h.toColor=function(C){if(C.match(/#[\da-f]{3,8}/i))switch(C.length){case 4:return o=parseInt(C.slice(1,2).repeat(2),16),a=parseInt(C.slice(2,3).repeat(2),16),c=parseInt(C.slice(3,4).repeat(2),16),p.toColor(o,a,c);case 5:return o=parseInt(C.slice(1,2).repeat(2),16),a=parseInt(C.slice(2,3).repeat(2),16),c=parseInt(C.slice(3,4).repeat(2),16),l=parseInt(C.slice(4,5).repeat(2),16),p.toColor(o,a,c,l);case 7:return{css:C,rgba:(parseInt(C.slice(1),16)<<8|255)>>>0};case 9:return{css:C,rgba:parseInt(C.slice(1),16)>>>0}}let S=C.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(S)return o=parseInt(S[1]),a=parseInt(S[2]),c=parseInt(S[3]),l=Math.round(255*(S[5]===void 0?1:parseFloat(S[5]))),p.toColor(o,a,c,l);if(!v||!b)throw new Error("css.toColor: Unsupported css format");if(v.fillStyle=b,v.fillStyle=C,typeof v.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(v.fillRect(0,0,1,1),[o,a,c,l]=v.getImageData(0,0,1,1).data,l!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:p.toRgba(o,a,c,l),css:C}}})(_||(i.css=_={})),(function(h){function v(b,C,S){let y=b/255,w=C/255,E=S/255;return .2126*(y<=.03928?y/12.92:Math.pow((y+.055)/1.055,2.4))+.7152*(w<=.03928?w/12.92:Math.pow((w+.055)/1.055,2.4))+.0722*(E<=.03928?E/12.92:Math.pow((E+.055)/1.055,2.4))}h.relativeLuminance=function(b){return v(b>>16&255,b>>8&255,255&b)},h.relativeLuminance2=v})(d||(i.rgb=d={})),(function(h){function v(C,S,y){let w=C>>24&255,E=C>>16&255,T=C>>8&255,I=S>>24&255,M=S>>16&255,R=S>>8&255,P=f(d.relativeLuminance2(I,M,R),d.relativeLuminance2(w,E,T));for(;P<y&&(I>0||M>0||R>0);)I-=Math.max(0,Math.ceil(.1*I)),M-=Math.max(0,Math.ceil(.1*M)),R-=Math.max(0,Math.ceil(.1*R)),P=f(d.relativeLuminance2(I,M,R),d.relativeLuminance2(w,E,T));return(I<<24|M<<16|R<<8|255)>>>0}function b(C,S,y){let w=C>>24&255,E=C>>16&255,T=C>>8&255,I=S>>24&255,M=S>>16&255,R=S>>8&255,P=f(d.relativeLuminance2(I,M,R),d.relativeLuminance2(w,E,T));for(;P<y&&(I<255||M<255||R<255);)I=Math.min(255,I+Math.ceil(.1*(255-I))),M=Math.min(255,M+Math.ceil(.1*(255-M))),R=Math.min(255,R+Math.ceil(.1*(255-R))),P=f(d.relativeLuminance2(I,M,R),d.relativeLuminance2(w,E,T));return(I<<24|M<<16|R<<8|255)>>>0}h.blend=function(C,S){if(l=(255&S)/255,l===1)return S;let y=S>>24&255,w=S>>16&255,E=S>>8&255,T=C>>24&255,I=C>>16&255,M=C>>8&255;return o=T+Math.round((y-T)*l),a=I+Math.round((w-I)*l),c=M+Math.round((E-M)*l),p.toRgba(o,a,c)},h.ensureContrastRatio=function(C,S,y){let w=d.relativeLuminance(C>>8),E=d.relativeLuminance(S>>8);if(f(w,E)<y){if(E<w){let M=v(C,S,y),R=f(w,d.relativeLuminance(M>>8));if(R<y){let P=b(C,S,y);return R>f(w,d.relativeLuminance(P>>8))?M:P}return M}let T=b(C,S,y),I=f(w,d.relativeLuminance(T>>8));if(I<y){let M=v(C,S,y);return I>f(w,d.relativeLuminance(M>>8))?T:M}return T}},h.reduceLuminance=v,h.increaseLuminance=b,h.toChannels=function(C){return[C>>24&255,C>>16&255,C>>8&255,255&C]}})(u||(i.rgba=u={})),i.toPaddedHex=g,i.contrastRatio=f},345:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.runAndSubscribe=i.forwardEvent=i.EventEmitter=void 0,i.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=o=>(this._listeners.push(o),{dispose:()=>{if(!this._disposed){for(let a=0;a<this._listeners.length;a++)if(this._listeners[a]===o)return void this._listeners.splice(a,1)}}})),this._event}fire(o,a){let c=[];for(let l=0;l<this._listeners.length;l++)c.push(this._listeners[l]);for(let l=0;l<c.length;l++)c[l].call(void 0,o,a)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},i.forwardEvent=function(o,a){return o(c=>a.fire(c))},i.runAndSubscribe=function(o,a){return a(void 0),o(c=>a(c))}},859:(s,i)=>{function o(a){for(let c of a)c.dispose();a.length=0}Object.defineProperty(i,"__esModule",{value:!0}),i.getDisposeArrayDisposable=i.disposeArray=i.toDisposable=i.MutableDisposable=i.Disposable=void 0,i.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(let a of this._disposables)a.dispose();this._disposables.length=0}register(a){return this._disposables.push(a),a}unregister(a){let c=this._disposables.indexOf(a);c!==-1&&this._disposables.splice(c,1)}},i.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(a){this._isDisposed||a===this._value||(this._value?.dispose(),this._value=a)}clear(){this.value=void 0}dispose(){this._isDisposed=!0,this._value?.dispose(),this._value=void 0}},i.toDisposable=function(a){return{dispose:a}},i.disposeArray=o,i.getDisposeArrayDisposable=function(a){return{dispose:()=>o(a)}}},485:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.FourKeyMap=i.TwoKeyMap=void 0;class o{constructor(){this._data={}}set(c,l,p){this._data[c]||(this._data[c]={}),this._data[c][l]=p}get(c,l){return this._data[c]?this._data[c][l]:void 0}clear(){this._data={}}}i.TwoKeyMap=o,i.FourKeyMap=class{constructor(){this._data=new o}set(a,c,l,p,m){this._data.get(a,c)||this._data.set(a,c,new o),this._data.get(a,c).set(l,p,m)}get(a,c,l,p){return this._data.get(a,c)?.get(l,p)}clear(){this._data.clear()}}},399:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.isChromeOS=i.isLinux=i.isWindows=i.isIphone=i.isIpad=i.isMac=i.getSafariVersion=i.isSafari=i.isLegacyEdge=i.isFirefox=i.isNode=void 0,i.isNode=typeof process<"u"&&"title"in process;let o=i.isNode?"node":navigator.userAgent,a=i.isNode?"node":navigator.platform;i.isFirefox=o.includes("Firefox"),i.isLegacyEdge=o.includes("Edge"),i.isSafari=/^((?!chrome|android).)*safari/i.test(o),i.getSafariVersion=function(){if(!i.isSafari)return 0;let c=o.match(/Version\/(\d+)/);return c===null||c.length<2?0:parseInt(c[1])},i.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(a),i.isIpad=a==="iPad",i.isIphone=a==="iPhone",i.isWindows=["Windows","Win16","Win32","WinCE"].includes(a),i.isLinux=a.indexOf("Linux")>=0,i.isChromeOS=/\bCrOS\b/.test(o)},385:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DebouncedIdleTask=i.IdleTaskQueue=i.PriorityTaskQueue=void 0;let a=o(399);class c{constructor(){this._tasks=[],this._i=0}enqueue(m){this._tasks.push(m),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(m){this._idleCallback=void 0;let _=0,d=0,u=m.timeRemaining(),g=0;for(;this._i<this._tasks.length;){if(_=Date.now(),this._tasks[this._i]()||this._i++,_=Math.max(1,Date.now()-_),d=Math.max(_,d),g=m.timeRemaining(),1.5*d>g)return u-_<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(u-_))}ms`),void this._start();u=g}this.clear()}}class l extends c{_requestCallback(m){return setTimeout(()=>m(this._createDeadline(16)))}_cancelCallback(m){clearTimeout(m)}_createDeadline(m){let _=Date.now()+m;return{timeRemaining:()=>Math.max(0,_-Date.now())}}}i.PriorityTaskQueue=l,i.IdleTaskQueue=!a.isNode&&"requestIdleCallback"in window?class extends c{_requestCallback(p){return requestIdleCallback(p)}_cancelCallback(p){cancelIdleCallback(p)}}:l,i.DebouncedIdleTask=class{constructor(){this._queue=new i.IdleTaskQueue}set(p){this._queue.clear(),this._queue.enqueue(p)}flush(){this._queue.flush()}}},147:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ExtendedAttrs=i.AttributeData=void 0;class o{constructor(){this.fg=0,this.bg=0,this.extended=new a}static toColorRGB(l){return[l>>>16&255,l>>>8&255,255&l]}static fromColorRGB(l){return(255&l[0])<<16|(255&l[1])<<8|255&l[2]}clone(){let l=new o;return l.fg=this.fg,l.bg=this.bg,l.extended=this.extended.clone(),l}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}}i.AttributeData=o;class a{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(l){this._ext=l}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(l){this._ext&=-469762049,this._ext|=l<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(l){this._ext&=-67108864,this._ext|=67108863&l}get urlId(){return this._urlId}set urlId(l){this._urlId=l}get underlineVariantOffset(){let l=(3758096384&this._ext)>>29;return l<0?4294967288^l:l}set underlineVariantOffset(l){this._ext&=536870911,this._ext|=l<<29&3758096384}constructor(l=0,p=0){this._ext=0,this._urlId=0,this._ext=l,this._urlId=p}clone(){return new a(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}i.ExtendedAttrs=a},782:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CellData=void 0;let a=o(133),c=o(855),l=o(147);class p extends l.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new l.ExtendedAttrs,this.combinedData=""}static fromCharData(_){let d=new p;return d.setFromCharData(_),d}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,a.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(_){this.fg=_[c.CHAR_DATA_ATTR_INDEX],this.bg=0;let d=!1;if(_[c.CHAR_DATA_CHAR_INDEX].length>2)d=!0;else if(_[c.CHAR_DATA_CHAR_INDEX].length===2){let u=_[c.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=u&&u<=56319){let g=_[c.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=g&&g<=57343?this.content=1024*(u-55296)+g-56320+65536|_[c.CHAR_DATA_WIDTH_INDEX]<<22:d=!0}else d=!0}else this.content=_[c.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|_[c.CHAR_DATA_WIDTH_INDEX]<<22;d&&(this.combinedData=_[c.CHAR_DATA_CHAR_INDEX],this.content=2097152|_[c.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.CellData=p},855:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WHITESPACE_CELL_CODE=i.WHITESPACE_CELL_WIDTH=i.WHITESPACE_CELL_CHAR=i.NULL_CELL_CODE=i.NULL_CELL_WIDTH=i.NULL_CELL_CHAR=i.CHAR_DATA_CODE_INDEX=i.CHAR_DATA_WIDTH_INDEX=i.CHAR_DATA_CHAR_INDEX=i.CHAR_DATA_ATTR_INDEX=i.DEFAULT_EXT=i.DEFAULT_ATTR=i.DEFAULT_COLOR=void 0,i.DEFAULT_COLOR=0,i.DEFAULT_ATTR=256|i.DEFAULT_COLOR<<9,i.DEFAULT_EXT=0,i.CHAR_DATA_ATTR_INDEX=0,i.CHAR_DATA_CHAR_INDEX=1,i.CHAR_DATA_WIDTH_INDEX=2,i.CHAR_DATA_CODE_INDEX=3,i.NULL_CELL_CHAR="",i.NULL_CELL_WIDTH=1,i.NULL_CELL_CODE=0,i.WHITESPACE_CELL_CHAR=" ",i.WHITESPACE_CELL_WIDTH=1,i.WHITESPACE_CELL_CODE=32},133:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Utf8ToUtf32=i.StringToUtf32=i.utf32ToString=i.stringFromCodePoint=void 0,i.stringFromCodePoint=function(o){return o>65535?(o-=65536,String.fromCharCode(55296+(o>>10))+String.fromCharCode(o%1024+56320)):String.fromCharCode(o)},i.utf32ToString=function(o,a=0,c=o.length){let l="";for(let p=a;p<c;++p){let m=o[p];m>65535?(m-=65536,l+=String.fromCharCode(55296+(m>>10))+String.fromCharCode(m%1024+56320)):l+=String.fromCharCode(m)}return l},i.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(o,a){let c=o.length;if(!c)return 0;let l=0,p=0;if(this._interim){let m=o.charCodeAt(p++);56320<=m&&m<=57343?a[l++]=1024*(this._interim-55296)+m-56320+65536:(a[l++]=this._interim,a[l++]=m),this._interim=0}for(let m=p;m<c;++m){let _=o.charCodeAt(m);if(55296<=_&&_<=56319){if(++m>=c)return this._interim=_,l;let d=o.charCodeAt(m);56320<=d&&d<=57343?a[l++]=1024*(_-55296)+d-56320+65536:(a[l++]=_,a[l++]=d)}else _!==65279&&(a[l++]=_)}return l}},i.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(o,a){let c=o.length;if(!c)return 0;let l,p,m,_,d=0,u=0,g=0;if(this.interim[0]){let v=!1,b=this.interim[0];b&=(224&b)==192?31:(240&b)==224?15:7;let C,S=0;for(;(C=63&this.interim[++S])&&S<4;)b<<=6,b|=C;let y=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,w=y-S;for(;g<w;){if(g>=c)return 0;if(C=o[g++],(192&C)!=128){g--,v=!0;break}this.interim[S++]=C,b<<=6,b|=63&C}v||(y===2?b<128?g--:a[d++]=b:y===3?b<2048||b>=55296&&b<=57343||b===65279||(a[d++]=b):b<65536||b>1114111||(a[d++]=b)),this.interim.fill(0)}let f=c-4,h=g;for(;h<c;){for(;!(!(h<f)||128&(l=o[h])||128&(p=o[h+1])||128&(m=o[h+2])||128&(_=o[h+3]));)a[d++]=l,a[d++]=p,a[d++]=m,a[d++]=_,h+=4;if(l=o[h++],l<128)a[d++]=l;else if((224&l)==192){if(h>=c)return this.interim[0]=l,d;if(p=o[h++],(192&p)!=128){h--;continue}if(u=(31&l)<<6|63&p,u<128){h--;continue}a[d++]=u}else if((240&l)==224){if(h>=c)return this.interim[0]=l,d;if(p=o[h++],(192&p)!=128){h--;continue}if(h>=c)return this.interim[0]=l,this.interim[1]=p,d;if(m=o[h++],(192&m)!=128){h--;continue}if(u=(15&l)<<12|(63&p)<<6|63&m,u<2048||u>=55296&&u<=57343||u===65279)continue;a[d++]=u}else if((248&l)==240){if(h>=c)return this.interim[0]=l,d;if(p=o[h++],(192&p)!=128){h--;continue}if(h>=c)return this.interim[0]=l,this.interim[1]=p,d;if(m=o[h++],(192&m)!=128){h--;continue}if(h>=c)return this.interim[0]=l,this.interim[1]=p,this.interim[2]=m,d;if(_=o[h++],(192&_)!=128){h--;continue}if(u=(7&l)<<18|(63&p)<<12|(63&m)<<6|63&_,u<65536||u>1114111)continue;a[d++]=u}}return d}}},776:function(s,i,o){var a=this&&this.__decorate||function(u,g,f,h){var v,b=arguments.length,C=b<3?g:h===null?h=Object.getOwnPropertyDescriptor(g,f):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(u,g,f,h);else for(var S=u.length-1;S>=0;S--)(v=u[S])&&(C=(b<3?v(C):b>3?v(g,f,C):v(g,f))||C);return b>3&&C&&Object.defineProperty(g,f,C),C},c=this&&this.__param||function(u,g){return function(f,h){g(f,h,u)}};Object.defineProperty(i,"__esModule",{value:!0}),i.traceCall=i.setTraceLogger=i.LogService=void 0;let l=o(859),p=o(97),m={trace:p.LogLevelEnum.TRACE,debug:p.LogLevelEnum.DEBUG,info:p.LogLevelEnum.INFO,warn:p.LogLevelEnum.WARN,error:p.LogLevelEnum.ERROR,off:p.LogLevelEnum.OFF},_,d=i.LogService=class extends l.Disposable{get logLevel(){return this._logLevel}constructor(u){super(),this._optionsService=u,this._logLevel=p.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),_=this}_updateLogLevel(){this._logLevel=m[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(u){for(let g=0;g<u.length;g++)typeof u[g]=="function"&&(u[g]=u[g]())}_log(u,g,f){this._evalLazyOptionalParams(f),u.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+g,...f)}trace(u,...g){this._logLevel<=p.LogLevelEnum.TRACE&&this._log(this._optionsService.options.logger?.trace.bind(this._optionsService.options.logger)??console.log,u,g)}debug(u,...g){this._logLevel<=p.LogLevelEnum.DEBUG&&this._log(this._optionsService.options.logger?.debug.bind(this._optionsService.options.logger)??console.log,u,g)}info(u,...g){this._logLevel<=p.LogLevelEnum.INFO&&this._log(this._optionsService.options.logger?.info.bind(this._optionsService.options.logger)??console.info,u,g)}warn(u,...g){this._logLevel<=p.LogLevelEnum.WARN&&this._log(this._optionsService.options.logger?.warn.bind(this._optionsService.options.logger)??console.warn,u,g)}error(u,...g){this._logLevel<=p.LogLevelEnum.ERROR&&this._log(this._optionsService.options.logger?.error.bind(this._optionsService.options.logger)??console.error,u,g)}};i.LogService=d=a([c(0,p.IOptionsService)],d),i.setTraceLogger=function(u){_=u},i.traceCall=function(u,g,f){if(typeof f.value!="function")throw new Error("not supported");let h=f.value;f.value=function(...v){if(_.logLevel!==p.LogLevelEnum.TRACE)return h.apply(this,v);_.trace(`GlyphRenderer#${h.name}(${v.map(C=>JSON.stringify(C)).join(", ")})`);let b=h.apply(this,v);return _.trace(`GlyphRenderer#${h.name} return`,b),b}}},726:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createDecorator=i.getServiceDependencies=i.serviceRegistry=void 0;let o="di$target",a="di$dependencies";i.serviceRegistry=new Map,i.getServiceDependencies=function(c){return c[a]||[]},i.createDecorator=function(c){if(i.serviceRegistry.has(c))return i.serviceRegistry.get(c);let l=function(p,m,_){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(d,u,g){u[o]===u?u[a].push({id:d,index:g}):(u[a]=[{id:d,index:g}],u[o]=u)})(l,p,_)};return l.toString=()=>c,i.serviceRegistry.set(c,l),l}},97:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.IDecorationService=i.IUnicodeService=i.IOscLinkService=i.IOptionsService=i.ILogService=i.LogLevelEnum=i.IInstantiationService=i.ICharsetService=i.ICoreService=i.ICoreMouseService=i.IBufferService=void 0;let a=o(726);var c;i.IBufferService=(0,a.createDecorator)("BufferService"),i.ICoreMouseService=(0,a.createDecorator)("CoreMouseService"),i.ICoreService=(0,a.createDecorator)("CoreService"),i.ICharsetService=(0,a.createDecorator)("CharsetService"),i.IInstantiationService=(0,a.createDecorator)("InstantiationService"),(function(l){l[l.TRACE=0]="TRACE",l[l.DEBUG=1]="DEBUG",l[l.INFO=2]="INFO",l[l.WARN=3]="WARN",l[l.ERROR=4]="ERROR",l[l.OFF=5]="OFF"})(c||(i.LogLevelEnum=c={})),i.ILogService=(0,a.createDecorator)("LogService"),i.IOptionsService=(0,a.createDecorator)("OptionsService"),i.IOscLinkService=(0,a.createDecorator)("OscLinkService"),i.IUnicodeService=(0,a.createDecorator)("UnicodeService"),i.IDecorationService=(0,a.createDecorator)("DecorationService")}},t={};function n(s){var i=t[s];if(i!==void 0)return i.exports;var o=t[s]={exports:{}};return e[s].call(o.exports,o,o.exports,n),o.exports}var r={};return(()=>{var s=r;Object.defineProperty(s,"__esModule",{value:!0}),s.WebglAddon=void 0;let i=n(345),o=n(859),a=n(399),c=n(666),l=n(776);class p extends o.Disposable{constructor(_){if(a.isSafari&&(0,a.getSafariVersion)()<16){let d={antialias:!1,depth:!1,preserveDrawingBuffer:!0};if(!document.createElement("canvas").getContext("webgl2",d))throw new Error("Webgl2 is only supported on Safari 16 and above")}super(),this._preserveDrawingBuffer=_,this._onChangeTextureAtlas=this.register(new i.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new i.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=this.register(new i.EventEmitter),this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._onContextLoss=this.register(new i.EventEmitter),this.onContextLoss=this._onContextLoss.event}activate(_){let d=_._core;if(!_.element)return void this.register(d.onWillOpen(()=>this.activate(_)));this._terminal=_;let u=d.coreService,g=d.optionsService,f=d,h=f._renderService,v=f._characterJoinerService,b=f._charSizeService,C=f._coreBrowserService,S=f._decorationService,y=f._logService,w=f._themeService;(0,l.setTraceLogger)(y),this._renderer=this.register(new c.WebglRenderer(_,v,b,C,u,S,g,w,this._preserveDrawingBuffer)),this.register((0,i.forwardEvent)(this._renderer.onContextLoss,this._onContextLoss)),this.register((0,i.forwardEvent)(this._renderer.onChangeTextureAtlas,this._onChangeTextureAtlas)),this.register((0,i.forwardEvent)(this._renderer.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas)),this.register((0,i.forwardEvent)(this._renderer.onRemoveTextureAtlasCanvas,this._onRemoveTextureAtlasCanvas)),h.setRenderer(this._renderer),this.register((0,o.toDisposable)(()=>{let E=this._terminal._core._renderService;E.setRenderer(this._terminal._core._createRenderer()),E.handleResize(_.cols,_.rows)}))}get textureAtlas(){return this._renderer?.textureAtlas}clearTextureAtlas(){this._renderer?.clearTextureAtlas()}}s.WebglAddon=p})(),r})())});var rl;function fo(){return rl}function Xt(e){let t=rl;return rl=e,t}var pf=Symbol("NotFound");function Or(e){return e===pf||e?.name==="\u0275NotFound"}var dt=null,po=!1,il=1,my=null,ht=Symbol("SIGNAL");function ce(e){let t=dt;return dt=e,t}function vo(){return dt}var Lr={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function kr(e){if(po)throw new Error("");if(dt===null)return;dt.consumerOnSignalRead(e);let t=dt.producersTail;if(t!==void 0&&t.producer===e)return;let n,r=dt.recomputing;if(r&&(n=t!==void 0?t.nextProducer:dt.producers,n!==void 0&&n.producer===e)){dt.producersTail=n,n.lastReadVersion=e.version;return}let s=e.consumersTail;if(s!==void 0&&s.consumer===dt&&(!r||vy(s,dt)))return;let i=Pr(dt),o={producer:e,consumer:dt,nextProducer:n,prevConsumer:s,lastReadVersion:e.version,nextConsumer:void 0};dt.producersTail=o,t!==void 0?t.nextProducer=o:dt.producers=o,i&&vf(e,o)}function gf(){il++}function yo(e){if(!(Pr(e)&&!e.dirty)&&!(!e.dirty&&e.lastCleanEpoch===il)){if(!e.producerMustRecompute(e)&&!qi(e)){_o(e);return}e.producerRecomputeValue(e),_o(e)}}function sl(e){if(e.consumers===void 0)return;let t=po;po=!0;try{for(let n=e.consumers;n!==void 0;n=n.nextConsumer){let r=n.consumer;r.dirty||_y(r)}}finally{po=t}}function ol(){return dt?.consumerAllowSignalWrites!==!1}function _y(e){e.dirty=!0,sl(e),e.consumerMarkedDirty?.(e)}function _o(e){e.dirty=!1,e.lastCleanEpoch=il}function Nr(e){return e&&mf(e),ce(e)}function mf(e){e.producersTail=void 0,e.recomputing=!0}function Gi(e,t){ce(t),e&&_f(e)}function _f(e){e.recomputing=!1;let t=e.producersTail,n=t!==void 0?t.nextProducer:e.producers;if(n!==void 0){if(Pr(e))do n=al(n);while(n!==void 0);t!==void 0?t.nextProducer=void 0:e.producers=void 0}}function qi(e){for(let t=e.producers;t!==void 0;t=t.nextProducer){let n=t.producer,r=t.lastReadVersion;if(r!==n.version||(yo(n),r!==n.version))return!0}return!1}function Ki(e){if(Pr(e)){let t=e.producers;for(;t!==void 0;)t=al(t)}e.producers=void 0,e.producersTail=void 0,e.consumers=void 0,e.consumersTail=void 0}function vf(e,t){let n=e.consumersTail,r=Pr(e);if(n!==void 0?(t.nextConsumer=n.nextConsumer,n.nextConsumer=t):(t.nextConsumer=void 0,e.consumers=t),t.prevConsumer=n,e.consumersTail=t,!r)for(let s=e.producers;s!==void 0;s=s.nextProducer)vf(s.producer,s)}function al(e){let t=e.producer,n=e.nextProducer,r=e.nextConsumer,s=e.prevConsumer;if(e.nextConsumer=void 0,e.prevConsumer=void 0,r!==void 0?r.prevConsumer=s:t.consumersTail=s,s!==void 0)s.nextConsumer=r;else if(t.consumers=r,!Pr(t)){let i=t.producers;for(;i!==void 0;)i=al(i)}return n}function Pr(e){return e.consumerIsAlwaysLive||e.consumers!==void 0}function Co(e){my?.(e)}function vy(e,t){let n=t.producersTail;if(n!==void 0){let r=t.producers;do{if(r===e)return!0;if(r===n)break;r=r.nextProducer}while(r!==void 0)}return!1}function bo(e,t){return Object.is(e,t)}function wo(e,t){let n=Object.create(yy);n.computation=e,t!==void 0&&(n.equal=t);let r=()=>{if(yo(n),kr(n),n.value===zi)throw n.error;return n.value};return r[ht]=n,Co(n),r}var go=Symbol("UNSET"),mo=Symbol("COMPUTING"),zi=Symbol("ERRORED"),yy=ye(z({},Lr),{value:go,dirty:!0,error:null,equal:bo,kind:"computed",producerMustRecompute(e){return e.value===go||e.value===mo},producerRecomputeValue(e){if(e.value===mo)throw new Error("");let t=e.value;e.value=mo;let n=Nr(e),r,s=!1;try{r=e.computation(),ce(null),s=t!==go&&t!==zi&&r!==zi&&e.equal(t,r)}catch(i){r=zi,e.error=i}finally{Gi(e,n)}if(s){e.value=t;return}e.value=r,e.version++}});function Cy(){throw new Error}var yf=Cy;function Cf(e){yf(e)}function cl(e){yf=e}var by=null;function ll(e,t){let n=Object.create(So);n.value=e,t!==void 0&&(n.equal=t);let r=()=>bf(n);return r[ht]=n,Co(n),[r,o=>Fr(n,o),o=>ul(n,o)]}function bf(e){return kr(e),e.value}function Fr(e,t){ol()||Cf(e),e.equal(e.value,t)||(e.value=t,wy(e))}function ul(e,t){ol()||Cf(e),Fr(e,t(e.value))}var So=ye(z({},Lr),{equal:bo,value:void 0,kind:"signal"});function wy(e){e.version++,gf(),sl(e),by?.(e)}function ue(e){return typeof e=="function"}function Br(e){let n=e(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Eo=Br(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,s)=>`${s+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Xn(e,t){if(e){let n=e.indexOf(t);0<=n&&e.splice(n,1)}}var je=class e{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let i of n)i.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(ue(r))try{r()}catch(i){t=i instanceof Eo?i.errors:[i]}let{_finalizers:s}=this;if(s){this._finalizers=null;for(let i of s)try{wf(i)}catch(o){t=t??[],o instanceof Eo?t=[...t,...o.errors]:t.push(o)}}if(t)throw new Eo(t)}}add(t){var n;if(t&&t!==this)if(this.closed)wf(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}}_hasParent(t){let{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){let{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&Xn(n,t)}remove(t){let{_finalizers:n}=this;n&&Xn(n,t),t instanceof e&&t._removeParent(this)}};je.EMPTY=(()=>{let e=new je;return e.closed=!0,e})();var dl=je.EMPTY;function Do(e){return e instanceof je||e&&"closed"in e&&ue(e.remove)&&ue(e.add)&&ue(e.unsubscribe)}function wf(e){ue(e)?e():e.unsubscribe()}var jt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var jr={setTimeout(e,t,...n){let{delegate:r}=jr;return r?.setTimeout?r.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){let{delegate:t}=jr;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function Io(e){jr.setTimeout(()=>{let{onUnhandledError:t}=jt;if(t)t(e);else throw e})}function Yi(){}var Sf=hl("C",void 0,void 0);function Ef(e){return hl("E",void 0,e)}function Df(e){return hl("N",e,void 0)}function hl(e,t,n){return{kind:e,value:t,error:n}}var Qn=null;function Vr(e){if(jt.useDeprecatedSynchronousErrorHandling){let t=!Qn;if(t&&(Qn={errorThrown:!1,error:null}),e(),t){let{errorThrown:n,error:r}=Qn;if(Qn=null,n)throw r}}else e()}function If(e){jt.useDeprecatedSynchronousErrorHandling&&Qn&&(Qn.errorThrown=!0,Qn.error=e)}var Jn=class extends je{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,Do(t)&&t.add(this)):this.destination=Dy}static create(t,n,r){return new Hr(t,n,r)}next(t){this.isStopped?pl(Df(t),this):this._next(t)}error(t){this.isStopped?pl(Ef(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?pl(Sf,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},Sy=Function.prototype.bind;function fl(e,t){return Sy.call(e,t)}var gl=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(r){Mo(r)}}error(t){let{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(r){Mo(r)}else Mo(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){Mo(n)}}},Hr=class extends Jn{constructor(t,n,r){super();let s;if(ue(t)||!t)s={next:t??void 0,error:n??void 0,complete:r??void 0};else{let i;this&&jt.useDeprecatedNextContext?(i=Object.create(t),i.unsubscribe=()=>this.unsubscribe(),s={next:t.next&&fl(t.next,i),error:t.error&&fl(t.error,i),complete:t.complete&&fl(t.complete,i)}):s=t}this.destination=new gl(s)}};function Mo(e){jt.useDeprecatedSynchronousErrorHandling?If(e):Io(e)}function Ey(e){throw e}function pl(e,t){let{onStoppedNotification:n}=jt;n&&jr.setTimeout(()=>n(e,t))}var Dy={closed:!0,next:Yi,error:Ey,complete:Yi};var Ur=typeof Symbol=="function"&&Symbol.observable||"@@observable";function wt(e){return e}function ml(...e){return _l(e)}function _l(e){return e.length===0?wt:e.length===1?e[0]:function(n){return e.reduce((r,s)=>s(r),n)}}var pe=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new e;return r.source=this,r.operator=n,r}subscribe(n,r,s){let i=My(n)?n:new Hr(n,r,s);return Vr(()=>{let{operator:o,source:a}=this;i.add(o?o.call(i,a):a?this._subscribe(i):this._trySubscribe(i))}),i}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=Mf(r),new r((s,i)=>{let o=new Hr({next:a=>{try{n(a)}catch(c){i(c),o.unsubscribe()}},error:i,complete:s});this.subscribe(o)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Ur](){return this}pipe(...n){return _l(n)(this)}toPromise(n){return n=Mf(n),new n((r,s)=>{let i;this.subscribe(o=>i=o,o=>s(o),()=>r(i))})}}return e.create=t=>new e(t),e})();function Mf(e){var t;return(t=e??jt.Promise)!==null&&t!==void 0?t:Promise}function Iy(e){return e&&ue(e.next)&&ue(e.error)&&ue(e.complete)}function My(e){return e&&e instanceof Jn||Iy(e)&&Do(e)}function vl(e){return ue(e?.lift)}function we(e){return t=>{if(vl(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ce(e,t,n,r,s){return new yl(e,t,n,r,s)}var yl=class extends Jn{constructor(t,n,r,s,i,o){super(t),this.onFinalize=i,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(c){t.error(c)}}:super._next,this._error=s?function(a){try{s(a)}catch(c){t.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};function $r(){return we((e,t)=>{let n=null;e._refCount++;let r=Ce(t,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount){n=null;return}let s=e._connection,i=n;n=null,s&&(!i||s===i)&&s.unsubscribe(),t.unsubscribe()});e.subscribe(r),r.closed||(n=e.connect())})}var Wr=class extends pe{constructor(t,n){super(),this.source=t,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,vl(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){let t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new je;let n=this.getSubject();t.add(this.source.subscribe(Ce(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),t.closed&&(this._connection=null,t=je.EMPTY)}return t}refCount(){return $r()(this)}};var Tf=Br(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ne=(()=>{class e extends pe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new To(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new Tf}next(n){Vr(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Vr(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Vr(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:s,observers:i}=this;return r||s?dl:(this.currentObservers=null,i.push(n),new je(()=>{this.currentObservers=null,Xn(i,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:s,isStopped:i}=this;r?n.error(s):i&&n.complete()}asObservable(){let n=new pe;return n.source=this,n}}return e.create=(t,n)=>new To(t,n),e})(),To=class extends Ne{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,t)}error(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,t)}complete(){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||n===void 0||n.call(t)}_subscribe(t){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(t))!==null&&r!==void 0?r:dl}};var it=class extends Ne{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){let{hasError:t,thrownError:n,_value:r}=this;if(t)throw n;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}};var Cl={now(){return(Cl.delegate||Date).now()},delegate:void 0};var xo=class extends je{constructor(t,n){super()}schedule(t,n=0){return this}};var Zi={setInterval(e,t,...n){let{delegate:r}=Zi;return r?.setInterval?r.setInterval(e,t,...n):setInterval(e,t,...n)},clearInterval(e){let{delegate:t}=Zi;return(t?.clearInterval||clearInterval)(e)},delegate:void 0};var Ao=class extends xo{constructor(t,n){super(t,n),this.scheduler=t,this.work=n,this.pending=!1}schedule(t,n=0){var r;if(this.closed)return this;this.state=t;let s=this.id,i=this.scheduler;return s!=null&&(this.id=this.recycleAsyncId(i,s,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(i,this.id,n),this}requestAsyncId(t,n,r=0){return Zi.setInterval(t.flush.bind(t,this),r)}recycleAsyncId(t,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&Zi.clearInterval(n)}execute(t,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(t,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,n){let r=!1,s;try{this.work(t)}catch(i){r=!0,s=i||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),s}unsubscribe(){if(!this.closed){let{id:t,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Xn(r,this),t!=null&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null,super.unsubscribe()}}};var zr=class e{constructor(t,n=e.now){this.schedulerActionCtor=t,this.now=n}schedule(t,n=0,r){return new this.schedulerActionCtor(this,t).schedule(r,n)}};zr.now=Cl.now;var Ro=class extends zr{constructor(t,n=zr.now){super(t,n),this.actions=[],this._active=!1}flush(t){let{actions:n}=this;if(this._active){n.push(t);return}let r;this._active=!0;do if(r=t.execute(t.state,t.delay))break;while(t=n.shift());if(this._active=!1,r){for(;t=n.shift();)t.unsubscribe();throw r}}};var bl=new Ro(Ao),xf=bl;var _t=new pe(e=>e.complete());function Oo(e){return e&&ue(e.schedule)}function Af(e){return e[e.length-1]}function Lo(e){return ue(Af(e))?e.pop():void 0}function On(e){return Oo(Af(e))?e.pop():void 0}function Of(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(p){try{l(r.next(p))}catch(m){o(m)}}function c(p){try{l(r.throw(p))}catch(m){o(m)}}function l(p){p.done?i(p.value):s(p.value).then(a,c)}l((r=r.apply(e,t||[])).next())})}function Rf(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function er(e){return this instanceof er?(this.v=e,this):new er(e)}function Lf(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),s,i=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),s[Symbol.asyncIterator]=function(){return this},s;function o(d){return function(u){return Promise.resolve(u).then(d,m)}}function a(d,u){r[d]&&(s[d]=function(g){return new Promise(function(f,h){i.push([d,g,f,h])>1||c(d,g)})},u&&(s[d]=u(s[d])))}function c(d,u){try{l(r[d](u))}catch(g){_(i[0][3],g)}}function l(d){d.value instanceof er?Promise.resolve(d.value.v).then(p,m):_(i[0][2],d)}function p(d){c("next",d)}function m(d){c("throw",d)}function _(d,u){d(u),i.shift(),i.length&&c(i[0][0],i[0][1])}}function kf(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Rf=="function"?Rf(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=e[i]&&function(o){return new Promise(function(a,c){o=e[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},o)}}var ko=e=>e&&typeof e.length=="number"&&typeof e!="function";function No(e){return ue(e?.then)}function Po(e){return ue(e[Ur])}function Fo(e){return Symbol.asyncIterator&&ue(e?.[Symbol.asyncIterator])}function Bo(e){return new TypeError(`You provided ${e!==null&&typeof e=="object"?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function Ty(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var jo=Ty();function Vo(e){return ue(e?.[jo])}function Ho(e){return Lf(this,arguments,function*(){let n=e.getReader();try{for(;;){let{value:r,done:s}=yield er(n.read());if(s)return yield er(void 0);yield yield er(r)}}finally{n.releaseLock()}})}function Uo(e){return ue(e?.getReader)}function Ge(e){if(e instanceof pe)return e;if(e!=null){if(Po(e))return xy(e);if(ko(e))return Ay(e);if(No(e))return Ry(e);if(Fo(e))return Nf(e);if(Vo(e))return Oy(e);if(Uo(e))return Ly(e)}throw Bo(e)}function xy(e){return new pe(t=>{let n=e[Ur]();if(ue(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Ay(e){return new pe(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function Ry(e){return new pe(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,Io)})}function Oy(e){return new pe(t=>{for(let n of e)if(t.next(n),t.closed)return;t.complete()})}function Nf(e){return new pe(t=>{ky(e,t).catch(n=>t.error(n))})}function Ly(e){return Nf(Ho(e))}function ky(e,t){var n,r,s,i;return Of(this,void 0,void 0,function*(){try{for(n=kf(e);r=yield n.next(),!r.done;){let o=r.value;if(t.next(o),t.closed)return}}catch(o){s={error:o}}finally{try{r&&!r.done&&(i=n.return)&&(yield i.call(n))}finally{if(s)throw s.error}}t.complete()})}function vt(e,t,n,r=0,s=!1){let i=t.schedule(function(){n(),s?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(i),!s)return i}function $o(e,t=0){return we((n,r)=>{n.subscribe(Ce(r,s=>vt(r,e,()=>r.next(s),t),()=>vt(r,e,()=>r.complete(),t),s=>vt(r,e,()=>r.error(s),t)))})}function Wo(e,t=0){return we((n,r)=>{r.add(e.schedule(()=>n.subscribe(r),t))})}function Pf(e,t){return Ge(e).pipe(Wo(t),$o(t))}function Ff(e,t){return Ge(e).pipe(Wo(t),$o(t))}function Bf(e,t){return new pe(n=>{let r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}function jf(e,t){return new pe(n=>{let r;return vt(n,t,()=>{r=e[jo](),vt(n,t,()=>{let s,i;try{({value:s,done:i}=r.next())}catch(o){n.error(o);return}i?n.complete():n.next(s)},0,!0)}),()=>ue(r?.return)&&r.return()})}function zo(e,t){if(!e)throw new Error("Iterable cannot be null");return new pe(n=>{vt(n,t,()=>{let r=e[Symbol.asyncIterator]();vt(n,t,()=>{r.next().then(s=>{s.done?n.complete():n.next(s.value)})},0,!0)})})}function Vf(e,t){return zo(Ho(e),t)}function Hf(e,t){if(e!=null){if(Po(e))return Pf(e,t);if(ko(e))return Bf(e,t);if(No(e))return Ff(e,t);if(Fo(e))return zo(e,t);if(Vo(e))return jf(e,t);if(Uo(e))return Vf(e,t)}throw Bo(e)}function Ve(e,t){return t?Hf(e,t):Ge(e)}function re(...e){let t=On(e);return Ve(e,t)}function Gr(e,t){let n=ue(e)?e:()=>e,r=s=>s.error(n());return new pe(t?s=>t.schedule(r,0,s):r)}function wl(e){return!!e&&(e instanceof pe||ue(e.lift)&&ue(e.subscribe))}var ln=Br(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function Uf(e){return e instanceof Date&&!isNaN(e)}function fe(e,t){return we((n,r)=>{let s=0;n.subscribe(Ce(r,i=>{r.next(e.call(t,i,s++))}))})}var{isArray:Ny}=Array;function Py(e,t){return Ny(t)?e(...t):e(t)}function Go(e){return fe(t=>Py(e,t))}var{isArray:Fy}=Array,{getPrototypeOf:By,prototype:jy,keys:Vy}=Object;function qo(e){if(e.length===1){let t=e[0];if(Fy(t))return{args:t,keys:null};if(Hy(t)){let n=Vy(t);return{args:n.map(r=>t[r]),keys:n}}}return{args:e,keys:null}}function Hy(e){return e&&typeof e=="object"&&By(e)===jy}function Ko(e,t){return e.reduce((n,r,s)=>(n[r]=t[s],n),{})}function Yo(...e){let t=On(e),n=Lo(e),{args:r,keys:s}=qo(e);if(r.length===0)return Ve([],t);let i=new pe(Uy(r,t,s?o=>Ko(s,o):wt));return n?i.pipe(Go(n)):i}function Uy(e,t,n=wt){return r=>{$f(t,()=>{let{length:s}=e,i=new Array(s),o=s,a=s;for(let c=0;c<s;c++)$f(t,()=>{let l=Ve(e[c],t),p=!1;l.subscribe(Ce(r,m=>{i[c]=m,p||(p=!0,a--),a||r.next(n(i.slice()))},()=>{--o||r.complete()}))},r)},r)}}function $f(e,t,n){e?vt(n,e,t):t()}function Wf(e,t,n,r,s,i,o,a){let c=[],l=0,p=0,m=!1,_=()=>{m&&!c.length&&!l&&t.complete()},d=g=>l<r?u(g):c.push(g),u=g=>{i&&t.next(g),l++;let f=!1;Ge(n(g,p++)).subscribe(Ce(t,h=>{s?.(h),i?d(h):t.next(h)},()=>{f=!0},void 0,()=>{if(f)try{for(l--;c.length&&l<r;){let h=c.shift();o?vt(t,o,()=>u(h)):u(h)}_()}catch(h){t.error(h)}}))};return e.subscribe(Ce(t,d,()=>{m=!0,_()})),()=>{a?.()}}function Ye(e,t,n=1/0){return ue(t)?Ye((r,s)=>fe((i,o)=>t(r,i,s,o))(Ge(e(r,s))),n):(typeof t=="number"&&(n=t),we((r,s)=>Wf(r,s,e,n)))}function zf(e=1/0){return Ye(wt,e)}function Gf(){return zf(1)}function qr(...e){return Gf()(Ve(e,On(e)))}function Xi(e){return new pe(t=>{Ge(e()).subscribe(t)})}function Sl(...e){let t=Lo(e),{args:n,keys:r}=qo(e),s=new pe(i=>{let{length:o}=n;if(!o){i.complete();return}let a=new Array(o),c=o,l=o;for(let p=0;p<o;p++){let m=!1;Ge(n[p]).subscribe(Ce(i,_=>{m||(m=!0,l--),a[p]=_},()=>c--,void 0,()=>{(!c||!m)&&(l||i.next(r?Ko(r,a):a),i.complete())}))}});return t?s.pipe(Go(t)):s}function qf(e=0,t,n=xf){let r=-1;return t!=null&&(Oo(t)?n=t:r=t),new pe(s=>{let i=Uf(e)?+e-n.now():e;i<0&&(i=0);let o=0;return n.schedule(function(){s.closed||(s.next(o++),0<=r?this.schedule(void 0,r):s.complete())},i)})}function El(e=0,t=bl){return e<0&&(e=0),qf(e,e,t)}function yt(e,t){return we((n,r)=>{let s=0;n.subscribe(Ce(r,i=>e.call(t,i,s++)&&r.next(i)))})}function At(e){return we((t,n)=>{let r=null,s=!1,i;r=t.subscribe(Ce(n,void 0,void 0,o=>{i=Ge(e(o,At(e)(t))),r?(r.unsubscribe(),r=null,i.subscribe(n)):s=!0})),s&&(r.unsubscribe(),r=null,i.subscribe(n))})}function Kf(e,t,n,r,s){return(i,o)=>{let a=n,c=t,l=0;i.subscribe(Ce(o,p=>{let m=l++;c=a?e(c,p,m):(a=!0,p),r&&o.next(c)},s&&(()=>{a&&o.next(c),o.complete()})))}}function Ln(e,t){return ue(t)?Ye(e,t,1):Ye(e,1)}function kn(e){return we((t,n)=>{let r=!1;t.subscribe(Ce(n,s=>{r=!0,n.next(s)},()=>{r||n.next(e),n.complete()}))})}function un(e){return e<=0?()=>_t:we((t,n)=>{let r=0;t.subscribe(Ce(n,s=>{++r<=e&&(n.next(s),e<=r&&n.complete())}))})}function Zo(e=$y){return we((t,n)=>{let r=!1;t.subscribe(Ce(n,s=>{r=!0,n.next(s)},()=>r?n.complete():n.error(e())))})}function $y(){return new ln}function tr(e){return we((t,n)=>{try{t.subscribe(n)}finally{n.add(e)}})}function dn(e,t){let n=arguments.length>=2;return r=>r.pipe(e?yt((s,i)=>e(s,i,r)):wt,un(1),n?kn(t):Zo(()=>new ln))}function Kr(e){return e<=0?()=>_t:we((t,n)=>{let r=[];t.subscribe(Ce(n,s=>{r.push(s),e<r.length&&r.shift()},()=>{for(let s of r)n.next(s);n.complete()},void 0,()=>{r=null}))})}function Dl(e,t){let n=arguments.length>=2;return r=>r.pipe(e?yt((s,i)=>e(s,i,r)):wt,Kr(1),n?kn(t):Zo(()=>new ln))}function Il(e,t){return we(Kf(e,t,arguments.length>=2,!0))}function Ml(...e){let t=On(e);return we((n,r)=>{(t?qr(e,n,t):qr(e,n)).subscribe(r)})}function Ze(e,t){return we((n,r)=>{let s=null,i=0,o=!1,a=()=>o&&!s&&r.complete();n.subscribe(Ce(r,c=>{s?.unsubscribe();let l=0,p=i++;Ge(e(c,p)).subscribe(s=Ce(r,m=>r.next(t?t(c,m,p,l++):m),()=>{s=null,a()}))},()=>{o=!0,a()}))})}function Xo(e){return we((t,n)=>{Ge(e).subscribe(Ce(n,()=>n.complete(),Yi)),!n.closed&&t.subscribe(n)})}function He(e,t,n){let r=ue(e)||t||n?{next:e,error:t,complete:n}:e;return r?we((s,i)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;s.subscribe(Ce(i,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),i.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),i.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),i.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):wt}function Yf(e){let t=ce(null);try{return e()}finally{ce(t)}}var jl="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",te=class extends Error{code;constructor(t,n){super(Zr(t,n)),this.code=t}};function Wy(e){return`NG0${Math.abs(e)}`}function Zr(e,t){return`${Wy(e)}${t?": "+t:""}`}function Ie(e){for(let t in e)if(e[t]===Ie)return t;throw Error("")}function Qf(e,t){for(let n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function fn(e){if(typeof e=="string")return e;if(Array.isArray(e))return`[${e.map(fn).join(", ")}]`;if(e==null)return""+e;let t=e.overriddenName||e.name;if(t)return`${t}`;let n=e.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function Vl(e,t){return e?t?`${e} ${t}`:e:t||""}var zy=Ie({__forward_ref__:Ie});function gn(e){return e.__forward_ref__=gn,e.toString=function(){return fn(this())},e}function st(e){return Hl(e)?e():e}function Hl(e){return typeof e=="function"&&e.hasOwnProperty(zy)&&e.__forward_ref__===gn}function ee(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function Qt(e){return{providers:e.providers||[],imports:e.imports||[]}}function ts(e){return Gy(e,ta)}function Ul(e){return ts(e)!==null}function Gy(e,t){return e.hasOwnProperty(t)&&e[t]||null}function qy(e){let t=e?.[ta]??null;return t||null}function xl(e){return e&&e.hasOwnProperty(Jo)?e[Jo]:null}var ta=Ie({\u0275prov:Ie}),Jo=Ie({\u0275inj:Ie}),ne=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(t,n){this._desc=t,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=ee({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function $l(e){return e&&!!e.\u0275providers}var Wl=Ie({\u0275cmp:Ie}),zl=Ie({\u0275dir:Ie}),Gl=Ie({\u0275pipe:Ie}),ql=Ie({\u0275mod:Ie}),Ji=Ie({\u0275fac:Ie}),ar=Ie({__NG_ELEMENT_ID__:Ie}),Zf=Ie({__NG_ENV_ID__:Ie});function ns(e){return typeof e=="string"?e:e==null?"":String(e)}function Jf(e){return typeof e=="function"?e.name||e.toString():typeof e=="object"&&e!=null&&typeof e.type=="function"?e.type.name||e.type.toString():ns(e)}var ep=Ie({ngErrorCode:Ie}),Ky=Ie({ngErrorMessage:Ie}),Yy=Ie({ngTokenPath:Ie});function Kl(e,t){return tp("",-200,t)}function na(e,t){throw new te(-201,!1)}function tp(e,t,n){let r=new te(t,e);return r[ep]=t,r[Ky]=e,n&&(r[Yy]=n),r}function Zy(e){return e[ep]}var Al;function np(){return Al}function St(e){let t=Al;return Al=e,t}function Yl(e,t,n){let r=ts(e);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&8)return null;if(t!==void 0)return t;na(e,"Injector")}var Xy={},nr=Xy,Qy="__NG_DI_FLAG__",Rl=class{injector;constructor(t){this.injector=t}retrieve(t,n){let r=rr(n)||0;try{return this.injector.get(t,r&8?null:nr,r)}catch(s){if(Or(s))return s;throw s}}};function Jy(e,t=0){let n=fo();if(n===void 0)throw new te(-203,!1);if(n===null)return Yl(e,void 0,t);{let r=e0(t),s=n.retrieve(e,r);if(Or(s)){if(r.optional)return null;throw s}return s}}function ae(e,t=0){return(np()||Jy)(st(e),t)}function H(e,t){return ae(e,rr(t))}function rr(e){return typeof e>"u"||typeof e=="number"?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function e0(e){return{optional:!!(e&8),host:!!(e&1),self:!!(e&2),skipSelf:!!(e&4)}}function Ol(e){let t=[];for(let n=0;n<e.length;n++){let r=st(e[n]);if(Array.isArray(r)){if(r.length===0)throw new te(900,!1);let s,i=0;for(let o=0;o<r.length;o++){let a=r[o],c=t0(a);typeof c=="number"?c===-1?s=a.token:i|=c:s=a}t.push(ae(s,i))}else t.push(ae(r))}return t}function t0(e){return e[Qy]}function ir(e,t){let n=e.hasOwnProperty(Ji);return n?e[Ji]:null}function rp(e,t,n){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++){let s=e[r],i=t[r];if(n&&(s=n(s),i=n(i)),i!==s)return!1}return!0}function ip(e){return e.flat(Number.POSITIVE_INFINITY)}function ra(e,t){e.forEach(n=>Array.isArray(n)?ra(n,t):t(n))}function Zl(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function rs(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function sp(e,t,n,r){let s=e.length;if(s==t)e.push(n,r);else if(s===1)e.push(r,e[0]),e[0]=n;else{for(s--,e.push(e[s-1],e[s]);s>t;){let i=s-2;e[s]=e[i],s--}e[t]=n,e[t+1]=r}}function op(e,t,n){let r=Xr(e,t);return r>=0?e[r|1]=n:(r=~r,sp(e,r,t,n)),r}function ia(e,t){let n=Xr(e,t);if(n>=0)return e[n|1]}function Xr(e,t){return n0(e,t,1)}function n0(e,t,n){let r=0,s=e.length>>n;for(;s!==r;){let i=r+(s-r>>1),o=e[i<<n];if(t===o)return i<<n;o>t?s=i:r=i+1}return~(s<<n)}var Pn={},Et=[],mn=new ne(""),Xl=new ne("",-1),Ql=new ne(""),es=class{get(t,n=nr){if(n===nr){let s=tp("",-201);throw s.name="\u0275NotFound",s}return n}};function Jl(e){return e[ql]||null}function Fn(e){return e[Wl]||null}function eu(e){return e[zl]||null}function ap(e){return e[Gl]||null}function _n(e){return{\u0275providers:e}}function cp(e){return _n([{provide:mn,multi:!0,useValue:e}])}function lp(...e){return{\u0275providers:tu(!0,e),\u0275fromNgModule:!0}}function tu(e,...t){let n=[],r=new Set,s,i=o=>{n.push(o)};return ra(t,o=>{let a=o;ea(a,i,[],r)&&(s||=[],s.push(a))}),s!==void 0&&up(s,i),n}function up(e,t){for(let n=0;n<e.length;n++){let{ngModule:r,providers:s}=e[n];nu(s,i=>{t(i,r)})}}function ea(e,t,n,r){if(e=st(e),!e)return!1;let s=null,i=xl(e),o=!i&&Fn(e);if(!i&&!o){let c=e.ngModule;if(i=xl(c),i)s=c;else return!1}else{if(o&&!o.standalone)return!1;s=e}let a=r.has(s);if(o){if(a)return!1;if(r.add(s),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of c)ea(l,t,n,r)}}else if(i){if(i.imports!=null&&!a){r.add(s);let l;try{ra(i.imports,p=>{ea(p,t,n,r)&&(l||=[],l.push(p))})}finally{}l!==void 0&&up(l,t)}if(!a){let l=ir(s)||(()=>new s);t({provide:s,useFactory:l,deps:Et},s),t({provide:Ql,useValue:s,multi:!0},s),t({provide:mn,useValue:()=>ae(s),multi:!0},s)}let c=i.providers;if(c!=null&&!a){let l=e;nu(c,p=>{t(p,l)})}}else return!1;return s!==e&&e.providers!==void 0}function nu(e,t){for(let n of e)$l(n)&&(n=n.\u0275providers),Array.isArray(n)?nu(n,t):t(n)}var r0=Ie({provide:String,useValue:Ie});function dp(e){return e!==null&&typeof e=="object"&&r0 in e}function i0(e){return!!(e&&e.useExisting)}function s0(e){return!!(e&&e.useFactory)}function sr(e){return typeof e=="function"}function hp(e){return!!e.useClass}var is=new ne(""),Qo={},Xf={},Tl;function ss(){return Tl===void 0&&(Tl=new es),Tl}var Xe=class{},or=class extends Xe{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(t,n,r,s){super(),this.parent=n,this.source=r,this.scopes=s,kl(t,o=>this.processProvider(o)),this.records.set(Xl,Yr(void 0,this)),s.has("environment")&&this.records.set(Xe,Yr(void 0,this));let i=this.records.get(is);i!=null&&typeof i.value=="string"&&this.scopes.add(i.value),this.injectorDefTypes=new Set(this.get(Ql,Et,{self:!0}))}retrieve(t,n){let r=rr(n)||0;try{return this.get(t,nr,r)}catch(s){if(Or(s))return s;throw s}}destroy(){Qi(this),this._destroyed=!0;let t=ce(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ce(t)}}onDestroy(t){return Qi(this),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){Qi(this);let n=Xt(this),r=St(void 0),s;try{return t()}finally{Xt(n),St(r)}}get(t,n=nr,r){if(Qi(this),t.hasOwnProperty(Zf))return t[Zf](this);let s=rr(r),i,o=Xt(this),a=St(void 0);try{if(!(s&4)){let l=this.records.get(t);if(l===void 0){let p=u0(t)&&ts(t);p&&this.injectableDefInScope(p)?l=Yr(Ll(t),Qo):l=null,this.records.set(t,l)}if(l!=null)return this.hydrate(t,l,s)}let c=s&2?ss():this.parent;return n=s&8&&n===nr?null:n,c.get(t,n)}catch(c){let l=Zy(c);throw l===-200||l===-201?new te(l,null):c}finally{St(a),Xt(o)}}resolveInjectorInitializers(){let t=ce(null),n=Xt(this),r=St(void 0),s;try{let i=this.get(mn,Et,{self:!0});for(let o of i)o()}finally{Xt(n),St(r),ce(t)}}toString(){let t=[],n=this.records;for(let r of n.keys())t.push(fn(r));return`R3Injector[${t.join(", ")}]`}processProvider(t){t=st(t);let n=sr(t)?t:st(t&&t.provide),r=a0(t);if(!sr(t)&&t.multi===!0){let s=this.records.get(n);s||(s=Yr(void 0,Qo,!0),s.factory=()=>Ol(s.multi),this.records.set(n,s)),n=t,s.multi.push(t)}this.records.set(n,r)}hydrate(t,n,r){let s=ce(null);try{if(n.value===Xf)throw Kl(fn(t));return n.value===Qo&&(n.value=Xf,n.value=n.factory(void 0,r)),typeof n.value=="object"&&n.value&&l0(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{ce(s)}}injectableDefInScope(t){if(!t.providedIn)return!1;let n=st(t.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(t){let n=this._onDestroyHooks.indexOf(t);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Ll(e){let t=ts(e),n=t!==null?t.factory:ir(e);if(n!==null)return n;if(e instanceof ne)throw new te(204,!1);if(e instanceof Function)return o0(e);throw new te(204,!1)}function o0(e){if(e.length>0)throw new te(204,!1);let n=qy(e);return n!==null?()=>n.factory(e):()=>new e}function a0(e){if(dp(e))return Yr(void 0,e.useValue);{let t=ru(e);return Yr(t,Qo)}}function ru(e,t,n){let r;if(sr(e)){let s=st(e);return ir(s)||Ll(s)}else if(dp(e))r=()=>st(e.useValue);else if(s0(e))r=()=>e.useFactory(...Ol(e.deps||[]));else if(i0(e))r=(s,i)=>ae(st(e.useExisting),i!==void 0&&i&8?8:void 0);else{let s=st(e&&(e.useClass||e.provide));if(c0(e))r=()=>new s(...Ol(e.deps));else return ir(s)||Ll(s)}return r}function Qi(e){if(e.destroyed)throw new te(205,!1)}function Yr(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function c0(e){return!!e.deps}function l0(e){return e!==null&&typeof e=="object"&&typeof e.ngOnDestroy=="function"}function u0(e){return typeof e=="function"||typeof e=="object"&&e.ngMetadataName==="InjectionToken"}function kl(e,t){for(let n of e)Array.isArray(n)?kl(n,t):n&&$l(n)?kl(n.\u0275providers,t):t(n)}function ot(e,t){let n;e instanceof or?(Qi(e),n=e):n=new Rl(e);let r,s=Xt(n),i=St(void 0);try{return t()}finally{Xt(s),St(i)}}function fp(){return np()!==void 0||fo()!=null}var Ht=0,oe=1,le=2,Qe=3,Ot=4,Lt=5,Qr=6,Jr=7,Ue=8,Bn=9,vn=10,Pe=11,ei=12,iu=13,cr=14,Dt=15,jn=16,lr=17,Jt=18,os=19,su=20,hn=21,sa=22,as=23,It=24,ur=25,dr=26,at=27,pp=1,ou=6,Vn=7,cs=8,hr=9,qe=10;function en(e){return Array.isArray(e)&&typeof e[pp]=="object"}function Ut(e){return Array.isArray(e)&&e[pp]===!0}function au(e){return(e.flags&4)!==0}function Hn(e){return e.componentOffset>-1}function oa(e){return(e.flags&1)===1}function tn(e){return!!e.template}function ti(e){return(e[le]&512)!==0}function fr(e){return(e[le]&256)===256}var gp="svg",mp="math";function kt(e){for(;Array.isArray(e);)e=e[Ht];return e}function cu(e,t){return kt(t[e])}function nn(e,t){return kt(t[e.index])}function ls(e,t){return e.data[t]}function Nt(e,t){let n=t[e];return en(n)?n:n[Ht]}function _p(e){return(e[le]&4)===4}function aa(e){return(e[le]&128)===128}function vp(e){return Ut(e[Qe])}function rn(e,t){return t==null?null:e[t]}function lu(e){e[lr]=0}function uu(e){e[le]&1024||(e[le]|=1024,aa(e)&&ni(e))}function yp(e,t){for(;e>0;)t=t[cr],e--;return t}function us(e){return!!(e[le]&9216||e[It]?.dirty)}function ca(e){e[vn].changeDetectionScheduler?.notify(8),e[le]&64&&(e[le]|=1024),us(e)&&ni(e)}function ni(e){e[vn].changeDetectionScheduler?.notify(0);let t=Nn(e);for(;t!==null&&!(t[le]&8192||(t[le]|=8192,!aa(t)));)t=Nn(t)}function du(e,t){if(fr(e))throw new te(911,!1);e[hn]===null&&(e[hn]=[]),e[hn].push(t)}function Cp(e,t){if(e[hn]===null)return;let n=e[hn].indexOf(t);n!==-1&&e[hn].splice(n,1)}function Nn(e){let t=e[Qe];return Ut(t)?t[Qe]:t}function hu(e){return e[Jr]??=[]}function fu(e){return e.cleanup??=[]}function bp(e,t,n,r){let s=hu(t);s.push(n),e.firstCreatePass&&fu(e).push(r,s.length-1)}var ge={lFrame:Np(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Nl=!1;function wp(){return ge.lFrame.elementDepthCount}function Sp(){ge.lFrame.elementDepthCount++}function pu(){ge.lFrame.elementDepthCount--}function Ep(){return ge.bindingsEnabled}function Dp(){return ge.skipHydrationRootTNode!==null}function gu(e){return ge.skipHydrationRootTNode===e}function mu(){ge.skipHydrationRootTNode=null}function be(){return ge.lFrame.lView}function ct(){return ge.lFrame.tView}function nt(e){return ge.lFrame.contextLView=e,e[Ue]}function rt(e){return ge.lFrame.contextLView=null,e}function lt(){let e=_u();for(;e!==null&&e.type===64;)e=e.parent;return e}function _u(){return ge.lFrame.currentTNode}function Ip(){let e=ge.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}function ri(e,t){let n=ge.lFrame;n.currentTNode=e,n.isParent=t}function vu(){return ge.lFrame.isParent}function Mp(){ge.lFrame.isParent=!1}function yu(){return Nl}function Cu(e){let t=Nl;return Nl=e,t}function Tp(){return ge.lFrame.bindingIndex}function xp(e){return ge.lFrame.bindingIndex=e}function ii(){return ge.lFrame.bindingIndex++}function bu(e){let t=ge.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function Ap(){return ge.lFrame.inI18n}function Rp(e,t){let n=ge.lFrame;n.bindingIndex=n.bindingRootIndex=e,la(t)}function Op(){return ge.lFrame.currentDirectiveIndex}function la(e){ge.lFrame.currentDirectiveIndex=e}function Lp(e){let t=ge.lFrame.currentDirectiveIndex;return t===-1?null:e[t]}function wu(){return ge.lFrame.currentQueryIndex}function ua(e){ge.lFrame.currentQueryIndex=e}function d0(e){let t=e[oe];return t.type===2?t.declTNode:t.type===1?e[Lt]:null}function Su(e,t,n){if(n&4){let s=t,i=e;for(;s=s.parent,s===null&&!(n&1);)if(s=d0(i),s===null||(i=i[cr],s.type&10))break;if(s===null)return!1;t=s,e=i}let r=ge.lFrame=kp();return r.currentTNode=t,r.lView=e,!0}function da(e){let t=kp(),n=e[oe];ge.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function kp(){let e=ge.lFrame,t=e===null?null:e.child;return t===null?Np(e):t}function Np(e){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return e!==null&&(e.child=t),t}function Pp(){let e=ge.lFrame;return ge.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}var Eu=Pp;function ha(){let e=Pp();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function Fp(e){return(ge.lFrame.contextLView=yp(e,ge.lFrame.contextLView))[Ue]}function yn(){return ge.lFrame.selectedIndex}function Un(e){ge.lFrame.selectedIndex=e}function Du(){let e=ge.lFrame;return ls(e.tView,e.selectedIndex)}function Bp(){return ge.lFrame.currentNamespace}var jp=!0;function fa(){return jp}function pa(e){jp=e}function Pl(e,t=null,n=null,r){let s=Iu(e,t,n,r);return s.resolveInjectorInitializers(),s}function Iu(e,t=null,n=null,r,s=new Set){let i=[n||Et,lp(e)];return r=r||(typeof e=="object"?void 0:fn(e)),new or(i,t||ss(),r||null,s)}var Rt=class e{static THROW_IF_NOT_FOUND=nr;static NULL=new es;static create(t,n){if(Array.isArray(t))return Pl({name:""},n,t,"");{let r=t.name??"";return Pl({name:r},t.parent,t.providers,r)}}static \u0275prov=ee({token:e,providedIn:"any",factory:()=>ae(Xl)});static __NG_ELEMENT_ID__=-1},Ke=new ne(""),$t=(()=>{class e{static __NG_ELEMENT_ID__=h0;static __NG_ENV_ID__=n=>n}return e})(),Fl=class extends $t{_lView;constructor(t){super(),this._lView=t}get destroyed(){return fr(this._lView)}onDestroy(t){let n=this._lView;return du(n,t),()=>Cp(n,t)}};function h0(){return new Fl(be())}var Vt=class{_console=console;handleError(t){this._console.error("ERROR",t)}},Mt=new ne("",{providedIn:"root",factory:()=>{let e=H(Xe),t;return n=>{e.destroyed&&!t?setTimeout(()=>{throw n}):(t??=e.get(Vt),t.handleError(n))}}}),Vp={provide:mn,useValue:()=>void H(Vt),multi:!0},f0=new ne("",{providedIn:"root",factory:()=>{let e=H(Ke).defaultView;if(!e)return;let t=H(Mt),n=i=>{t(i.reason),i.preventDefault()},r=i=>{i.error?t(i.error):t(new Error(i.message,{cause:i})),i.preventDefault()},s=()=>{e.addEventListener("unhandledrejection",n),e.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(s):s(),H($t).onDestroy(()=>{e.removeEventListener("error",r),e.removeEventListener("unhandledrejection",n)})}});function Mu(){return _n([cp(()=>void H(f0))])}function Tu(e){return typeof e=="function"&&e[ht]!==void 0}function Ae(e,t){let[n,r,s]=ll(e,t?.equal),i=n,o=i[ht];return i.set=r,i.update=s,i.asReadonly=Hp.bind(i),i}function Hp(){let e=this[ht];if(e.readonlyFn===void 0){let t=()=>this();t[ht]=e,e.readonlyFn=t}return e.readonlyFn}function xu(e){return Tu(e)&&typeof e.set=="function"}var ga=(()=>{class e{view;node;constructor(n,r){this.view=n,this.node=r}static __NG_ELEMENT_ID__=p0}return e})();function p0(){return new ga(be(),lt())}var pn=class{},ds=new ne("",{providedIn:"root",factory:()=>!1});var Au=new ne(""),Ru=new ne(""),sn=(()=>{class e{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new it(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new pe(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=ee({token:e,providedIn:"root",factory:()=>new e})}return e})(),ma=(()=>{class e{internalPendingTasks=H(sn);scheduler=H(pn);errorHandler=H(Mt);add(){let n=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(n)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(n))}}run(n){let r=this.add();n().catch(this.errorHandler).finally(r)}static \u0275prov=ee({token:e,providedIn:"root",factory:()=>new e})}return e})();function hs(...e){}var Ou=(()=>{class e{static \u0275prov=ee({token:e,providedIn:"root",factory:()=>new Bl})}return e})(),Bl=class{dirtyEffectCount=0;queues=new Map;add(t){this.enqueue(t),this.schedule(t)}schedule(t){t.dirty&&this.dirtyEffectCount++}remove(t){let n=t.zone,r=this.queues.get(n);r.has(t)&&(r.delete(t),t.dirty&&this.dirtyEffectCount--)}enqueue(t){let n=t.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(t)||r.add(t)}flush(){for(;this.dirtyEffectCount>0;){let t=!1;for(let[n,r]of this.queues)n===null?t||=this.flushQueue(r):t||=n.run(()=>this.flushQueue(r));t||(this.dirtyEffectCount=0)}}flushQueue(t){let n=!1;for(let r of t)r.dirty&&(this.dirtyEffectCount--,n=!0,r.run());return n}};function bs(e){return{toString:e}.toString()}function S0(e){return typeof e=="function"}var Sa=class{previousValue;currentValue;firstChange;constructor(t,n,r){this.previousValue=t,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function yg(e,t,n,r){t!==null?t.applyValueToInputSignal(t,r):e[n]=r}var pi=(()=>{let e=()=>Cg;return e.ngInherit=!0,e})();function Cg(e){return e.type.prototype.ngOnChanges&&(e.setInput=D0),E0}function E0(){let e=wg(this),t=e?.current;if(t){let n=e.previous;if(n===Pn)e.previous=t;else for(let r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function D0(e,t,n,r,s){let i=this.declaredInputs[r],o=wg(e)||I0(e,{previous:Pn,current:null}),a=o.current||(o.current={}),c=o.previous,l=c[i];a[i]=new Sa(l&&l.currentValue,n,c===Pn),yg(e,t,s,n)}var bg="__ngSimpleChanges__";function wg(e){return e[bg]||null}function I0(e,t){return e[bg]=t}var Up=[];var Te=function(e,t=null,n){for(let r=0;r<Up.length;r++){let s=Up[r];s(e,t,n)}};function M0(e,t,n){let{ngOnChanges:r,ngOnInit:s,ngDoCheck:i}=t.type.prototype;if(r){let o=Cg(t);(n.preOrderHooks??=[]).push(e,o),(n.preOrderCheckHooks??=[]).push(e,o)}s&&(n.preOrderHooks??=[]).push(0-e,s),i&&((n.preOrderHooks??=[]).push(e,i),(n.preOrderCheckHooks??=[]).push(e,i))}function T0(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){let i=e.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:p}=i;o&&(e.contentHooks??=[]).push(-n,o),a&&((e.contentHooks??=[]).push(n,a),(e.contentCheckHooks??=[]).push(n,a)),c&&(e.viewHooks??=[]).push(-n,c),l&&((e.viewHooks??=[]).push(n,l),(e.viewCheckHooks??=[]).push(n,l)),p!=null&&(e.destroyHooks??=[]).push(n,p)}}function va(e,t,n){Sg(e,t,3,n)}function ya(e,t,n,r){(e[le]&3)===n&&Sg(e,t,n,r)}function Lu(e,t){let n=e[le];(n&3)===t&&(n&=16383,n+=1,e[le]=n)}function Sg(e,t,n,r){let s=r!==void 0?e[lr]&65535:0,i=r??-1,o=t.length-1,a=0;for(let c=s;c<o;c++)if(typeof t[c+1]=="number"){if(a=t[c],r!=null&&a>=r)break}else t[c]<0&&(e[lr]+=65536),(a<i||i==-1)&&(x0(e,n,t,c),e[lr]=(e[lr]&4294901760)+c+2),c++}function $p(e,t){Te(4,e,t);let n=ce(null);try{t.call(e)}finally{ce(n),Te(5,e,t)}}function x0(e,t,n,r){let s=n[r]<0,i=n[r+1],o=s?-n[r]:n[r],a=e[o];s?e[le]>>14<e[lr]>>16&&(e[le]&3)===t&&(e[le]+=16384,$p(a,i)):$p(a,i)}var oi=-1,gr=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(t,n,r,s){this.factory=t,this.name=s,this.canSeeViewProviders=n,this.injectImpl=r}};function A0(e){return(e.flags&8)!==0}function R0(e){return(e.flags&16)!==0}function O0(e,t,n){let r=0;for(;r<n.length;){let s=n[r];if(typeof s=="number"){if(s!==0)break;r++;let i=n[r++],o=n[r++],a=n[r++];e.setAttribute(t,o,a,i)}else{let i=s,o=n[++r];k0(i)?e.setProperty(t,i,o):e.setAttribute(t,i,o),r++}}return r}function L0(e){return e===3||e===4||e===6}function k0(e){return e.charCodeAt(0)===64}function ai(e,t){if(!(t===null||t.length===0))if(e===null||e.length===0)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){let s=t[r];typeof s=="number"?n=s:n===0||(n===-1||n===2?Wp(e,n,s,null,t[++r]):Wp(e,n,s,null,null))}}return e}function Wp(e,t,n,r,s){let i=0,o=e.length;if(t===-1)o=-1;else for(;i<e.length;){let a=e[i++];if(typeof a=="number"){if(a===t){o=-1;break}else if(a>t){o=i-1;break}}}for(;i<e.length;){let a=e[i];if(typeof a=="number")break;if(a===n){s!==null&&(e[i+1]=s);return}i++,s!==null&&i++}o!==-1&&(e.splice(o,0,t),i=o+1),e.splice(i++,0,n),s!==null&&e.splice(i++,0,s)}function Eg(e){return e!==oi}function Ea(e){return e&32767}function N0(e){return e>>16}function Da(e,t){let n=N0(e),r=t;for(;n>0;)r=r[cr],n--;return r}var $u=!0;function zp(e){let t=$u;return $u=e,t}var P0=256,Dg=P0-1,Ig=5,F0=0,on={};function B0(e,t,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(ar)&&(r=n[ar]),r==null&&(r=n[ar]=F0++);let s=r&Dg,i=1<<s;t.data[e+(s>>Ig)]|=i}function Ia(e,t){let n=Mg(e,t);if(n!==-1)return n;let r=t[oe];r.firstCreatePass&&(e.injectorIndex=t.length,ku(r.data,e),ku(t,null),ku(r.blueprint,null));let s=bd(e,t),i=e.injectorIndex;if(Eg(s)){let o=Ea(s),a=Da(s,t),c=a[oe].data;for(let l=0;l<8;l++)t[i+l]=a[o+l]|c[o+l]}return t[i+8]=s,i}function ku(e,t){e.push(0,0,0,0,0,0,0,0,t)}function Mg(e,t){return e.injectorIndex===-1||e.parent&&e.parent.injectorIndex===e.injectorIndex||t[e.injectorIndex+8]===null?-1:e.injectorIndex}function bd(e,t){if(e.parent&&e.parent.injectorIndex!==-1)return e.parent.injectorIndex;let n=0,r=null,s=t;for(;s!==null;){if(r=Og(s),r===null)return oi;if(n++,s=s[cr],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return oi}function Wu(e,t,n){B0(e,t,n)}function Tg(e,t,n){if(n&8||e!==void 0)return e;na(t,"NodeInjector")}function xg(e,t,n,r){if(n&8&&r===void 0&&(r=null),(n&3)===0){let s=e[Bn],i=St(void 0);try{return s?s.get(t,r,n&8):Yl(t,r,n&8)}finally{St(i)}}return Tg(r,t,n)}function Ag(e,t,n,r=0,s){if(e!==null){if(t[le]&2048&&!(r&2)){let o=U0(e,t,n,r,on);if(o!==on)return o}let i=Rg(e,t,n,r,on);if(i!==on)return i}return xg(t,n,r,s)}function Rg(e,t,n,r,s){let i=V0(n);if(typeof i=="function"){if(!Su(t,e,r))return r&1?Tg(s,n,r):xg(t,n,r,s);try{let o;if(o=i(r),o==null&&!(r&8))na(n);else return o}finally{Eu()}}else if(typeof i=="number"){let o=null,a=Mg(e,t),c=oi,l=r&1?t[Dt][Lt]:null;for((a===-1||r&4)&&(c=a===-1?bd(e,t):t[a+8],c===oi||!qp(r,!1)?a=-1:(o=t[oe],a=Ea(c),t=Da(c,t)));a!==-1;){let p=t[oe];if(Gp(i,a,p.data)){let m=j0(a,t,n,o,r,l);if(m!==on)return m}c=t[a+8],c!==oi&&qp(r,t[oe].data[a+8]===l)&&Gp(i,a,t)?(o=p,a=Ea(c),t=Da(c,t)):a=-1}}return s}function j0(e,t,n,r,s,i){let o=t[oe],a=o.data[e+8],c=r==null?Hn(a)&&$u:r!=o&&(a.type&3)!==0,l=s&1&&i===a,p=Ca(a,o,n,c,l);return p!==null?gs(t,o,p,a,s):on}function Ca(e,t,n,r,s){let i=e.providerIndexes,o=t.data,a=i&1048575,c=e.directiveStart,l=e.directiveEnd,p=i>>20,m=r?a:a+p,_=s?a+p:l;for(let d=m;d<_;d++){let u=o[d];if(d<c&&n===u||d>=c&&u.type===n)return d}if(s){let d=o[c];if(d&&tn(d)&&d.type===n)return c}return null}function gs(e,t,n,r,s){let i=e[n],o=t.data;if(i instanceof gr){let a=i;if(a.resolving){let d=Jf(o[n]);throw Kl(d)}let c=zp(a.canSeeViewProviders);a.resolving=!0;let l=o[n].type||o[n],p,m=a.injectImpl?St(a.injectImpl):null,_=Su(e,r,0);try{i=e[n]=a.factory(void 0,s,o,e,r),t.firstCreatePass&&n>=r.directiveStart&&M0(n,o[n],t)}finally{m!==null&&St(m),zp(c),a.resolving=!1,Eu()}}return i}function V0(e){if(typeof e=="string")return e.charCodeAt(0)||0;let t=e.hasOwnProperty(ar)?e[ar]:void 0;return typeof t=="number"?t>=0?t&Dg:H0:t}function Gp(e,t,n){let r=1<<e;return!!(n[t+(e>>Ig)]&r)}function qp(e,t){return!(e&2)&&!(e&1&&t)}var pr=class{_tNode;_lView;constructor(t,n){this._tNode=t,this._lView=n}get(t,n,r){return Ag(this._tNode,this._lView,t,rr(r),n)}};function H0(){return new pr(lt(),be())}function zn(e){return bs(()=>{let t=e.prototype.constructor,n=t[Ji]||zu(t),r=Object.prototype,s=Object.getPrototypeOf(e.prototype).constructor;for(;s&&s!==r;){let i=s[Ji]||zu(s);if(i&&i!==n)return i;s=Object.getPrototypeOf(s)}return i=>new i})}function zu(e){return Hl(e)?()=>{let t=zu(st(e));return t&&t()}:ir(e)}function U0(e,t,n,r,s){let i=e,o=t;for(;i!==null&&o!==null&&o[le]&2048&&!ti(o);){let a=Rg(i,o,n,r|2,on);if(a!==on)return a;let c=i.parent;if(!c){let l=o[su];if(l){let p=l.get(n,on,r);if(p!==on)return p}c=Og(o),o=o[cr]}i=c}return s}function Og(e){let t=e[oe],n=t.type;return n===2?t.declTNode:n===1?e[Lt]:null}function $0(){return gi(lt(),be())}function gi(e,t){return new zt(nn(e,t))}var zt=(()=>{class e{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=$0}return e})();function W0(e){return e instanceof zt?e.nativeElement:e}function z0(){return this._results[Symbol.iterator]()}var Ma=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Ne}constructor(t=!1){this._emitDistinctChangesOnly=t}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,n){return this._results.reduce(t,n)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,n){this.dirty=!1;let r=ip(t);(this._changesDetected=!rp(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(t){this._onDirty=t}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=z0};function Lg(e){return(e.flags&128)===128}var wd=(function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e})(wd||{}),kg=new Map,G0=0;function q0(){return G0++}function K0(e){kg.set(e[os],e)}function Gu(e){kg.delete(e[os])}var Kp="__ngContext__";function ci(e,t){en(t)?(e[Kp]=t[os],K0(t)):e[Kp]=t}function Ng(e){return Fg(e[ei])}function Pg(e){return Fg(e[Ot])}function Fg(e){for(;e!==null&&!Ut(e);)e=e[Ot];return e}var qu;function Sd(e){qu=e}function Bg(){if(qu!==void 0)return qu;if(typeof document<"u")return document;throw new te(210,!1)}var $a=new ne("",{providedIn:"root",factory:()=>Y0}),Y0="ng",Wa=new ne(""),mi=new ne("",{providedIn:"platform",factory:()=>"unknown"});var za=new ne("",{providedIn:"root",factory:()=>Bg().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var Z0="h",X0="b";var jg="r";var Vg="di";var Hg=!1,Ug=new ne("",{providedIn:"root",factory:()=>Hg});var Q0=(e,t,n,r)=>{};function J0(e,t,n,r){Q0(e,t,n,r)}function Ed(e){return(e.flags&32)===32}var eC=()=>null;function $g(e,t,n=!1){return eC(e,t,n)}function Wg(e,t){let n=e.contentQueries;if(n!==null){let r=ce(null);try{for(let s=0;s<n.length;s+=2){let i=n[s],o=n[s+1];if(o!==-1){let a=e.data[o];ua(i),a.contentQueries(2,t[o],o)}}}finally{ce(r)}}}function Ku(e,t,n){ua(0);let r=ce(null);try{t(e,n)}finally{ce(r)}}function zg(e,t,n){if(au(t)){let r=ce(null);try{let s=t.directiveStart,i=t.directiveEnd;for(let o=s;o<i;o++){let a=e.data[o];if(a.contentQueries){let c=n[o];a.contentQueries(1,c,o)}}}finally{ce(r)}}}var Cn=(function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e})(Cn||{});var Yu=class{changingThisBreaksApplicationSecurity;constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${jl})`}};function Gg(e){return e instanceof Yu?e.changingThisBreaksApplicationSecurity:e}function qg(e){return e instanceof Function?e():e}function tC(e,t,n){let r=e.length;for(;;){let s=e.indexOf(t,n);if(s===-1)return s;if(s===0||e.charCodeAt(s-1)<=32){let i=t.length;if(s+i===r||e.charCodeAt(s+i)<=32)return s}n=s+1}}var Kg="ng-template";function nC(e,t,n,r){let s=0;if(r){for(;s<t.length&&typeof t[s]=="string";s+=2)if(t[s]==="class"&&tC(t[s+1].toLowerCase(),n,0)!==-1)return!0}else if(Dd(e))return!1;if(s=t.indexOf(1,s),s>-1){let i;for(;++s<t.length&&typeof(i=t[s])=="string";)if(i.toLowerCase()===n)return!0}return!1}function Dd(e){return e.type===4&&e.value!==Kg}function rC(e,t,n){let r=e.type===4&&!n?Kg:e.value;return t===r}function iC(e,t,n){let r=4,s=e.attrs,i=s!==null?aC(s):0,o=!1;for(let a=0;a<t.length;a++){let c=t[a];if(typeof c=="number"){if(!o&&!Wt(r)&&!Wt(c))return!1;if(o&&Wt(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!rC(e,c,n)||c===""&&t.length===1){if(Wt(r))return!1;o=!0}}else if(r&8){if(s===null||!nC(e,s,c,n)){if(Wt(r))return!1;o=!0}}else{let l=t[++a],p=sC(c,s,Dd(e),n);if(p===-1){if(Wt(r))return!1;o=!0;continue}if(l!==""){let m;if(p>i?m="":m=s[p+1].toLowerCase(),r&2&&l!==m){if(Wt(r))return!1;o=!0}}}}return Wt(r)||o}function Wt(e){return(e&1)===0}function sC(e,t,n,r){if(t===null)return-1;let s=0;if(r||!n){let i=!1;for(;s<t.length;){let o=t[s];if(o===e)return s;if(o===3||o===6)i=!0;else if(o===1||o===2){let a=t[++s];for(;typeof a=="string";)a=t[++s];continue}else{if(o===4)break;if(o===0){s+=4;continue}}s+=i?1:2}return-1}else return cC(t,e)}function oC(e,t,n=!1){for(let r=0;r<t.length;r++)if(iC(e,t[r],n))return!0;return!1}function aC(e){for(let t=0;t<e.length;t++){let n=e[t];if(L0(n))return t}return e.length}function cC(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){let r=e[n];if(typeof r=="number")return-1;if(r===t)return n;n++}return-1}function Yp(e,t){return e?":not("+t.trim()+")":t}function lC(e){let t=e[0],n=1,r=2,s="",i=!1;for(;n<e.length;){let o=e[n];if(typeof o=="string")if(r&2){let a=e[++n];s+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?s+="."+o:r&4&&(s+=" "+o);else s!==""&&!Wt(o)&&(t+=Yp(i,s),s=""),r=o,i=i||!Wt(r);n++}return s!==""&&(t+=Yp(i,s)),t}function uC(e){return e.map(lC).join(",")}function dC(e){let t=[],n=[],r=1,s=2;for(;r<e.length;){let i=e[r];if(typeof i=="string")s===2?i!==""&&t.push(i,e[++r]):s===8&&n.push(i);else{if(!Wt(s))break;s=i}r++}return n.length&&t.push(1,...n),t}var Gt={};function hC(e,t){return e.createText(t)}function fC(e,t,n){e.setValue(t,n)}function Yg(e,t,n){return e.createElement(t,n)}function Ta(e,t,n,r,s){e.insertBefore(t,n,r,s)}function Zg(e,t,n){e.appendChild(t,n)}function Zp(e,t,n,r,s){r!==null?Ta(e,t,n,r,s):Zg(e,t,n)}function Xg(e,t,n,r){e.removeChild(null,t,n,r)}function pC(e,t,n){e.setAttribute(t,"style",n)}function gC(e,t,n){n===""?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function Qg(e,t,n){let{mergedAttrs:r,classes:s,styles:i}=n;r!==null&&O0(e,t,r),s!==null&&gC(e,t,s),i!==null&&pC(e,t,i)}function Id(e,t,n,r,s,i,o,a,c,l,p){let m=at+r,_=m+s,d=mC(m,_),u=typeof l=="function"?l():l;return d[oe]={type:e,blueprint:d,template:n,queries:null,viewQuery:a,declTNode:t,data:d.slice().fill(null,m),bindingStartIndex:m,expandoStartIndex:_,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof i=="function"?i():i,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:u,incompleteFirstPass:!1,ssrId:p}}function mC(e,t){let n=[];for(let r=0;r<t;r++)n.push(r<e?null:Gt);return n}function _C(e){let t=e.tView;return t===null||t.incompleteFirstPass?e.tView=Id(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):t}function Md(e,t,n,r,s,i,o,a,c,l,p){let m=t.blueprint.slice();return m[Ht]=s,m[le]=r|4|128|8|64|1024,(l!==null||e&&e[le]&2048)&&(m[le]|=2048),lu(m),m[Qe]=m[cr]=e,m[Ue]=n,m[vn]=o||e&&e[vn],m[Pe]=a||e&&e[Pe],m[Bn]=c||e&&e[Bn]||null,m[Lt]=i,m[os]=q0(),m[Qr]=p,m[su]=l,m[Dt]=t.type==2?e[Dt]:m,m}function vC(e,t,n){let r=nn(t,e),s=_C(n),i=e[vn].rendererFactory,o=Td(e,Md(e,s,null,Jg(n),r,t,null,i.createRenderer(r,n),null,null,null));return e[t.index]=o}function Jg(e){let t=16;return e.signals?t=4096:e.onPush&&(t=64),t}function em(e,t,n,r){if(n===0)return-1;let s=t.length;for(let i=0;i<n;i++)t.push(r),e.blueprint.push(r),e.data.push(null);return s}function Td(e,t){return e[ei]?e[iu][Ot]=t:e[ei]=t,e[iu]=t,t}function Z(e=1){tm(ct(),be(),yn()+e,!1)}function tm(e,t,n,r){if(!r)if((t[le]&3)===3){let i=e.preOrderCheckHooks;i!==null&&va(t,i,n)}else{let i=e.preOrderHooks;i!==null&&ya(t,i,0,n)}Un(n)}var Ga=(function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e})(Ga||{});function Zu(e,t,n,r){let s=ce(null);try{let[i,o,a]=e.inputs[n],c=null;(o&Ga.SignalBased)!==0&&(c=t[i][ht]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(t,r)),e.setInput!==null?e.setInput(t,c,r,n,i):yg(t,c,i,r)}finally{ce(s)}}var bn=(function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e})(bn||{}),yC;function xd(e,t){return yC(e,t)}var li=new Set,qa=(function(e){return e[e.CHANGE_DETECTION=0]="CHANGE_DETECTION",e[e.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",e})(qa||{}),vr=new ne(""),Xp=new Set;function wn(e){Xp.has(e)||(Xp.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}var nm=!1,Xu=class extends Ne{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(t=!1){super(),this.__isAsync=t,fp()&&(this.destroyRef=H($t,{optional:!0})??void 0,this.pendingTasks=H(sn,{optional:!0})??void 0)}emit(t){let n=ce(null);try{super.next(t)}finally{ce(n)}}subscribe(t,n,r){let s=t,i=n||(()=>null),o=r;if(t&&typeof t=="object"){let c=t;s=c.next?.bind(c),i=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(i=this.wrapInTimeout(i),s&&(s=this.wrapInTimeout(s)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:s,error:i,complete:o});return t instanceof je&&t.add(a),a}wrapInTimeout(t){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{t(n)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},$e=Xu;function rm(e){let t,n;function r(){e=hs;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),t!==void 0&&clearTimeout(t)}catch{}}return t=setTimeout(()=>{e(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{e(),r()})),()=>r()}function Qp(e){return queueMicrotask(()=>e()),()=>{e=hs}}var Ad="isAngularZone",xa=Ad+"_ID",CC=0,Fe=class e{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new $e(!1);onMicrotaskEmpty=new $e(!1);onStable=new $e(!1);onError=new $e(!1);constructor(t){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:s=!1,scheduleInRootZone:i=nm}=t;if(typeof Zone>"u")throw new te(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!s&&r,o.shouldCoalesceRunChangeDetection=s,o.callbackScheduled=!1,o.scheduleInRootZone=i,SC(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Ad)===!0}static assertInAngularZone(){if(!e.isInAngularZone())throw new te(909,!1)}static assertNotInAngularZone(){if(e.isInAngularZone())throw new te(909,!1)}run(t,n,r){return this._inner.run(t,n,r)}runTask(t,n,r,s){let i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+s,t,bC,hs,hs);try{return i.runTask(o,n,r)}finally{i.cancelTask(o)}}runGuarded(t,n,r){return this._inner.runGuarded(t,n,r)}runOutsideAngular(t){return this._outer.run(t)}},bC={};function Rd(e){if(e._nesting==0&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function wC(e){if(e.isCheckStableRunning||e.callbackScheduled)return;e.callbackScheduled=!0;function t(){rm(()=>{e.callbackScheduled=!1,Qu(e),e.isCheckStableRunning=!0,Rd(e),e.isCheckStableRunning=!1})}e.scheduleInRootZone?Zone.root.run(()=>{t()}):e._outer.run(()=>{t()}),Qu(e)}function SC(e){let t=()=>{wC(e)},n=CC++;e._inner=e._inner.fork({name:"angular",properties:{[Ad]:!0,[xa]:n,[xa+n]:!0},onInvokeTask:(r,s,i,o,a,c)=>{if(EC(c))return r.invokeTask(i,o,a,c);try{return Jp(e),r.invokeTask(i,o,a,c)}finally{(e.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||e.shouldCoalesceRunChangeDetection)&&t(),eg(e)}},onInvoke:(r,s,i,o,a,c,l)=>{try{return Jp(e),r.invoke(i,o,a,c,l)}finally{e.shouldCoalesceRunChangeDetection&&!e.callbackScheduled&&!DC(c)&&t(),eg(e)}},onHasTask:(r,s,i,o)=>{r.hasTask(i,o),s===i&&(o.change=="microTask"?(e._hasPendingMicrotasks=o.microTask,Qu(e),Rd(e)):o.change=="macroTask"&&(e.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,s,i,o)=>(r.handleError(i,o),e.runOutsideAngular(()=>e.onError.emit(o)),!1)})}function Qu(e){e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&e.callbackScheduled===!0?e.hasPendingMicrotasks=!0:e.hasPendingMicrotasks=!1}function Jp(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function eg(e){e._nesting--,Rd(e)}var Aa=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new $e;onMicrotaskEmpty=new $e;onStable=new $e;onError=new $e;run(t,n,r){return t.apply(n,r)}runGuarded(t,n,r){return t.apply(n,r)}runOutsideAngular(t){return t()}runTask(t,n,r,s){return t.apply(n,r)}};function EC(e){return im(e,"__ignore_ng_zone__")}function DC(e){return im(e,"__scheduler_tick__")}function im(e,t){return!Array.isArray(e)||e.length!==1?!1:e[0]?.data?.[t]===!0}var Od=(()=>{class e{impl=null;execute(){this.impl?.execute()}static \u0275prov=ee({token:e,providedIn:"root",factory:()=>new e})}return e})(),sm=[0,1,2,3],om=(()=>{class e{ngZone=H(Fe);scheduler=H(pn);errorHandler=H(Vt,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){H(vr,{optional:!0})}execute(){let n=this.sequences.size>0;n&&Te(16),this.executing=!0;for(let r of sm)for(let s of this.sequences)if(!(s.erroredOrDestroyed||!s.hooks[r]))try{s.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let i=s.hooks[r];return i(s.pipelinedValue)},s.snapshot))}catch(i){s.erroredOrDestroyed=!0,this.errorHandler?.handleError(i)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),n&&Te(17)}register(n){let{view:r}=n;r!==void 0?((r[ur]??=[]).push(n),ni(r),r[le]|=8192):this.executing?this.deferredRegistrations.add(n):this.addSequence(n)}addSequence(n){this.sequences.add(n),this.scheduler.notify(7)}unregister(n){this.executing&&this.sequences.has(n)?(n.erroredOrDestroyed=!0,n.pipelinedValue=void 0,n.once=!0):(this.sequences.delete(n),this.deferredRegistrations.delete(n))}maybeTrace(n,r){return r?r.run(qa.AFTER_NEXT_RENDER,n):n()}static \u0275prov=ee({token:e,providedIn:"root",factory:()=>new e})}return e})(),Ra=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(t,n,r,s,i,o=null){this.impl=t,this.hooks=n,this.view=r,this.once=s,this.snapshot=o,this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let t=this.view?.[ur];t&&(this.view[ur]=t.filter(n=>n!==this))}};function Ka(e,t){let n=t?.injector??H(Rt);return wn("NgAfterNextRender"),MC(e,n,t,!0)}function IC(e){return e instanceof Function?[void 0,void 0,e,void 0]:[e.earlyRead,e.write,e.mixedReadWrite,e.read]}function MC(e,t,n,r){let s=t.get(Od);s.impl??=t.get(om);let i=t.get(vr,null,{optional:!0}),o=n?.manualCleanup!==!0?t.get($t):null,a=t.get(ga,null,{optional:!0}),c=new Ra(s.impl,IC(e),a?.view,r,o,i?.snapshot(null));return s.impl.register(c),c}var TC=new ne("",{providedIn:"root",factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function am(e,t){let n=e.get(TC);if(Array.isArray(t))for(let r of t)n.queue.add(r);else n.queue.add(t);n.scheduler&&n.scheduler(e)}function xC(e,t){for(let[n,r]of t)am(e,r.animateFns)}function tg(e,t,n,r){let s=e?.[dr]?.enter;t!==null&&s&&s.has(n.index)&&xC(r,s)}function si(e,t,n,r,s,i,o,a){if(s!=null){let c,l=!1;Ut(s)?c=s:en(s)&&(l=!0,s=s[Ht]);let p=kt(s);e===0&&r!==null?(tg(a,r,i,n),o==null?Zg(t,r,p):Ta(t,r,p,o||null,!0)):e===1&&r!==null?(tg(a,r,i,n),Ta(t,r,p,o||null,!0)):e===2?ng(a,i,n,m=>{Xg(t,p,l,m)}):e===3&&ng(a,i,n,()=>{t.destroyNode(p)}),c!=null&&UC(t,e,n,c,i,r,o)}}function AC(e,t){cm(e,t),t[Ht]=null,t[Lt]=null}function RC(e,t,n,r,s,i){r[Ht]=s,r[Lt]=t,Za(e,r,n,1,s,i)}function cm(e,t){t[vn].changeDetectionScheduler?.notify(9),Za(e,t,t[Pe],2,null,null)}function OC(e){let t=e[ei];if(!t)return Nu(e[oe],e);for(;t;){let n=null;if(en(t))n=t[ei];else{let r=t[qe];r&&(n=r)}if(!n){for(;t&&!t[Ot]&&t!==e;)en(t)&&Nu(t[oe],t),t=t[Qe];t===null&&(t=e),en(t)&&Nu(t[oe],t),n=t&&t[Ot]}t=n}}function Ld(e,t){let n=e[hr],r=n.indexOf(t);n.splice(r,1)}function Ya(e,t){if(fr(t))return;let n=t[Pe];n.destroyNode&&Za(e,t,n,3,null,null),OC(t)}function Nu(e,t){if(fr(t))return;let n=ce(null);try{t[le]&=-129,t[le]|=256,t[It]&&Ki(t[It]),NC(e,t),kC(e,t),t[oe].type===1&&t[Pe].destroy();let r=t[jn];if(r!==null&&Ut(t[Qe])){r!==t[Qe]&&Ld(r,t);let s=t[Jt];s!==null&&s.detachView(e)}Gu(t)}finally{ce(n)}}function ng(e,t,n,r){let s=e?.[dr];if(s==null||s.leave==null||!s.leave.has(t.index))return r(!1);if(s.skipLeaveAnimations)return s.skipLeaveAnimations=!1,r(!1);e&&li.add(e),am(n,()=>{if(s.leave&&s.leave.has(t.index)){let o=s.leave.get(t.index),a=[];if(o)for(let c=0;c<o.animateFns.length;c++){let l=o.animateFns[c],{promise:p}=l();a.push(p)}s.running=Promise.allSettled(a),LC(e,r)}else e&&li.delete(e),r(!1)})}function LC(e,t){let n=e[dr]?.running;if(n){n.then(()=>{e[dr].running=void 0,li.delete(e),t(!0)});return}t(!1)}function kC(e,t){let n=e.cleanup,r=t[Jr];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let a=n[o+3];a>=0?r[a]():r[-a].unsubscribe(),o+=2}else{let a=r[n[o+1]];n[o].call(a)}r!==null&&(t[Jr]=null);let s=t[hn];if(s!==null){t[hn]=null;for(let o=0;o<s.length;o++){let a=s[o];a()}}let i=t[as];if(i!==null){t[as]=null;for(let o of i)o.destroy()}}function NC(e,t){let n;if(e!=null&&(n=e.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let s=t[n[r]];if(!(s instanceof gr)){let i=n[r+1];if(Array.isArray(i))for(let o=0;o<i.length;o+=2){let a=s[i[o]],c=i[o+1];Te(4,a,c);try{c.call(a)}finally{Te(5,a,c)}}else{Te(4,s,i);try{i.call(s)}finally{Te(5,s,i)}}}}}function PC(e,t,n){return FC(e,t.parent,n)}function FC(e,t,n){let r=t;for(;r!==null&&r.type&168;)t=r,r=t.parent;if(r===null)return n[Ht];if(Hn(r)){let{encapsulation:s}=e.data[r.directiveStart+r.componentOffset];if(s===Cn.None||s===Cn.Emulated)return null}return nn(r,n)}function BC(e,t,n){return VC(e,t,n)}function jC(e,t,n){return e.type&40?nn(e,n):null}var VC=jC,rg;function kd(e,t,n,r){let s=PC(e,r,t),i=t[Pe],o=r.parent||t[Lt],a=BC(o,r,t);if(s!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)Zp(i,s,n[c],a,!1);else Zp(i,s,n,a,!1);rg!==void 0&&rg(i,r,t,n,s)}function fs(e,t){if(t!==null){let n=t.type;if(n&3)return nn(t,e);if(n&4)return Ju(-1,e[t.index]);if(n&8){let r=t.child;if(r!==null)return fs(e,r);{let s=e[t.index];return Ut(s)?Ju(-1,s):kt(s)}}else{if(n&128)return fs(e,t.next);if(n&32)return xd(t,e)()||kt(e[t.index]);{let r=lm(e,t);if(r!==null){if(Array.isArray(r))return r[0];let s=Nn(e[Dt]);return fs(s,r)}else return fs(e,t.next)}}}return null}function lm(e,t){if(t!==null){let r=e[Dt][Lt],s=t.projection;return r.projection[s]}return null}function Ju(e,t){let n=qe+e+1;if(n<t.length){let r=t[n],s=r[oe].firstChild;if(s!==null)return fs(r,s)}return t[Vn]}function Nd(e,t,n,r,s,i,o){for(;n!=null;){let a=r[Bn];if(n.type===128){n=n.next;continue}let c=r[n.index],l=n.type;if(o&&t===0&&(c&&ci(kt(c),r),n.flags|=2),!Ed(n))if(l&8)Nd(e,t,n.child,r,s,i,!1),si(t,e,a,s,c,n,i,r);else if(l&32){let p=xd(n,r),m;for(;m=p();)si(t,e,a,s,m,n,i,r);si(t,e,a,s,c,n,i,r)}else l&16?HC(e,t,r,n,s,i):si(t,e,a,s,c,n,i,r);n=o?n.projectionNext:n.next}}function Za(e,t,n,r,s,i){Nd(n,r,e.firstChild,t,s,i,!1)}function HC(e,t,n,r,s,i){let o=n[Dt],c=o[Lt].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let p=c[l];si(t,e,n[Bn],s,p,r,i,n)}else{let l=c,p=o[Qe];Lg(r)&&(l.flags|=128),Nd(e,t,l,p,s,i,!0)}}function UC(e,t,n,r,s,i,o){let a=r[Vn],c=kt(r);a!==c&&si(t,e,n,i,a,s,o);for(let l=qe;l<r.length;l++){let p=r[l];Za(p[oe],p,e,t,i,a)}}function $C(e,t,n,r,s){if(t)s?e.addClass(n,r):e.removeClass(n,r);else{let i=r.indexOf("-")===-1?void 0:bn.DashCase;s==null?e.removeStyle(n,r,i):(typeof s=="string"&&s.endsWith("!important")&&(s=s.slice(0,-10),i|=bn.Important),e.setStyle(n,r,s,i))}}function um(e,t,n,r,s){let i=yn(),o=r&2;try{Un(-1),o&&t.length>at&&tm(e,t,at,!1),Te(o?2:0,s,n),n(r,s)}finally{Un(i),Te(o?3:1,s,n)}}function dm(e,t,n){ZC(e,t,n),(n.flags&64)===64&&XC(e,t,n)}function Pd(e,t,n=nn){let r=t.localNames;if(r!==null){let s=t.index+1;for(let i=0;i<r.length;i+=2){let o=r[i+1],a=o===-1?n(t,e):e[o];e[s++]=a}}}function WC(e,t,n,r){let i=r.get(Ug,Hg)||n===Cn.ShadowDom,o=e.selectRootElement(t,i);return zC(o),o}function zC(e){GC(e)}var GC=()=>null;function qC(e){return e==="class"?"className":e==="for"?"htmlFor":e==="formaction"?"formAction":e==="innerHtml"?"innerHTML":e==="readonly"?"readOnly":e==="tabindex"?"tabIndex":e}function hm(e,t,n,r,s,i){let o=t[oe];if(Fd(e,o,t,n,r)){Hn(e)&&YC(t,e.index);return}e.type&3&&(n=qC(n)),KC(e,t,n,r,s,i)}function KC(e,t,n,r,s,i){if(e.type&3){let o=nn(e,t);r=i!=null?i(r,e.value||"",n):r,s.setProperty(o,n,r)}else e.type&12}function YC(e,t){let n=Nt(t,e);n[le]&16||(n[le]|=64)}function ZC(e,t,n){let r=n.directiveStart,s=n.directiveEnd;Hn(n)&&vC(t,n,e.data[r+n.componentOffset]),e.firstCreatePass||Ia(n,t);let i=n.initialInputs;for(let o=r;o<s;o++){let a=e.data[o],c=gs(t,e,o,n);if(ci(c,t),i!==null&&eb(t,o-r,c,a,n,i),tn(a)){let l=Nt(n.index,t);l[Ue]=gs(t,e,o,n)}}}function XC(e,t,n){let r=n.directiveStart,s=n.directiveEnd,i=n.index,o=Op();try{Un(i);for(let a=r;a<s;a++){let c=e.data[a],l=t[a];la(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&QC(c,l)}}finally{Un(-1),la(o)}}function QC(e,t){e.hostBindings!==null&&e.hostBindings(1,t)}function JC(e,t){let n=e.directiveRegistry,r=null;if(n)for(let s=0;s<n.length;s++){let i=n[s];oC(t,i.selectors,!1)&&(r??=[],tn(i)?r.unshift(i):r.push(i))}return r}function eb(e,t,n,r,s,i){let o=i[t];if(o!==null)for(let a=0;a<o.length;a+=2){let c=o[a],l=o[a+1];Zu(r,n,c,l)}}function fm(e,t,n,r,s){let i=at+n,o=t[oe],a=s(o,t,e,r,n);t[i]=a,ri(e,!0);let c=e.type===2;return c?(Qg(t[Pe],a,e),(wp()===0||oa(e))&&ci(a,t),Sp()):ci(a,t),fa()&&(!c||!Ed(e))&&kd(o,t,a,e),e}function pm(e){let t=e;return vu()?Mp():(t=t.parent,ri(t,!1)),t}function tb(e,t){let n=e[Bn];if(!n)return;let r;try{r=n.get(Mt,null)}catch{r=null}r?.(t)}function Fd(e,t,n,r,s){let i=e.inputs?.[r],o=e.hostDirectiveInputs?.[r],a=!1;if(o)for(let c=0;c<o.length;c+=2){let l=o[c],p=o[c+1],m=t.data[l];Zu(m,n[l],p,s),a=!0}if(i)for(let c of i){let l=n[c],p=t.data[c];Zu(p,l,r,s),a=!0}return a}function nb(e,t){let n=Nt(t,e),r=n[oe];rb(r,n);let s=n[Ht];s!==null&&n[Qr]===null&&(n[Qr]=$g(s,n[Bn])),Te(18),Bd(r,n,n[Ue]),Te(19,n[Ue])}function rb(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}function Bd(e,t,n){da(t);try{let r=e.viewQuery;r!==null&&Ku(1,r,n);let s=e.template;s!==null&&um(e,t,s,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),t[Jt]?.finishViewCreation(e),e.staticContentQueries&&Wg(e,t),e.staticViewQueries&&Ku(2,e.viewQuery,n);let i=e.components;i!==null&&ib(t,i)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[le]&=-5,ha()}}function ib(e,t){for(let n=0;n<t.length;n++)nb(e,t[n])}function Xa(e,t,n,r){let s=ce(null);try{let i=t.tView,a=e[le]&4096?4096:16,c=Md(e,i,n,a,null,t,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=e[t.index];c[jn]=l;let p=e[Jt];return p!==null&&(c[Jt]=p.createEmbeddedView(i)),Bd(i,c,n),c}finally{ce(s)}}function ms(e,t){return!t||t.firstChild===null||Lg(e)}function _s(e,t,n,r,s=!1){for(;n!==null;){if(n.type===128){n=s?n.projectionNext:n.next;continue}let i=t[n.index];i!==null&&r.push(kt(i)),Ut(i)&&gm(i,r);let o=n.type;if(o&8)_s(e,t,n.child,r);else if(o&32){let a=xd(n,t),c;for(;c=a();)r.push(c)}else if(o&16){let a=lm(t,n);if(Array.isArray(a))r.push(...a);else{let c=Nn(t[Dt]);_s(c[oe],c,a,r,!0)}}n=s?n.projectionNext:n.next}return r}function gm(e,t){for(let n=qe;n<e.length;n++){let r=e[n],s=r[oe].firstChild;s!==null&&_s(r[oe],r,s,t)}e[Vn]!==e[Ht]&&t.push(e[Vn])}function mm(e){if(e[ur]!==null){for(let t of e[ur])t.impl.addSequence(t);e[ur].length=0}}var _m=[];function sb(e){return e[It]??ob(e)}function ob(e){let t=_m.pop()??Object.create(cb);return t.lView=e,t}function ab(e){e.lView[It]!==e&&(e.lView=null,_m.push(e))}var cb=ye(z({},Lr),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:e=>{ni(e.lView)},consumerOnSignalRead(){this.lView[It]=this}});function lb(e){let t=e[It]??Object.create(ub);return t.lView=e,t}var ub=ye(z({},Lr),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:e=>{let t=Nn(e.lView);for(;t&&!vm(t[oe]);)t=Nn(t);t&&uu(t)},consumerOnSignalRead(){this.lView[It]=this}});function vm(e){return e.type!==2}function ym(e){if(e[as]===null)return;let t=!0;for(;t;){let n=!1;for(let r of e[as])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));t=n&&!!(e[le]&8192)}}var db=100;function Cm(e,t=0){let r=e[vn].rendererFactory,s=!1;s||r.begin?.();try{hb(e,t)}finally{s||r.end?.()}}function hb(e,t){let n=yu();try{Cu(!0),ed(e,t);let r=0;for(;us(e);){if(r===db)throw new te(103,!1);r++,ed(e,1)}}finally{Cu(n)}}function fb(e,t,n,r){if(fr(t))return;let s=t[le],i=!1,o=!1;da(t);let a=!0,c=null,l=null;i||(vm(e)?(l=sb(t),c=Nr(l)):vo()===null?(a=!1,l=lb(t),c=Nr(l)):t[It]&&(Ki(t[It]),t[It]=null));try{lu(t),xp(e.bindingStartIndex),n!==null&&um(e,t,n,2,r);let p=(s&3)===3;if(!i)if(p){let d=e.preOrderCheckHooks;d!==null&&va(t,d,null)}else{let d=e.preOrderHooks;d!==null&&ya(t,d,0,null),Lu(t,0)}if(o||pb(t),ym(t),bm(t,0),e.contentQueries!==null&&Wg(e,t),!i)if(p){let d=e.contentCheckHooks;d!==null&&va(t,d)}else{let d=e.contentHooks;d!==null&&ya(t,d,1),Lu(t,1)}mb(e,t);let m=e.components;m!==null&&Sm(t,m,0);let _=e.viewQuery;if(_!==null&&Ku(2,_,r),!i)if(p){let d=e.viewCheckHooks;d!==null&&va(t,d)}else{let d=e.viewHooks;d!==null&&ya(t,d,2),Lu(t,2)}if(e.firstUpdatePass===!0&&(e.firstUpdatePass=!1),t[sa]){for(let d of t[sa])d();t[sa]=null}i||(mm(t),t[le]&=-73)}catch(p){throw i||ni(t),p}finally{l!==null&&(Gi(l,c),a&&ab(l)),ha()}}function bm(e,t){for(let n=Ng(e);n!==null;n=Pg(n))for(let r=qe;r<n.length;r++){let s=n[r];wm(s,t)}}function pb(e){for(let t=Ng(e);t!==null;t=Pg(t)){if(!(t[le]&2))continue;let n=t[hr];for(let r=0;r<n.length;r++){let s=n[r];uu(s)}}}function gb(e,t,n){Te(18);let r=Nt(t,e);wm(r,n),Te(19,r[Ue])}function wm(e,t){aa(e)&&ed(e,t)}function ed(e,t){let r=e[oe],s=e[le],i=e[It],o=!!(t===0&&s&16);if(o||=!!(s&64&&t===0),o||=!!(s&1024),o||=!!(i?.dirty&&qi(i)),o||=!1,i&&(i.dirty=!1),e[le]&=-9217,o)fb(r,e,r.template,e[Ue]);else if(s&8192){let a=ce(null);try{ym(e),bm(e,1);let c=r.components;c!==null&&Sm(e,c,1),mm(e)}finally{ce(a)}}}function Sm(e,t,n){for(let r=0;r<t.length;r++)gb(e,t[r],n)}function mb(e,t){let n=e.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let s=n[r];if(s<0)Un(~s);else{let i=s,o=n[++r],a=n[++r];Rp(o,i);let c=t[i];Te(24,c),a(2,c),Te(25,c)}}}finally{Un(-1)}}function jd(e,t){let n=yu()?64:1088;for(e[vn].changeDetectionScheduler?.notify(t);e;){e[le]|=n;let r=Nn(e);if(ti(e)&&!r)return e;e=r}return null}function Em(e,t,n,r){return[e,!0,0,t,null,r,null,n,null,null]}function Dm(e,t){let n=qe+t;if(n<e.length)return e[n]}function Qa(e,t,n,r=!0){let s=t[oe];if(_b(s,t,e,n),r){let o=Ju(n,e),a=t[Pe],c=a.parentNode(e[Vn]);c!==null&&RC(s,e[Lt],a,t,c,o)}let i=t[Qr];i!==null&&i.firstChild!==null&&(i.firstChild=null)}function Im(e,t){let n=vs(e,t);return n!==void 0&&Ya(n[oe],n),n}function vs(e,t){if(e.length<=qe)return;let n=qe+t,r=e[n];if(r){let s=r[jn];s!==null&&s!==e&&Ld(s,r),t>0&&(e[n-1][Ot]=r[Ot]);let i=rs(e,qe+t);AC(r[oe],r);let o=i[Jt];o!==null&&o.detachView(i[oe]),r[Qe]=null,r[Ot]=null,r[le]&=-129}return r}function _b(e,t,n,r){let s=qe+r,i=n.length;r>0&&(n[s-1][Ot]=t),r<i-qe?(t[Ot]=n[s],Zl(n,qe+r,t)):(n.push(t),t[Ot]=null),t[Qe]=n;let o=t[jn];o!==null&&n!==o&&Mm(o,t);let a=t[Jt];a!==null&&a.insertView(e),ca(t),t[le]|=128}function Mm(e,t){let n=e[hr],r=t[Qe];if(en(r))e[le]|=2;else{let s=r[Qe][Dt];t[Dt]!==s&&(e[le]|=2)}n===null?e[hr]=[t]:n.push(t)}var $n=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let t=this._lView,n=t[oe];return _s(n,t,n.firstChild,[])}constructor(t,n){this._lView=t,this._cdRefInjectingView=n}get context(){return this._lView[Ue]}set context(t){this._lView[Ue]=t}get destroyed(){return fr(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[Qe];if(Ut(t)){let n=t[cs],r=n?n.indexOf(this):-1;r>-1&&(vs(t,r),rs(n,r))}this._attachedToViewContainer=!1}Ya(this._lView[oe],this._lView)}onDestroy(t){du(this._lView,t)}markForCheck(){jd(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[le]&=-129}reattach(){ca(this._lView),this._lView[le]|=128}detectChanges(){this._lView[le]|=1024,Cm(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new te(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let t=ti(this._lView),n=this._lView[jn];n!==null&&!t&&Ld(n,this._lView),cm(this._lView[oe],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new te(902,!1);this._appRef=t;let n=ti(this._lView),r=this._lView[jn];r!==null&&!n&&Mm(r,this._lView),ca(this._lView)}};var ui=(()=>{class e{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=vb;constructor(n,r,s){this._declarationLView=n,this._declarationTContainer=r,this.elementRef=s}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,r){return this.createEmbeddedViewImpl(n,r)}createEmbeddedViewImpl(n,r,s){let i=Xa(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:r,dehydratedView:s});return new $n(i)}}return e})();function vb(){return Vd(lt(),be())}function Vd(e,t){return e.type&4?new ui(t,e,gi(e,t)):null}function Ja(e,t,n,r,s){let i=e.data[t];if(i===null)i=yb(e,t,n,r,s),Ap()&&(i.flags|=32);else if(i.type&64){i.type=n,i.value=r,i.attrs=s;let o=Ip();i.injectorIndex=o===null?-1:o.injectorIndex}return ri(i,!0),i}function yb(e,t,n,r,s){let i=_u(),o=vu(),a=o?i:i&&i.parent,c=e.data[t]=bb(e,a,n,t,r,s);return Cb(e,c,i,o),c}function Cb(e,t,n,r){e.firstChild===null&&(e.firstChild=t),n!==null&&(r?n.child==null&&t.parent!==null&&(n.child=t):n.next===null&&(n.next=t,t.prev=n))}function bb(e,t,n,r,s,i){let o=t?t.injectorIndex:-1,a=0;return Dp()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:s,attrs:i,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var sk=new RegExp(`^(\\d+)*(${X0}|${Z0})*(.*)`);function wb(e){let t=e[ou]??[],r=e[Qe][Pe],s=[];for(let i of t)i.data[Vg]!==void 0?s.push(i):Sb(i,r);e[ou]=s}function Sb(e,t){let n=0,r=e.firstChild;if(r){let s=e.data[jg];for(;n<s;){let i=r.nextSibling;Xg(t,r,!1),r=i,n++}}}var Eb=()=>null,Db=()=>null;function td(e,t){return Eb(e,t)}function Tm(e,t,n){return Db(e,t,n)}var xm=class{},ec=class{},nd=class{resolveComponentFactory(t){throw new te(917,!1)}},ws=class{static NULL=new nd},mr=class{},yr=(()=>{class e{destroyNode=null;static __NG_ELEMENT_ID__=()=>Ib()}return e})();function Ib(){let e=be(),t=lt(),n=Nt(t.index,e);return(en(n)?n:e)[Pe]}var Am=(()=>{class e{static \u0275prov=ee({token:e,providedIn:"root",factory:()=>null})}return e})();var ba={},rd=class{injector;parentInjector;constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,r){let s=this.injector.get(t,ba,r);return s!==ba||n===ba?s:this.parentInjector.get(t,n,r)}};function Oa(e,t,n){let r=n?e.styles:null,s=n?e.classes:null,i=0;if(t!==null)for(let o=0;o<t.length;o++){let a=t[o];if(typeof a=="number")i=a;else if(i==1)s=Vl(s,a);else if(i==2){let c=a,l=t[++o];r=Vl(r,c+": "+l+";")}}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=s:e.classesWithoutHost=s}function Re(e,t=0){let n=be();if(n===null)return ae(e,t);let r=lt();return Ag(r,n,st(e),t)}function Mb(e,t,n,r,s){let i=r===null?null:{"":-1},o=s(e,n);if(o!==null){let a=o,c=null,l=null;for(let p of o)if(p.resolveHostDirectives!==null){[a,c,l]=p.resolveHostDirectives(o);break}Ab(e,t,n,a,i,c,l)}i!==null&&r!==null&&Tb(n,r,i)}function Tb(e,t,n){let r=e.localNames=[];for(let s=0;s<t.length;s+=2){let i=n[t[s+1]];if(i==null)throw new te(-301,!1);r.push(t[s],i)}}function xb(e,t,n){t.componentOffset=n,(e.components??=[]).push(t.index)}function Ab(e,t,n,r,s,i,o){let a=r.length,c=!1;for(let _=0;_<a;_++){let d=r[_];!c&&tn(d)&&(c=!0,xb(e,n,_)),Wu(Ia(n,t),e,d.type)}Pb(n,e.data.length,a);for(let _=0;_<a;_++){let d=r[_];d.providersResolver&&d.providersResolver(d)}let l=!1,p=!1,m=em(e,t,a,null);a>0&&(n.directiveToIndex=new Map);for(let _=0;_<a;_++){let d=r[_];if(n.mergedAttrs=ai(n.mergedAttrs,d.hostAttrs),Ob(e,n,t,m,d),Nb(m,d,s),o!==null&&o.has(d)){let[g,f]=o.get(d);n.directiveToIndex.set(d.type,[m,g+n.directiveStart,f+n.directiveStart])}else(i===null||!i.has(d))&&n.directiveToIndex.set(d.type,m);d.contentQueries!==null&&(n.flags|=4),(d.hostBindings!==null||d.hostAttrs!==null||d.hostVars!==0)&&(n.flags|=64);let u=d.type.prototype;!l&&(u.ngOnChanges||u.ngOnInit||u.ngDoCheck)&&((e.preOrderHooks??=[]).push(n.index),l=!0),!p&&(u.ngOnChanges||u.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(n.index),p=!0),m++}Rb(e,n,i)}function Rb(e,t,n){for(let r=t.directiveStart;r<t.directiveEnd;r++){let s=e.data[r];if(n===null||!n.has(s))ig(0,t,s,r),ig(1,t,s,r),og(t,r,!1);else{let i=n.get(s);sg(0,t,i,r),sg(1,t,i,r),og(t,r,!0)}}}function ig(e,t,n,r){let s=e===0?n.inputs:n.outputs;for(let i in s)if(s.hasOwnProperty(i)){let o;e===0?o=t.inputs??={}:o=t.outputs??={},o[i]??=[],o[i].push(r),Rm(t,i)}}function sg(e,t,n,r){let s=e===0?n.inputs:n.outputs;for(let i in s)if(s.hasOwnProperty(i)){let o=s[i],a;e===0?a=t.hostDirectiveInputs??={}:a=t.hostDirectiveOutputs??={},a[o]??=[],a[o].push(r,i),Rm(t,o)}}function Rm(e,t){t==="class"?e.flags|=8:t==="style"&&(e.flags|=16)}function og(e,t,n){let{attrs:r,inputs:s,hostDirectiveInputs:i}=e;if(r===null||!n&&s===null||n&&i===null||Dd(e)){e.initialInputs??=[],e.initialInputs.push(null);return}let o=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!n&&s.hasOwnProperty(c)){let l=s[c];for(let p of l)if(p===t){o??=[],o.push(c,r[a+1]);break}}else if(n&&i.hasOwnProperty(c)){let l=i[c];for(let p=0;p<l.length;p+=2)if(l[p]===t){o??=[],o.push(l[p+1],r[a+1]);break}}a+=2}e.initialInputs??=[],e.initialInputs.push(o)}function Ob(e,t,n,r,s){e.data[r]=s;let i=s.factory||(s.factory=ir(s.type,!0)),o=new gr(i,tn(s),Re,null);e.blueprint[r]=o,n[r]=o,Lb(e,t,r,em(e,n,s.hostVars,Gt),s)}function Lb(e,t,n,r,s){let i=s.hostBindings;if(i){let o=e.hostBindingOpCodes;o===null&&(o=e.hostBindingOpCodes=[]);let a=~t.index;kb(o)!=a&&o.push(a),o.push(n,r,i)}}function kb(e){let t=e.length;for(;t>0;){let n=e[--t];if(typeof n=="number"&&n<0)return n}return 0}function Nb(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;tn(t)&&(n[""]=e)}}function Pb(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function Om(e,t,n,r,s,i,o,a){let c=t[oe],l=c.consts,p=rn(l,o),m=Ja(c,e,n,r,p);return i&&Mb(c,t,m,rn(l,a),s),m.mergedAttrs=ai(m.mergedAttrs,m.attrs),m.attrs!==null&&Oa(m,m.attrs,!1),m.mergedAttrs!==null&&Oa(m,m.mergedAttrs,!0),c.queries!==null&&c.queries.elementStart(c,m),m}function Lm(e,t){T0(e,t),au(t)&&e.queries.elementEnd(t)}function Fb(e,t,n,r,s,i){let o=t.consts,a=rn(o,s),c=Ja(t,e,n,r,a);if(c.mergedAttrs=ai(c.mergedAttrs,c.attrs),i!=null){let l=rn(o,i);c.localNames=[];for(let p=0;p<l.length;p+=2)c.localNames.push(l[p],-1)}return c.attrs!==null&&Oa(c,c.attrs,!1),c.mergedAttrs!==null&&Oa(c,c.mergedAttrs,!0),t.queries!==null&&t.queries.elementStart(t,c),c}function Wn(e,t,n){if(n===Gt)return!1;let r=e[t];return Object.is(r,n)?!1:(e[t]=n,!0)}function Bb(e,t,n,r){let s=Wn(e,t,n);return Wn(e,t+1,r)||s}function wa(e,t,n){return function r(s){let i=Hn(e)?Nt(e.index,t):t;jd(i,5);let o=t[Ue],a=ag(t,o,n,s),c=r.__ngNextListenerFn__;for(;c;)a=ag(t,o,c,s)&&a,c=c.__ngNextListenerFn__;return a}}function ag(e,t,n,r){let s=ce(null);try{return Te(6,t,n),n(r)!==!1}catch(i){return tb(e,i),!1}finally{Te(7,t,n),ce(s)}}function km(e,t,n,r,s,i,o,a){let c=oa(e),l=!1,p=null;if(!r&&c&&(p=Vb(t,n,i,e.index)),p!==null){let m=p.__ngLastListenerFn__||p;m.__ngNextListenerFn__=o,p.__ngLastListenerFn__=o,l=!0}else{let m=nn(e,n),_=r?r(m):m;J0(n,_,i,a);let d=s.listen(_,i,a);if(!jb(i)){let u=r?g=>r(kt(g[e.index])):e.index;Nm(u,t,n,i,a,d,!1)}}return l}function jb(e){return e.startsWith("animation")||e.startsWith("transition")}function Vb(e,t,n,r){let s=e.cleanup;if(s!=null)for(let i=0;i<s.length-1;i+=2){let o=s[i];if(o===n&&s[i+1]===r){let a=t[Jr],c=s[i+2];return a&&a.length>c?a[c]:null}typeof o=="string"&&(i+=2)}return null}function Nm(e,t,n,r,s,i,o){let a=t.firstCreatePass?fu(t):null,c=hu(n),l=c.length;c.push(s,i),a&&a.push(r,e,l,(l+1)*(o?-1:1))}function cg(e,t,n,r,s,i){let o=t[n],a=t[oe],l=a.data[n].outputs[r],m=o[l].subscribe(i);Nm(e.index,a,t,s,i,m,!0)}var id=Symbol("BINDING");var La=class extends ws{ngModule;constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let n=Fn(t);return new di(n,this.ngModule)}};function Hb(e){return Object.keys(e).map(t=>{let[n,r,s]=e[t],i={propName:n,templateName:t,isSignal:(r&Ga.SignalBased)!==0};return s&&(i.transform=s),i})}function Ub(e){return Object.keys(e).map(t=>({propName:e[t],templateName:t}))}function $b(e,t,n){let r=t instanceof Xe?t:t?.injector;return r&&e.getStandaloneInjector!==null&&(r=e.getStandaloneInjector(r)||r),r?new rd(n,r):n}function Wb(e){let t=e.get(mr,null);if(t===null)throw new te(407,!1);let n=e.get(Am,null),r=e.get(pn,null);return{rendererFactory:t,sanitizer:n,changeDetectionScheduler:r,ngReflect:!1}}function zb(e,t){let n=Pm(e);return Yg(t,n,n==="svg"?gp:n==="math"?mp:null)}function Pm(e){return(e.selectors[0][0]||"div").toLowerCase()}var di=class extends ec{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=Hb(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=Ub(this.componentDef.outputs),this.cachedOutputs}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=uC(t.selectors),this.ngContentSelectors=t.ngContentSelectors??[],this.isBoundToModule=!!n}create(t,n,r,s,i,o){Te(22);let a=ce(null);try{let c=this.componentDef,l=Gb(r,c,o,i),p=$b(c,s||this.ngModule,t),m=Wb(p),_=m.rendererFactory.createRenderer(null,c),d=r?WC(_,r,c.encapsulation,p):zb(c,_),u=o?.some(lg)||i?.some(h=>typeof h!="function"&&h.bindings.some(lg)),g=Md(null,l,null,512|Jg(c),null,null,m,_,p,null,$g(d,p,!0));g[at]=d,da(g);let f=null;try{let h=Om(at,g,2,"#host",()=>l.directiveRegistry,!0,0);Qg(_,d,h),ci(d,g),dm(l,g,h),zg(l,h,g),Lm(l,h),n!==void 0&&Kb(h,this.ngContentSelectors,n),f=Nt(h.index,g),g[Ue]=f[Ue],Bd(l,g,null)}catch(h){throw f!==null&&Gu(f),Gu(g),h}finally{Te(23),ha()}return new ka(this.componentType,g,!!u)}finally{ce(a)}}};function Gb(e,t,n,r){let s=e?["ng-version","20.3.10"]:dC(t.selectors[0]),i=null,o=null,a=0;if(n)for(let p of n)a+=p[id].requiredVars,p.create&&(p.targetIdx=0,(i??=[]).push(p)),p.update&&(p.targetIdx=0,(o??=[]).push(p));if(r)for(let p=0;p<r.length;p++){let m=r[p];if(typeof m!="function")for(let _ of m.bindings){a+=_[id].requiredVars;let d=p+1;_.create&&(_.targetIdx=d,(i??=[]).push(_)),_.update&&(_.targetIdx=d,(o??=[]).push(_))}}let c=[t];if(r)for(let p of r){let m=typeof p=="function"?p:p.type,_=eu(m);c.push(_)}return Id(0,null,qb(i,o),1,a,c,null,null,null,[s],null)}function qb(e,t){return!e&&!t?null:n=>{if(n&1&&e)for(let r of e)r.create();if(n&2&&t)for(let r of t)r.update()}}function lg(e){let t=e[id].kind;return t==="input"||t==="twoWay"}var ka=class extends xm{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(t,n,r){super(),this._rootLView=n,this._hasInputBindings=r,this._tNode=ls(n[oe],at),this.location=gi(this._tNode,n),this.instance=Nt(this._tNode.index,n)[Ue],this.hostView=this.changeDetectorRef=new $n(n,void 0),this.componentType=t}setInput(t,n){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),n))return;let s=this._rootLView,i=Fd(r,s[oe],s,t,n);this.previousInputValues.set(t,n);let o=Nt(r.index,s);jd(o,1)}get injector(){return new pr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function Kb(e,t,n){let r=e.projection=[];for(let s=0;s<t.length;s++){let i=n[s];r.push(i!=null&&i.length?Array.from(i):null)}}var Cr=(()=>{class e{static __NG_ELEMENT_ID__=Yb}return e})();function Yb(){let e=lt();return Bm(e,be())}var Zb=Cr,Fm=class extends Zb{_lContainer;_hostTNode;_hostLView;constructor(t,n,r){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=r}get element(){return gi(this._hostTNode,this._hostLView)}get injector(){return new pr(this._hostTNode,this._hostLView)}get parentInjector(){let t=bd(this._hostTNode,this._hostLView);if(Eg(t)){let n=Da(t,this._hostLView),r=Ea(t),s=n[oe].data[r+8];return new pr(s,n)}else return new pr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let n=ug(this._lContainer);return n!==null&&n[t]||null}get length(){return this._lContainer.length-qe}createEmbeddedView(t,n,r){let s,i;typeof r=="number"?s=r:r!=null&&(s=r.index,i=r.injector);let o=td(this._lContainer,t.ssrId),a=t.createEmbeddedViewImpl(n||{},i,o);return this.insertImpl(a,s,ms(this._hostTNode,o)),a}createComponent(t,n,r,s,i,o,a){let c=t&&!S0(t),l;if(c)l=n;else{let f=n||{};l=f.index,r=f.injector,s=f.projectableNodes,i=f.environmentInjector||f.ngModuleRef,o=f.directives,a=f.bindings}let p=c?t:new di(Fn(t)),m=r||this.parentInjector;if(!i&&p.ngModule==null){let h=(c?m:this.parentInjector).get(Xe,null);h&&(i=h)}let _=Fn(p.componentType??{}),d=td(this._lContainer,_?.id??null),u=d?.firstChild??null,g=p.create(m,s,u,i,o,a);return this.insertImpl(g.hostView,l,ms(this._hostTNode,d)),g}insert(t,n){return this.insertImpl(t,n,!0)}insertImpl(t,n,r){let s=t._lView;if(vp(s)){let a=this.indexOf(t);if(a!==-1)this.detach(a);else{let c=s[Qe],l=new Fm(c,c[Lt],c[Qe]);l.detach(l.indexOf(t))}}let i=this._adjustIndex(n),o=this._lContainer;return Qa(o,s,i,r),t.attachToViewContainerRef(),Zl(Pu(o),i,t),t}move(t,n){return this.insert(t,n)}indexOf(t){let n=ug(this._lContainer);return n!==null?n.indexOf(t):-1}remove(t){let n=this._adjustIndex(t,-1),r=vs(this._lContainer,n);r&&(rs(Pu(this._lContainer),n),Ya(r[oe],r))}detach(t){let n=this._adjustIndex(t,-1),r=vs(this._lContainer,n);return r&&rs(Pu(this._lContainer),n)!=null?new $n(r):null}_adjustIndex(t,n=0){return t??this.length+n}};function ug(e){return e[cs]}function Pu(e){return e[cs]||(e[cs]=[])}function Bm(e,t){let n,r=t[e.index];return Ut(r)?n=r:(n=Em(r,t,null,e),t[e.index]=n,Td(t,n)),Qb(n,t,e,r),new Fm(n,e,t)}function Xb(e,t){let n=e[Pe],r=n.createComment(""),s=nn(t,e),i=n.parentNode(s);return Ta(n,i,r,n.nextSibling(s),!1),r}var Qb=tw,Jb=()=>!1;function ew(e,t,n){return Jb(e,t,n)}function tw(e,t,n,r){if(e[Vn])return;let s;n.type&8?s=kt(r):s=Xb(t,n),e[Vn]=s}var sd=class e{queryList;matches=null;constructor(t){this.queryList=t}clone(){return new e(this.queryList)}setDirty(){this.queryList.setDirty()}},od=class e{queries;constructor(t=[]){this.queries=t}createEmbeddedView(t){let n=t.queries;if(n!==null){let r=t.contentQueries!==null?t.contentQueries[0]:n.length,s=[];for(let i=0;i<r;i++){let o=n.getByIndex(i),a=this.queries[o.indexInDeclarationView];s.push(a.clone())}return new e(s)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}finishViewCreation(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let n=0;n<this.queries.length;n++)Hd(t,n).matches!==null&&this.queries[n].setDirty()}},ad=class{flags;read;predicate;constructor(t,n,r=null){this.flags=n,this.read=r,typeof t=="string"?this.predicate=lw(t):this.predicate=t}},cd=class e{queries;constructor(t=[]){this.queries=t}elementStart(t,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(t,n)}elementEnd(t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(t)}embeddedTView(t){let n=null;for(let r=0;r<this.length;r++){let s=n!==null?n.length:0,i=this.getByIndex(r).embeddedTView(t,s);i&&(i.indexInDeclarationView=r,n!==null?n.push(i):n=[i])}return n!==null?new e(n):null}template(t,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(t,n)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}},ld=class e{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(t,n=-1){this.metadata=t,this._declarationNodeIndex=n}elementStart(t,n){this.isApplyingToNode(n)&&this.matchTNode(t,n)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,n){this.elementStart(t,n)}embeddedTView(t,n){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,n),new e(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=t.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(t,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let s=0;s<r.length;s++){let i=r[s];this.matchTNodeWithReadOption(t,n,nw(n,i)),this.matchTNodeWithReadOption(t,n,Ca(n,t,i,!1,!1))}else r===ui?n.type&4&&this.matchTNodeWithReadOption(t,n,-1):this.matchTNodeWithReadOption(t,n,Ca(n,t,r,!1,!1))}matchTNodeWithReadOption(t,n,r){if(r!==null){let s=this.metadata.read;if(s!==null)if(s===zt||s===Cr||s===ui&&n.type&4)this.addMatch(n.index,-2);else{let i=Ca(n,t,s,!1,!1);i!==null&&this.addMatch(n.index,i)}else this.addMatch(n.index,r)}}addMatch(t,n){this.matches===null?this.matches=[t,n]:this.matches.push(t,n)}};function nw(e,t){let n=e.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===t)return n[r+1]}return null}function rw(e,t){return e.type&11?gi(e,t):e.type&4?Vd(e,t):null}function iw(e,t,n,r){return n===-1?rw(t,e):n===-2?sw(e,t,r):gs(e,e[oe],n,t)}function sw(e,t,n){if(n===zt)return gi(t,e);if(n===ui)return Vd(t,e);if(n===Cr)return Bm(t,e)}function jm(e,t,n,r){let s=t[Jt].queries[r];if(s.matches===null){let i=e.data,o=n.matches,a=[];for(let c=0;o!==null&&c<o.length;c+=2){let l=o[c];if(l<0)a.push(null);else{let p=i[l];a.push(iw(t,p,o[c+1],n.metadata.read))}}s.matches=a}return s.matches}function ud(e,t,n,r){let s=e.queries.getByIndex(n),i=s.matches;if(i!==null){let o=jm(e,t,s,n);for(let a=0;a<i.length;a+=2){let c=i[a];if(c>0)r.push(o[a/2]);else{let l=i[a+1],p=t[-c];for(let m=qe;m<p.length;m++){let _=p[m];_[jn]===_[Qe]&&ud(_[oe],_,l,r)}if(p[hr]!==null){let m=p[hr];for(let _=0;_<m.length;_++){let d=m[_];ud(d[oe],d,l,r)}}}}}return r}function ow(e,t){return e[Jt].queries[t].queryList}function aw(e,t,n){let r=new Ma((n&4)===4);return bp(e,t,r,r.destroy),(t[Jt]??=new od).queries.push(new sd(r))-1}function cw(e,t,n){let r=ct();return r.firstCreatePass&&(uw(r,new ad(e,t,n),-1),(t&2)===2&&(r.staticViewQueries=!0)),aw(r,be(),t)}function lw(e){return e.split(",").map(t=>t.trim())}function uw(e,t,n){e.queries===null&&(e.queries=new cd),e.queries.track(new ld(t,n))}function Hd(e,t){return e.queries.getByIndex(t)}function dw(e,t){let n=e[oe],r=Hd(n,t);return r.crossesNgTemplate?ud(n,e,t,[]):jm(n,e,r,t)}var hi=class{},tc=class{};var Na=class extends hi{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new La(this);constructor(t,n,r,s=!0){super(),this.ngModuleType=t,this._parent=n;let i=Jl(t);this._bootstrapComponents=qg(i.bootstrap),this._r3Injector=Iu(t,n,[{provide:hi,useValue:this},{provide:ws,useValue:this.componentFactoryResolver},...r],fn(t),new Set(["environment"])),s&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},Pa=class extends tc{moduleType;constructor(t){super(),this.moduleType=t}create(t){return new Na(this.moduleType,t,[])}};var ys=class extends hi{injector;componentFactoryResolver=new La(this);instance=null;constructor(t){super();let n=new or([...t.providers,{provide:hi,useValue:this},{provide:ws,useValue:this.componentFactoryResolver}],t.parent||ss(),t.debugName,new Set(["environment"]));this.injector=n,t.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function Ss(e,t,n=null){return new ys({providers:e,parent:t,debugName:n,runEnvironmentInitializers:!0}).injector}var hw=(()=>{class e{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=tu(!1,n.type),s=r.length>0?Ss([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,s)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=ee({token:e,providedIn:"environment",factory:()=>new e(ae(Xe))})}return e})();function Sn(e){return bs(()=>{let t=Vm(e),n=ye(z({},t),{decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===wd.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:t.standalone?s=>s.get(hw).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||Cn.Emulated,styles:e.styles||Et,_:null,schemas:e.schemas||null,tView:null,id:""});t.standalone&&wn("NgStandalone"),Hm(n);let r=e.dependencies;return n.directiveDefs=dg(r,fw),n.pipeDefs=dg(r,ap),n.id=mw(n),n})}function fw(e){return Fn(e)||eu(e)}function En(e){return bs(()=>({type:e.type,bootstrap:e.bootstrap||Et,declarations:e.declarations||Et,imports:e.imports||Et,exports:e.exports||Et,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function pw(e,t){if(e==null)return Pn;let n={};for(let r in e)if(e.hasOwnProperty(r)){let s=e[r],i,o,a,c;Array.isArray(s)?(a=s[0],i=s[1],o=s[2]??i,c=s[3]||null):(i=s,o=s,a=Ga.None,c=null),n[i]=[r,a,c],t[i]=o}return n}function gw(e){if(e==null)return Pn;let t={};for(let n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}function Ct(e){return bs(()=>{let t=Vm(e);return Hm(t),t})}function Vm(e){let t={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputConfig:e.inputs||Pn,exportAs:e.exportAs||null,standalone:e.standalone??!0,signals:e.signals===!0,selectors:e.selectors||Et,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:pw(e.inputs,t),outputs:gw(e.outputs),debugInfo:null}}function Hm(e){e.features?.forEach(t=>t(e))}function dg(e,t){return e?()=>{let n=typeof e=="function"?e():e,r=[];for(let s of n){let i=t(s);i!==null&&r.push(i)}return r}:null}function mw(e){let t=0,n=typeof e.consts=="function"?"":e.consts,r=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,n,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery];for(let i of r.join("|"))t=Math.imul(31,t)+i.charCodeAt(0)<<0;return t+=2147483648,"c"+t}function _w(e){return Object.getPrototypeOf(e.prototype).constructor}function Dn(e){let t=_w(e.type),n=!0,r=[e];for(;t;){let s;if(tn(e))s=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new te(903,!1);s=t.\u0275dir}if(s){if(n){r.push(s);let o=e;o.inputs=Fu(e.inputs),o.declaredInputs=Fu(e.declaredInputs),o.outputs=Fu(e.outputs);let a=s.hostBindings;a&&ww(e,a);let c=s.viewQuery,l=s.contentQueries;if(c&&Cw(e,c),l&&bw(e,l),vw(e,s),Qf(e.outputs,s.outputs),tn(s)&&s.data.animation){let p=e.data;p.animation=(p.animation||[]).concat(s.data.animation)}}let i=s.features;if(i)for(let o=0;o<i.length;o++){let a=i[o];a&&a.ngInherit&&a(e),a===Dn&&(n=!1)}}t=Object.getPrototypeOf(t)}yw(r)}function vw(e,t){for(let n in t.inputs){if(!t.inputs.hasOwnProperty(n)||e.inputs.hasOwnProperty(n))continue;let r=t.inputs[n];r!==void 0&&(e.inputs[n]=r,e.declaredInputs[n]=t.declaredInputs[n])}}function yw(e){let t=0,n=null;for(let r=e.length-1;r>=0;r--){let s=e[r];s.hostVars=t+=s.hostVars,s.hostAttrs=ai(s.hostAttrs,n=ai(n,s.hostAttrs))}}function Fu(e){return e===Pn?{}:e===Et?[]:e}function Cw(e,t){let n=e.viewQuery;n?e.viewQuery=(r,s)=>{t(r,s),n(r,s)}:e.viewQuery=t}function bw(e,t){let n=e.contentQueries;n?e.contentQueries=(r,s,i)=>{t(r,s,i),n(r,s,i)}:e.contentQueries=t}function ww(e,t){let n=e.hostBindings;n?e.hostBindings=(r,s)=>{t(r,s),n(r,s)}:e.hostBindings=t}function Sw(e,t,n,r,s,i,o,a){if(n.firstCreatePass){e.mergedAttrs=ai(e.mergedAttrs,e.attrs);let p=e.tView=Id(2,e,s,i,o,n.directiveRegistry,n.pipeRegistry,null,n.schemas,n.consts,null);n.queries!==null&&(n.queries.template(n,e),p.queries=n.queries.embeddedTView(e))}a&&(e.flags|=a),ri(e,!1);let c=Ew(n,t,e,r);fa()&&kd(n,t,c,e),ci(c,t);let l=Em(c,t,c,e);t[r+at]=l,Td(t,l),ew(l,e,t)}function Fa(e,t,n,r,s,i,o,a,c,l,p){let m=n+at,_;if(t.firstCreatePass){if(_=Ja(t,m,4,o||null,a||null),l!=null){let d=rn(t.consts,l);_.localNames=[];for(let u=0;u<d.length;u+=2)_.localNames.push(d[u],-1)}}else _=t.data[m];return Sw(_,e,t,n,r,s,i,c),l!=null&&Pd(e,_,p),_}var Ew=Dw;function Dw(e,t,n,r){return pa(!0),t[Pe].createComment("")}var Ud=(()=>{class e{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})();var $d=new ne("");function br(e){return!!e&&typeof e.then=="function"}function Um(e){return!!e&&typeof e.subscribe=="function"}var $m=new ne("");var Wd=(()=>{class e{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=H($m,{optional:!0})??[];injector=H(Rt);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let s of this.appInits){let i=ot(this.injector,s);if(br(i))n.push(i);else if(Um(i)){let o=new Promise((a,c)=>{i.subscribe({complete:a,error:c})});n.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(s=>{this.reject(s)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||e)};static \u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),nc=new ne("");function Wm(){cl(()=>{let e="";throw new te(600,e)})}function zm(e){return e.isBoundToModule}var Iw=10;var In=(()=>{class e{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=H(Mt);afterRenderManager=H(Od);zonelessEnabled=H(ds);rootEffectScheduler=H(Ou);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Ne;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=H(sn);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(fe(n=>!n))}constructor(){H(vr,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:s=>{s&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=H(Xe);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,s=Rt.NULL){return this._injector.get(Fe).run(()=>{Te(10);let o=n instanceof ec;if(!this._injector.get(Wd).done){let u="";throw new te(405,u)}let c;o?c=n:c=this._injector.get(ws).resolveComponentFactory(n),this.componentTypes.push(c.componentType);let l=zm(c)?void 0:this._injector.get(hi),p=r||c.selector,m=c.create(s,[],p,l),_=m.location.nativeElement,d=m.injector.get($d,null);return d?.registerApplication(_),m.onDestroy(()=>{this.detachView(m.hostView),ps(this.components,m),d?.unregisterApplication(_)}),this._loadComponent(m),Te(11,m),m})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Te(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(qa.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new te(101,!1);let n=ce(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,ce(n),this.afterTick.next(),Te(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(mr,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<Iw;)Te(14),this.synchronizeOnce(),Te(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:s}of this.allViews){if(!r&&!us(s))continue;let i=r&&!this.zonelessEnabled?0:1;Cm(s,i),n=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>us(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;ps(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(s){this.internalErrorHandler(s)}this.components.push(n),this._injector.get(nc,[]).forEach(s=>s(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>ps(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new te(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||e)};static \u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function ps(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}var hk=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";var dd=class{destroy(t){}updateValue(t,n){}swap(t,n){let r=Math.min(t,n),s=Math.max(t,n),i=this.detach(s);if(s-r>1){let o=this.detach(r);this.attach(r,i),this.attach(s,o)}else this.attach(r,i)}move(t,n){this.attach(n,this.detach(t,!0))}};function Bu(e,t,n,r,s){return e===n&&Object.is(t,r)?1:Object.is(s(e,t),s(n,r))?-1:0}function Mw(e,t,n){let r,s,i=0,o=e.length-1,a=void 0;if(Array.isArray(t)){let c=t.length-1;for(;i<=o&&i<=c;){let l=e.at(i),p=t[i],m=Bu(i,l,i,p,n);if(m!==0){m<0&&e.updateValue(i,p),i++;continue}let _=e.at(o),d=t[c],u=Bu(o,_,c,d,n);if(u!==0){u<0&&e.updateValue(o,d),o--,c--;continue}let g=n(i,l),f=n(o,_),h=n(i,p);if(Object.is(h,f)){let v=n(c,d);Object.is(v,g)?(e.swap(i,o),e.updateValue(o,d),c--,o--):e.move(o,i),e.updateValue(i,p),i++;continue}if(r??=new Ba,s??=fg(e,i,o,n),hd(e,r,i,h))e.updateValue(i,p),i++,o++;else if(s.has(h))r.set(g,e.detach(i)),o--;else{let v=e.create(i,t[i]);e.attach(i,v),i++,o++}}for(;i<=c;)hg(e,r,n,i,t[i]),i++}else if(t!=null){let c=t[Symbol.iterator](),l=c.next();for(;!l.done&&i<=o;){let p=e.at(i),m=l.value,_=Bu(i,p,i,m,n);if(_!==0)_<0&&e.updateValue(i,m),i++,l=c.next();else{r??=new Ba,s??=fg(e,i,o,n);let d=n(i,m);if(hd(e,r,i,d))e.updateValue(i,m),i++,o++,l=c.next();else if(!s.has(d))e.attach(i,e.create(i,m)),i++,o++,l=c.next();else{let u=n(i,p);r.set(u,e.detach(i)),o--}}}for(;!l.done;)hg(e,r,n,e.length,l.value),l=c.next()}for(;i<=o;)e.destroy(e.detach(o--));r?.forEach(c=>{e.destroy(c)})}function hd(e,t,n,r){return t!==void 0&&t.has(r)?(e.attach(n,t.get(r)),t.delete(r),!0):!1}function hg(e,t,n,r,s){if(hd(e,t,r,n(r,s)))e.updateValue(r,s);else{let i=e.create(r,s);e.attach(r,i)}}function fg(e,t,n,r){let s=new Set;for(let i=t;i<=n;i++)s.add(r(i,e.at(i)));return s}var Ba=class{kvMap=new Map;_vMap=void 0;has(t){return this.kvMap.has(t)}delete(t){if(!this.has(t))return!1;let n=this.kvMap.get(t);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(t,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(t),!0}get(t){return this.kvMap.get(t)}set(t,n){if(this.kvMap.has(t)){let r=this.kvMap.get(t);this._vMap===void 0&&(this._vMap=new Map);let s=this._vMap;for(;s.has(r);)r=s.get(r);s.set(r,n)}else this.kvMap.set(t,n)}forEach(t){for(let[n,r]of this.kvMap)if(t(r,n),this._vMap!==void 0){let s=this._vMap;for(;s.has(r);)r=s.get(r),t(r,n)}}};function Je(e,t,n,r,s,i,o,a){wn("NgControlFlow");let c=be(),l=ct(),p=rn(l.consts,i);return Fa(c,l,e,t,n,r,s,p,256,o,a),zd}function zd(e,t,n,r,s,i,o,a){wn("NgControlFlow");let c=be(),l=ct(),p=rn(l.consts,i);return Fa(c,l,e,t,n,r,s,p,512,o,a),zd}function et(e,t){wn("NgControlFlow");let n=be(),r=ii(),s=n[r]!==Gt?n[r]:-1,i=s!==-1?ja(n,at+s):void 0,o=0;if(Wn(n,r,e)){let a=ce(null);try{if(i!==void 0&&Im(i,o),e!==-1){let c=at+e,l=ja(n,c),p=md(n[oe],c),m=Tm(l,p,n),_=Xa(n,p,t,{dehydratedView:m});Qa(l,_,o,ms(p,m))}}finally{ce(a)}}else if(i!==void 0){let a=Dm(i,o);a!==void 0&&(a[Ue]=t)}}var fd=class{lContainer;$implicit;$index;constructor(t,n,r){this.lContainer=t,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-qe}};function rc(e){return e}var pd=class{hasEmptyBlock;trackByFn;liveCollection;constructor(t,n,r){this.hasEmptyBlock=t,this.trackByFn=n,this.liveCollection=r}};function wr(e,t,n,r,s,i,o,a,c,l,p,m,_){wn("NgControlFlow");let d=be(),u=ct(),g=c!==void 0,f=be(),h=a?o.bind(f[Dt][Ue]):o,v=new pd(g,h);f[at+e]=v,Fa(d,u,e+1,t,n,r,s,rn(u.consts,i),256),g&&Fa(d,u,e+2,c,l,p,m,rn(u.consts,_),512)}var gd=class extends dd{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(t,n,r){super(),this.lContainer=t,this.hostLView=n,this.templateTNode=r}get length(){return this.lContainer.length-qe}at(t){return this.getLView(t)[Ue].$implicit}attach(t,n){let r=n[Qr];this.needsIndexUpdate||=t!==this.length,Qa(this.lContainer,n,t,ms(this.templateTNode,r))}detach(t,n){return this.needsIndexUpdate||=t!==this.length-1,n&&Tw(this.lContainer,t),xw(this.lContainer,t)}create(t,n){let r=td(this.lContainer,this.templateTNode.tView.ssrId),s=Xa(this.hostLView,this.templateTNode,new fd(this.lContainer,n,t),{dehydratedView:r});return this.operationsCounter?.recordCreate(),s}destroy(t){Ya(t[oe],t),this.operationsCounter?.recordDestroy()}updateValue(t,n){this.getLView(t)[Ue].$implicit=n}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let t=0;t<this.length;t++)this.getLView(t)[Ue].$index=t}getLView(t){return Aw(this.lContainer,t)}};function Sr(e){let t=ce(null),n=yn();try{let r=be(),s=r[oe],i=r[n],o=n+1,a=ja(r,o);if(i.liveCollection===void 0){let l=md(s,o);i.liveCollection=new gd(a,r,l)}else i.liveCollection.reset();let c=i.liveCollection;if(Mw(c,e,i.trackByFn),c.updateIndexes(),i.hasEmptyBlock){let l=ii(),p=c.length===0;if(Wn(r,l,p)){let m=n+2,_=ja(r,m);if(p){let d=md(s,m),u=Tm(_,d,r),g=Xa(r,d,void 0,{dehydratedView:u});Qa(_,g,0,ms(d,u))}else s.firstUpdatePass&&wb(_),Im(_,0)}}}finally{ce(t)}}function ja(e,t){return e[t]}function Tw(e,t){if(e.length<=qe)return;let n=qe+t,r=e[n];r&&r[dr]&&(r[dr].skipLeaveAnimations=!0)}function xw(e,t){return vs(e,t)}function Aw(e,t){return Dm(e,t)}function md(e,t){return ls(e,t)}function Es(e,t,n){let r=be(),s=ii();if(Wn(r,s,t)){let i=ct(),o=Du();hm(o,r,e,t,r[Pe],n)}return Es}function pg(e,t,n,r,s){Fd(t,e,n,s?"class":"style",r)}function q(e,t,n,r){let s=be(),i=s[oe],o=e+at,a=i.firstCreatePass?Om(o,s,2,t,JC,Ep(),n,r):i.data[o];if(fm(a,s,e,t,Gm),oa(a)){let c=s[oe];dm(c,s,a),zg(c,a,s)}return r!=null&&Pd(s,a),q}function W(){let e=ct(),t=lt(),n=pm(t);return e.firstCreatePass&&Lm(e,n),gu(n)&&mu(),pu(),n.classesWithoutHost!=null&&A0(n)&&pg(e,n,be(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&R0(n)&&pg(e,n,be(),n.stylesWithoutHost,!1),W}function qt(e,t,n,r){return q(e,t,n,r),W(),qt}function Mn(e,t,n,r){let s=be(),i=s[oe],o=e+at,a=i.firstCreatePass?Fb(o,i,2,t,n,r):i.data[o];return fm(a,s,e,t,Gm),r!=null&&Pd(s,a),Mn}function Gn(){let e=lt(),t=pm(e);return gu(t)&&mu(),pu(),Gn}function _i(e,t,n,r){return Mn(e,t,n,r),Gn(),_i}var Gm=(e,t,n,r,s)=>(pa(!0),Yg(t[Pe],r,Bp()));function Kt(){return be()}var Ds="en-US";var Rw=Ds;function qm(e){typeof e=="string"&&(Rw=e.toLowerCase().replace(/_/g,"-"))}function tt(e,t,n){let r=be(),s=ct(),i=lt();return Km(s,r,r[Pe],i,e,t,n),tt}function Er(e,t,n){let r=be(),s=ct(),i=lt();return(i.type&3||n)&&km(i,s,r,n,r[Pe],e,t,wa(i,r,t)),Er}function Km(e,t,n,r,s,i,o){let a=!0,c=null;if((r.type&3||o)&&(c??=wa(r,t,i),km(r,e,t,o,n,s,i,c)&&(a=!1)),a){let l=r.outputs?.[s],p=r.hostDirectiveOutputs?.[s];if(p&&p.length)for(let m=0;m<p.length;m+=2){let _=p[m],d=p[m+1];c??=wa(r,t,i),cg(r,t,_,d,s,c)}if(l&&l.length)for(let m of l)c??=wa(r,t,i),cg(r,t,m,s,s,c)}}function Oe(e=1){return Fp(e)}function Is(e,t,n){cw(e,t,n)}function Ms(e){let t=be(),n=ct(),r=wu();ua(r+1);let s=Hd(n,r);if(e.dirty&&_p(t)===((s.metadata.flags&2)===2)){if(s.matches===null)e.reset([]);else{let i=dw(t,r);e.reset(i,W0),e.notifyOnChanges()}return!0}return!1}function Ts(){return ow(be(),wu())}function _a(e,t){return e<<17|t<<2}function _r(e){return e>>17&32767}function Ow(e){return(e&2)==2}function Lw(e,t){return e&131071|t<<17}function _d(e){return e|2}function fi(e){return(e&131068)>>2}function ju(e,t){return e&-131069|t<<2}function kw(e){return(e&1)===1}function vd(e){return e|1}function Nw(e,t,n,r,s,i){let o=i?t.classBindings:t.styleBindings,a=_r(o),c=fi(o);e[r]=n;let l=!1,p;if(Array.isArray(n)){let m=n;p=m[1],(p===null||Xr(m,p)>0)&&(l=!0)}else p=n;if(s)if(c!==0){let _=_r(e[a+1]);e[r+1]=_a(_,a),_!==0&&(e[_+1]=ju(e[_+1],r)),e[a+1]=Lw(e[a+1],r)}else e[r+1]=_a(a,0),a!==0&&(e[a+1]=ju(e[a+1],r)),a=r;else e[r+1]=_a(c,0),a===0?a=r:e[c+1]=ju(e[c+1],r),c=r;l&&(e[r+1]=_d(e[r+1])),gg(e,p,r,!0),gg(e,p,r,!1),Pw(t,p,e,r,i),o=_a(a,c),i?t.classBindings=o:t.styleBindings=o}function Pw(e,t,n,r,s){let i=s?e.residualClasses:e.residualStyles;i!=null&&typeof t=="string"&&Xr(i,t)>=0&&(n[r+1]=vd(n[r+1]))}function gg(e,t,n,r){let s=e[n+1],i=t===null,o=r?_r(s):fi(s),a=!1;for(;o!==0&&(a===!1||i);){let c=e[o],l=e[o+1];Fw(c,t)&&(a=!0,e[o+1]=r?vd(l):_d(l)),o=r?_r(l):fi(l)}a&&(e[n+1]=r?_d(s):vd(s))}function Fw(e,t){return e===null||t==null||(Array.isArray(e)?e[1]:e)===t?!0:Array.isArray(e)&&typeof t=="string"?Xr(e,t)>=0:!1}function ft(e,t){return Bw(e,t,null,!0),ft}function Bw(e,t,n,r){let s=be(),i=ct(),o=bu(2);if(i.firstUpdatePass&&Vw(i,e,o,r),t!==Gt&&Wn(s,o,t)){let a=i.data[yn()];zw(i,a,s,s[Pe],e,s[o+1]=Gw(t,n),r,o)}}function jw(e,t){return t>=e.expandoStartIndex}function Vw(e,t,n,r){let s=e.data;if(s[n+1]===null){let i=s[yn()],o=jw(e,n);qw(i,r)&&t===null&&!o&&(t=!1),t=Hw(s,i,t,r),Nw(s,i,t,n,o,r)}}function Hw(e,t,n,r){let s=Lp(e),i=r?t.residualClasses:t.residualStyles;if(s===null)(r?t.classBindings:t.styleBindings)===0&&(n=Vu(null,e,t,n,r),n=Cs(n,t.attrs,r),i=null);else{let o=t.directiveStylingLast;if(o===-1||e[o]!==s)if(n=Vu(s,e,t,n,r),i===null){let c=Uw(e,t,r);c!==void 0&&Array.isArray(c)&&(c=Vu(null,e,t,c[1],r),c=Cs(c,t.attrs,r),$w(e,t,r,c))}else i=Ww(e,t,r)}return i!==void 0&&(r?t.residualClasses=i:t.residualStyles=i),n}function Uw(e,t,n){let r=n?t.classBindings:t.styleBindings;if(fi(r)!==0)return e[_r(r)]}function $w(e,t,n,r){let s=n?t.classBindings:t.styleBindings;e[_r(s)]=r}function Ww(e,t,n){let r,s=t.directiveEnd;for(let i=1+t.directiveStylingLast;i<s;i++){let o=e[i].hostAttrs;r=Cs(r,o,n)}return Cs(r,t.attrs,n)}function Vu(e,t,n,r,s){let i=null,o=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<o&&(i=t[a],r=Cs(r,i.hostAttrs,s),i!==e);)a++;return e!==null&&(n.directiveStylingLast=a),r}function Cs(e,t,n){let r=n?1:2,s=-1;if(t!==null)for(let i=0;i<t.length;i++){let o=t[i];typeof o=="number"?s=o:s===r&&(Array.isArray(e)||(e=e===void 0?[]:["",e]),op(e,o,n?!0:t[++i]))}return e===void 0?null:e}function zw(e,t,n,r,s,i,o,a){if(!(t.type&3))return;let c=e.data,l=c[a+1],p=kw(l)?mg(c,t,n,s,fi(l),o):void 0;if(!Va(p)){Va(i)||Ow(l)&&(i=mg(c,null,n,s,a,o));let m=cu(yn(),n);$C(r,o,m,s,i)}}function mg(e,t,n,r,s,i){let o=t===null,a;for(;s>0;){let c=e[s],l=Array.isArray(c),p=l?c[1]:c,m=p===null,_=n[s+1];_===Gt&&(_=m?Et:void 0);let d=m?ia(_,r):p===r?_:void 0;if(l&&!Va(d)&&(d=ia(c,r)),Va(d)&&(a=d,o))return a;let u=e[s+1];s=o?_r(u):fi(u)}if(t!==null){let c=i?t.residualClasses:t.residualStyles;c!=null&&(a=ia(c,r))}return a}function Va(e){return e!==void 0}function Gw(e,t){return e==null||e===""||(typeof t=="string"?e=e+t:typeof e=="object"&&(e=fn(Gg(e)))),e}function qw(e,t){return(e.flags&(t?8:16))!==0}function K(e,t=""){let n=be(),r=ct(),s=e+at,i=r.firstCreatePass?Ja(r,s,1,t,null):r.data[s],o=Kw(r,n,i,t,e);n[s]=o,fa()&&kd(r,n,o,i),ri(i,!1)}var Kw=(e,t,n,r,s)=>(pa(!0),hC(t[Pe],r));function Yw(e,t,n,r=""){return Wn(e,ii(),n)?t+ns(n)+r:Gt}function Zw(e,t,n,r,s,i=""){let o=Tp(),a=Bb(e,o,n,s);return bu(2),a?t+ns(n)+r+ns(s)+i:Gt}function Pt(e){return ke("",e),Pt}function ke(e,t,n){let r=be(),s=Yw(r,e,t,n);return s!==Gt&&Ym(r,yn(),s),ke}function ic(e,t,n,r,s){let i=be(),o=Zw(i,e,t,n,r,s);return o!==Gt&&Ym(i,yn(),o),ic}function Ym(e,t,n){let r=cu(t,e);fC(e[Pe],r,n)}function vi(e,t,n){xu(t)&&(t=t());let r=be(),s=ii();if(Wn(r,s,t)){let i=ct(),o=Du();hm(o,r,e,t,r[Pe],n)}return vi}function xs(e,t){let n=xu(e);return n&&e.set(t),n}function yi(e,t){let n=be(),r=ct(),s=lt();return Km(r,n,n[Pe],s,e,t),yi}function Xw(e,t,n){let r=ct();if(r.firstCreatePass){let s=tn(e);yd(n,r.data,r.blueprint,s,!0),yd(t,r.data,r.blueprint,s,!1)}}function yd(e,t,n,r,s){if(e=st(e),Array.isArray(e))for(let i=0;i<e.length;i++)yd(e[i],t,n,r,s);else{let i=ct(),o=be(),a=lt(),c=sr(e)?e:st(e.provide),l=ru(e),p=a.providerIndexes&1048575,m=a.directiveStart,_=a.providerIndexes>>20;if(sr(e)||!e.multi){let d=new gr(l,s,Re,null),u=Uu(c,t,s?p:p+_,m);u===-1?(Wu(Ia(a,o),i,c),Hu(i,e,t.length),t.push(c),a.directiveStart++,a.directiveEnd++,s&&(a.providerIndexes+=1048576),n.push(d),o.push(d)):(n[u]=d,o[u]=d)}else{let d=Uu(c,t,p+_,m),u=Uu(c,t,p,p+_),g=d>=0&&n[d],f=u>=0&&n[u];if(s&&!f||!s&&!g){Wu(Ia(a,o),i,c);let h=eS(s?Jw:Qw,n.length,s,r,l,e);!s&&f&&(n[u].providerFactory=h),Hu(i,e,t.length,0),t.push(c),a.directiveStart++,a.directiveEnd++,s&&(a.providerIndexes+=1048576),n.push(h),o.push(h)}else{let h=Zm(n[s?u:d],l,!s&&r);Hu(i,e,d>-1?d:u,h)}!s&&r&&f&&n[u].componentProviders++}}}function Hu(e,t,n,r){let s=sr(t),i=hp(t);if(s||i){let c=(i?st(t.useClass):t).prototype.ngOnDestroy;if(c){let l=e.destroyHooks||(e.destroyHooks=[]);if(!s&&t.multi){let p=l.indexOf(n);p===-1?l.push(n,[r,c]):l[p+1].push(r,c)}else l.push(n,c)}}}function Zm(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function Uu(e,t,n,r){for(let s=n;s<r;s++)if(t[s]===e)return s;return-1}function Qw(e,t,n,r,s){return Cd(this.multi,[])}function Jw(e,t,n,r,s){let i=this.multi,o;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=gs(r,r[oe],this.providerFactory.index,s);o=c.slice(0,a),Cd(i,o);for(let l=a;l<c.length;l++)o.push(c[l])}else o=[],Cd(i,o);return o}function Cd(e,t){for(let n=0;n<e.length;n++){let r=e[n];t.push(r())}return t}function eS(e,t,n,r,s,i){let o=new gr(e,n,Re,null);return o.multi=[],o.index=t,o.componentProviders=0,Zm(o,s,r&&!n),o}function Ci(e,t=[]){return n=>{n.providersResolver=(r,s)=>Xw(r,s?s(e):e,t)}}var Ha=class{ngModuleFactory;componentFactories;constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}},Gd=(()=>{class e{compileModuleSync(n){return new Pa(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),s=Jl(n),i=qg(s.declarations).reduce((o,a)=>{let c=Fn(a);return c&&o.push(new di(c)),o},[]);return new Ha(r,i)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||e)};static \u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var tS=(()=>{class e{zone=H(Fe);changeDetectionScheduler=H(pn);applicationRef=H(In);applicationErrorHandler=H(Mt);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(n){this.applicationErrorHandler(n)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||e)};static \u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Xm=new ne("",{factory:()=>!1});function qd({ngZoneFactory:e,ignoreChangesOutsideZone:t,scheduleInRootZone:n}){return e??=()=>new Fe(ye(z({},Yd()),{scheduleInRootZone:n})),[{provide:Fe,useFactory:e},{provide:mn,multi:!0,useFactory:()=>{let r=H(tS,{optional:!0});return()=>r.initialize()}},{provide:mn,multi:!0,useFactory:()=>{let r=H(nS);return()=>{r.initialize()}}},t===!0?{provide:Au,useValue:!0}:[],{provide:Ru,useValue:n??nm},{provide:Mt,useFactory:()=>{let r=H(Fe),s=H(Xe),i;return o=>{r.runOutsideAngular(()=>{s.destroyed&&!i?setTimeout(()=>{throw o}):(i??=s.get(Vt),i.handleError(o))})}}}]}function Kd(e){let t=e?.ignoreChangesOutsideZone,n=e?.scheduleInRootZone,r=qd({ngZoneFactory:()=>{let s=Yd(e);return s.scheduleInRootZone=n,s.shouldCoalesceEventChangeDetection&&wn("NgZone_CoalesceEvent"),new Fe(s)},ignoreChangesOutsideZone:t,scheduleInRootZone:n});return _n([{provide:Xm,useValue:!0},{provide:ds,useValue:!1},r])}function Yd(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}var nS=(()=>{class e{subscription=new je;initialized=!1;zone=H(Fe);pendingTasks=H(sn);initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Fe.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Fe.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||e)};static \u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var Qm=(()=>{class e{applicationErrorHandler=H(Mt);appRef=H(In);taskService=H(sn);ngZone=H(Fe);zonelessEnabled=H(ds);tracing=H(vr,{optional:!0});disableScheduling=H(Au,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new je;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(xa):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(H(Ru,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Aa||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;let r=!1;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let s=this.useMicrotaskScheduler?Qp:rm;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>s(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>s(()=>this.tick()))}shouldScheduleTick(n){return!(this.disableScheduling&&!n||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(xa+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(n),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Qp(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||e)};static \u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function rS(){return typeof $localize<"u"&&$localize.locale||Ds}var Zd=new ne("",{providedIn:"root",factory:()=>H(Zd,{optional:!0,skipSelf:!0})||rS()});function pt(e){return Yf(e)}function As(e,t){return wo(e,t?.equal)}var Jm=class{[ht];constructor(t){this[ht]=t}destroy(){this[ht].destroy()}};var t_=Symbol("InputSignalNode#UNSET"),mS=ye(z({},So),{transformFn:void 0,applyValueToInputSignal(e,t){Fr(e,t)}});function n_(e,t){let n=Object.create(mS);n.value=e,n.transformFn=t?.transform;function r(){if(kr(n),n.value===t_){let s=null;throw new te(-950,s)}return n.value}return r[ht]=n,r}var _S=new ne("");_S.__NG_ELEMENT_ID__=e=>{let t=lt();if(t===null)throw new te(204,!1);if(t.type&2)return t.value;if(e&8)return null;throw new te(204,!1)};function e_(e,t){return n_(e,t)}function vS(e){return n_(t_,e)}var r_=(e_.required=vS,e_);var Xd=new ne(""),yS=new ne("");function Rs(e){return!e.moduleRef}function CS(e){let t=Rs(e)?e.r3Injector:e.moduleRef.injector,n=t.get(Fe);return n.run(()=>{Rs(e)?e.r3Injector.resolveInjectorInitializers():e.moduleRef.resolveInjectorInitializers();let r=t.get(Mt),s;if(n.runOutsideAngular(()=>{s=n.onError.subscribe({next:r})}),Rs(e)){let i=()=>t.destroy(),o=e.platformInjector.get(Xd);o.add(i),t.onDestroy(()=>{s.unsubscribe(),o.delete(i)})}else{let i=()=>e.moduleRef.destroy(),o=e.platformInjector.get(Xd);o.add(i),e.moduleRef.onDestroy(()=>{ps(e.allPlatformModules,e.moduleRef),s.unsubscribe(),o.delete(i)})}return wS(r,n,()=>{let i=t.get(sn),o=i.add(),a=t.get(Wd);return a.runInitializers(),a.donePromise.then(()=>{let c=t.get(Zd,Ds);if(qm(c||Ds),!t.get(yS,!0))return Rs(e)?t.get(In):(e.allPlatformModules.push(e.moduleRef),e.moduleRef);if(Rs(e)){let p=t.get(In);return e.rootComponent!==void 0&&p.bootstrap(e.rootComponent),p}else return bS?.(e.moduleRef,e.allPlatformModules),e.moduleRef}).finally(()=>void i.remove(o))})})}var bS;function wS(e,t,n){try{let r=n();return br(r)?r.catch(s=>{throw t.runOutsideAngular(()=>e(s)),s}):r}catch(r){throw t.runOutsideAngular(()=>e(r)),r}}var sc=null;function SS(e=[],t){return Rt.create({name:t,providers:[{provide:is,useValue:"platform"},{provide:Xd,useValue:new Set([()=>sc=null])},...e]})}function ES(e=[]){if(sc)return sc;let t=SS(e);return sc=t,Wm(),DS(t),t}function DS(e){let t=e.get(Wa,null);ot(e,()=>{t?.forEach(n=>n())})}var bi=(()=>{class e{static __NG_ELEMENT_ID__=IS}return e})();function IS(e){return MS(lt(),be(),(e&16)===16)}function MS(e,t,n){if(Hn(e)&&!n){let r=Nt(e.index,t);return new $n(r,r)}else if(e.type&175){let r=t[Dt];return new $n(r,t)}return null}function i_(e){let{rootComponent:t,appProviders:n,platformProviders:r,platformRef:s}=e;Te(8);try{let i=s?.injector??ES(r),o=[qd({}),{provide:pn,useExisting:Qm},Vp,...n||[]],a=new ys({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return CS({r3Injector:a.injector,platformInjector:i,rootComponent:t})}catch(i){return Promise.reject(i)}finally{Te(9)}}function Jd(e){return typeof e=="boolean"?e:e!=null&&e!=="false"}var a_=null;function Ft(){return a_}function eh(e){a_??=e}var Os=class{},th=(()=>{class e{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||e)};static \u0275prov=ee({token:e,factory:()=>H(c_),providedIn:"platform"})}return e})();var c_=(()=>{class e extends th{_location;_history;_doc=H(Ke);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ft().getBaseHref(this._doc)}onPopState(n){let r=Ft().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=Ft().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,s){this._history.pushState(n,r,s)}replaceState(n,r,s){this._history.replaceState(n,r,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||e)};static \u0275prov=ee({token:e,factory:()=>new e,providedIn:"platform"})}return e})();function l_(e,t){return e?t?e.endsWith("/")?t.startsWith("/")?e+t.slice(1):e+t:t.startsWith("/")?e+t:`${e}/${t}`:e:t}function s_(e){let t=e.search(/#|\?|$/);return e[t-1]==="/"?e.slice(0,t-1)+e.slice(t):e}function qn(e){return e&&e[0]!=="?"?`?${e}`:e}var oc=(()=>{class e{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||e)};static \u0275prov=ee({token:e,factory:()=>H(d_),providedIn:"root"})}return e})(),u_=new ne(""),d_=(()=>{class e extends oc{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??H(Ke).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return l_(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+qn(this._platformLocation.search),s=this._platformLocation.hash;return s&&n?`${r}${s}`:r}pushState(n,r,s,i){let o=this.prepareExternalUrl(s+qn(i));this._platformLocation.pushState(n,r,o)}replaceState(n,r,s,i){let o=this.prepareExternalUrl(s+qn(i));this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||e)(ae(th),ae(u_,8))};static \u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),wi=(()=>{class e{_subject=new Ne;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=AS(s_(o_(r))),this._locationStrategy.onPopState(s=>{this._subject.next({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+qn(r))}normalize(n){return e.stripTrailingSlash(xS(this._basePath,o_(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",s=null){this._locationStrategy.pushState(s,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+qn(r)),s)}replaceState(n,r="",s=null){this._locationStrategy.replaceState(s,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+qn(r)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(s=>s(n,r))}subscribe(n,r,s){return this._subject.subscribe({next:n,error:r??void 0,complete:s??void 0})}static normalizeQueryParams=qn;static joinWithSlash=l_;static stripTrailingSlash=s_;static \u0275fac=function(r){return new(r||e)(ae(oc))};static \u0275prov=ee({token:e,factory:()=>TS(),providedIn:"root"})}return e})();function TS(){return new wi(ae(oc))}function xS(e,t){if(!e||!t.startsWith(e))return t;let n=t.substring(e.length);return n===""||["/",";","?","#"].includes(n[0])?n:t}function o_(e){return e.replace(/\/index.html$/,"")}function AS(e){if(new RegExp("^(https?:)?//").test(e)){let[,n]=e.split(/\/\/[^\/]+/);return n}return e}var Si=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=En({type:e});static \u0275inj=Qt({})}return e})();function Ls(e,t){t=encodeURIComponent(t);for(let n of e.split(";")){let r=n.indexOf("="),[s,i]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(s.trim()===t)return decodeURIComponent(i)}return null}var Dr=class{};var h_="browser";var ks=class{_doc;constructor(t){this._doc=t}manager},ac=(()=>{class e extends ks{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,s,i){return n.addEventListener(r,s,i),()=>this.removeEventListener(n,r,s,i)}removeEventListener(n,r,s,i){return n.removeEventListener(r,s,i)}static \u0275fac=function(r){return new(r||e)(ae(Ke))};static \u0275prov=ee({token:e,factory:e.\u0275fac})}return e})(),lc=new ne(""),oh=(()=>{class e{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(o=>{o.manager=this});let s=n.filter(o=>!(o instanceof ac));this._plugins=s.slice().reverse();let i=n.find(o=>o instanceof ac);i&&this._plugins.push(i)}addEventListener(n,r,s,i){return this._findPluginFor(r).addEventListener(n,r,s,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(i=>i.supports(n)),!r)throw new te(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||e)(ae(lc),ae(Fe))};static \u0275prov=ee({token:e,factory:e.\u0275fac})}return e})(),nh="ng-app-id";function f_(e){for(let t of e)t.remove()}function p_(e,t){let n=t.createElement("style");return n.textContent=e,n}function OS(e,t,n,r){let s=e.head?.querySelectorAll(`style[${nh}="${t}"],link[${nh}="${t}"]`);if(s)for(let i of s)i.removeAttribute(nh),i instanceof HTMLLinkElement?r.set(i.href.slice(i.href.lastIndexOf("/")+1),{usage:0,elements:[i]}):i.textContent&&n.set(i.textContent,{usage:0,elements:[i]})}function ih(e,t){let n=t.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",e),n}var ah=(()=>{class e{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(n,r,s,i={}){this.doc=n,this.appId=r,this.nonce=s,OS(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(let s of n)this.addUsage(s,this.inline,p_);r?.forEach(s=>this.addUsage(s,this.external,ih))}removeStyles(n,r){for(let s of n)this.removeUsage(s,this.inline);r?.forEach(s=>this.removeUsage(s,this.external))}addUsage(n,r,s){let i=r.get(n);i?i.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(o=>this.addElement(o,s(n,this.doc)))})}removeUsage(n,r){let s=r.get(n);s&&(s.usage--,s.usage<=0&&(f_(s.elements),r.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])f_(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[r,{elements:s}]of this.inline)s.push(this.addElement(n,p_(r,this.doc)));for(let[r,{elements:s}]of this.external)s.push(this.addElement(n,ih(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),n.appendChild(r)}static \u0275fac=function(r){return new(r||e)(ae(Ke),ae($a),ae(za,8),ae(mi))};static \u0275prov=ee({token:e,factory:e.\u0275fac})}return e})(),rh={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},ch=/%COMP%/g;var m_="%COMP%",LS=`_nghost-${m_}`,kS=`_ngcontent-${m_}`,NS=!0,PS=new ne("",{providedIn:"root",factory:()=>NS});function FS(e){return kS.replace(ch,e)}function BS(e){return LS.replace(ch,e)}function __(e,t){return t.map(n=>n.replace(ch,e))}var lh=(()=>{class e{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(n,r,s,i,o,a,c,l=null,p=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=s,this.removeStylesOnCompDestroy=i,this.doc=o,this.platformId=a,this.ngZone=c,this.nonce=l,this.tracingService=p,this.platformIsServer=!1,this.defaultRenderer=new Ns(n,o,c,this.platformIsServer,this.tracingService)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;let s=this.getOrCreateRenderer(n,r);return s instanceof cc?s.applyToHost(n):s instanceof Ps&&s.applyStyles(),s}getOrCreateRenderer(n,r){let s=this.rendererByCompId,i=s.get(r.id);if(!i){let o=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,p=this.removeStylesOnCompDestroy,m=this.platformIsServer,_=this.tracingService;switch(r.encapsulation){case Cn.Emulated:i=new cc(c,l,r,this.appId,p,o,a,m,_);break;case Cn.ShadowDom:return new sh(c,l,n,r,o,a,this.nonce,m,_);default:i=new Ps(c,l,r,p,o,a,m,_);break}s.set(r.id,i)}return i}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||e)(ae(oh),ae(ah),ae($a),ae(PS),ae(Ke),ae(mi),ae(Fe),ae(za),ae(vr,8))};static \u0275prov=ee({token:e,factory:e.\u0275fac})}return e})(),Ns=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(t,n,r,s,i){this.eventManager=t,this.doc=n,this.ngZone=r,this.platformIsServer=s,this.tracingService=i}destroy(){}destroyNode=null;createElement(t,n){return n?this.doc.createElementNS(rh[n]||n,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,n){(g_(t)?t.content:t).appendChild(n)}insertBefore(t,n,r){t&&(g_(t)?t.content:t).insertBefore(n,r)}removeChild(t,n){n.remove()}selectRootElement(t,n){let r=typeof t=="string"?this.doc.querySelector(t):t;if(!r)throw new te(-5104,!1);return n||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,r,s){if(s){n=s+":"+n;let i=rh[s];i?t.setAttributeNS(i,n,r):t.setAttribute(n,r)}else t.setAttribute(n,r)}removeAttribute(t,n,r){if(r){let s=rh[r];s?t.removeAttributeNS(s,n):t.removeAttribute(`${r}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,r,s){s&(bn.DashCase|bn.Important)?t.style.setProperty(n,r,s&bn.Important?"important":""):t.style[n]=r}removeStyle(t,n,r){r&bn.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,r){t!=null&&(t[n]=r)}setValue(t,n){t.nodeValue=n}listen(t,n,r,s){if(typeof t=="string"&&(t=Ft().getGlobalEventTarget(this.doc,t),!t))throw new te(5102,!1);let i=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(i=this.tracingService.wrapEventListener(t,n,i)),this.eventManager.addEventListener(t,n,i,s)}decoratePreventDefault(t){return n=>{if(n==="__ngUnwrap__")return t;t(n)===!1&&n.preventDefault()}}};function g_(e){return e.tagName==="TEMPLATE"&&e.content!==void 0}var sh=class extends Ns{sharedStylesHost;hostEl;shadowRoot;constructor(t,n,r,s,i,o,a,c,l){super(t,i,o,c,l),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let p=s.styles;p=__(s.id,p);for(let _ of p){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=_,this.shadowRoot.appendChild(d)}let m=s.getExternalStyles?.();if(m)for(let _ of m){let d=ih(_,i);a&&d.setAttribute("nonce",a),this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,r){return super.insertBefore(this.nodeOrShadowRoot(t),n,r)}removeChild(t,n){return super.removeChild(null,n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Ps=class extends Ns{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(t,n,r,s,i,o,a,c,l){super(t,i,o,a,c),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=s;let p=r.styles;this.styles=l?__(l,p):p,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&li.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},cc=class extends Ps{contentAttr;hostAttr;constructor(t,n,r,s,i,o,a,c,l){let p=s+"-"+r.id;super(t,n,r,i,o,a,c,l,p),this.contentAttr=FS(p),this.hostAttr=BS(p)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){let r=super.createElement(t,n);return super.setAttribute(r,this.contentAttr,""),r}};var uc=class e extends Os{supportsDOMEvents=!0;static makeCurrent(){eh(new e)}onAndCancel(t,n,r,s){return t.addEventListener(n,r,s),()=>{t.removeEventListener(n,r,s)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.remove()}createElement(t,n){return n=n||this.getDefaultDocument(),n.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return n==="window"?window:n==="document"?t:n==="body"?t.body:null}getBaseHref(t){let n=jS();return n==null?null:VS(n)}resetBaseElement(){Fs=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return Ls(document.cookie,t)}},Fs=null;function jS(){return Fs=Fs||document.head.querySelector("base"),Fs?Fs.getAttribute("href"):null}function VS(e){return new URL(e,document.baseURI).pathname}var HS=(()=>{class e{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||e)};static \u0275prov=ee({token:e,factory:e.\u0275fac})}return e})(),v_=["alt","control","meta","shift"],US={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},$S={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey},y_=(()=>{class e extends ks{constructor(n){super(n)}supports(n){return e.parseEventName(n)!=null}addEventListener(n,r,s,i){let o=e.parseEventName(r),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ft().onAndCancel(n,o.domEventName,a,i))}static parseEventName(n){let r=n.toLowerCase().split("."),s=r.shift();if(r.length===0||!(s==="keydown"||s==="keyup"))return null;let i=e._normalizeKey(r.pop()),o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),v_.forEach(l=>{let p=r.indexOf(l);p>-1&&(r.splice(p,1),o+=l+".")}),o+=i,r.length!=0||i.length===0)return null;let c={};return c.domEventName=s,c.fullKey=o,c}static matchEventFullKeyCode(n,r){let s=US[n.key]||n.key,i="";return r.indexOf("code.")>-1&&(s=n.code,i="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),v_.forEach(o=>{if(o!==s){let a=$S[o];a(n)&&(i+=o+".")}}),i+=s,i===r)}static eventCallback(n,r,s){return i=>{e.matchEventFullKeyCode(i,n)&&s.runGuarded(()=>r(i))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(r){return new(r||e)(ae(Ke))};static \u0275prov=ee({token:e,factory:e.\u0275fac})}return e})();function uh(e,t,n){let r=z({rootComponent:e,platformRef:n?.platformRef},WS(t));return i_(r)}function WS(e){return{appProviders:[...YS,...e?.providers??[]],platformProviders:KS}}function zS(){uc.makeCurrent()}function GS(){return new Vt}function qS(){return Sd(document),document}var KS=[{provide:mi,useValue:h_},{provide:Wa,useValue:zS,multi:!0},{provide:Ke,useFactory:qS}];var YS=[{provide:is,useValue:"root"},{provide:Vt,useFactory:GS},{provide:lc,useClass:ac,multi:!0,deps:[Ke]},{provide:lc,useClass:y_,multi:!0,deps:[Ke]},lh,ah,oh,{provide:mr,useExisting:lh},{provide:Dr,useClass:HS},[]];var Ii=class{},Bs=class{},Kn=class e{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(t){t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let s=n.slice(0,r),i=n.slice(r+1).trim();this.addHeaderEntry(s,i)}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((n,r)=>{this.addHeaderEntry(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let n=this.headers.get(t.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,n){return this.clone({name:t,value:n,op:"a"})}set(t,n){return this.clone({name:t,value:n,op:"s"})}delete(t,n){return this.clone({name:t,value:n,op:"d"})}maybeSetNormalizedName(t,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,t)}init(){this.lazyInit&&(this.lazyInit instanceof e?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(n=>{this.headers.set(n,t.headers.get(n)),this.normalizedNames.set(n,t.normalizedNames.get(n))})}clone(t){let n=new e;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof e?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([t]),n}applyUpdate(t){let n=t.name.toLowerCase();switch(t.op){case"a":case"s":let r=t.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(t.name,n);let s=(t.op==="a"?this.headers.get(n):void 0)||[];s.push(...r),this.headers.set(n,s);break;case"d":let i=t.value;if(!i)this.headers.delete(n),this.normalizedNames.delete(n);else{let o=this.headers.get(n);if(!o)return;o=o.filter(a=>i.indexOf(a)===-1),o.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,o)}break}}addHeaderEntry(t,n){let r=t.toLowerCase();this.maybeSetNormalizedName(t,r),this.headers.has(r)?this.headers.get(r).push(n):this.headers.set(r,[n])}setHeaderEntries(t,n){let r=(Array.isArray(n)?n:[n]).map(i=>i.toString()),s=t.toLowerCase();this.headers.set(s,r),this.maybeSetNormalizedName(t,s)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>t(this.normalizedNames.get(n),this.headers.get(n)))}};var hc=class{encodeKey(t){return C_(t)}encodeValue(t){return C_(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}};function ZS(e,t){let n=new Map;return e.length>0&&e.replace(/^\?/,"").split("&").forEach(s=>{let i=s.indexOf("="),[o,a]=i==-1?[t.decodeKey(s),""]:[t.decodeKey(s.slice(0,i)),t.decodeValue(s.slice(i+1))],c=n.get(o)||[];c.push(a),n.set(o,c)}),n}var XS=/%(\d[a-f0-9])/gi,QS={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function C_(e){return encodeURIComponent(e).replace(XS,(t,n)=>QS[n]??t)}function dc(e){return`${e}`}var Tn=class e{map;encoder;updates=null;cloneFrom=null;constructor(t={}){if(this.encoder=t.encoder||new hc,t.fromString){if(t.fromObject)throw new te(2805,!1);this.map=ZS(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(n=>{let r=t.fromObject[n],s=Array.isArray(r)?r.map(dc):[dc(r)];this.map.set(n,s)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();let n=this.map.get(t);return n?n[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,n){return this.clone({param:t,value:n,op:"a"})}appendAll(t){let n=[];return Object.keys(t).forEach(r=>{let s=t[r];Array.isArray(s)?s.forEach(i=>{n.push({param:r,value:i,op:"a"})}):n.push({param:r,value:s,op:"a"})}),this.clone(n)}set(t,n){return this.clone({param:t,value:n,op:"s"})}delete(t,n){return this.clone({param:t,value:n,op:"d"})}toString(){return this.init(),this.keys().map(t=>{let n=this.encoder.encodeKey(t);return this.map.get(t).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(t=>t!=="").join("&")}clone(t){let n=new e({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(t),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":let n=(t.op==="a"?this.map.get(t.param):void 0)||[];n.push(dc(t.value)),this.map.set(t.param,n);break;case"d":if(t.value!==void 0){let r=this.map.get(t.param)||[],s=r.indexOf(dc(t.value));s!==-1&&r.splice(s,1),r.length>0?this.map.set(t.param,r):this.map.delete(t.param)}else{this.map.delete(t.param);break}}}),this.cloneFrom=this.updates=null)}};var fc=class{map=new Map;set(t,n){return this.map.set(t,n),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}};function JS(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function b_(e){return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer}function w_(e){return typeof Blob<"u"&&e instanceof Blob}function S_(e){return typeof FormData<"u"&&e instanceof FormData}function eE(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}var E_="Content-Type",D_="Accept",I_="X-Request-URL",M_="text/plain",T_="application/json",tE=`${T_}, ${M_}, */*`,Ei=class e{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;credentials;keepalive=!1;cache;priority;mode;redirect;referrer;integrity;responseType="json";method;params;urlWithParams;transferCache;timeout;constructor(t,n,r,s){this.url=n,this.method=t.toUpperCase();let i;if(JS(this.method)||s?(this.body=r!==void 0?r:null,i=s):i=r,i){if(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,this.keepalive=!!i.keepalive,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.context&&(this.context=i.context),i.params&&(this.params=i.params),i.priority&&(this.priority=i.priority),i.cache&&(this.cache=i.cache),i.credentials&&(this.credentials=i.credentials),typeof i.timeout=="number"){if(i.timeout<1||!Number.isInteger(i.timeout))throw new te(2822,"");this.timeout=i.timeout}i.mode&&(this.mode=i.mode),i.redirect&&(this.redirect=i.redirect),i.integrity&&(this.integrity=i.integrity),i.referrer&&(this.referrer=i.referrer),this.transferCache=i.transferCache}if(this.headers??=new Kn,this.context??=new fc,!this.params)this.params=new Tn,this.urlWithParams=n;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=n;else{let a=n.indexOf("?"),c=a===-1?"?":a<n.length-1?"&":"";this.urlWithParams=n+c+o}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||b_(this.body)||w_(this.body)||S_(this.body)||eE(this.body)?this.body:this.body instanceof Tn?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||S_(this.body)?null:w_(this.body)?this.body.type||null:b_(this.body)?null:typeof this.body=="string"?M_:this.body instanceof Tn?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?T_:null}clone(t={}){let n=t.method||this.method,r=t.url||this.url,s=t.responseType||this.responseType,i=t.keepalive??this.keepalive,o=t.priority||this.priority,a=t.cache||this.cache,c=t.mode||this.mode,l=t.redirect||this.redirect,p=t.credentials||this.credentials,m=t.referrer||this.referrer,_=t.integrity||this.integrity,d=t.transferCache??this.transferCache,u=t.timeout??this.timeout,g=t.body!==void 0?t.body:this.body,f=t.withCredentials??this.withCredentials,h=t.reportProgress??this.reportProgress,v=t.headers||this.headers,b=t.params||this.params,C=t.context??this.context;return t.setHeaders!==void 0&&(v=Object.keys(t.setHeaders).reduce((S,y)=>S.set(y,t.setHeaders[y]),v)),t.setParams&&(b=Object.keys(t.setParams).reduce((S,y)=>S.set(y,t.setParams[y]),b)),new e(n,r,g,{params:b,headers:v,context:C,reportProgress:h,responseType:s,withCredentials:f,transferCache:d,keepalive:i,cache:a,priority:o,timeout:u,mode:c,redirect:l,credentials:p,referrer:m,integrity:_})}},Ir=(function(e){return e[e.Sent=0]="Sent",e[e.UploadProgress=1]="UploadProgress",e[e.ResponseHeader=2]="ResponseHeader",e[e.DownloadProgress=3]="DownloadProgress",e[e.Response=4]="Response",e[e.User=5]="User",e})(Ir||{}),Mi=class{headers;status;statusText;url;ok;type;redirected;constructor(t,n=200,r="OK"){this.headers=t.headers||new Kn,this.status=t.status!==void 0?t.status:n,this.statusText=t.statusText||r,this.url=t.url||null,this.redirected=t.redirected,this.ok=this.status>=200&&this.status<300}},pc=class e extends Mi{constructor(t={}){super(t)}type=Ir.ResponseHeader;clone(t={}){return new e({headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},js=class e extends Mi{body;constructor(t={}){super(t),this.body=t.body!==void 0?t.body:null}type=Ir.Response;clone(t={}){return new e({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0,redirected:t.redirected??this.redirected})}},Di=class extends Mi{name="HttpErrorResponse";message;error;ok=!1;constructor(t){super(t,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${t.url||"(unknown url)"}`:this.message=`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}},nE=200,rE=204;function dh(e,t){return{body:t,headers:e.headers,context:e.context,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials,credentials:e.credentials,transferCache:e.transferCache,timeout:e.timeout,keepalive:e.keepalive,priority:e.priority,cache:e.cache,mode:e.mode,redirect:e.redirect,integrity:e.integrity,referrer:e.referrer}}var Ti=(()=>{class e{handler;constructor(n){this.handler=n}request(n,r,s={}){let i;if(n instanceof Ei)i=n;else{let c;s.headers instanceof Kn?c=s.headers:c=new Kn(s.headers);let l;s.params&&(s.params instanceof Tn?l=s.params:l=new Tn({fromObject:s.params})),i=new Ei(n,r,s.body!==void 0?s.body:null,{headers:c,context:s.context,params:l,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials,transferCache:s.transferCache,keepalive:s.keepalive,priority:s.priority,cache:s.cache,mode:s.mode,redirect:s.redirect,credentials:s.credentials,referrer:s.referrer,integrity:s.integrity,timeout:s.timeout})}let o=re(i).pipe(Ln(c=>this.handler.handle(c)));if(n instanceof Ei||s.observe==="events")return o;let a=o.pipe(yt(c=>c instanceof js));switch(s.observe||"body"){case"body":switch(i.responseType){case"arraybuffer":return a.pipe(fe(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new te(2806,!1);return c.body}));case"blob":return a.pipe(fe(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new te(2807,!1);return c.body}));case"text":return a.pipe(fe(c=>{if(c.body!==null&&typeof c.body!="string")throw new te(2808,!1);return c.body}));case"json":default:return a.pipe(fe(c=>c.body))}case"response":return a;default:throw new te(2809,!1)}}delete(n,r={}){return this.request("DELETE",n,r)}get(n,r={}){return this.request("GET",n,r)}head(n,r={}){return this.request("HEAD",n,r)}jsonp(n,r){return this.request("JSONP",n,{params:new Tn().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(n,r={}){return this.request("OPTIONS",n,r)}patch(n,r,s={}){return this.request("PATCH",n,dh(s,r))}post(n,r,s={}){return this.request("POST",n,dh(s,r))}put(n,r,s={}){return this.request("PUT",n,dh(s,r))}static \u0275fac=function(r){return new(r||e)(ae(Ii))};static \u0275prov=ee({token:e,factory:e.\u0275fac})}return e})();var iE=new ne("");function sE(e,t){return t(e)}function oE(e,t,n){return(r,s)=>ot(n,()=>t(r,i=>e(i,s)))}var x_=new ne(""),A_=new ne(""),R_=new ne("",{providedIn:"root",factory:()=>!0});var gc=(()=>{class e extends Ii{backend;injector;chain=null;pendingTasks=H(ma);contributeToStability=H(R_);constructor(n,r){super(),this.backend=n,this.injector=r}handle(n){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(x_),...this.injector.get(A_,[])]));this.chain=r.reduceRight((s,i)=>oE(s,i,this.injector),sE)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(n,s=>this.backend.handle(s)).pipe(tr(r))}else return this.chain(n,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||e)(ae(Bs),ae(Xe))};static \u0275prov=ee({token:e,factory:e.\u0275fac})}return e})();var aE=/^\)\]\}',?\n/,cE=RegExp(`^${I_}:`,"m");function lE(e){return"responseURL"in e&&e.responseURL?e.responseURL:cE.test(e.getAllResponseHeaders())?e.getResponseHeader(I_):null}var hh=(()=>{class e{xhrFactory;constructor(n){this.xhrFactory=n}handle(n){if(n.method==="JSONP")throw new te(-2800,!1);let r=this.xhrFactory;return re(null).pipe(Ze(()=>new pe(i=>{let o=r.build();if(o.open(n.method,n.urlWithParams),n.withCredentials&&(o.withCredentials=!0),n.headers.forEach((f,h)=>o.setRequestHeader(f,h.join(","))),n.headers.has(D_)||o.setRequestHeader(D_,tE),!n.headers.has(E_)){let f=n.detectContentTypeHeader();f!==null&&o.setRequestHeader(E_,f)}if(n.timeout&&(o.timeout=n.timeout),n.responseType){let f=n.responseType.toLowerCase();o.responseType=f!=="json"?f:"text"}let a=n.serializeBody(),c=null,l=()=>{if(c!==null)return c;let f=o.statusText||"OK",h=new Kn(o.getAllResponseHeaders()),v=lE(o)||n.url;return c=new pc({headers:h,status:o.status,statusText:f,url:v}),c},p=()=>{let{headers:f,status:h,statusText:v,url:b}=l(),C=null;h!==rE&&(C=typeof o.response>"u"?o.responseText:o.response),h===0&&(h=C?nE:0);let S=h>=200&&h<300;if(n.responseType==="json"&&typeof C=="string"){let y=C;C=C.replace(aE,"");try{C=C!==""?JSON.parse(C):null}catch(w){C=y,S&&(S=!1,C={error:w,text:C})}}S?(i.next(new js({body:C,headers:f,status:h,statusText:v,url:b||void 0})),i.complete()):i.error(new Di({error:C,headers:f,status:h,statusText:v,url:b||void 0}))},m=f=>{let{url:h}=l(),v=new Di({error:f,status:o.status||0,statusText:o.statusText||"Unknown Error",url:h||void 0});i.error(v)},_=m;n.timeout&&(_=f=>{let{url:h}=l(),v=new Di({error:new DOMException("Request timed out","TimeoutError"),status:o.status||0,statusText:o.statusText||"Request timeout",url:h||void 0});i.error(v)});let d=!1,u=f=>{d||(i.next(l()),d=!0);let h={type:Ir.DownloadProgress,loaded:f.loaded};f.lengthComputable&&(h.total=f.total),n.responseType==="text"&&o.responseText&&(h.partialText=o.responseText),i.next(h)},g=f=>{let h={type:Ir.UploadProgress,loaded:f.loaded};f.lengthComputable&&(h.total=f.total),i.next(h)};return o.addEventListener("load",p),o.addEventListener("error",m),o.addEventListener("timeout",_),o.addEventListener("abort",m),n.reportProgress&&(o.addEventListener("progress",u),a!==null&&o.upload&&o.upload.addEventListener("progress",g)),o.send(a),i.next({type:Ir.Sent}),()=>{o.removeEventListener("error",m),o.removeEventListener("abort",m),o.removeEventListener("load",p),o.removeEventListener("timeout",_),n.reportProgress&&(o.removeEventListener("progress",u),a!==null&&o.upload&&o.upload.removeEventListener("progress",g)),o.readyState!==o.DONE&&o.abort()}})))}static \u0275fac=function(r){return new(r||e)(ae(Dr))};static \u0275prov=ee({token:e,factory:e.\u0275fac})}return e})(),O_=new ne(""),uE="XSRF-TOKEN",dE=new ne("",{providedIn:"root",factory:()=>uE}),hE="X-XSRF-TOKEN",fE=new ne("",{providedIn:"root",factory:()=>hE}),Vs=class{},pE=(()=>{class e{doc;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(n,r){this.doc=n,this.cookieName=r}getToken(){let n=this.doc.cookie||"";return n!==this.lastCookieString&&(this.parseCount++,this.lastToken=Ls(n,this.cookieName),this.lastCookieString=n),this.lastToken}static \u0275fac=function(r){return new(r||e)(ae(Ke),ae(dE))};static \u0275prov=ee({token:e,factory:e.\u0275fac})}return e})();function gE(e,t){let n=e.url.toLowerCase();if(!H(O_)||e.method==="GET"||e.method==="HEAD"||n.startsWith("http://")||n.startsWith("https://"))return t(e);let r=H(Vs).getToken(),s=H(fE);return r!=null&&!e.headers.has(s)&&(e=e.clone({headers:e.headers.set(s,r)})),t(e)}function fh(...e){let t=[Ti,hh,gc,{provide:Ii,useExisting:gc},{provide:Bs,useFactory:()=>H(iE,{optional:!0})??H(hh)},{provide:x_,useValue:gE,multi:!0},{provide:O_,useValue:!0},{provide:Vs,useClass:pE}];for(let n of e)t.push(...n.\u0275providers);return _n(t)}var L_=(()=>{class e{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(r){return new(r||e)(ae(Ke))};static \u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var de="primary",Js=Symbol("RouteTitle"),vh=class{params;constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n[0]:n}return null}getAll(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function ki(e){return new vh(e)}function _E(e,t,n){let r=n.path.split("/");if(r.length>e.length||n.pathMatch==="full"&&(t.hasChildren()||r.length<e.length))return null;let s={};for(let i=0;i<r.length;i++){let o=r[i],a=e[i];if(o[0]===":")s[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:e.slice(0,r.length),posParams:s}}function vE(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!an(e[n],t[n]))return!1;return!0}function an(e,t){let n=e?yh(e):void 0,r=t?yh(t):void 0;if(!n||!r||n.length!=r.length)return!1;let s;for(let i=0;i<n.length;i++)if(s=n[i],!H_(e[s],t[s]))return!1;return!0}function yh(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}function H_(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;let n=[...e].sort(),r=[...t].sort();return n.every((s,i)=>r[i]===s)}else return e===t}function U_(e){return e.length>0?e[e.length-1]:null}function Rn(e){return wl(e)?e:br(e)?Ve(Promise.resolve(e)):re(e)}var yE={exact:W_,subset:z_},$_={exact:CE,subset:bE,ignored:()=>!0};function k_(e,t,n){return yE[n.paths](e.root,t.root,n.matrixParams)&&$_[n.queryParams](e.queryParams,t.queryParams)&&!(n.fragment==="exact"&&e.fragment!==t.fragment)}function CE(e,t){return an(e,t)}function W_(e,t,n){if(!Tr(e.segments,t.segments)||!vc(e.segments,t.segments,n)||e.numberOfChildren!==t.numberOfChildren)return!1;for(let r in t.children)if(!e.children[r]||!W_(e.children[r],t.children[r],n))return!1;return!0}function bE(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>H_(e[n],t[n]))}function z_(e,t,n){return G_(e,t,t.segments,n)}function G_(e,t,n,r){if(e.segments.length>n.length){let s=e.segments.slice(0,n.length);return!(!Tr(s,n)||t.hasChildren()||!vc(s,n,r))}else if(e.segments.length===n.length){if(!Tr(e.segments,n)||!vc(e.segments,n,r))return!1;for(let s in t.children)if(!e.children[s]||!z_(e.children[s],t.children[s],r))return!1;return!0}else{let s=n.slice(0,e.segments.length),i=n.slice(e.segments.length);return!Tr(e.segments,s)||!vc(e.segments,s,r)||!e.children[de]?!1:G_(e.children[de],t,i,r)}}function vc(e,t,n){return t.every((r,s)=>$_[n](e[s].parameters,r.parameters))}var An=class{root;queryParams;fragment;_queryParamMap;constructor(t=new Me([],{}),n={},r=null){this.root=t,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=ki(this.queryParams),this._queryParamMap}toString(){return EE.serialize(this)}},Me=class{segments;children;parent=null;constructor(t,n){this.segments=t,this.children=n,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return yc(this)}},Mr=class{path;parameters;_parameterMap;constructor(t,n){this.path=t,this.parameters=n}get parameterMap(){return this._parameterMap??=ki(this.parameters),this._parameterMap}toString(){return K_(this)}};function wE(e,t){return Tr(e,t)&&e.every((n,r)=>an(n.parameters,t[r].parameters))}function Tr(e,t){return e.length!==t.length?!1:e.every((n,r)=>n.path===t[r].path)}function SE(e,t){let n=[];return Object.entries(e.children).forEach(([r,s])=>{r===de&&(n=n.concat(t(s,r)))}),Object.entries(e.children).forEach(([r,s])=>{r!==de&&(n=n.concat(t(s,r)))}),n}var Rc=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=ee({token:e,factory:()=>new Ni,providedIn:"root"})}return e})(),Ni=class{parse(t){let n=new bh(t);return new An(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(t){let n=`/${Hs(t.root,!0)}`,r=ME(t.queryParams),s=typeof t.fragment=="string"?`#${DE(t.fragment)}`:"";return`${n}${r}${s}`}},EE=new Ni;function yc(e){return e.segments.map(t=>K_(t)).join("/")}function Hs(e,t){if(!e.hasChildren())return yc(e);if(t){let n=e.children[de]?Hs(e.children[de],!1):"",r=[];return Object.entries(e.children).forEach(([s,i])=>{s!==de&&r.push(`${s}:${Hs(i,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=SE(e,(r,s)=>s===de?[Hs(e.children[de],!1)]:[`${s}:${Hs(r,!1)}`]);return Object.keys(e.children).length===1&&e.children[de]!=null?`${yc(e)}/${n[0]}`:`${yc(e)}/(${n.join("//")})`}}function q_(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function mc(e){return q_(e).replace(/%3B/gi,";")}function DE(e){return encodeURI(e)}function Ch(e){return q_(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Cc(e){return decodeURIComponent(e)}function N_(e){return Cc(e.replace(/\+/g,"%20"))}function K_(e){return`${Ch(e.path)}${IE(e.parameters)}`}function IE(e){return Object.entries(e).map(([t,n])=>`;${Ch(t)}=${Ch(n)}`).join("")}function ME(e){let t=Object.entries(e).map(([n,r])=>Array.isArray(r)?r.map(s=>`${mc(n)}=${mc(s)}`).join("&"):`${mc(n)}=${mc(r)}`).filter(n=>n);return t.length?`?${t.join("&")}`:""}var TE=/^[^\/()?;#]+/;function ph(e){let t=e.match(TE);return t?t[0]:""}var xE=/^[^\/()?;=#]+/;function AE(e){let t=e.match(xE);return t?t[0]:""}var RE=/^[^=?&#]+/;function OE(e){let t=e.match(RE);return t?t[0]:""}var LE=/^[^&#]+/;function kE(e){let t=e.match(LE);return t?t[0]:""}var bh=class{url;remaining;constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Me([],{}):new Me([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(n).length>0)&&(r[de]=new Me(t,n)),r}parseSegment(){let t=ph(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new te(4009,!1);return this.capture(t),new Mr(Cc(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let n=AE(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=ph(this.remaining);s&&(r=s,this.capture(r))}t[Cc(n)]=Cc(r)}parseQueryParam(t){let n=OE(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=kE(this.remaining);o&&(r=o,this.capture(r))}let s=N_(n),i=N_(r);if(t.hasOwnProperty(s)){let o=t[s];Array.isArray(o)||(o=[o],t[s]=o),o.push(i)}else t[s]=i}parseParens(t){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=ph(this.remaining),s=this.remaining[r.length];if(s!=="/"&&s!==")"&&s!==";")throw new te(4010,!1);let i;r.indexOf(":")>-1?(i=r.slice(0,r.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=de);let o=this.parseChildren();n[i??de]=Object.keys(o).length===1&&o[de]?o[de]:new Me([],o),this.consumeOptional("//")}return n}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new te(4011,!1)}};function Y_(e){return e.segments.length>0?new Me([],{[de]:e}):e}function Z_(e){let t={};for(let[r,s]of Object.entries(e.children)){let i=Z_(s);if(r===de&&i.segments.length===0&&i.hasChildren())for(let[o,a]of Object.entries(i.children))t[o]=a;else(i.segments.length>0||i.hasChildren())&&(t[r]=i)}let n=new Me(e.segments,t);return NE(n)}function NE(e){if(e.numberOfChildren===1&&e.children[de]){let t=e.children[de];return new Me(e.segments.concat(t.segments),t.children)}return e}function Pi(e){return e instanceof An}function PE(e,t,n=null,r=null){let s=X_(e);return Q_(s,t,n,r)}function X_(e){let t;function n(i){let o={};for(let c of i.children){let l=n(c);o[c.outlet]=l}let a=new Me(i.url,o);return i===e&&(t=a),a}let r=n(e.root),s=Y_(r);return t??s}function Q_(e,t,n,r){let s=e;for(;s.parent;)s=s.parent;if(t.length===0)return gh(s,s,s,n,r);let i=FE(t);if(i.toRoot())return gh(s,s,new Me([],{}),n,r);let o=BE(i,s,e),a=o.processChildren?$s(o.segmentGroup,o.index,i.commands):ev(o.segmentGroup,o.index,i.commands);return gh(s,o.segmentGroup,a,n,r)}function bc(e){return typeof e=="object"&&e!=null&&!e.outlets&&!e.segmentPath}function Gs(e){return typeof e=="object"&&e!=null&&e.outlets}function gh(e,t,n,r,s){let i={};r&&Object.entries(r).forEach(([c,l])=>{i[c]=Array.isArray(l)?l.map(p=>`${p}`):`${l}`});let o;e===t?o=n:o=J_(e,t,n);let a=Y_(Z_(o));return new An(a,i,s)}function J_(e,t,n){let r={};return Object.entries(e.children).forEach(([s,i])=>{i===t?r[s]=n:r[s]=J_(i,t,n)}),new Me(e.segments,r)}var wc=class{isAbsolute;numberOfDoubleDots;commands;constructor(t,n,r){if(this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=r,t&&r.length>0&&bc(r[0]))throw new te(4003,!1);let s=r.find(Gs);if(s&&s!==U_(r))throw new te(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function FE(e){if(typeof e[0]=="string"&&e.length===1&&e[0]==="/")return new wc(!0,0,e);let t=0,n=!1,r=e.reduce((s,i,o)=>{if(typeof i=="object"&&i!=null){if(i.outlets){let a={};return Object.entries(i.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...s,{outlets:a}]}if(i.segmentPath)return[...s,i.segmentPath]}return typeof i!="string"?[...s,i]:o===0?(i.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?t++:a!=""&&s.push(a))}),s):[...s,i]},[]);return new wc(n,t,r)}var Ri=class{segmentGroup;processChildren;index;constructor(t,n,r){this.segmentGroup=t,this.processChildren=n,this.index=r}};function BE(e,t,n){if(e.isAbsolute)return new Ri(t,!0,0);if(!n)return new Ri(t,!1,NaN);if(n.parent===null)return new Ri(n,!0,0);let r=bc(e.commands[0])?0:1,s=n.segments.length-1+r;return jE(n,s,e.numberOfDoubleDots)}function jE(e,t,n){let r=e,s=t,i=n;for(;i>s;){if(i-=s,r=r.parent,!r)throw new te(4005,!1);s=r.segments.length}return new Ri(r,!1,s-i)}function VE(e){return Gs(e[0])?e[0].outlets:{[de]:e}}function ev(e,t,n){if(e??=new Me([],{}),e.segments.length===0&&e.hasChildren())return $s(e,t,n);let r=HE(e,t,n),s=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){let i=new Me(e.segments.slice(0,r.pathIndex),{});return i.children[de]=new Me(e.segments.slice(r.pathIndex),e.children),$s(i,0,s)}else return r.match&&s.length===0?new Me(e.segments,{}):r.match&&!e.hasChildren()?wh(e,t,n):r.match?$s(e,0,s):wh(e,t,n)}function $s(e,t,n){if(n.length===0)return new Me(e.segments,{});{let r=VE(n),s={};if(Object.keys(r).some(i=>i!==de)&&e.children[de]&&e.numberOfChildren===1&&e.children[de].segments.length===0){let i=$s(e.children[de],t,n);return new Me(e.segments,i.children)}return Object.entries(r).forEach(([i,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(s[i]=ev(e.children[i],t,o))}),Object.entries(e.children).forEach(([i,o])=>{r[i]===void 0&&(s[i]=o)}),new Me(e.segments,s)}}function HE(e,t,n){let r=0,s=t,i={match:!1,pathIndex:0,commandIndex:0};for(;s<e.segments.length;){if(r>=n.length)return i;let o=e.segments[s],a=n[r];if(Gs(a))break;let c=`${a}`,l=r<n.length-1?n[r+1]:null;if(s>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!F_(c,l,o))return i;r+=2}else{if(!F_(c,{},o))return i;r++}s++}return{match:!0,pathIndex:s,commandIndex:r}}function wh(e,t,n){let r=e.segments.slice(0,t),s=0;for(;s<n.length;){let i=n[s];if(Gs(i)){let c=UE(i.outlets);return new Me(r,c)}if(s===0&&bc(n[0])){let c=e.segments[t];r.push(new Mr(c.path,P_(n[0]))),s++;continue}let o=Gs(i)?i.outlets[de]:`${i}`,a=s<n.length-1?n[s+1]:null;o&&a&&bc(a)?(r.push(new Mr(o,P_(a))),s+=2):(r.push(new Mr(o,{})),s++)}return new Me(r,{})}function UE(e){let t={};return Object.entries(e).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(t[n]=wh(new Me([],{}),0,r))}),t}function P_(e){let t={};return Object.entries(e).forEach(([n,r])=>t[n]=`${r}`),t}function F_(e,t,n){return e==n.path&&an(t,n.parameters)}var Ws="imperative",ut=(function(e){return e[e.NavigationStart=0]="NavigationStart",e[e.NavigationEnd=1]="NavigationEnd",e[e.NavigationCancel=2]="NavigationCancel",e[e.NavigationError=3]="NavigationError",e[e.RoutesRecognized=4]="RoutesRecognized",e[e.ResolveStart=5]="ResolveStart",e[e.ResolveEnd=6]="ResolveEnd",e[e.GuardsCheckStart=7]="GuardsCheckStart",e[e.GuardsCheckEnd=8]="GuardsCheckEnd",e[e.RouteConfigLoadStart=9]="RouteConfigLoadStart",e[e.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",e[e.ChildActivationStart=11]="ChildActivationStart",e[e.ChildActivationEnd=12]="ChildActivationEnd",e[e.ActivationStart=13]="ActivationStart",e[e.ActivationEnd=14]="ActivationEnd",e[e.Scroll=15]="Scroll",e[e.NavigationSkipped=16]="NavigationSkipped",e})(ut||{}),Bt=class{id;url;constructor(t,n){this.id=t,this.url=n}},Fi=class extends Bt{type=ut.NavigationStart;navigationTrigger;restoredState;constructor(t,n,r="imperative",s=null){super(t,n),this.navigationTrigger=r,this.restoredState=s}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Yn=class extends Bt{urlAfterRedirects;type=ut.NavigationEnd;constructor(t,n,r){super(t,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},bt=(function(e){return e[e.Redirect=0]="Redirect",e[e.SupersededByNewNavigation=1]="SupersededByNewNavigation",e[e.NoDataFromResolver=2]="NoDataFromResolver",e[e.GuardRejected=3]="GuardRejected",e[e.Aborted=4]="Aborted",e})(bt||{}),Sc=(function(e){return e[e.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",e[e.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",e})(Sc||{}),xn=class extends Bt{reason;code;type=ut.NavigationCancel;constructor(t,n,r,s){super(t,n),this.reason=r,this.code=s}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Zn=class extends Bt{reason;code;type=ut.NavigationSkipped;constructor(t,n,r,s){super(t,n),this.reason=r,this.code=s}},qs=class extends Bt{error;target;type=ut.NavigationError;constructor(t,n,r,s){super(t,n),this.error=r,this.target=s}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Ec=class extends Bt{urlAfterRedirects;state;type=ut.RoutesRecognized;constructor(t,n,r,s){super(t,n),this.urlAfterRedirects=r,this.state=s}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Sh=class extends Bt{urlAfterRedirects;state;type=ut.GuardsCheckStart;constructor(t,n,r,s){super(t,n),this.urlAfterRedirects=r,this.state=s}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Eh=class extends Bt{urlAfterRedirects;state;shouldActivate;type=ut.GuardsCheckEnd;constructor(t,n,r,s,i){super(t,n),this.urlAfterRedirects=r,this.state=s,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Dh=class extends Bt{urlAfterRedirects;state;type=ut.ResolveStart;constructor(t,n,r,s){super(t,n),this.urlAfterRedirects=r,this.state=s}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ih=class extends Bt{urlAfterRedirects;state;type=ut.ResolveEnd;constructor(t,n,r,s){super(t,n),this.urlAfterRedirects=r,this.state=s}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Mh=class{route;type=ut.RouteConfigLoadStart;constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Th=class{route;type=ut.RouteConfigLoadEnd;constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},xh=class{snapshot;type=ut.ChildActivationStart;constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ah=class{snapshot;type=ut.ChildActivationEnd;constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Rh=class{snapshot;type=ut.ActivationStart;constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Oh=class{snapshot;type=ut.ActivationEnd;constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Ks=class{},Bi=class{url;navigationBehaviorOptions;constructor(t,n){this.url=t,this.navigationBehaviorOptions=n}};function $E(e){return!(e instanceof Ks)&&!(e instanceof Bi)}function WE(e,t){return e.providers&&!e._injector&&(e._injector=Ss(e.providers,t,`Route: ${e.path}`)),e._injector??t}function Yt(e){return e.outlet||de}function zE(e,t){let n=e.filter(r=>Yt(r)===t);return n.push(...e.filter(r=>Yt(r)!==t)),n}function Vi(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let t=e.parent;t;t=t.parent){let n=t.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var Lh=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Vi(this.route?.snapshot)??this.rootInjector}constructor(t){this.rootInjector=t,this.children=new eo(this.rootInjector)}},eo=(()=>{class e{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,r){let s=this.getOrCreateContext(n);s.outlet=r,this.contexts.set(n,s)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new Lh(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(r){return new(r||e)(ae(Xe))};static \u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Dc=class{_root;constructor(t){this._root=t}get root(){return this._root.value}parent(t){let n=this.pathFromRoot(t);return n.length>1?n[n.length-2]:null}children(t){let n=kh(t,this._root);return n?n.children.map(r=>r.value):[]}firstChild(t){let n=kh(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){let n=Nh(t,this._root);return n.length<2?[]:n[n.length-2].children.map(s=>s.value).filter(s=>s!==t)}pathFromRoot(t){return Nh(t,this._root).map(n=>n.value)}};function kh(e,t){if(e===t.value)return t;for(let n of t.children){let r=kh(e,n);if(r)return r}return null}function Nh(e,t){if(e===t.value)return[t];for(let n of t.children){let r=Nh(e,n);if(r.length)return r.unshift(t),r}return[]}var Tt=class{value;children;constructor(t,n){this.value=t,this.children=n}toString(){return`TreeNode(${this.value})`}};function Ai(e){let t={};return e&&e.children.forEach(n=>t[n.value.outlet]=n),t}var Ic=class extends Dc{snapshot;constructor(t,n){super(t),this.snapshot=n,Wh(this,t)}toString(){return this.snapshot.toString()}};function tv(e){let t=GE(e),n=new it([new Mr("",{})]),r=new it({}),s=new it({}),i=new it({}),o=new it(""),a=new xr(n,r,i,o,s,de,e,t.root);return a.snapshot=t.root,new Ic(new Tt(a,[]),t)}function GE(e){let t={},n={},r={},i=new Oi([],t,r,"",n,de,e,null,{});return new Tc("",new Tt(i,[]))}var xr=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(t,n,r,s,i,o,a,c){this.urlSubject=t,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=s,this.dataSubject=i,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(fe(l=>l[Js]))??re(void 0),this.url=t,this.params=n,this.queryParams=r,this.fragment=s,this.data=i}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(fe(t=>ki(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(fe(t=>ki(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Mc(e,t,n="emptyOnly"){let r,{routeConfig:s}=e;return t!==null&&(n==="always"||s?.path===""||!t.component&&!t.routeConfig?.loadComponent)?r={params:z(z({},t.params),e.params),data:z(z({},t.data),e.data),resolve:z(z(z(z({},e.data),t.data),s?.data),e._resolvedData)}:r={params:z({},e.params),data:z({},e.data),resolve:z(z({},e.data),e._resolvedData??{})},s&&rv(s)&&(r.resolve[Js]=s.title),r}var Oi=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Js]}constructor(t,n,r,s,i,o,a,c,l){this.url=t,this.params=n,this.queryParams=r,this.fragment=s,this.data=i,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=ki(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=ki(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${n}')`}},Tc=class extends Dc{url;constructor(t,n){super(n),this.url=t,Wh(this,n)}toString(){return nv(this._root)}};function Wh(e,t){t.value._routerState=e,t.children.forEach(n=>Wh(e,n))}function nv(e){let t=e.children.length>0?` { ${e.children.map(nv).join(", ")} } `:"";return`${e.value}${t}`}function mh(e){if(e.snapshot){let t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,an(t.queryParams,n.queryParams)||e.queryParamsSubject.next(n.queryParams),t.fragment!==n.fragment&&e.fragmentSubject.next(n.fragment),an(t.params,n.params)||e.paramsSubject.next(n.params),vE(t.url,n.url)||e.urlSubject.next(n.url),an(t.data,n.data)||e.dataSubject.next(n.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function Ph(e,t){let n=an(e.params,t.params)&&wE(e.url,t.url),r=!e.parent!=!t.parent;return n&&!r&&(!e.parent||Ph(e.parent,t.parent))}function rv(e){return typeof e.title=="string"||e.title===null}var qE=new ne(""),iv=(()=>{class e{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=de;activateEvents=new $e;deactivateEvents=new $e;attachEvents=new $e;detachEvents=new $e;routerOutletData=r_();parentContexts=H(eo);location=H(Cr);changeDetector=H(bi);inputBinder=H(Oc,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:s}=n.name;if(r)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new te(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new te(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new te(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new te(4013,!1);this._activatedRoute=n;let s=this.location,o=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new Fh(n,a,s.injector,this.routerOutletData);this.activated=s.createComponent(o,{index:s.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||e)};static \u0275dir=Ct({type:e,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[pi]})}return e})(),Fh=class{route;childContexts;parent;outletData;constructor(t,n,r,s){this.route=t,this.childContexts=n,this.parent=r,this.outletData=s}get(t,n){return t===xr?this.route:t===eo?this.childContexts:t===qE?this.outletData:this.parent.get(t,n)}},Oc=new ne("");var sv=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275cmp=Sn({type:e,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,s){r&1&&qt(0,"router-outlet")},dependencies:[iv],encapsulation:2})}return e})();function zh(e){let t=e.children&&e.children.map(zh),n=t?ye(z({},e),{children:t}):z({},e);return!n.component&&!n.loadComponent&&(t||n.loadChildren)&&n.outlet&&n.outlet!==de&&(n.component=sv),n}function KE(e,t,n){let r=Ys(e,t._root,n?n._root:void 0);return new Ic(r,t)}function Ys(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=t.value;let s=YE(e,t,n);return new Tt(r,s)}else{if(e.shouldAttach(t.value)){let i=e.retrieve(t.value);if(i!==null){let o=i.route;return o.value._futureSnapshot=t.value,o.children=t.children.map(a=>Ys(e,a)),o}}let r=ZE(t.value),s=t.children.map(i=>Ys(e,i));return new Tt(r,s)}}function YE(e,t,n){return t.children.map(r=>{for(let s of n.children)if(e.shouldReuseRoute(r.value,s.value.snapshot))return Ys(e,r,s);return Ys(e,r)})}function ZE(e){return new xr(new it(e.url),new it(e.params),new it(e.queryParams),new it(e.fragment),new it(e.data),e.outlet,e.component,e)}var Zs=class{redirectTo;navigationBehaviorOptions;constructor(t,n){this.redirectTo=t,this.navigationBehaviorOptions=n}},ov="ngNavigationCancelingError";function xc(e,t){let{redirectTo:n,navigationBehaviorOptions:r}=Pi(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,s=av(!1,bt.Redirect);return s.url=n,s.navigationBehaviorOptions=r,s}function av(e,t){let n=new Error(`NavigationCancelingError: ${e||""}`);return n[ov]=!0,n.cancellationCode=t,n}function XE(e){return cv(e)&&Pi(e.url)}function cv(e){return!!e&&e[ov]}var QE=(e,t,n,r)=>fe(s=>(new Bh(t,s.targetRouterState,s.currentRouterState,n,r).activate(e),s)),Bh=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(t,n,r,s,i){this.routeReuseStrategy=t,this.futureState=n,this.currState=r,this.forwardEvent=s,this.inputBindingEnabled=i}activate(t){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,t),mh(this.futureState.root),this.activateChildRoutes(n,r,t)}deactivateChildRoutes(t,n,r){let s=Ai(n);t.children.forEach(i=>{let o=i.value.outlet;this.deactivateRoutes(i,s[o],r),delete s[o]}),Object.values(s).forEach(i=>{this.deactivateRouteAndItsChildren(i,r)})}deactivateRoutes(t,n,r){let s=t.value,i=n?n.value:null;if(s===i)if(s.component){let o=r.getContext(s.outlet);o&&this.deactivateChildRoutes(t,n,o.children)}else this.deactivateChildRoutes(t,n,r);else i&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(t,n){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,n):this.deactivateRouteAndOutlet(t,n)}detachAndStoreRouteSubtree(t,n){let r=n.getContext(t.value.outlet),s=r&&t.value.component?r.children:n,i=Ai(t);for(let o of Object.values(i))this.deactivateRouteAndItsChildren(o,s);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:o,route:t,contexts:a})}}deactivateRouteAndOutlet(t,n){let r=n.getContext(t.value.outlet),s=r&&t.value.component?r.children:n,i=Ai(t);for(let o of Object.values(i))this.deactivateRouteAndItsChildren(o,s);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(t,n,r){let s=Ai(n);t.children.forEach(i=>{this.activateRoutes(i,s[i.value.outlet],r),this.forwardEvent(new Oh(i.value.snapshot))}),t.children.length&&this.forwardEvent(new Ah(t.value.snapshot))}activateRoutes(t,n,r){let s=t.value,i=n?n.value:null;if(mh(s),s===i)if(s.component){let o=r.getOrCreateContext(s.outlet);this.activateChildRoutes(t,n,o.children)}else this.activateChildRoutes(t,n,r);else if(s.component){let o=r.getOrCreateContext(s.outlet);if(this.routeReuseStrategy.shouldAttach(s.snapshot)){let a=this.routeReuseStrategy.retrieve(s.snapshot);this.routeReuseStrategy.store(s.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),mh(a.route.value),this.activateChildRoutes(t,null,o.children)}else o.attachRef=null,o.route=s,o.outlet&&o.outlet.activateWith(s,o.injector),this.activateChildRoutes(t,null,o.children)}else this.activateChildRoutes(t,null,r)}},Ac=class{path;route;constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},Li=class{component;route;constructor(t,n){this.component=t,this.route=n}};function JE(e,t,n){let r=e._root,s=t?t._root:null;return Us(r,s,n,[r.value])}function eD(e){let t=e.routeConfig?e.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:e,guards:t}}function Hi(e,t){let n=Symbol(),r=t.get(e,n);return r===n?typeof e=="function"&&!Ul(e)?e:t.get(e):r}function Us(e,t,n,r,s={canDeactivateChecks:[],canActivateChecks:[]}){let i=Ai(t);return e.children.forEach(o=>{tD(o,i[o.value.outlet],n,r.concat([o.value]),s),delete i[o.value.outlet]}),Object.entries(i).forEach(([o,a])=>zs(a,n.getContext(o),s)),s}function tD(e,t,n,r,s={canDeactivateChecks:[],canActivateChecks:[]}){let i=e.value,o=t?t.value:null,a=n?n.getContext(e.value.outlet):null;if(o&&i.routeConfig===o.routeConfig){let c=nD(o,i,i.routeConfig.runGuardsAndResolvers);c?s.canActivateChecks.push(new Ac(r)):(i.data=o.data,i._resolvedData=o._resolvedData),i.component?Us(e,t,a?a.children:null,r,s):Us(e,t,n,r,s),c&&a&&a.outlet&&a.outlet.isActivated&&s.canDeactivateChecks.push(new Li(a.outlet.component,o))}else o&&zs(t,a,s),s.canActivateChecks.push(new Ac(r)),i.component?Us(e,null,a?a.children:null,r,s):Us(e,null,n,r,s);return s}function nD(e,t,n){if(typeof n=="function")return n(e,t);switch(n){case"pathParamsChange":return!Tr(e.url,t.url);case"pathParamsOrQueryParamsChange":return!Tr(e.url,t.url)||!an(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ph(e,t)||!an(e.queryParams,t.queryParams);case"paramsChange":default:return!Ph(e,t)}}function zs(e,t,n){let r=Ai(e),s=e.value;Object.entries(r).forEach(([i,o])=>{s.component?t?zs(o,t.children.getContext(i),n):zs(o,null,n):zs(o,t,n)}),s.component?t&&t.outlet&&t.outlet.isActivated?n.canDeactivateChecks.push(new Li(t.outlet.component,s)):n.canDeactivateChecks.push(new Li(null,s)):n.canDeactivateChecks.push(new Li(null,s))}function to(e){return typeof e=="function"}function rD(e){return typeof e=="boolean"}function iD(e){return e&&to(e.canLoad)}function sD(e){return e&&to(e.canActivate)}function oD(e){return e&&to(e.canActivateChild)}function aD(e){return e&&to(e.canDeactivate)}function cD(e){return e&&to(e.canMatch)}function lv(e){return e instanceof ln||e?.name==="EmptyError"}var _c=Symbol("INITIAL_VALUE");function ji(){return Ze(e=>Yo(e.map(t=>t.pipe(un(1),Ml(_c)))).pipe(fe(t=>{for(let n of t)if(n!==!0){if(n===_c)return _c;if(n===!1||lD(n))return n}return!0}),yt(t=>t!==_c),un(1)))}function lD(e){return Pi(e)||e instanceof Zs}function uD(e,t){return Ye(n=>{let{targetSnapshot:r,currentSnapshot:s,guards:{canActivateChecks:i,canDeactivateChecks:o}}=n;return o.length===0&&i.length===0?re(ye(z({},n),{guardsResult:!0})):dD(o,r,s,e).pipe(Ye(a=>a&&rD(a)?hD(r,i,e,t):re(a)),fe(a=>ye(z({},n),{guardsResult:a})))})}function dD(e,t,n,r){return Ve(e).pipe(Ye(s=>_D(s.component,s.route,n,t,r)),dn(s=>s!==!0,!0))}function hD(e,t,n,r){return Ve(t).pipe(Ln(s=>qr(pD(s.route.parent,r),fD(s.route,r),mD(e,s.path,n),gD(e,s.route,n))),dn(s=>s!==!0,!0))}function fD(e,t){return e!==null&&t&&t(new Rh(e)),re(!0)}function pD(e,t){return e!==null&&t&&t(new xh(e)),re(!0)}function gD(e,t,n){let r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||r.length===0)return re(!0);let s=r.map(i=>Xi(()=>{let o=Vi(t)??n,a=Hi(i,o),c=sD(a)?a.canActivate(t,e):ot(o,()=>a(t,e));return Rn(c).pipe(dn())}));return re(s).pipe(ji())}function mD(e,t,n){let r=t[t.length-1],i=t.slice(0,t.length-1).reverse().map(o=>eD(o)).filter(o=>o!==null).map(o=>Xi(()=>{let a=o.guards.map(c=>{let l=Vi(o.node)??n,p=Hi(c,l),m=oD(p)?p.canActivateChild(r,e):ot(l,()=>p(r,e));return Rn(m).pipe(dn())});return re(a).pipe(ji())}));return re(i).pipe(ji())}function _D(e,t,n,r,s){let i=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!i||i.length===0)return re(!0);let o=i.map(a=>{let c=Vi(t)??s,l=Hi(a,c),p=aD(l)?l.canDeactivate(e,t,n,r):ot(c,()=>l(e,t,n,r));return Rn(p).pipe(dn())});return re(o).pipe(ji())}function vD(e,t,n,r){let s=t.canLoad;if(s===void 0||s.length===0)return re(!0);let i=s.map(o=>{let a=Hi(o,e),c=iD(a)?a.canLoad(t,n):ot(e,()=>a(t,n));return Rn(c)});return re(i).pipe(ji(),uv(r))}function uv(e){return ml(He(t=>{if(typeof t!="boolean")throw xc(e,t)}),fe(t=>t===!0))}function yD(e,t,n,r){let s=t.canMatch;if(!s||s.length===0)return re(!0);let i=s.map(o=>{let a=Hi(o,e),c=cD(a)?a.canMatch(t,n):ot(e,()=>a(t,n));return Rn(c)});return re(i).pipe(ji(),uv(r))}var Xs=class{segmentGroup;constructor(t){this.segmentGroup=t||null}},Qs=class extends Error{urlTree;constructor(t){super(),this.urlTree=t}};function xi(e){return Gr(new Xs(e))}function CD(e){return Gr(new te(4e3,!1))}function bD(e){return Gr(av(!1,bt.GuardRejected))}var jh=class{urlSerializer;urlTree;constructor(t,n){this.urlSerializer=t,this.urlTree=n}lineralizeSegments(t,n){let r=[],s=n.root;for(;;){if(r=r.concat(s.segments),s.numberOfChildren===0)return re(r);if(s.numberOfChildren>1||!s.children[de])return CD(`${t.redirectTo}`);s=s.children[de]}}applyRedirectCommands(t,n,r,s,i){return wD(n,s,i).pipe(fe(o=>{if(o instanceof An)throw new Qs(o);let a=this.applyRedirectCreateUrlTree(o,this.urlSerializer.parse(o),t,r);if(o[0]==="/")throw new Qs(a);return a}))}applyRedirectCreateUrlTree(t,n,r,s){let i=this.createSegmentGroup(t,n.root,r,s);return new An(i,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(t,n){let r={};return Object.entries(t).forEach(([s,i])=>{if(typeof i=="string"&&i[0]===":"){let a=i.substring(1);r[s]=n[a]}else r[s]=i}),r}createSegmentGroup(t,n,r,s){let i=this.createSegments(t,n.segments,r,s),o={};return Object.entries(n.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(t,c,r,s)}),new Me(i,o)}createSegments(t,n,r,s){return n.map(i=>i.path[0]===":"?this.findPosParam(t,i,s):this.findOrReturn(i,r))}findPosParam(t,n,r){let s=r[n.path.substring(1)];if(!s)throw new te(4001,!1);return s}findOrReturn(t,n){let r=0;for(let s of n){if(s.path===t.path)return n.splice(r),s;r++}return t}};function wD(e,t,n){if(typeof e=="string")return re(e);let r=e,{queryParams:s,fragment:i,routeConfig:o,url:a,outlet:c,params:l,data:p,title:m}=t;return Rn(ot(n,()=>r({params:l,data:p,queryParams:s,fragment:i,routeConfig:o,url:a,outlet:c,title:m})))}var Vh={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function SD(e,t,n,r,s){let i=dv(e,t,n);return i.matched?(r=WE(t,r),yD(r,t,n,s).pipe(fe(o=>o===!0?i:z({},Vh)))):re(i)}function dv(e,t,n){if(t.path==="**")return ED(n);if(t.path==="")return t.pathMatch==="full"&&(e.hasChildren()||n.length>0)?z({},Vh):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let s=(t.matcher||_E)(n,e,t);if(!s)return z({},Vh);let i={};Object.entries(s.posParams??{}).forEach(([a,c])=>{i[a]=c.path});let o=s.consumed.length>0?z(z({},i),s.consumed[s.consumed.length-1].parameters):i;return{matched:!0,consumedSegments:s.consumed,remainingSegments:n.slice(s.consumed.length),parameters:o,positionalParamSegments:s.posParams??{}}}function ED(e){return{matched:!0,parameters:e.length>0?U_(e).parameters:{},consumedSegments:e,remainingSegments:[],positionalParamSegments:{}}}function B_(e,t,n,r){return n.length>0&&MD(e,n,r)?{segmentGroup:new Me(t,ID(r,new Me(n,e.children))),slicedSegments:[]}:n.length===0&&TD(e,n,r)?{segmentGroup:new Me(e.segments,DD(e,n,r,e.children)),slicedSegments:n}:{segmentGroup:new Me(e.segments,e.children),slicedSegments:n}}function DD(e,t,n,r){let s={};for(let i of n)if(Lc(e,t,i)&&!r[Yt(i)]){let o=new Me([],{});s[Yt(i)]=o}return z(z({},r),s)}function ID(e,t){let n={};n[de]=t;for(let r of e)if(r.path===""&&Yt(r)!==de){let s=new Me([],{});n[Yt(r)]=s}return n}function MD(e,t,n){return n.some(r=>Lc(e,t,r)&&Yt(r)!==de)}function TD(e,t,n){return n.some(r=>Lc(e,t,r))}function Lc(e,t,n){return(e.hasChildren()||t.length>0)&&n.pathMatch==="full"?!1:n.path===""}function xD(e,t,n){return t.length===0&&!e.children[n]}var Hh=class{};function AD(e,t,n,r,s,i,o="emptyOnly"){return new Uh(e,t,n,r,s,o,i).recognize()}var RD=31,Uh=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(t,n,r,s,i,o,a){this.injector=t,this.configLoader=n,this.rootComponentType=r,this.config=s,this.urlTree=i,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new jh(this.urlSerializer,this.urlTree)}noMatchError(t){return new te(4002,`'${t.segmentGroup}'`)}recognize(){let t=B_(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(fe(({children:n,rootSnapshot:r})=>{let s=new Tt(r,n),i=new Tc("",s),o=PE(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,i.url=this.urlSerializer.serialize(o),{state:i,tree:o}}))}match(t){let n=new Oi([],Object.freeze({}),Object.freeze(z({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),de,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,t,de,n).pipe(fe(r=>({children:r,rootSnapshot:n})),At(r=>{if(r instanceof Qs)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Xs?this.noMatchError(r):r}))}processSegmentGroup(t,n,r,s,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(t,n,r,i):this.processSegment(t,n,r,r.segments,s,!0,i).pipe(fe(o=>o instanceof Tt?[o]:[]))}processChildren(t,n,r,s){let i=[];for(let o of Object.keys(r.children))o==="primary"?i.unshift(o):i.push(o);return Ve(i).pipe(Ln(o=>{let a=r.children[o],c=zE(n,o);return this.processSegmentGroup(t,c,a,o,s)}),Il((o,a)=>(o.push(...a),o)),kn(null),Dl(),Ye(o=>{if(o===null)return xi(r);let a=hv(o);return OD(a),re(a)}))}processSegment(t,n,r,s,i,o,a){return Ve(n).pipe(Ln(c=>this.processSegmentAgainstRoute(c._injector??t,n,c,r,s,i,o,a).pipe(At(l=>{if(l instanceof Xs)return re(null);throw l}))),dn(c=>!!c),At(c=>{if(lv(c))return xD(r,s,i)?re(new Hh):xi(r);throw c}))}processSegmentAgainstRoute(t,n,r,s,i,o,a,c){return Yt(r)!==o&&(o===de||!Lc(s,i,r))?xi(s):r.redirectTo===void 0?this.matchSegmentAgainstRoute(t,s,r,i,o,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(t,s,n,r,i,o,c):xi(s)}expandSegmentAgainstRouteUsingRedirect(t,n,r,s,i,o,a){let{matched:c,parameters:l,consumedSegments:p,positionalParamSegments:m,remainingSegments:_}=dv(n,s,i);if(!c)return xi(n);typeof s.redirectTo=="string"&&s.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>RD&&(this.allowRedirects=!1));let d=new Oi(i,l,Object.freeze(z({},this.urlTree.queryParams)),this.urlTree.fragment,j_(s),Yt(s),s.component??s._loadedComponent??null,s,V_(s)),u=Mc(d,a,this.paramsInheritanceStrategy);return d.params=Object.freeze(u.params),d.data=Object.freeze(u.data),this.applyRedirects.applyRedirectCommands(p,s.redirectTo,m,d,t).pipe(Ze(f=>this.applyRedirects.lineralizeSegments(s,f)),Ye(f=>this.processSegment(t,r,n,f.concat(_),o,!1,a)))}matchSegmentAgainstRoute(t,n,r,s,i,o){let a=SD(n,r,s,t,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(Ze(c=>c.matched?(t=r._injector??t,this.getChildConfig(t,r,s).pipe(Ze(({routes:l})=>{let p=r._loadedInjector??t,{parameters:m,consumedSegments:_,remainingSegments:d}=c,u=new Oi(_,m,Object.freeze(z({},this.urlTree.queryParams)),this.urlTree.fragment,j_(r),Yt(r),r.component??r._loadedComponent??null,r,V_(r)),g=Mc(u,o,this.paramsInheritanceStrategy);u.params=Object.freeze(g.params),u.data=Object.freeze(g.data);let{segmentGroup:f,slicedSegments:h}=B_(n,_,d,l);if(h.length===0&&f.hasChildren())return this.processChildren(p,l,f,u).pipe(fe(b=>new Tt(u,b)));if(l.length===0&&h.length===0)return re(new Tt(u,[]));let v=Yt(r)===i;return this.processSegment(p,l,f,h,v?de:i,!0,u).pipe(fe(b=>new Tt(u,b instanceof Tt?[b]:[])))}))):xi(n)))}getChildConfig(t,n,r){return n.children?re({routes:n.children,injector:t}):n.loadChildren?n._loadedRoutes!==void 0?re({routes:n._loadedRoutes,injector:n._loadedInjector}):vD(t,n,r,this.urlSerializer).pipe(Ye(s=>s?this.configLoader.loadChildren(t,n).pipe(He(i=>{n._loadedRoutes=i.routes,n._loadedInjector=i.injector})):bD(n))):re({routes:[],injector:t})}};function OD(e){e.sort((t,n)=>t.value.outlet===de?-1:n.value.outlet===de?1:t.value.outlet.localeCompare(n.value.outlet))}function LD(e){let t=e.value.routeConfig;return t&&t.path===""}function hv(e){let t=[],n=new Set;for(let r of e){if(!LD(r)){t.push(r);continue}let s=t.find(i=>r.value.routeConfig===i.value.routeConfig);s!==void 0?(s.children.push(...r.children),n.add(s)):t.push(r)}for(let r of n){let s=hv(r.children);t.push(new Tt(r.value,s))}return t.filter(r=>!n.has(r))}function j_(e){return e.data||{}}function V_(e){return e.resolve||{}}function kD(e,t,n,r,s,i){return Ye(o=>AD(e,t,n,r,o.extractedUrl,s,i).pipe(fe(({state:a,tree:c})=>ye(z({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function ND(e,t){return Ye(n=>{let{targetSnapshot:r,guards:{canActivateChecks:s}}=n;if(!s.length)return re(n);let i=new Set(s.map(c=>c.route)),o=new Set;for(let c of i)if(!o.has(c))for(let l of fv(c))o.add(l);let a=0;return Ve(o).pipe(Ln(c=>i.has(c)?PD(c,r,e,t):(c.data=Mc(c,c.parent,e).resolve,re(void 0))),He(()=>a++),Kr(1),Ye(c=>a===o.size?re(n):_t))})}function fv(e){let t=e.children.map(n=>fv(n)).flat();return[e,...t]}function PD(e,t,n,r){let s=e.routeConfig,i=e._resolve;return s?.title!==void 0&&!rv(s)&&(i[Js]=s.title),Xi(()=>(e.data=Mc(e,e.parent,n).resolve,FD(i,e,t,r).pipe(fe(o=>(e._resolvedData=o,e.data=z(z({},e.data),o),null)))))}function FD(e,t,n,r){let s=yh(e);if(s.length===0)return re({});let i={};return Ve(s).pipe(Ye(o=>BD(e[o],t,n,r).pipe(dn(),He(a=>{if(a instanceof Zs)throw xc(new Ni,a);i[o]=a}))),Kr(1),fe(()=>i),At(o=>lv(o)?_t:Gr(o)))}function BD(e,t,n,r){let s=Vi(t)??r,i=Hi(e,s),o=i.resolve?i.resolve(t,n):ot(s,()=>i(t,n));return Rn(o)}function _h(e){return Ze(t=>{let n=e(t);return n?Ve(n).pipe(fe(()=>t)):re(t)})}var pv=(()=>{class e{buildTitle(n){let r,s=n.root;for(;s!==void 0;)r=this.getResolvedTitleForRoute(s)??r,s=s.children.find(i=>i.outlet===de);return r}getResolvedTitleForRoute(n){return n.data[Js]}static \u0275fac=function(r){return new(r||e)};static \u0275prov=ee({token:e,factory:()=>H(jD),providedIn:"root"})}return e})(),jD=(()=>{class e extends pv{title;constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||e)(ae(L_))};static \u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),kc=new ne("",{providedIn:"root",factory:()=>({})}),Nc=new ne(""),gv=(()=>{class e{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=H(Gd);loadComponent(n,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return re(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let s=Rn(ot(n,()=>r.loadComponent())).pipe(fe(mv),Ze(_v),He(o=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o}),tr(()=>{this.componentLoaders.delete(r)})),i=new Wr(s,()=>new Ne).pipe($r());return this.componentLoaders.set(r,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return re({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let i=VD(r,this.compiler,n,this.onLoadEndListener).pipe(tr(()=>{this.childrenLoaders.delete(r)})),o=new Wr(i,()=>new Ne).pipe($r());return this.childrenLoaders.set(r,o),o}static \u0275fac=function(r){return new(r||e)};static \u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function VD(e,t,n,r){return Rn(ot(n,()=>e.loadChildren())).pipe(fe(mv),Ze(_v),Ye(s=>s instanceof tc||Array.isArray(s)?re(s):Ve(t.compileModuleAsync(s))),fe(s=>{r&&r(e);let i,o,a=!1;return Array.isArray(s)?(o=s,a=!0):(i=s.create(n).injector,o=i.get(Nc,[],{optional:!0,self:!0}).flat()),{routes:o.map(zh),injector:i}}))}function HD(e){return e&&typeof e=="object"&&"default"in e}function mv(e){return HD(e)?e.default:e}function _v(e){return re(e)}var Gh=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=ee({token:e,factory:()=>H(UD),providedIn:"root"})}return e})(),UD=(()=>{class e{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static \u0275fac=function(r){return new(r||e)};static \u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),vv=new ne("");var yv=new ne(""),Cv=(()=>{class e{currentNavigation=Ae(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new Ne;transitionAbortWithErrorSubject=new Ne;configLoader=H(gv);environmentInjector=H(Xe);destroyRef=H($t);urlSerializer=H(Rc);rootContexts=H(eo);location=H(wi);inputBindingEnabled=H(Oc,{optional:!0})!==null;titleStrategy=H(pv);options=H(kc,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=H(Gh);createViewTransition=H(vv,{optional:!0});navigationErrorHandler=H(yv,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>re(void 0);rootComponentType=null;destroyed=!1;constructor(){let n=s=>this.events.next(new Mh(s)),r=s=>this.events.next(new Th(s));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;pt(()=>{this.transitions?.next(ye(z({},n),{extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))})}setupNavigations(n){return this.transitions=new it(null),this.transitions.pipe(yt(r=>r!==null),Ze(r=>{let s=!1;return re(r).pipe(Ze(i=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",bt.SupersededByNewNavigation),_t;this.currentTransition=r,this.currentNavigation.set({id:i.id,initialUrl:i.rawUrl,extractedUrl:i.extractedUrl,targetBrowserUrl:typeof i.extras.browserUrl=="string"?this.urlSerializer.parse(i.extras.browserUrl):i.extras.browserUrl,trigger:i.source,extras:i.extras,previousNavigation:this.lastSuccessfulNavigation?ye(z({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>i.abortController.abort()});let o=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=i.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!o&&a!=="reload")return this.events.next(new Zn(i.id,this.urlSerializer.serialize(i.rawUrl),"",Sc.IgnoredSameUrlNavigation)),i.resolve(!1),_t;if(this.urlHandlingStrategy.shouldProcessUrl(i.rawUrl))return re(i).pipe(Ze(c=>(this.events.next(new Fi(c.id,this.urlSerializer.serialize(c.extractedUrl),c.source,c.restoredState)),c.id!==this.navigationId?_t:Promise.resolve(c))),kD(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),He(c=>{r.targetSnapshot=c.targetSnapshot,r.urlAfterRedirects=c.urlAfterRedirects,this.currentNavigation.update(p=>(p.finalUrl=c.urlAfterRedirects,p));let l=new Ec(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}));if(o&&this.urlHandlingStrategy.shouldProcessUrl(i.currentRawUrl)){let{id:c,extractedUrl:l,source:p,restoredState:m,extras:_}=i,d=new Fi(c,this.urlSerializer.serialize(l),p,m);this.events.next(d);let u=tv(this.rootComponentType).snapshot;return this.currentTransition=r=ye(z({},i),{targetSnapshot:u,urlAfterRedirects:l,extras:ye(z({},_),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(g=>(g.finalUrl=l,g)),re(r)}else return this.events.next(new Zn(i.id,this.urlSerializer.serialize(i.extractedUrl),"",Sc.IgnoredByUrlHandlingStrategy)),i.resolve(!1),_t}),He(i=>{let o=new Sh(i.id,this.urlSerializer.serialize(i.extractedUrl),this.urlSerializer.serialize(i.urlAfterRedirects),i.targetSnapshot);this.events.next(o)}),fe(i=>(this.currentTransition=r=ye(z({},i),{guards:JE(i.targetSnapshot,i.currentSnapshot,this.rootContexts)}),r)),uD(this.environmentInjector,i=>this.events.next(i)),He(i=>{if(r.guardsResult=i.guardsResult,i.guardsResult&&typeof i.guardsResult!="boolean")throw xc(this.urlSerializer,i.guardsResult);let o=new Eh(i.id,this.urlSerializer.serialize(i.extractedUrl),this.urlSerializer.serialize(i.urlAfterRedirects),i.targetSnapshot,!!i.guardsResult);this.events.next(o)}),yt(i=>i.guardsResult?!0:(this.cancelNavigationTransition(i,"",bt.GuardRejected),!1)),_h(i=>{if(i.guards.canActivateChecks.length!==0)return re(i).pipe(He(o=>{let a=new Dh(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(a)}),Ze(o=>{let a=!1;return re(o).pipe(ND(this.paramsInheritanceStrategy,this.environmentInjector),He({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(o,"",bt.NoDataFromResolver)}}))}),He(o=>{let a=new Ih(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(a)}))}),_h(i=>{let o=a=>{let c=[];if(a.routeConfig?.loadComponent){let l=Vi(a)??this.environmentInjector;c.push(this.configLoader.loadComponent(l,a.routeConfig).pipe(He(p=>{a.component=p}),fe(()=>{})))}for(let l of a.children)c.push(...o(l));return c};return Yo(o(i.targetSnapshot.root)).pipe(kn(null),un(1))}),_h(()=>this.afterPreactivation()),Ze(()=>{let{currentSnapshot:i,targetSnapshot:o}=r,a=this.createViewTransition?.(this.environmentInjector,i.root,o.root);return a?Ve(a).pipe(fe(()=>r)):re(r)}),fe(i=>{let o=KE(n.routeReuseStrategy,i.targetSnapshot,i.currentRouterState);return this.currentTransition=r=ye(z({},i),{targetRouterState:o}),this.currentNavigation.update(a=>(a.targetRouterState=o,a)),r}),He(()=>{this.events.next(new Ks)}),QE(this.rootContexts,n.routeReuseStrategy,i=>this.events.next(i),this.inputBindingEnabled),un(1),Xo(new pe(i=>{let o=r.abortController.signal,a=()=>i.next();return o.addEventListener("abort",a),()=>o.removeEventListener("abort",a)}).pipe(yt(()=>!s&&!r.targetRouterState),He(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",bt.Aborted)}))),He({next:i=>{s=!0,this.lastSuccessfulNavigation=pt(this.currentNavigation),this.events.next(new Yn(i.id,this.urlSerializer.serialize(i.extractedUrl),this.urlSerializer.serialize(i.urlAfterRedirects))),this.titleStrategy?.updateTitle(i.targetRouterState.snapshot),i.resolve(!0)},complete:()=>{s=!0}}),Xo(this.transitionAbortWithErrorSubject.pipe(He(i=>{throw i}))),tr(()=>{s||this.cancelNavigationTransition(r,"",bt.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),At(i=>{if(this.destroyed)return r.resolve(!1),_t;if(s=!0,cv(i))this.events.next(new xn(r.id,this.urlSerializer.serialize(r.extractedUrl),i.message,i.cancellationCode)),XE(i)?this.events.next(new Bi(i.url,i.navigationBehaviorOptions)):r.resolve(!1);else{let o=new qs(r.id,this.urlSerializer.serialize(r.extractedUrl),i,r.targetSnapshot??void 0);try{let a=ot(this.environmentInjector,()=>this.navigationErrorHandler?.(o));if(a instanceof Zs){let{message:c,cancellationCode:l}=xc(this.urlSerializer,a);this.events.next(new xn(r.id,this.urlSerializer.serialize(r.extractedUrl),c,l)),this.events.next(new Bi(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(o),i}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return _t}))}))}cancelNavigationTransition(n,r,s){let i=new xn(n.id,this.urlSerializer.serialize(n.extractedUrl),r,s);this.events.next(i),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=pt(this.currentNavigation),s=r?.targetBrowserUrl??r?.extractedUrl;return n.toString()!==s?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||e)};static \u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function $D(e){return e!==Ws}var WD=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=ee({token:e,factory:()=>H(zD),providedIn:"root"})}return e})(),$h=class{shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t.routeConfig===n.routeConfig}},zD=(()=>{class e extends $h{static \u0275fac=(()=>{let n;return function(s){return(n||(n=zn(e)))(s||e)}})();static \u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),bv=(()=>{class e{urlSerializer=H(Rc);options=H(kc,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=H(wi);urlHandlingStrategy=H(Gh);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new An;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:n,initialUrl:r,targetBrowserUrl:s}){let i=n!==void 0?this.urlHandlingStrategy.merge(n,r):r,o=s??i;return o instanceof An?this.urlSerializer.serialize(o):o}commitTransition({targetRouterState:n,finalUrl:r,initialUrl:s}){r&&n?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,s),this.routerState=n):this.rawUrlTree=s}routerState=tv(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:n}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n??this.rawUrlTree)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=ee({token:e,factory:()=>H(GD),providedIn:"root"})}return e})(),GD=(()=>{class e extends bv{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{n(r.url,r.state,"popstate")})})}handleRouterEvent(n,r){n instanceof Fi?this.updateStateMemento():n instanceof Zn?this.commitTransition(r):n instanceof Ec?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof Ks?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof xn&&n.code!==bt.SupersededByNewNavigation&&n.code!==bt.Redirect?this.restoreHistory(r):n instanceof qs?this.restoreHistory(r,!0):n instanceof Yn&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,{extras:r,id:s}){let{replaceUrl:i,state:o}=r;if(this.location.isCurrentPathEqualTo(n)||i){let a=this.browserPageId,c=z(z({},o),this.generateNgRouterState(s,a));this.location.replaceState(n,"",c)}else{let a=z(z({},o),this.generateNgRouterState(s,this.browserPageId+1));this.location.go(n,"",a)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,i=this.currentPageId-s;i!==0?this.location.historyGo(i):this.getCurrentUrlTree()===n.finalUrl&&i===0&&(this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(s){return(n||(n=zn(e)))(s||e)}})();static \u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function wv(e,t){e.events.pipe(yt(n=>n instanceof Yn||n instanceof xn||n instanceof qs||n instanceof Zn),fe(n=>n instanceof Yn||n instanceof Zn?0:(n instanceof xn?n.code===bt.Redirect||n.code===bt.SupersededByNewNavigation:!1)?2:1),yt(n=>n!==2),un(1)).subscribe(()=>{t()})}var qD={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},KD={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},qh=(()=>{class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=H(Ud);stateManager=H(bv);options=H(kc,{optional:!0})||{};pendingTasks=H(sn);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=H(Cv);urlSerializer=H(Rc);location=H(wi);urlHandlingStrategy=H(Gh);injector=H(Xe);_events=new Ne;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=H(WD);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=H(Nc,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!H(Oc,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}eventsSubscription=new je;subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let s=this.navigationTransitions.currentTransition,i=pt(this.navigationTransitions.currentNavigation);if(s!==null&&i!==null){if(this.stateManager.handleRouterEvent(r,i),r instanceof xn&&r.code!==bt.Redirect&&r.code!==bt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Yn)this.navigated=!0;else if(r instanceof Bi){let o=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,s.currentRawUrl),c=z({browserUrl:s.extras.browserUrl,info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:s.extras.replaceUrl||this.urlUpdateStrategy==="eager"||$D(s.source)},o);this.scheduleNavigation(a,Ws,null,c,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}$E(r)&&this._events.next(r)}catch(s){this.navigationTransitions.transitionAbortWithErrorSubject.next(s)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Ws,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r,s)=>{this.navigateToSyncWithBrowser(n,s,r)})}navigateToSyncWithBrowser(n,r,s){let i={replaceUrl:!0},o=s?.navigationId?s:null;if(s){let c=z({},s);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(i.state=c)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,o,i).catch(c=>{this.disposed||this.injector.get(Mt)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return pt(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(zh),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:s,queryParams:i,fragment:o,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:o,p=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":p=z(z({},this.currentUrlTree.queryParams),i);break;case"preserve":p=this.currentUrlTree.queryParams;break;default:p=i||null}p!==null&&(p=this.removeEmptyProps(p));let m;try{let _=s?s.snapshot:this.routerState.snapshot.root;m=X_(_)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),m=this.currentUrlTree.root}return Q_(m,n,p,l??null)}navigateByUrl(n,r={skipLocationChange:!1}){let s=Pi(n)?n:this.parseUrl(n),i=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(i,Ws,null,r)}navigate(n,r={skipLocationChange:!1}){return YD(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.console.warn(Zr(4018,!1)),this.urlSerializer.parse("/")}}isActive(n,r){let s;if(r===!0?s=z({},qD):r===!1?s=z({},KD):s=r,Pi(n))return k_(this.currentUrlTree,n,s);let i=this.parseUrl(n);return k_(this.currentUrlTree,i,s)}removeEmptyProps(n){return Object.entries(n).reduce((r,[s,i])=>(i!=null&&(r[s]=i),r),{})}scheduleNavigation(n,r,s,i,o){if(this.disposed)return Promise.resolve(!1);let a,c,l;o?(a=o.resolve,c=o.reject,l=o.promise):l=new Promise((m,_)=>{a=m,c=_});let p=this.pendingTasks.add();return wv(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(p))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:i,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(m=>Promise.reject(m))}static \u0275fac=function(r){return new(r||e)};static \u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function YD(e){for(let t=0;t<e.length;t++)if(e[t]==null)throw new te(4008,!1)}var ZD=new ne("");function Kh(e,...t){return _n([{provide:Nc,multi:!0,useValue:e},[],{provide:xr,useFactory:XD,deps:[qh]},{provide:nc,multi:!0,useFactory:QD},t.map(n=>n.\u0275providers)])}function XD(e){return e.routerState.root}function QD(){let e=H(Rt);return t=>{let n=e.get(In);if(t!==n.components[0])return;let r=e.get(qh),s=e.get(JD);e.get(e1)===1&&r.initialNavigation(),e.get(t1,null,{optional:!0})?.setUpPreloading(),e.get(ZD,null,{optional:!0})?.init(),r.resetRootComponentType(n.componentTypes[0]),s.closed||(s.next(),s.complete(),s.unsubscribe())}}var JD=new ne("",{factory:()=>new Ne}),e1=new ne("",{providedIn:"root",factory:()=>1});var t1=new ne("");var Sv=[];var Ev={providers:[Mu(),Kd({eventCoalescing:!0}),Kh(Sv),fh()]};var Lv=(()=>{class e{_renderer;_elementRef;onChange=n=>{};onTouched=()=>{};constructor(n,r){this._renderer=n,this._elementRef=r}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static \u0275fac=function(r){return new(r||e)(Re(yr),Re(zt))};static \u0275dir=Ct({type:e})}return e})(),ef=(()=>{class e extends Lv{static \u0275fac=(()=>{let n;return function(s){return(n||(n=zn(e)))(s||e)}})();static \u0275dir=Ct({type:e,features:[Dn]})}return e})(),Vc=new ne("");var r1={provide:Vc,useExisting:gn(()=>Hc),multi:!0};function i1(){let e=Ft()?Ft().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}var s1=new ne(""),Hc=(()=>{class e extends Lv{_compositionMode;_composing=!1;constructor(n,r,s){super(n,r),this._compositionMode=s,this._compositionMode==null&&(this._compositionMode=!i1())}writeValue(n){let r=n??"";this.setProperty("value",r)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static \u0275fac=function(r){return new(r||e)(Re(yr),Re(zt),Re(s1,8))};static \u0275dir=Ct({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,s){r&1&&tt("input",function(o){return s._handleInput(o.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(o){return s._compositionEnd(o.target.value)})},standalone:!1,features:[Ci([r1]),Dn]})}return e})();var o1=new ne(""),a1=new ne("");function kv(e){return e!=null}function Nv(e){return br(e)?Ve(e):e}function Pv(e){let t={};return e.forEach(n=>{t=n!=null?z(z({},t),n):t}),Object.keys(t).length===0?null:t}function Fv(e,t){return t.map(n=>n(e))}function c1(e){return!e.validate}function Bv(e){return e.map(t=>c1(t)?t:n=>t.validate(n))}function l1(e){if(!e)return null;let t=e.filter(kv);return t.length==0?null:function(n){return Pv(Fv(n,t))}}function jv(e){return e!=null?l1(Bv(e)):null}function u1(e){if(!e)return null;let t=e.filter(kv);return t.length==0?null:function(n){let r=Fv(n,t).map(Nv);return Sl(r).pipe(fe(Pv))}}function Vv(e){return e!=null?u1(Bv(e)):null}function Dv(e,t){return e===null?[t]:Array.isArray(e)?[...e,t]:[e,t]}function d1(e){return e._rawValidators}function h1(e){return e._rawAsyncValidators}function Yh(e){return e?Array.isArray(e)?e:[e]:[]}function Fc(e,t){return Array.isArray(e)?e.includes(t):e===t}function Iv(e,t){let n=Yh(t);return Yh(e).forEach(s=>{Fc(n,s)||n.push(s)}),n}function Mv(e,t){return Yh(t).filter(n=>!Fc(e,n))}var Bc=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=jv(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Vv(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,n){return this.control?this.control.hasError(t,n):!1}getError(t,n){return this.control?this.control.getError(t,n):null}},Zh=class extends Bc{name;get formDirective(){return null}get path(){return null}},oo=class extends Bc{_parent=null;name=null;valueAccessor=null},Xh=class{_cd;constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},f1={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},e4=ye(z({},f1),{"[class.ng-submitted]":"isSubmitted"}),Hv=(()=>{class e extends Xh{constructor(n){super(n)}static \u0275fac=function(r){return new(r||e)(Re(oo,2))};static \u0275dir=Ct({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,s){r&2&&ft("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},standalone:!1,features:[Dn]})}return e})();var no="VALID",Pc="INVALID",Ui="PENDING",ro="DISABLED",Ar=class{},jc=class extends Ar{value;source;constructor(t,n){super(),this.value=t,this.source=n}},io=class extends Ar{pristine;source;constructor(t,n){super(),this.pristine=t,this.source=n}},so=class extends Ar{touched;source;constructor(t,n){super(),this.touched=t,this.source=n}},$i=class extends Ar{status;source;constructor(t,n){super(),this.status=t,this.source=n}};var Qh=class extends Ar{source;constructor(t){super(),this.source=t}};function p1(e){return(Uc(e)?e.validators:e)||null}function g1(e){return Array.isArray(e)?jv(e):e||null}function m1(e,t){return(Uc(t)?t.asyncValidators:e)||null}function _1(e){return Array.isArray(e)?Vv(e):e||null}function Uc(e){return e!=null&&!Array.isArray(e)&&typeof e=="object"}var Jh=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(t,n){this._assignValidators(t),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return pt(this.statusReactive)}set status(t){pt(()=>this.statusReactive.set(t))}_status=As(()=>this.statusReactive());statusReactive=Ae(void 0);get valid(){return this.status===no}get invalid(){return this.status===Pc}get pending(){return this.status==Ui}get disabled(){return this.status===ro}get enabled(){return this.status!==ro}errors;get pristine(){return pt(this.pristineReactive)}set pristine(t){pt(()=>this.pristineReactive.set(t))}_pristine=As(()=>this.pristineReactive());pristineReactive=Ae(!0);get dirty(){return!this.pristine}get touched(){return pt(this.touchedReactive)}set touched(t){pt(()=>this.touchedReactive.set(t))}_touched=As(()=>this.touchedReactive());touchedReactive=Ae(!1);get untouched(){return!this.touched}_events=new Ne;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(Iv(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(Iv(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(Mv(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(Mv(t,this._rawAsyncValidators))}hasValidator(t){return Fc(this._rawValidators,t)}hasAsyncValidator(t){return Fc(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){let n=this.touched===!1;this.touched=!0;let r=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsTouched(ye(z({},t),{sourceControl:r})),n&&t.emitEvent!==!1&&this._events.next(new so(!0,r))}markAllAsDirty(t={}){this.markAsDirty({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsDirty(t))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(t))}markAsUntouched(t={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=t.sourceControl??this;this._forEachChild(s=>{s.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:r})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,r),n&&t.emitEvent!==!1&&this._events.next(new so(!1,r))}markAsDirty(t={}){let n=this.pristine===!0;this.pristine=!1;let r=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsDirty(ye(z({},t),{sourceControl:r})),n&&t.emitEvent!==!1&&this._events.next(new io(!1,r))}markAsPristine(t={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=t.sourceControl??this;this._forEachChild(s=>{s.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t,r),n&&t.emitEvent!==!1&&this._events.next(new io(!0,r))}markAsPending(t={}){this.status=Ui;let n=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new $i(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.markAsPending(ye(z({},t),{sourceControl:n}))}disable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=ro,this.errors=null,this._forEachChild(s=>{s.disable(ye(z({},t),{onlySelf:!0}))}),this._updateValue();let r=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new jc(this.value,r)),this._events.next(new $i(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ye(z({},t),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(s=>s(!0))}enable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=no,this._forEachChild(r=>{r.enable(ye(z({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(ye(z({},t),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(t,n){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===no||this.status===Ui)&&this._runAsyncValidator(r,t.emitEvent)}let n=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new jc(this.value,n)),this._events.next(new $i(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(ye(z({},t),{sourceControl:n}))}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ro:no}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,n){if(this.asyncValidator){this.status=Ui,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1,shouldHaveEmitted:t!==!1};let r=Nv(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(s=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(s,{emitEvent:n,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let t=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,n={}){this.errors=t,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(t){let n=t;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,s)=>r&&r._find(s),this)}getError(t,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[t]:null}hasError(t,n){return!!this.getError(t,n)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,n,r){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||r)&&this._events.next(new $i(this.status,n)),this._parent&&this._parent._updateControlsErrors(t,n,r)}_initObservables(){this.valueChanges=new $e,this.statusChanges=new $e}_calculateStatus(){return this._allControlsDisabled()?ro:this.errors?Pc:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ui)?Ui:this._anyControlsHaveStatus(Pc)?Pc:no}_anyControlsHaveStatus(t){return this._anyControls(n=>n.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,n){let r=!this._anyControlsDirty(),s=this.pristine!==r;this.pristine=r,this._parent&&!t.onlySelf&&this._parent._updatePristine(t,n),s&&this._events.next(new io(this.pristine,n))}_updateTouched(t={},n){this.touched=this._anyControlsTouched(),this._events.next(new so(this.touched,n)),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,n)}_onDisabledChange=[];_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Uc(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let n=this._parent&&this._parent.dirty;return!t&&!!n&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=g1(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=_1(this._rawAsyncValidators)}};var Uv=new ne("",{providedIn:"root",factory:()=>tf}),tf="always";function v1(e,t){return[...t.path,e]}function y1(e,t,n=tf){b1(e,t),t.valueAccessor.writeValue(e.value),(e.disabled||n==="always")&&t.valueAccessor.setDisabledState?.(e.disabled),w1(e,t),E1(e,t),S1(e,t),C1(e,t)}function Tv(e,t){e.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(t)})}function C1(e,t){if(t.valueAccessor.setDisabledState){let n=r=>{t.valueAccessor.setDisabledState(r)};e.registerOnDisabledChange(n),t._registerOnDestroy(()=>{e._unregisterOnDisabledChange(n)})}}function b1(e,t){let n=d1(e);t.validator!==null?e.setValidators(Dv(n,t.validator)):typeof n=="function"&&e.setValidators([n]);let r=h1(e);t.asyncValidator!==null?e.setAsyncValidators(Dv(r,t.asyncValidator)):typeof r=="function"&&e.setAsyncValidators([r]);let s=()=>e.updateValueAndValidity();Tv(t._rawValidators,s),Tv(t._rawAsyncValidators,s)}function w1(e,t){t.valueAccessor.registerOnChange(n=>{e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,e.updateOn==="change"&&$v(e,t)})}function S1(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,e.updateOn==="blur"&&e._pendingChange&&$v(e,t),e.updateOn!=="submit"&&e.markAsTouched()})}function $v(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function E1(e,t){let n=(r,s)=>{t.valueAccessor.writeValue(r),s&&t.viewToModelUpdate(r)};e.registerOnChange(n),t._registerOnDestroy(()=>{e._unregisterOnChange(n)})}function D1(e,t){if(!e.hasOwnProperty("model"))return!1;let n=e.model;return n.isFirstChange()?!0:!Object.is(t,n.currentValue)}function I1(e){return Object.getPrototypeOf(e.constructor)===ef}function M1(e,t){if(!t)return null;Array.isArray(t);let n,r,s;return t.forEach(i=>{i.constructor===Hc?n=i:I1(i)?r=i:s=i}),s||r||n||null}function xv(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function Av(e){return typeof e=="object"&&e!==null&&Object.keys(e).length===2&&"value"in e&&"disabled"in e}var T1=class extends Jh{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(t=null,n,r){super(p1(n),m1(r,n)),this._applyFormState(t),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Uc(n)&&(n.nonNullable||n.initialValueIsDefault)&&(Av(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,n={}){this.value=this._pendingValue=t,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(t,n={}){this.setValue(t,n)}reset(t=this.defaultValue,n={}){this._applyFormState(t),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1,n?.emitEvent!==!1&&this._events.next(new Qh(this))}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){xv(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){xv(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){Av(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var x1={provide:oo,useExisting:gn(()=>nf)},Rv=Promise.resolve(),nf=(()=>{class e extends oo{_changeDetectorRef;callSetDisabledState;control=new T1;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new $e;constructor(n,r,s,i,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this._parent=n,this._setValidators(r),this._setAsyncValidators(s),this.valueAccessor=M1(this,i)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){let r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),D1(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){y1(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(n){Rv.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){let r=n.isDisabled.currentValue,s=r!==0&&Jd(r);Rv.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?v1(n,this._parent):[n]}static \u0275fac=function(r){return new(r||e)(Re(Zh,9),Re(o1,10),Re(a1,10),Re(Vc,10),Re(bi,8),Re(Uv,8))};static \u0275dir=Ct({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Ci([x1]),Dn,pi]})}return e})();var A1={provide:Vc,useExisting:gn(()=>$c),multi:!0};function Wv(e,t){return e==null?`${t}`:(t&&typeof t=="object"&&(t="Object"),`${e}: ${t}`.slice(0,50))}function R1(e){return e.split(":")[0]}var $c=(()=>{class e extends ef{value;_optionMap=new Map;_idCounter=0;set compareWith(n){this._compareWith=n}_compareWith=Object.is;appRefInjector=H(In).injector;destroyRef=H($t);cdr=H(bi);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,Ka({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(n){this.cdr.markForCheck(),this.value=n;let r=this._getOptionId(n),s=Wv(r,n);this.setProperty("value",s)}registerOnChange(n){this.onChange=r=>{this.value=this._getOptionValue(r),n(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(n){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),n))return r;return null}_getOptionValue(n){let r=R1(n);return this._optionMap.has(r)?this._optionMap.get(r):n}static \u0275fac=(()=>{let n;return function(s){return(n||(n=zn(e)))(s||e)}})();static \u0275dir=Ct({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,s){r&1&&tt("change",function(o){return s.onChange(o.target.value)})("blur",function(){return s.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Ci([A1]),Dn]})}return e})(),zv=(()=>{class e{_element;_renderer;_select;id;constructor(n,r,s){this._element=n,this._renderer=r,this._select=s,this._select&&(this.id=this._select._registerOption())}set ngValue(n){this._select!=null&&(this._select._optionMap.set(this.id,n),this._setElementValue(Wv(this.id,n)),this._select._writeValueAfterRender())}set value(n){this._setElementValue(n),this._select&&this._select._writeValueAfterRender()}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(r){return new(r||e)(Re(zt),Re(yr),Re($c,9))};static \u0275dir=Ct({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return e})(),O1={provide:Vc,useExisting:gn(()=>Gv),multi:!0};function Ov(e,t){return e==null?`${t}`:(typeof t=="string"&&(t=`'${t}'`),t&&typeof t=="object"&&(t="Object"),`${e}: ${t}`.slice(0,50))}function L1(e){return e.split(":")[0]}var Gv=(()=>{class e extends ef{value;_optionMap=new Map;_idCounter=0;set compareWith(n){this._compareWith=n}_compareWith=Object.is;writeValue(n){this.value=n;let r;if(Array.isArray(n)){let s=n.map(i=>this._getOptionId(i));r=(i,o)=>{i._setSelected(s.indexOf(o.toString())>-1)}}else r=(s,i)=>{s._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(n){this.onChange=r=>{let s=[],i=r.selectedOptions;if(i!==void 0){let o=i;for(let a=0;a<o.length;a++){let c=o[a],l=this._getOptionValue(c.value);s.push(l)}}else{let o=r.options;for(let a=0;a<o.length;a++){let c=o[a];if(c.selected){let l=this._getOptionValue(c.value);s.push(l)}}}this.value=s,n(s)}}_registerOption(n){let r=(this._idCounter++).toString();return this._optionMap.set(r,n),r}_getOptionId(n){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,n))return r;return null}_getOptionValue(n){let r=L1(n);return this._optionMap.has(r)?this._optionMap.get(r)._value:n}static \u0275fac=(()=>{let n;return function(s){return(n||(n=zn(e)))(s||e)}})();static \u0275dir=Ct({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,s){r&1&&tt("change",function(o){return s.onChange(o.target)})("blur",function(){return s.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Ci([O1]),Dn]})}return e})(),qv=(()=>{class e{_element;_renderer;_select;id;_value;constructor(n,r,s){this._element=n,this._renderer=r,this._select=s,this._select&&(this.id=this._select._registerOption(this))}set ngValue(n){this._select!=null&&(this._value=n,this._setElementValue(Ov(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._select?(this._value=n,this._setElementValue(Ov(this.id,n)),this._select.writeValue(this._select.value)):this._setElementValue(n)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}_setSelected(n){this._renderer.setProperty(this._element.nativeElement,"selected",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||e)(Re(zt),Re(yr),Re(Gv,9))};static \u0275dir=Ct({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return e})();var k1=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=En({type:e});static \u0275inj=Qt({})}return e})();var Kv=(()=>{class e{static withConfig(n){return{ngModule:e,providers:[{provide:Uv,useValue:n.callSetDisabledState??tf}]}}static \u0275fac=function(r){return new(r||e)};static \u0275mod=En({type:e});static \u0275inj=Qt({imports:[k1]})}return e})();var Wc=class e{http=H(Ti);baseUrl="/api";getFacts(){return this.http.get(`${this.baseUrl}/facts`)}addFact(t){return this.http.post(`${this.baseUrl}/facts`,t)}deleteFact(t){return this.http.delete(`${this.baseUrl}/facts/${t}`)}getPrompt(){return this.http.get(`${this.baseUrl}/prompts`)}updatePrompt(t){return this.http.post(`${this.baseUrl}/prompts`,{prompt:t})}getTools(){return this.http.get(`${this.baseUrl}/tools`)}getProjects(){return this.http.get(`${this.baseUrl}/projects`)}openTerminal(t,n,r){return this.http.post(`${this.baseUrl}/projects/open-terminal`,{workspace_path:t,project_pid:n,project_name:r})}initBridge(t){return this.http.post(`${this.baseUrl}/projects/init-bridge`,{workspace_path:t})}getMetrics(){return this.http.get(`${this.baseUrl}/metrics`)}static \u0275fac=function(n){return new(n||e)};static \u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"})};var zc=class e{socket;messages$=new Ne;connected$=new Ne;connect(){this.socket=new WebSocket("ws://localhost:8765/ws"),this.socket.onopen=()=>{console.log("WebSocket connected"),this.connected$.next(!0)},this.socket.onmessage=t=>{let n=JSON.parse(t.data);this.messages$.next(n)},this.socket.onerror=t=>{console.error("WebSocket error:",t),this.connected$.next(!1)},this.socket.onclose=()=>{console.log("WebSocket disconnected"),this.connected$.next(!1),setTimeout(()=>this.connect(),3e3)}}disconnect(){this.socket&&this.socket.close()}static \u0275fac=function(n){return new(n||e)};static \u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"})};var Gc=class e{http=H(Ti);baseUrl="/api/claude";terminals=Ae([]);sessions=Ae([]);isLoading=Ae(!1);error=Ae(null);lastUpdate=Ae(null);autoRefreshInterval=3e4;getTerminals(){return this.isLoading.set(!0),this.error.set(null),this.http.get(`${this.baseUrl}/terminals`).pipe(He(t=>{this.terminals.set(t.terminals),this.lastUpdate.set(t.timestamp),this.isLoading.set(!1)}),At(t=>(this.error.set(`Error loading terminals: ${t.message}`),this.isLoading.set(!1),re({terminals:[],count:0,timestamp:new Date().toISOString()}))))}getSessions(){return this.http.get(`${this.baseUrl}/sessions`).pipe(He(t=>{this.sessions.set(t.sessions)}),At(t=>(this.error.set(`Error loading sessions: ${t.message}`),re({sessions:[],count:0,timestamp:new Date().toISOString()}))))}executeCommand(t){return this.http.post(`${this.baseUrl}/execute`,t)}getTerminalOutput(t,n=50){return this.http.get(`${this.baseUrl}/output/${t}?lines=${n}`)}startAutoRefresh(){return El(this.autoRefreshInterval).pipe(Ze(()=>this.getTerminals()))}refresh(){this.getTerminals().subscribe(),this.getSessions().subscribe()}clearError(){this.error.set(null)}static \u0275fac=function(n){return new(n||e)};static \u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"})};var qc=class e{_currentTerminalPid=Ae(null);openTerminal(t){this._currentTerminalPid.set(t)}closeTerminal(){this._currentTerminalPid.set(null)}toggleTerminal(t){this._currentTerminalPid()===t?this.closeTerminal():this.openTerminal(t)}currentTerminalPid(){return this._currentTerminalPid()}isTerminalOpen(t){return this._currentTerminalPid()===t}static \u0275fac=function(n){return new(n||e)};static \u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"})};var P1=["canvas"],Kc=class e{canvasRef;status="offline";activityLevel=50;ctx;animationFrame=0;dataPoints=[];maxPoints=60;time=0;heartbeatCounter=0;ngAfterViewInit(){this.initCanvas(),this.startAnimation()}ngOnDestroy(){this.animationFrame&&cancelAnimationFrame(this.animationFrame)}initCanvas(){let t=this.canvasRef.nativeElement;this.ctx=t.getContext("2d"),t.width=t.offsetWidth*2,t.height=t.offsetHeight*2,this.ctx.scale(2,2),this.dataPoints=new Array(this.maxPoints).fill(50)}animationCounter=0;startAnimation(){let t=()=>{this.animationCounter++,this.animationCounter%6===0&&this.updateDataPoints(),this.draw(),this.animationFrame=requestAnimationFrame(t)};t()}updateDataPoints(){this.dataPoints.shift();let t=50;if(this.status==="working"){this.heartbeatCounter++;let r=this.heartbeatCounter%50;r<8?r===0?t=55:r===1?t=70:r===2?t=85:r===3?t=75:r===4?t=40:r===5?t=60:r===6?t=52:r===7&&(t=50):t=50+(Math.random()-.5)*3}else this.status==="ready"?t=50+(Math.random()-.5)*5:t=50;this.dataPoints.push(t)}draw(){let t=this.canvasRef.nativeElement,n=t.offsetWidth,r=t.offsetHeight;this.ctx.clearRect(0,0,n,r),this.drawGrid(n,r),this.drawWaveform(n,r)}drawGrid(t,n){this.ctx.strokeStyle="#1a1a1a",this.ctx.lineWidth=1;for(let r=0;r<=n;r+=20)this.ctx.beginPath(),this.ctx.moveTo(0,r),this.ctx.lineTo(t,r),this.ctx.stroke();for(let r=0;r<=t;r+=20)this.ctx.beginPath(),this.ctx.moveTo(r,0),this.ctx.lineTo(r,n),this.ctx.stroke()}drawWaveform(t,n){let r=t/(this.maxPoints-1),s="#ff0055",i="rgba(255, 0, 85, 0.5)";this.status==="working"?(s="#00ff00",i="rgba(0, 255, 0, 0.8)"):this.status==="ready"&&(s="#00ffff",i="rgba(0, 255, 255, 0.5)"),this.ctx.shadowBlur=10,this.ctx.shadowColor=i,this.ctx.strokeStyle=s,this.ctx.lineWidth=2,this.ctx.beginPath();for(let o=0;o<this.dataPoints.length;o++){let a=o*r,c=n-this.dataPoints[o]/100*n;o===0?this.ctx.moveTo(a,c):this.ctx.lineTo(a,c)}this.ctx.stroke(),this.ctx.shadowBlur=0}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=Sn({type:e,selectors:[["activity-graph"]],viewQuery:function(n,r){if(n&1&&Is(P1,5),n&2){let s;Ms(s=Ts())&&(r.canvasRef=s.first)}},inputs:{status:"status",activityLevel:"activityLevel"},decls:2,vars:0,consts:[["canvas",""]],template:function(n,r){n&1&&_i(0,"canvas",null,0)},styles:["canvas[_ngcontent-%COMP%]{width:100%;height:100%;display:block}"]})};var ey=ho(Zv()),ty=ho(Xv()),ny=ho(Qv()),ry=ho(Jv());var F1=["terminalElement"],Jc=class e{constructor(t){this.ngZone=t}projectPid;workspacePath;projectName;close=new $e;terminalElement;terminal;fitAddon;webglAddon;ws;disposables=[];inputBuffer=[];isConnected=!1;reconnectAttempts=0;maxReconnectAttempts=5;reconnectTimeout;currentLine="";resizeObserver;resizeTimeout;pendingFit=!1;isReady=!1;outputWatermark=0;HIGH_WATERMARK=1e5;LOW_WATERMARK=1e4;isPaused=!1;ngOnInit(){console.log("[Terminal] Component initialized for project:",this.projectName)}ngAfterViewInit(){if(console.log("[Terminal] View initialized, starting terminal setup"),!this.terminalElement){console.error("[Terminal] CRITICAL: terminalElement is undefined!");return}this.ngZone.runOutsideAngular(()=>{this.initializeTerminal(),this.setupResizeObserver()}),this.ngZone.run(()=>{this.connectWebSocket()})}ngOnDestroy(){console.log("[Terminal] Component destroying, cleaning up resources"),this.cleanup()}initializeTerminal(){console.log("[Terminal] Initializing xterm.js with production config"),this.terminal=new ey.Terminal({cursorBlink:!0,fontSize:14,fontFamily:'"Cascadia Code", "Fira Code", "Consolas", "Courier New", monospace',scrollback:1e3,theme:{background:"#0a0a0a",foreground:"#00ff00",cursor:"#00ff00",cursorAccent:"#0a0a0a",selectionBackground:"#00ff0040",black:"#000000",red:"#ff0055",green:"#00ff00",yellow:"#ffff00",blue:"#00ffff",magenta:"#ff00ff",cyan:"#00ffff",white:"#ffffff",brightBlack:"#555555",brightRed:"#ff0055",brightGreen:"#00ff00",brightYellow:"#ffff00",brightBlue:"#00ffff",brightMagenta:"#ff00ff",brightCyan:"#00ffff",brightWhite:"#ffffff"},allowProposedApi:!0}),console.log("[Terminal] Terminal instance created"),this.fitAddon=new ty.FitAddon,this.terminal.loadAddon(this.fitAddon),console.log("[Terminal] FitAddon loaded"),this.terminal.loadAddon(new ny.WebLinksAddon((n,r)=>{(n.ctrlKey||n.metaKey)&&window.open(r,"_blank")})),console.log("[Terminal] WebLinksAddon loaded");try{this.webglAddon=new ry.WebglAddon,this.terminal.loadAddon(this.webglAddon),console.log("[Terminal] \u2705 WebglAddon loaded - 200\xD7 rendering performance")}catch(n){console.warn("[Terminal] WebGL not available, falling back to canvas:",n)}this.terminal.open(this.terminalElement.nativeElement),console.log("[Terminal] Terminal opened in DOM");let t=this.terminal.onData(n=>{this.handleTerminalInput(n)});this.disposables.push(t),console.log("[Terminal] Input handler registered"),this.safelyFit(),this.isReady=!0,console.log("[Terminal] \u2705 Initialization complete")}setupResizeObserver(){let t=this.terminalElement.nativeElement;this.resizeObserver=new ResizeObserver(()=>{this.debouncedFit()}),this.resizeObserver.observe(t),console.log("[Terminal] ResizeObserver attached"),window.addEventListener("resize",()=>{this.debouncedFit()})}debouncedFit(){this.resizeTimeout&&clearTimeout(this.resizeTimeout),this.resizeTimeout=window.setTimeout(()=>{this.safelyFit()},100)}safelyFit(){if(!this.isReady){this.pendingFit=!0;return}let t=this.terminalElement?.nativeElement;if(!t){this.pendingFit=!0;return}if(!t.offsetParent){console.debug("[Terminal] Container hidden, deferring fit"),this.pendingFit=!0;return}if(t.offsetWidth===0||t.offsetHeight===0){console.debug("[Terminal] Container has zero dimensions, deferring fit"),this.pendingFit=!0;return}try{this.fitAddon?.fit(),this.pendingFit=!1,console.debug("[Terminal] Fit successful")}catch(n){console.error("[Terminal] Fit failed:",n)}}handleTerminalInput(t){console.debug("[Terminal] User input:",JSON.stringify(t)),t==="\r"?(console.debug("[Terminal] Enter pressed, sending command:",this.currentLine),this.terminal.write(`\r
`),this.currentLine.trim()?this.sendToWebSocket({type:"input",data:this.currentLine}):this.sendToWebSocket({type:"input",data:"\r"}),this.currentLine=""):t==="\x7F"||t==="\b"?this.currentLine.length>0&&(this.currentLine=this.currentLine.slice(0,-1),this.terminal.write("\b \b")):t===""?(this.terminal.write(`^C\r
`),this.currentLine="",this.sendToWebSocket({type:"input",data:""})):(this.currentLine+=t,this.terminal.write("\x1B[37m"+t+"\x1B[0m"))}connectWebSocket(){let t=`ws://localhost:8765/ws/terminal/${this.projectPid}`;console.log("[WebSocket] Connecting to:",t),this.ws=new WebSocket(t),this.ws.onopen=()=>{console.log("[WebSocket] \u2705 Connected"),this.isConnected=!0,this.reconnectAttempts=0,this.terminal.clear(),console.log("[WebSocket] Terminal cleared, ready for output"),this.inputBuffer.length>0&&(console.log("[WebSocket] Sending",this.inputBuffer.length,"buffered commands"),this.inputBuffer.forEach(n=>{this.ws?.send(n)}),this.inputBuffer=[]),setTimeout(()=>this.safelyFit(),50)},this.ws.onmessage=n=>{this.handleWebSocketMessage(n)},this.ws.onerror=n=>{console.error("[WebSocket] \u274C Error:",n),this.ngZone.run(()=>{this.terminal.writeln("\x1B[1;31m[WebSocket error]\x1B[0m")})},this.ws.onclose=n=>{console.log("[WebSocket] \u274C Closed. Code:",n.code,"Reason:",n.reason),this.isConnected=!1,this.ngZone.run(()=>{this.terminal.writeln("\x1B[1;33m[Disconnected from terminal]\x1B[0m"),this.attemptReconnection()})}}attemptReconnection(){if(this.reconnectAttempts>=this.maxReconnectAttempts){console.error("[WebSocket] Max reconnection attempts reached"),this.terminal.writeln("\x1B[1;31m[Reconnection failed - max attempts reached]\x1B[0m");return}this.reconnectAttempts++;let t=Math.min(1e3*Math.pow(2,this.reconnectAttempts),1e4);console.log(`[WebSocket] Reconnecting in ${t}ms (attempt ${this.reconnectAttempts}/${this.maxReconnectAttempts})`),this.terminal.writeln(`\x1B[1;33m[Reconnecting in ${t/1e3}s...]\x1B[0m`),this.reconnectTimeout=window.setTimeout(()=>{this.connectWebSocket()},t)}handleWebSocketMessage(t){let n=JSON.parse(t.data);if(n.type==="output"){let s="\x1B[32m"+n.data.replace(/\n/g,`\r
`)+"\x1B[0m";this.writeWithFlowControl(s)}else n.type==="error"&&(console.error("[WebSocket] Server error:",n.message),this.ngZone.run(()=>{this.terminal.writeln(`\x1B[1;31m[Error: ${n.message}]\x1B[0m`)}))}writeWithFlowControl(t){this.outputWatermark+=t.length,this.terminal.write(t,()=>{this.outputWatermark-=t.length,this.isPaused&&this.outputWatermark<this.LOW_WATERMARK&&(console.debug("[FlowControl] Resuming output"),this.isPaused=!1)}),!this.isPaused&&this.outputWatermark>this.HIGH_WATERMARK&&(console.warn("[FlowControl] High watermark reached, pausing"),this.isPaused=!0)}sendToWebSocket(t){let n=JSON.stringify(t);this.ws&&this.ws.readyState===WebSocket.OPEN?this.ws.send(n):(console.debug("[WebSocket] Not connected, buffering message"),this.inputBuffer.push(n))}cleanup(){if(this.reconnectTimeout&&clearTimeout(this.reconnectTimeout),this.resizeTimeout&&clearTimeout(this.resizeTimeout),this.resizeObserver&&this.resizeObserver.disconnect(),this.ws&&this.ws.close(),this.disposables.forEach(t=>{try{t.dispose()}catch(n){console.error("[Terminal] Error disposing:",n)}}),this.disposables=[],this.webglAddon)try{this.webglAddon.dispose()}catch(t){console.error("[Terminal] Error disposing WebGL:",t)}if(this.terminal)try{this.terminal.dispose()}catch(t){console.error("[Terminal] Error disposing terminal:",t)}console.log("[Terminal] \u2705 Cleanup complete")}minimizeTerminal(){this.close.emit()}closeTerminal(){this.close.emit()}onBackdropClick(){this.minimizeTerminal()}static \u0275fac=function(n){return new(n||e)(Re(Fe))};static \u0275cmp=Sn({type:e,selectors:[["app-terminal"]],viewQuery:function(n,r){if(n&1&&Is(F1,5),n&2){let s;Ms(s=Ts())&&(r.terminalElement=s.first)}},inputs:{projectPid:"projectPid",workspacePath:"workspacePath",projectName:"projectName"},outputs:{close:"close"},decls:13,vars:1,consts:[["terminalElement",""],[1,"modal-backdrop",3,"click"],[1,"modal-content",3,"click"],[1,"terminal-container"],[1,"terminal-header"],[1,"terminal-title"],[1,"terminal-actions"],["title","Minimize",1,"terminal-minimize",3,"click"],["title","Close",1,"terminal-close",3,"click"],[1,"terminal-body"]],template:function(n,r){if(n&1){let s=Kt();Mn(0,"div",1),Er("click",function(){return nt(s),rt(r.onBackdropClick())}),Mn(1,"div",2),Er("click",function(o){return nt(s),rt(o.stopPropagation())}),Mn(2,"div",3)(3,"div",4)(4,"span",5),K(5),Gn(),Mn(6,"div",6)(7,"button",7),Er("click",function(){return nt(s),rt(r.minimizeTerminal())}),K(8,"_"),Gn(),Mn(9,"button",8),Er("click",function(){return nt(s),rt(r.closeTerminal())}),K(10,"\xD7"),Gn()()(),_i(11,"div",9,0),Gn()()()}n&2&&(Z(5),ke("",r.projectName," - Terminal"))},dependencies:[Si],styles:[`.xterm{cursor:text;position:relative;user-select:none;-ms-user-select:none;-webkit-user-select:none}.xterm.focus,.xterm:focus{outline:none}.xterm .xterm-helpers{position:absolute;top:0;z-index:5}.xterm .xterm-helper-textarea{padding:0;border:0;margin:0;position:absolute;opacity:0;left:-9999em;top:0;width:0;height:0;z-index:-5;white-space:nowrap;overflow:hidden;resize:none}.xterm .composition-view{background:#000;color:#fff;display:none;position:absolute;white-space:nowrap;z-index:1}.xterm .composition-view.active{display:block}.xterm .xterm-viewport{background-color:#000;overflow-y:scroll;cursor:default;position:absolute;inset:0}.xterm .xterm-screen{position:relative}.xterm .xterm-screen canvas{position:absolute;left:0;top:0}.xterm .xterm-scroll-area{visibility:hidden}.xterm-char-measure-element{display:inline-block;visibility:hidden;position:absolute;top:0;left:-9999em;line-height:normal}.xterm.enable-mouse-events{cursor:default}.xterm.xterm-cursor-pointer,.xterm .xterm-cursor-pointer{cursor:pointer}.xterm.column-select.focus{cursor:crosshair}.xterm .xterm-accessibility:not(.debug),.xterm .xterm-message{position:absolute;inset:0;z-index:10;color:transparent;pointer-events:none}.xterm .xterm-accessibility-tree:not(.debug) *::selection{color:transparent}.xterm .xterm-accessibility-tree{-webkit-user-select:text;user-select:text;white-space:pre}.xterm .live-region{position:absolute;left:-9999px;width:1px;height:1px;overflow:hidden}.xterm-dim{opacity:1!important}.xterm-underline-1{text-decoration:underline}.xterm-underline-2{text-decoration:double underline}.xterm-underline-3{text-decoration:wavy underline}.xterm-underline-4{text-decoration:dotted underline}.xterm-underline-5{text-decoration:dashed underline}.xterm-overline{text-decoration:overline}.xterm-overline.xterm-underline-1{text-decoration:overline underline}.xterm-overline.xterm-underline-2{text-decoration:overline double underline}.xterm-overline.xterm-underline-3{text-decoration:overline wavy underline}.xterm-overline.xterm-underline-4{text-decoration:overline dotted underline}.xterm-overline.xterm-underline-5{text-decoration:overline dashed underline}.xterm-strikethrough{text-decoration:line-through}.xterm-screen .xterm-decoration-container .xterm-decoration{z-index:6;position:absolute}.xterm-screen .xterm-decoration-container .xterm-decoration.xterm-decoration-top-layer{z-index:7}.xterm-decoration-overview-ruler{z-index:8;position:absolute;top:0;right:0;pointer-events:none}.xterm-decoration-top{z-index:2;position:relative}.modal-backdrop{position:fixed;top:0;left:0;width:100vw;height:100vh;background:#000000d9;z-index:9999;display:flex;align-items:center;justify-content:center;animation:fadeIn .2s ease-out}.modal-content{width:90vw;height:80vh;max-width:1400px;animation:slideUp .3s ease-out}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}@keyframes slideUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.terminal-container{width:100%;height:100%;background:#0a0a0a;border:2px solid #00ff00;box-shadow:0 0 40px #00ff0080;border-radius:8px;overflow:hidden;display:flex;flex-direction:column}.terminal-header{background:#1a1a1a;padding:.75rem 1rem;display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #00ff00;flex-shrink:0}.terminal-title{color:#0f0;font-family:Consolas,Courier New,monospace;font-size:.9rem;font-weight:700}.terminal-actions{display:flex;gap:8px}.terminal-minimize{background:none;border:none;color:#ff0;font-size:1.5rem;cursor:pointer;padding:0;width:30px;height:30px;display:flex;align-items:center;justify-content:center;transition:all .2s;font-weight:700;line-height:1}.terminal-minimize:hover{color:#fff;background:#ff0;border-radius:4px}.terminal-close{background:none;border:none;color:#f05;font-size:1.5rem;cursor:pointer;padding:0;width:30px;height:30px;display:flex;align-items:center;justify-content:center;transition:all .2s}.terminal-close:hover{color:#fff;background:#f05;border-radius:4px}.terminal-body{flex:1;padding:0;overflow:hidden;position:relative}::ng-deep .xterm{height:100%;width:100%;padding:10px}::ng-deep .xterm-viewport::-webkit-scrollbar{width:8px}::ng-deep .xterm-viewport::-webkit-scrollbar-track{background:#0003}::ng-deep .xterm-viewport::-webkit-scrollbar-thumb{background:#00ff004d;border-radius:4px}::ng-deep .xterm-viewport::-webkit-scrollbar-thumb:hover{background:#00ff0080}::ng-deep .xterm-selection div{background-color:#00ff004d!important}::ng-deep .xterm-cursor{animation:blink 1s step-end infinite}@keyframes blink{0%,50%{opacity:1}51%,to{opacity:0}}::ng-deep .xterm-link-layer a{color:#0ff!important;text-decoration:underline;cursor:pointer}::ng-deep .xterm-link-layer a:hover{color:#0f0!important}:host{display:block;width:100%;height:100%}
/*! Bundled license information:

@xterm/xterm/css/xterm.css:
  (**
   * Copyright (c) 2014 The xterm.js authors. All rights reserved.
   * Copyright (c) 2012-2013, Christopher Jeffrey (MIT License)
   * https://github.com/chjj/term.js
   * @license MIT
   *
   * Permission is hereby granted, free of charge, to any person obtaining a copy
   * of this software and associated documentation files (the "Software"), to deal
   * in the Software without restriction, including without limitation the rights
   * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
   * copies of the Software, and to permit persons to whom the Software is
   * furnished to do so, subject to the following conditions:
   *
   * The above copyright notice and this permission notice shall be included in
   * all copies or substantial portions of the Software.
   *
   * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
   * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
   * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
   * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
   * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
   * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
   * THE SOFTWARE.
   *
   * Originally forked from (with the author's permission):
   *   Fabrice Bellard's javascript vt100 for jslinux:
   *   http://bellard.org/jslinux/
   *   Copyright (c) 2011 Fabrice Bellard
   *   The original design remains. The terminal itself
   *   has been extended to include xterm CSI codes, among
   *   other features.
   *)
*/
`],encapsulation:2})};var iy=(e,t)=>t.pid,B1=(e,t)=>t.session_id;function j1(e,t){if(e&1){let n=Kt();q(0,"div",17)(1,"div",19),K(2),W(),q(3,"div",20),K(4),W(),q(5,"button",21),tt("click",function(){let s=nt(n).$index,i=Oe(2);return rt(i.deleteFact(s))}),K(6,"ELIMINAR"),W()()}if(e&2){let n=t.$implicit;Z(2),Pt(n.category),Z(2),Pt(n.fact)}}function V1(e,t){e&1&&(q(0,"div",18),K(1,"No hay facts todav\xEDa"),W())}function H1(e,t){if(e&1){let n=Kt();q(0,"div",6)(1,"h2"),K(2,"MEMORIAS - FACTS APRENDIDOS"),W(),q(3,"div",9)(4,"input",10),yi("ngModelChange",function(s){nt(n);let i=Oe();return xs(i.newFactText,s)||(i.newFactText=s),rt(s)}),W(),q(5,"select",11),yi("ngModelChange",function(s){nt(n);let i=Oe();return xs(i.newFactCategory,s)||(i.newFactCategory=s),rt(s)}),q(6,"option",12),K(7,"General"),W(),q(8,"option",13),K(9,"Trabajo"),W(),q(10,"option",14),K(11,"Personal"),W()(),q(12,"button",15),tt("click",function(){nt(n);let s=Oe();return rt(s.addFact())}),K(13,"AGREGAR"),W()(),q(14,"div",16),wr(15,j1,7,2,"div",17,rc,!1,V1,2,0,"div",18),W()()}if(e&2){let n=Oe();Z(4),vi("ngModel",n.newFactText),Z(),vi("ngModel",n.newFactCategory),Z(10),Sr(n.facts())}}function U1(e,t){if(e&1){let n=Kt();q(0,"div",6)(1,"h2"),K(2,"SYSTEM PROMPT"),W(),q(3,"textarea",22),yi("ngModelChange",function(s){nt(n);let i=Oe();return xs(i.promptText,s)||(i.promptText=s),rt(s)}),W(),q(4,"button",15),tt("click",function(){nt(n);let s=Oe();return rt(s.savePrompt())}),K(5,"GUARDAR PROMPT"),W()()}if(e&2){let n=Oe();Z(3),vi("ngModel",n.promptText)}}function $1(e,t){if(e&1&&(q(0,"div",24)(1,"div",25),K(2),W(),q(3,"div",26),K(4),W()()),e&2){let n=t.$implicit;Z(2),Pt(n.name),Z(2),Pt(n.description)}}function W1(e,t){e&1&&(q(0,"div",18),K(1,"Cargando herramientas..."),W())}function z1(e,t){if(e&1&&(q(0,"div",6)(1,"h2"),K(2,"HERRAMIENTAS DISPONIBLES"),W(),q(3,"div",23),wr(4,$1,5,2,"div",24,rc,!1,W1,2,0,"div",18),W()()),e&2){let n=Oe();Z(4),Sr(n.tools())}}function G1(e,t){e&1&&(q(0,"div",36),qt(1,"div",45),q(2,"div",46),K(3,"Opening terminal..."),W()())}function q1(e,t){if(e&1&&(q(0,"span",40),K(1),W()),e&2){let n=Oe().$implicit;Z(),Pt(n.bridge_status)}}function K1(e,t){e&1&&(q(0,"div"),K(1,"\u2713 Terminal abierto"),W())}function Y1(e,t){e&1&&K(0," Click para abrir terminal ")}function Z1(e,t){e&1&&K(0," Click para abrir nueva terminal ")}function X1(e,t){if(e&1&&(q(0,"div",44),Je(1,Y1,1,0)(2,Z1,1,0),W()),e&2){let n=Oe().$implicit;Z(),et(n.state==="offline"?1:2)}}function Q1(e,t){if(e&1){let n=Kt();q(0,"div",35),tt("click",function(){let s=nt(n).$implicit,i=Oe(2);return rt(i.onProjectClick(s))}),Je(1,G1,4,0,"div",36),q(2,"div",37)(3,"div",38),K(4),W(),q(5,"div",39),K(6),Je(7,q1,2,1,"span",40),W()(),q(8,"div",41),qt(9,"activity-graph",42),W(),q(10,"div",43)(11,"div"),K(12),W(),q(13,"div"),K(14),W(),Je(15,K1,2,0,"div"),Je(16,X1,3,1,"div",44),W()()}if(e&2){let n=t.$implicit,r=t.$index,s=Oe(2);ft("working",n.state==="working")("ready",n.state==="ready")("offline",n.state==="offline")("clickable",n.state==="offline"||n.state==="ready")("loading",s.loadingProjectPid()===n.pid),Z(),et(s.loadingProjectPid()===n.pid?1:-1),Z(2),ft("working-name",n.state==="working")("ready-name",n.state==="ready"),Z(),ic(" [",r+1,"] ",n.name," "),Z(),ft("status-working",n.state==="working")("status-ready",n.state==="ready")("status-offline",n.state==="offline"),Z(),ke(" [",(n.state==null?null:n.state.toUpperCase())??"UNKNOWN","] "),Z(),et(n.bridge_status?7:-1),Z(2),Es("status",n.state),Z(3),ke("Path: ",n.workspace_path),Z(2),ke("PID: ",n.pid),Z(),et(n.has_terminal?15:-1),Z(),et(n.state==="offline"||n.state==="ready"?16:-1)}}function J1(e,t){e&1&&(q(0,"div",18),K(1," No hay proyectos VS Code activos"),qt(2,"br"),K(3," Abre un proyecto en VS Code para verlo aqu\xED "),W())}function eI(e,t){if(e&1&&(q(0,"div",7)(1,"div",27)(2,"h2"),K(3,"PROYECTOS ACTIVOS"),W(),q(4,"div",28),K(5),W()(),q(6,"div",29)(7,"div",30)(8,"div",31),K(9,"CPU TOTAL"),W(),q(10,"div",32),K(11),W()(),q(12,"div",30)(13,"div",31),K(14,"MEMORIA"),W(),q(15,"div",32),K(16),W()(),q(17,"div",30)(18,"div",31),K(19,"TERMINALES"),W(),q(20,"div",32),K(21),W()()(),q(22,"div",33),wr(23,Q1,17,30,"div",34,iy,!1,J1,4,0,"div",18),W()()),e&2){let n=Oe();Z(5),Pt(n.currentTime()),Z(6),ke("",n.metrics().cpu.toFixed(1),"%"),Z(5),ke("",n.metrics().ram.toFixed(1),"%"),Z(5),Pt(n.metrics().terminals),Z(2),Sr(n.projects())}}function tI(e,t){e&1&&(q(0,"div",47),qt(1,"div",49),q(2,"p",50),K(3," Detecting Claude Code processes..."),qt(4,"br"),K(5," This may take 16-20 seconds "),W()())}function nI(e,t){if(e&1){let n=Kt();q(0,"div",48)(1,"p"),K(2),W(),q(3,"button",15),tt("click",function(){nt(n);let s=Oe(2);return rt(s.claudeService.clearError())}),K(4," DISMISS "),W()()}if(e&2){let n=Oe(2);Z(2),Pt(n.claudeService.error())}}function rI(e,t){if(e&1&&(q(0,"p",52),K(1),W()),e&2){let n=Oe(3);Z(),ke(" Last update: ",n.claudeService.lastUpdate()," ")}}function iI(e,t){if(e&1&&(q(0,"div",58)(1,"div",59)(2,"span",60),K(3),W(),q(4,"span",61),K(5),W()(),q(6,"div",62)(7,"div")(8,"strong"),K(9,"Name:"),W(),K(10),W(),q(11,"div")(12,"strong"),K(13,"Working Dir:"),W(),K(14),W(),q(15,"div")(16,"strong"),K(17,"CPU:"),W(),K(18),W(),q(19,"div")(20,"strong"),K(21,"Memory:"),W(),K(22),W()(),q(23,"div",63)(24,"strong"),K(25,"Command:"),W(),q(26,"code"),K(27),W()()()),e&2){let n=t.$implicit;ft("active",n.is_active)("idle",!n.is_active),Z(2),ft("status-running",n.is_active)("status-idle",!n.is_active),Z(),ke(" [",n.status.toUpperCase(),"] "),Z(2),ke("PID: ",n.pid),Z(5),ke(" ",n.name),Z(4),ke(" ",n.cwd),Z(4),ke(" ",n.cpu_percent,"%"),Z(4),ke(" ",n.memory_mb," MB"),Z(5),ke("",n.cmdline.substring(0,100),"...")}}function sI(e,t){e&1&&(q(0,"div",18),K(1," No Claude Code terminals detected"),qt(2,"br"),K(3," Open a Claude Code terminal and click REFRESH "),W())}function oI(e,t){if(e&1&&(q(0,"div")(1,"strong"),K(2,"Tokens:"),W(),K(3),W()),e&2){let n=Oe().$implicit;Z(3),ke(" ",n.token_usage.total)}}function aI(e,t){if(e&1&&(q(0,"div")(1,"strong"),K(2,"Last activity:"),W(),K(3),W()),e&2){let n=Oe().$implicit;Z(3),ke(" ",n.seconds_since_last_event,"s ago")}}function cI(e,t){if(e&1&&(q(0,"div",57)(1,"div",64)(2,"span",65),K(3),W(),q(4,"span",66),K(5),W()(),q(6,"div",67)(7,"div")(8,"strong"),K(9,"Events:"),W(),K(10),W(),Je(11,oI,4,1,"div"),Je(12,aI,4,1,"div"),W()()),e&2){let n=t.$implicit;Z(3),Pt(n.project),Z(),ft("state-idle",n.state==="idle")("state-running",n.state==="generating"||n.state==="executing_tool")("state-error",n.state==="error"),Z(),ke(" [",n.state.toUpperCase(),"] "),Z(5),ke(" ",n.event_count),Z(),et(n.token_usage?11:-1),Z(),et(n.seconds_since_last_event!==void 0?12:-1)}}function lI(e,t){e&1&&(q(0,"div",18),K(1," No active sessions found "),W())}function uI(e,t){if(e&1&&(q(0,"div",51)(1,"h3"),K(2),W(),Je(3,rI,2,1,"p",52),q(4,"div",53),wr(5,iI,28,15,"div",54,iy,!1,sI,4,0,"div",18),W()(),q(8,"div",55)(9,"h3"),K(10),W(),q(11,"div",56),wr(12,cI,13,11,"div",57,B1,!1,lI,2,0,"div",18),W()()),e&2){let n=Oe(2);Z(2),ke("DETECTED TERMINALS (",n.claudeService.terminals().length,")"),Z(),et(n.claudeService.lastUpdate()?3:-1),Z(2),Sr(n.claudeService.terminals()),Z(5),ke("ACTIVE SESSIONS (",n.claudeService.sessions().length,")"),Z(2),Sr(n.claudeService.sessions())}}function dI(e,t){if(e&1){let n=Kt();q(0,"div",6)(1,"div",27)(2,"h2"),K(3,"CLAUDE CODE TERMINALS"),W(),q(4,"button",15),tt("click",function(){nt(n);let s=Oe();return rt(s.refreshClaudeTerminals())}),K(5," REFRESH "),W()(),Je(6,tI,6,0,"div",47),Je(7,nI,5,1,"div",48),Je(8,uI,15,5),W()}if(e&2){let n=Oe();Z(6),et(n.claudeService.isLoading()?6:-1),Z(),et(n.claudeService.error()?7:-1),Z(),et(!n.claudeService.isLoading()&&!n.claudeService.error()?8:-1)}}function hI(e,t){if(e&1){let n=Kt();q(0,"app-terminal",68),tt("close",function(){nt(n);let s=Oe();return rt(s.terminalService.closeTerminal())}),W()}if(e&2){let n,r,s=Oe();Es("projectPid",s.terminalService.currentTerminalPid())("workspacePath",((n=s.getCurrentProject())==null?null:n.workspace_path)||"")("projectName",((r=s.getCurrentProject())==null?null:r.name)||"Terminal")}}var el=class e{api=H(Wc);ws=H(zc);claudeService=H(Gc);terminalService=H(qc);activeTab=Ae("proyectos");facts=Ae([]);newFactText="";newFactCategory="general";promptText=Ae("");tools=Ae([]);projects=Ae([]);metrics=Ae({cpu:0,ram:0,terminals:0});currentTime=Ae(new Date().toLocaleTimeString());loadingProjectPid=Ae(null);clockInterval;ngOnInit(){this.ws.connect(),this.ws.messages$.subscribe(t=>{t.type==="update"&&(this.projects.set(t.data.projects),this.metrics.set(t.data.metrics))}),this.clockInterval=setInterval(()=>{this.currentTime.set(new Date().toLocaleTimeString())},1e3),this.loadTabData()}ngOnDestroy(){this.ws.disconnect(),this.clockInterval&&clearInterval(this.clockInterval)}setActiveTab(t){this.activeTab.set(t),this.loadTabData()}loadTabData(){let t=this.activeTab();t==="memorias"?this.api.getFacts().subscribe(n=>this.facts.set(n.facts)):t==="prompts"?this.api.getPrompt().subscribe(n=>this.promptText.set(n.prompt)):t==="herramientas"?this.api.getTools().subscribe(n=>this.tools.set(n.tools)):t==="proyectos"?(this.api.getProjects().subscribe(n=>this.projects.set(n.projects)),this.api.getMetrics().subscribe(n=>this.metrics.set(n))):t==="claude-terminals"&&(this.claudeService.getTerminals().subscribe(),this.claudeService.getSessions().subscribe())}onProjectClick(t){console.log("[App] \u{1F5B1}\uFE0F Project clicked:",t.name,"State:",t.state,"PID:",t.pid),t.state==="offline"?(console.log("[App] \u{1F534} State is OFFLINE - Creating new terminal..."),this.loadingProjectPid.set(t.pid),this.api.openTerminal(t.workspace_path,t.pid,t.name).subscribe({next:n=>{console.log("[App] \u2705 Terminal created successfully:",n),console.log("[App] Opening terminal modal for PID:",t.pid),this.terminalService.openTerminal(t.pid),console.log("[App] Reloading projects in 1 second..."),setTimeout(()=>{this.api.getProjects().subscribe(r=>{console.log("[App] Projects reloaded:",r.projects.length,"projects"),this.projects.set(r.projects),this.loadingProjectPid.set(null)})},1e3)},error:n=>{console.error("[App] \u274C Error creating terminal:",n),alert("Error al crear terminal: "+n.message),this.loadingProjectPid.set(null)}})):t.state==="ready"||t.state==="working"?(console.log("[App] \u{1F535}/\u{1F7E2} State is",t.state.toUpperCase(),"- Toggling terminal visibility"),this.terminalService.toggleTerminal(t.pid)):console.warn("[App] \u26A0\uFE0F Unknown project state:",t.state)}getCurrentProject(){let t=this.terminalService.currentTerminalPid();return t&&this.projects().find(n=>n.pid===t)||null}refreshClaudeTerminals(){this.claudeService.refresh()}addFact(){if(!this.newFactText.trim())return;let t={fact:this.newFactText,category:this.newFactCategory};this.api.addFact(t).subscribe(()=>{this.api.getFacts().subscribe(n=>this.facts.set(n.facts)),this.newFactText=""})}deleteFact(t){this.api.deleteFact(t).subscribe(()=>{this.api.getFacts().subscribe(n=>this.facts.set(n.facts))})}savePrompt(){this.api.updatePrompt(this.promptText()).subscribe(()=>{alert("Prompt guardado (requiere reiniciar agente)")})}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=Sn({type:e,selectors:[["app-root"]],decls:24,vars:16,consts:[[1,"sendell-container"],[1,"sendell-header"],[1,"live-indicator"],[1,"sendell-tabs"],[3,"click"],[1,"sendell-content"],[1,"tab-panel"],[1,"tab-panel","proyectos-layout"],[3,"projectPid","workspacePath","projectName"],[1,"add-fact-form"],["type","text","placeholder","Nuevo fact...",1,"cyber-input",3,"ngModelChange","ngModel"],[1,"cyber-select",3,"ngModelChange","ngModel"],["value","general"],["value","work"],["value","personal"],[1,"cyber-button",3,"click"],[1,"facts-list"],[1,"fact-card"],[1,"empty-state"],[1,"fact-category"],[1,"fact-text"],[1,"delete-button",3,"click"],["rows","20",1,"cyber-textarea",3,"ngModelChange","ngModel"],[1,"tools-list"],[1,"tool-card"],[1,"tool-name"],[1,"tool-desc"],[1,"proyectos-header"],[1,"clock"],[1,"metrics-panel"],[1,"metric-card"],[1,"metric-label"],[1,"metric-value"],[1,"projects-list"],[1,"project-card",3,"working","ready","offline","clickable","loading"],[1,"project-card",3,"click"],[1,"loading-overlay"],[1,"project-header"],[1,"project-name"],[1,"project-status"],[1,"bridge-indicator"],[1,"activity-graph-container"],[3,"status"],[1,"project-info"],[1,"click-hint"],[1,"loading-spinner-project"],[1,"loading-text-project"],[1,"loading-container"],[1,"error-panel"],[1,"loading-spinner"],[1,"loading-text"],[1,"terminals-section"],[1,"last-update"],[1,"terminals-list"],[1,"terminal-card",3,"active","idle"],[1,"sessions-section"],[1,"sessions-list"],[1,"session-card"],[1,"terminal-card"],[1,"terminal-header"],[1,"terminal-status"],[1,"terminal-pid"],[1,"terminal-info"],[1,"terminal-cmdline"],[1,"session-header"],[1,"session-project"],[1,"session-state"],[1,"session-info"],[3,"close","projectPid","workspacePath","projectName"]],template:function(n,r){n&1&&(q(0,"div",0)(1,"header",1)(2,"h1"),K(3,"SENDELL CEREBRO"),W(),q(4,"span",2),K(5,"\u25CF LIVE"),W()(),q(6,"nav",3)(7,"button",4),tt("click",function(){return r.setActiveTab("memorias")}),K(8," MEMORIAS "),W(),q(9,"button",4),tt("click",function(){return r.setActiveTab("prompts")}),K(10," PROMPTS "),W(),q(11,"button",4),tt("click",function(){return r.setActiveTab("herramientas")}),K(12," HERRAMIENTAS "),W(),q(13,"button",4),tt("click",function(){return r.setActiveTab("proyectos")}),K(14," PROYECTOS "),W(),q(15,"button",4),tt("click",function(){return r.setActiveTab("claude-terminals")}),K(16," CLAUDE CODE "),W()(),q(17,"main",5),Je(18,H1,18,3,"div",6),Je(19,U1,6,1,"div",6),Je(20,z1,7,1,"div",6),Je(21,eI,26,5,"div",7),Je(22,dI,9,3,"div",6),W()(),Je(23,hI,1,3,"app-terminal",8)),n&2&&(Z(7),ft("active",r.activeTab()==="memorias"),Z(2),ft("active",r.activeTab()==="prompts"),Z(2),ft("active",r.activeTab()==="herramientas"),Z(2),ft("active",r.activeTab()==="proyectos"),Z(2),ft("active",r.activeTab()==="claude-terminals"),Z(3),et(r.activeTab()==="memorias"?18:-1),Z(),et(r.activeTab()==="prompts"?19:-1),Z(),et(r.activeTab()==="herramientas"?20:-1),Z(),et(r.activeTab()==="proyectos"?21:-1),Z(),et(r.activeTab()==="claude-terminals"?22:-1),Z(),et(r.terminalService.currentTerminalPid()?23:-1))},dependencies:[Si,Kv,zv,qv,Hc,$c,Hv,nf,Kc,Jc],styles:[".sendell-container[_ngcontent-%COMP%]{background:#000;color:#fff;font-family:Courier New,monospace;min-height:100vh;overflow-x:hidden}.sendell-header[_ngcontent-%COMP%]{background:#000;padding:1rem 2rem;border-bottom:2px solid #00ff00;box-shadow:0 0 10px #00ff004d;display:flex;justify-content:space-between;align-items:center}.sendell-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#0f0;font-size:1.5rem;margin:0}.sendell-header[_ngcontent-%COMP%]   .live-indicator[_ngcontent-%COMP%]{color:#0ff;font-size:.9rem;animation:_ngcontent-%COMP%_pulse 2s infinite}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.5}}@keyframes _ngcontent-%COMP%_border-pulse-red{0%,to{box-shadow:0 0 20px #f059,0 0 40px #f056,0 0 60px #f053,inset 0 0 20px #ff00551a}50%{box-shadow:0 0 30px #f05c,0 0 60px #f059,0 0 90px #ff00554d,inset 0 0 30px #f053}}@keyframes _ngcontent-%COMP%_border-pulse-cyan{0%,to{box-shadow:0 0 20px #0ff9,0 0 40px #0ff6,0 0 60px #0ff3,inset 0 0 20px #00ffff1a}50%{box-shadow:0 0 30px #0ffc,0 0 60px #0ff9,0 0 90px #00ffff4d,inset 0 0 30px #0ff3}}.sendell-tabs[_ngcontent-%COMP%]{display:flex;gap:.5rem;padding:1rem 2rem;background:#0a0a0a;border-bottom:1px solid #2a2a2a}.sendell-tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#000;color:#0f0;border:1px solid #00ff00;padding:.75rem 1.5rem;font-family:Courier New,monospace;font-size:.9rem;cursor:pointer;transition:all .3s}.sendell-tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#00ff001a;box-shadow:0 0 5px #00ff0080}.sendell-tabs[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background:#0f03;box-shadow:0 0 10px #00ff0080;border-color:#0ff;color:#0ff}.sendell-content[_ngcontent-%COMP%]{padding:2rem}.tab-panel[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#0f0;font-size:1.3rem;margin-bottom:1.5rem;text-transform:uppercase}.cyber-input[_ngcontent-%COMP%], .cyber-select[_ngcontent-%COMP%], .cyber-textarea[_ngcontent-%COMP%]{background:#0a0a0a;border:1px solid #00ff00;color:#fff;padding:.75rem;font-family:Courier New,monospace;font-size:.9rem}.cyber-input[_ngcontent-%COMP%]:focus, .cyber-select[_ngcontent-%COMP%]:focus, .cyber-textarea[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 0 5px #00ff0080}.cyber-input[_ngcontent-%COMP%]{width:100%;max-width:400px}.cyber-select[_ngcontent-%COMP%]{width:150px;margin-left:.5rem}.cyber-textarea[_ngcontent-%COMP%]{width:100%;resize:vertical}.cyber-button[_ngcontent-%COMP%]{background:#000;color:#0f0;border:1px solid #00ff00;padding:.75rem 1.5rem;font-family:Courier New,monospace;cursor:pointer;margin-left:.5rem;transition:all .3s}.cyber-button[_ngcontent-%COMP%]:hover{background:#0f03;box-shadow:0 0 10px #00ff0080}.add-fact-form[_ngcontent-%COMP%]{display:flex;gap:.5rem;margin-bottom:2rem;align-items:center}.facts-list[_ngcontent-%COMP%]{display:grid;gap:1rem}.fact-card[_ngcontent-%COMP%]{background:#0a0a0a;border:1px solid #2a2a2a;border-left:3px solid #00ffff;padding:1rem;display:grid;grid-template-columns:100px 1fr auto;align-items:center;gap:1rem}.fact-card[_ngcontent-%COMP%]   .fact-category[_ngcontent-%COMP%]{color:#0ff;font-weight:700;text-transform:uppercase;font-size:.8rem}.fact-card[_ngcontent-%COMP%]   .fact-text[_ngcontent-%COMP%]{color:#fff}.fact-card[_ngcontent-%COMP%]   .delete-button[_ngcontent-%COMP%]{background:transparent;color:#f05;border:1px solid #ff0055;padding:.5rem 1rem;font-family:Courier New,monospace;cursor:pointer;font-size:.8rem}.fact-card[_ngcontent-%COMP%]   .delete-button[_ngcontent-%COMP%]:hover{background:#f053}.tools-list[_ngcontent-%COMP%]{display:grid;gap:1rem}.tool-card[_ngcontent-%COMP%]{background:#0a0a0a;border:1px solid #2a2a2a;border-left:3px solid #00ff00;padding:1rem}.tool-card[_ngcontent-%COMP%]   .tool-name[_ngcontent-%COMP%]{color:#0f0;font-weight:700;margin-bottom:.5rem}.tool-card[_ngcontent-%COMP%]   .tool-desc[_ngcontent-%COMP%]{color:#888;font-size:.9rem}.proyectos-layout[_ngcontent-%COMP%]   .proyectos-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem}.proyectos-layout[_ngcontent-%COMP%]   .proyectos-header[_ngcontent-%COMP%]   .clock[_ngcontent-%COMP%]{color:#0ff;font-size:1.2rem}.metrics-panel[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:1rem;margin-bottom:2rem}.metric-card[_ngcontent-%COMP%]{background:#0a0a0a;border:2px solid #2a2a2a;padding:1.5rem;text-align:center}.metric-card[_ngcontent-%COMP%]   .metric-label[_ngcontent-%COMP%]{color:#888;font-size:.9rem;margin-bottom:.5rem}.metric-card[_ngcontent-%COMP%]   .metric-value[_ngcontent-%COMP%]{color:#0ff;font-size:2rem;font-weight:700}.projects-list[_ngcontent-%COMP%]{display:grid;gap:1rem}.project-card[_ngcontent-%COMP%]{background:#0a0a0a;border:2px solid #2a2a2a;padding:1.5rem;transition:all .3s;position:relative}.project-card.working[_ngcontent-%COMP%]{border-color:#0f0;box-shadow:0 0 10px #00ff004d}.project-card.ready[_ngcontent-%COMP%]{border-color:#0ff;box-shadow:0 0 10px #00ffff4d}.project-card.offline[_ngcontent-%COMP%]{border-color:#f05;box-shadow:0 0 10px #f053}.project-card.clickable[_ngcontent-%COMP%]{cursor:pointer}.project-card.clickable.offline[_ngcontent-%COMP%]:hover{transform:translateY(-3px);border-color:#f05;box-shadow:0 0 20px #f059,0 0 40px #f056,0 0 60px #f053,inset 0 0 20px #ff00551a;animation:_ngcontent-%COMP%_border-pulse-red 1.5s ease-in-out infinite}.project-card.clickable.ready[_ngcontent-%COMP%]:hover{transform:translateY(-3px);border-color:#0ff;box-shadow:0 0 20px #0ff9,0 0 40px #0ff6,0 0 60px #0ff3,inset 0 0 20px #00ffff1a;animation:_ngcontent-%COMP%_border-pulse-cyan 1.5s ease-in-out infinite}.project-card.loading[_ngcontent-%COMP%]{pointer-events:none;opacity:.7}.project-card[_ngcontent-%COMP%]   .project-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}.project-card[_ngcontent-%COMP%]   .project-header[_ngcontent-%COMP%]   .project-name[_ngcontent-%COMP%]{color:#f05;font-size:1.1rem;font-weight:700}.project-card[_ngcontent-%COMP%]   .project-header[_ngcontent-%COMP%]   .project-name.working-name[_ngcontent-%COMP%]{color:#0f0}.project-card[_ngcontent-%COMP%]   .project-header[_ngcontent-%COMP%]   .project-name.ready-name[_ngcontent-%COMP%]{color:#0ff}.project-card[_ngcontent-%COMP%]   .project-header[_ngcontent-%COMP%]   .project-status[_ngcontent-%COMP%]{color:#f05;font-size:.9rem;display:flex;align-items:center;gap:.5rem}.project-card[_ngcontent-%COMP%]   .project-header[_ngcontent-%COMP%]   .project-status.status-working[_ngcontent-%COMP%]{color:#0f0}.project-card[_ngcontent-%COMP%]   .project-header[_ngcontent-%COMP%]   .project-status.status-ready[_ngcontent-%COMP%]{color:#0ff}.project-card[_ngcontent-%COMP%]   .project-header[_ngcontent-%COMP%]   .project-status.status-offline[_ngcontent-%COMP%]{color:#f05}.project-card[_ngcontent-%COMP%]   .project-header[_ngcontent-%COMP%]   .project-status[_ngcontent-%COMP%]   .claude-indicator[_ngcontent-%COMP%]{background:#00ff001a;color:#0f0;padding:.25rem .5rem;border-radius:3px;font-size:.75rem;border:1px solid #00ff00}.project-card[_ngcontent-%COMP%]   .activity-graph-container[_ngcontent-%COMP%]{width:100%;height:120px;margin-bottom:1rem;background:#0a0a0a;border:1px solid #1a1a1a;border-radius:4px;overflow:hidden}.project-card[_ngcontent-%COMP%]   .project-info[_ngcontent-%COMP%]{color:#888;font-size:.85rem;display:grid;gap:.25rem}.project-card[_ngcontent-%COMP%]   .project-info[_ngcontent-%COMP%]   .click-hint[_ngcontent-%COMP%]{color:#f05;font-style:italic;margin-top:.5rem;animation:_ngcontent-%COMP%_pulse 2s infinite}.empty-state[_ngcontent-%COMP%]{text-align:center;color:#888;padding:3rem;font-size:1.1rem}.loading-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#000000d9;display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:10;border-radius:4px}.loading-spinner-project[_ngcontent-%COMP%]{width:60px;height:60px;border:5px solid rgba(255,0,85,.2);border-top:5px solid #ff0055;border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite;margin-bottom:1rem}.loading-text-project[_ngcontent-%COMP%]{color:#f05;font-size:1rem;text-transform:uppercase;animation:_ngcontent-%COMP%_pulse 1.5s ease-in-out infinite}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:3rem;gap:1rem}.loading-container[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]{width:50px;height:50px;border:4px solid rgba(0,255,0,.1);border-top:4px solid #00ff00;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}.loading-container[_ngcontent-%COMP%]   .loading-text[_ngcontent-%COMP%]{color:#0ff;text-align:center;font-size:.9rem;line-height:1.6}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.error-panel[_ngcontent-%COMP%]{background:#ff00551a;border:1px solid #ff0055;border-radius:4px;padding:1rem;margin-bottom:1rem;display:flex;justify-content:space-between;align-items:center}.error-panel[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#f05}.terminals-section[_ngcontent-%COMP%], .sessions-section[_ngcontent-%COMP%]{margin-bottom:2rem}.terminals-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .sessions-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#0ff;font-size:1.2rem;margin-bottom:1rem;border-bottom:1px solid rgba(0,255,255,.3);padding-bottom:.5rem}.terminals-section[_ngcontent-%COMP%]   .last-update[_ngcontent-%COMP%], .sessions-section[_ngcontent-%COMP%]   .last-update[_ngcontent-%COMP%]{color:#888;font-size:.8rem;margin-bottom:1rem}.terminals-list[_ngcontent-%COMP%], .sessions-list[_ngcontent-%COMP%]{display:grid;gap:1rem}.terminal-card[_ngcontent-%COMP%]{background:#0a0a0a;border:1px solid #888888;border-radius:4px;padding:1rem;transition:all .3s ease}.terminal-card.active[_ngcontent-%COMP%]{border-color:#0f0;box-shadow:0 0 10px #00ff004d}.terminal-card.idle[_ngcontent-%COMP%]{border-color:#0ff;box-shadow:0 0 10px #0ff3}.terminal-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #0f06}.terminal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem;padding-bottom:.5rem;border-bottom:1px solid rgba(255,255,255,.1)}.terminal-status[_ngcontent-%COMP%]{font-weight:700;padding:.25rem .75rem;border-radius:3px;font-size:.85rem}.terminal-status.status-running[_ngcontent-%COMP%]{background:#0f03;color:#0f0;border:1px solid #00ff00}.terminal-status.status-idle[_ngcontent-%COMP%]{background:#0ff3;color:#0ff;border:1px solid #00ffff}.terminal-pid[_ngcontent-%COMP%]{color:#888;font-size:.85rem;font-family:Courier New,monospace}.terminal-info[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:.75rem;margin-bottom:1rem}.terminal-info[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{color:#fff;font-size:.85rem}.terminal-info[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#0ff;margin-right:.5rem}.terminal-cmdline[_ngcontent-%COMP%]{background:#00000080;padding:.75rem;border-radius:3px;border:1px solid rgba(255,255,255,.1)}.terminal-cmdline[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#0ff;display:block;margin-bottom:.5rem}.terminal-cmdline[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{color:#888;font-size:.75rem;word-break:break-all;font-family:Courier New,monospace}.session-card[_ngcontent-%COMP%]{background:#0a0a0a;border:1px solid #888888;border-radius:4px;padding:1rem;transition:all .3s ease}.session-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);border-color:#0ff;box-shadow:0 4px 12px #00ffff4d}.session-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem;padding-bottom:.5rem;border-bottom:1px solid rgba(255,255,255,.1)}.session-project[_ngcontent-%COMP%]{color:#0f0;font-weight:700;font-size:1rem}.session-state[_ngcontent-%COMP%]{font-weight:700;padding:.25rem .75rem;border-radius:3px;font-size:.85rem}.session-state.state-idle[_ngcontent-%COMP%]{background:#0ff3;color:#0ff;border:1px solid #00ffff}.session-state.state-running[_ngcontent-%COMP%]{background:#0f03;color:#0f0;border:1px solid #00ff00}.session-state.state-error[_ngcontent-%COMP%]{background:#f053;color:#f05;border:1px solid #ff0055}.session-info[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:.75rem}.session-info[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{color:#fff;font-size:.85rem}.session-info[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#0ff;margin-right:.5rem}"]})};uh(el,Ev).catch(e=>console.error(e));
